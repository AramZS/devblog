<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Feed for Fight With Tools - Aram's Dev Blog</title>
	<atom:link href="https://fightwithtools.dev/rss/" rel="self" type="application/rss+xml" />
	<link>https://fightwithtools.dev/</link>
	<description>Notes on various projects</description>
	<lastBuildDate>Mon, 10 Jan 2022 00:31:41 GMT</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://11ty.dev/</generator>
	<managingEditor>
		aramdevblog@aramzs.me (Aram Zucker-Scharff)
	</managingEditor>
	
	<item>
		<title>Day 3: Wrestling with OEmbed</title>
		<link>https://fightwithtools.dev/posts/projects/context-pages/day-3-wrestling-oembed-link-metadata/?source=rss</link>
		<pubDate>Mon, 10 Jan 2022 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/context-pages/day-3-wrestling-oembed-link-metadata/</guid>
		<description>I want to share lists of links, but make them readable and archived</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Take a link and turn it into an oEmbed/Open Graph style share card</li>
<li>Take a link and archive it in the most reliable way</li>
<li>When the link is a tweet, display the tweet but also the whole tweet thread.</li>
<li>When the link is a tweet, archive the tweets, and display them if the live ones are not available.</li>
<li>Capture any embedded retweets in the thread. Capture their thread if one exists</li>
<li>Capture any links in the Tweet</li>
<li>Create the process as an abstract function that returns the data in a savable way</li>
</ol>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Archive links on <a href="http://archive.org/" target="_blank">Archive.org</a> and save the resulting archival links</li>
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Create link IDs that can be used to cache related content</li>
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Integrate it into the site to be able to make context pages here.</li>
</ul>
<h2 id="day-3" tabindex="-1">Day 3</h2>
<p>Ok, yesterday I was trying to knock down the oEmbed process from Facebook and getting nothing. Let's take this back to base principles and see if I can make a request outside of Node that gets what I need</p>
<p>Ok, it looks like I don't have the right permissions for my Facebook app? Sort of taking the o out of oEmbed if I need an app, permissions and a key isn't it Facebook?</p>
<p>Ok, to get the oEmbed process working I need to have my App verified on Facebook... which means uploading a photo of my government provided ID? Nope, fk that. Ok, just no Facebook oembeds in this process then.</p>
<p>Ok, let's grab the page data that tells us about a post now. To do that, I'm going to use a classic package I've done some work in before: JSDOM.</p>
<p>JSDOM can do its own requests, but I would prefer to handle that as a separate step.</p>
<p>First I'm going to build a basic object that can contain data about the page that should be useful. I want to predefine a few namespaces I would use. Let's pull <a href="https://aramzs.github.io/jekyll/social-media/2015/11/11/be-social-with-jekyll.html" target="_blank">the standard stuff from the meta tags</a> and <a href="https://aramzs.github.io/jekyll/schema-dot-org/2018/04/27/how-to-make-your-jekyll-site-structured.html" target="_blank">JSON-LD</a>. I can also use <a href="https://en.wikipedia.org/wiki/Dublin_Core#Levels_of_the_standard" target="_blank">Dublin Core potentially</a>. I <a href="https://microformats.org/wiki/h-card" target="_blank">can also use h-card</a> <a href="https://indieweb.org/h-card" target="_blank">perhaps</a> or <a href="https://indieweb.org/authorship" target="_blank">h-entry</a>? We can try that out at some later point.</p>
<p>Ok, so once I have the DOM set up how can I grab the data I need?</p>
<p>On the DOM object I can execute <code>window.document.getElementsByTagName(&quot;meta&quot;);</code> and get a list back. Interestingly tags using the <code>name</code> property are accessible on the resulting object by name. For OpenGraph we can use <a href="https://stackoverflow.com/questions/8714090/queryselector-wildcard-element-match" target="_blank">a wildcard search</a> of <code>querySelectorAll</code>.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/context-pages/day-3-wrestling-oembed-link-metadata/#code-skip-day-3-wrestling-oembed-link-metadata-5" id="skip-to-code-skip-day-3-wrestling-oembed-link-metadata-5" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> openGraphNodes <span class="token operator">=</span> window<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><br />	<span class="token string">"meta[property^='og:']"</span><br /><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-day-3-wrestling-oembed-link-metadata-5">Ok, so I need to set up some tests to make sure it is working as expected.</p>
<p>Can I use <code>to.equal</code> in mocha?</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/context-pages/day-3-wrestling-oembed-link-metadata/#code-skip-day-3-wrestling-oembed-link-metadata-4" id="skip-to-code-skip-day-3-wrestling-oembed-link-metadata-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">result<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>keyvalues<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br />	<span class="token string">"jekyll"</span><span class="token punctuation">,</span><br />	<span class="token string">"social-media"</span><span class="token punctuation">,</span><br /><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-day-3-wrestling-oembed-link-metadata-4">Apparently not.</p>
<p>Ok, did some searching around and <a href="https://stackoverflow.com/questions/41726208/chai-testing-for-values-in-array-of-objects" target="_blank">it looks like the right way to handle this</a>:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/context-pages/day-3-wrestling-oembed-link-metadata/#code-skip-day-3-wrestling-oembed-link-metadata-3" id="skip-to-code-skip-day-3-wrestling-oembed-link-metadata-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>keyvalues<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">members</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br />	<span class="token string">"jekyll"</span><span class="token punctuation">,</span><br />	<span class="token string">"social-media"</span><span class="token punctuation">,</span><br /><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre>
<p id="code-skip-day-3-wrestling-oembed-link-metadata-3">Ok, things are working. But I think I can make this better code by simplifying and abstracting the functions around the <code>querySelector</code>. There OpenGraph and Twitter based meta values are all based on RDF and we can analyze them in a similar way.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/context-pages/day-3-wrestling-oembed-link-metadata/#code-skip-day-3-wrestling-oembed-link-metadata-2" id="skip-to-code-skip-day-3-wrestling-oembed-link-metadata-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">pullMetadataFromRDFProperty</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">documentObj<span class="token punctuation">,</span> topNode</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">const</span> graphNodes <span class="token operator">=</span> documentObj<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><br />		<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">meta[property^='</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>topNode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:']</span><span class="token template-punctuation string">`</span></span><br />	<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">const</span> openGraphObject <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>graphNodes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> curr</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />		<span class="token keyword">const</span> keyValue <span class="token operator">=</span> curr<span class="token punctuation">.</span>attributes<br />			<span class="token punctuation">.</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><br />			<span class="token punctuation">.</span>nodeValue<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>topNode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token keyword">if</span> <span class="token punctuation">(</span>prev<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>keyValue<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />			<span class="token keyword">const</span> lastValue <span class="token operator">=</span> prev<span class="token punctuation">[</span>keyValue<span class="token punctuation">]</span><span class="token punctuation">;</span><br />			<span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>lastValue<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />				prev<span class="token punctuation">[</span>keyValue<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>curr<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />				prev<span class="token punctuation">[</span>keyValue<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>lastValue<span class="token punctuation">,</span> curr<span class="token punctuation">.</span>content<span class="token punctuation">]</span><span class="token punctuation">;</span><br />			<span class="token punctuation">}</span><br />		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />			prev<span class="token punctuation">[</span>keyValue<span class="token punctuation">]</span> <span class="token operator">=</span> curr<span class="token punctuation">.</span>content<span class="token punctuation">;</span><br />		<span class="token punctuation">}</span><br />		<span class="token keyword">return</span> prev<span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token comment">// console.log("openGraphObject", openGraphObject);</span><br />	<span class="token keyword">return</span> openGraphObject<span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-day-3-wrestling-oembed-link-metadata-2"><a target="_blank" href="https://github.com/AramZS/contexter/commit/86f38d2528212411a27644c1e0ff4423d0c846fd" class="git-commit-link"><code>git commit -am &quot;Setting up scrape of OpenGraph data and supporting unit tests&quot;</code></a></p>
<p>Now I can use this function to capture the Twitter metadata as well!</p>
<p><a target="_blank" href="https://github.com/AramZS/contexter/commit/12b3775646157162049a771a46a8843169d909bc" class="git-commit-link"><code>git commit -am &quot;Setting up scrape of twitter data&quot;</code></a></p>
<p>Oh wait, I need to account for the fact that some tags are using <code>name</code> and some are using <code>property</code>.</p>
<p><a target="_blank" href="https://github.com/AramZS/contexter/commit/b5ed2079a6b000bb32067748735824bf6a60571a" class="git-commit-link"><code>git commit -am &quot;Fix pullMetadataFromRDFProperty to have a prop type&quot;</code></a></p>
<p>A few more modifications and I can get it to capture DublinCore if available as well.</p>
<p>I can even build some tests to prove some negative cases. That should be useful for more comprehensive testing.</p>
<p>Basically this should allow me to compose a bunch of different tests with different HTML.</p>
<p><a target="_blank" href="https://github.com/AramZS/contexter/commit/42fb1e5e426286c8536d5f285042074de4f1e141" class="git-commit-link"><code>git commit -am &quot;More extensive test coverage&quot;</code></a></p>
<p>Looking good. Now I want to test it end to end.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/context-pages/day-3-wrestling-oembed-link-metadata/#code-skip-day-3-wrestling-oembed-link-metadata-1" id="skip-to-code-skip-day-3-wrestling-oembed-link-metadata-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">"should create link objects from a domain requests"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">timeout</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"should resolve a basic URL"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />			<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> linkModule<span class="token punctuation">.</span><span class="token function">getLinkData</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br />				sanitizedLink<span class="token operator">:</span><br />					<span class="token string">"http://aramzs.github.io/jekyll/social-media/2015/11/11/be-social-with-jekyll.html"</span><span class="token punctuation">,</span><br />				link<span class="token operator">:</span> <span class="token string">"http://aramzs.github.io/jekyll/social-media/2015/11/11/be-social-with-jekyll.html"</span><span class="token punctuation">,</span><br />			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>status<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>title<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><br />				<span class="token string">"How to make your Jekyll site show up on social"</span><br />			<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>author<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">"Aram Zucker-Scharff"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>description<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><br />				<span class="token string">"Here's how to make Jekyll posts easier for others to see and share on social networks."</span><br />			<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>canonical<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><br />				<span class="token string">"http://aramzs.github.io/jekyll/social-media/2015/11/11/be-social-with-jekyll.html"</span><br />			<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			<span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>keywords<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">members</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br />				<span class="token string">"jekyll"</span><span class="token punctuation">,</span><br />				<span class="token string">"social-media"</span><span class="token punctuation">,</span><br />			<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>opengraph<span class="token punctuation">.</span>title<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><br />				<span class="token string">"How to make your Jekyll site show up on social"</span><br />			<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>opengraph<span class="token punctuation">.</span>locale<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">"en_US"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>opengraph<span class="token punctuation">.</span>description<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><br />				<span class="token string">"Here's how to make Jekyll posts easier for others to see and share on social networks."</span><br />			<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>opengraph<span class="token punctuation">.</span>url<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><br />				<span class="token string">"http://aramzs.github.io/jekyll/social-media/2015/11/11/be-social-with-jekyll.html"</span><br />			<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>twitter<span class="token punctuation">.</span>card<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">"summary_large_image"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>twitter<span class="token punctuation">.</span>creator<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">"@chronotope"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>twitter<span class="token punctuation">.</span>title<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><br />				<span class="token string">"How to make your Jekyll site show up on social"</span><br />			<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>twitter<span class="token punctuation">.</span>image<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><br />				<span class="token string">"https://raw.githubusercontent.com/AramZS/aramzs.github.io/master/_includes/tumblr_nwncf1T2ht1rl195mo1_1280.jpg"</span><br />			<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>dublinCore<span class="token punctuation">.</span>Format<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">"video/mpeg; 10 minutes"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>dublinCore<span class="token punctuation">.</span>Language<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">"en"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>dublinCore<span class="token punctuation">.</span>Publisher<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">"publisher-name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>dublinCore<span class="token punctuation">.</span>Title<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">"HYP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>jsonLd<span class="token punctuation">[</span><span class="token string">"@type"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">"BlogPosting"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>jsonLd<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><br />				<span class="token string">"How to make your Jekyll site show up on social"</span><br />			<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>jsonLd<span class="token punctuation">.</span>description<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><br />				<span class="token string">"Here's how to make Jekyll posts easier for others to see and share on social networks."</span><br />			<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			<span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>jsonLd<span class="token punctuation">.</span>image<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>have<span class="token punctuation">.</span><span class="token function">members</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br />				<span class="token string">"https://raw.githubusercontent.com/AramZS/aramzs.github.io/master/_includes/tumblr_nwncf1T2ht1rl195mo1_1280.jpg"</span><span class="token punctuation">,</span><br />			<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-day-3-wrestling-oembed-link-metadata-1">Oh, I forgot, I need to await <code>response.text()</code>!</p>
<p>Ok, a few more tweaks and a reminder that I don't have Dublin Core on my actual site and it should be good to go.</p>
<p><a target="_blank" href="https://github.com/AramZS/contexter/commit/152cecd946499b8375e00e37ab09fcfffb0de1e1" class="git-commit-link"><code>git commit -am &quot;End to end unit test for building a link object&quot; </code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Day 2: Building a tool to generate context pages</title>
		<link>https://fightwithtools.dev/posts/projects/context-pages/day-2/?source=rss</link>
		<pubDate>Sun, 09 Jan 2022 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/context-pages/day-2/</guid>
		<description>I want to share lists of links, but make them readable and archived</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Take a link and turn it into an oEmbed/Open Graph style share card</li>
<li>Take a link and archive it in the most reliable way</li>
<li>When the link is a tweet, display the tweet but also the whole tweet thread.</li>
<li>When the link is a tweet, archive the tweets, and display them if the live ones are not available.</li>
<li>Capture any embedded retweets in the thread. Capture their thread if one exists</li>
<li>Capture any links in the Tweet</li>
<li>Create the process as an abstract function that returns the data in a savable way</li>
</ol>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Archive links on <a href="http://archive.org/" target="_blank">Archive.org</a> and save the resulting archival links</li>
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Create link IDs that can be used to cache related content</li>
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Integrate it into the site to be able to make context pages here.</li>
</ul>
<h2 id="day-2" tabindex="-1">Day 2</h2>
<p>Ok, let's set up the request process. I want to retrieve the page so let's move forward on that as the next step.</p>
<p>Fetch is increasingly the way to handle HTTP requests in the browser, so it would be a good library to play with. Luckily there is a <a href="https://www.npmjs.com/package/node-fetch" target="_blank">Node Fetch library</a> I can leverage.</p>
<p>If I want to use fetch v3 it looks like this is how I have to go</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/context-pages/day-2/#code-skip-day-2-5" id="skip-to-code-skip-day-2-5" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">fetch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=></span><br />	<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"node-fetch"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> fetch <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>`</code></pre>
<p id="code-skip-day-2-5">The other thing I know from working on PressForward is that requests will often get blocked if they look too much like a bot, so it is helpful to purposefully identify yourself as a trusted bot. There's <a href="https://user-agents.net/lookup" target="_blank">a list of UAs that I could search</a>, but I know from experiance that the most successful User Agent is Facebook's, especially when I'm trying to retrieve page metadata. So let's start there.</p>
<p>I also want to check for errors.</p>
<p>Let's use the advised pattern on the module page to start with. The logic here is that a response can still be &quot;successful&quot; even if it comes back with an error code. Their pattern should be able to catch that.</p>
<p>Ok, here's my code now:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/context-pages/day-2/#code-skip-day-2-4" id="skip-to-code-skip-day-2-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><br /><span class="token keyword">const</span> <span class="token function-variable function">fetch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=></span><br />	<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">"node-fetch"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> fetch <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">const</span> ua <span class="token operator">=</span><br />	<span class="token string">"facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)"</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">const</span> <span class="token function-variable function">getRequestHeaders</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">return</span> <span class="token punctuation">{</span><br />		cookie<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span><br />		<span class="token string">"Accept-Language"</span><span class="token operator">:</span> <span class="token string">"en-US,en;q=0.8"</span><span class="token punctuation">,</span><br />		<span class="token string">"User-Agent"</span><span class="token operator">:</span> ua<span class="token punctuation">,</span><br />	<span class="token punctuation">}</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">class</span> <span class="token class-name">HTTPResponseError</span> <span class="token keyword">extends</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span><br />	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">response<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		<span class="token keyword">super</span><span class="token punctuation">(</span><br />			<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">HTTP Error Response: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>response<span class="token punctuation">.</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>response<span class="token punctuation">.</span>statusText<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><br />			<span class="token operator">...</span>args<br />		<span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token keyword">this</span><span class="token punctuation">.</span>response <span class="token operator">=</span> response<span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><br /><span class="token punctuation">}</span><br /><br /><span class="token keyword">const</span> <span class="token function-variable function">checkStatus</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		<span class="token comment">// response.status >= 200 &amp;&amp; response.status &lt; 300</span><br />		<span class="token keyword">return</span> response<span class="token punctuation">;</span><br />	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">HTTPResponseError</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">const</span> <span class="token function-variable function">fetchUrl</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">try</span> <span class="token punctuation">{</span><br />		<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span><br />			method<span class="token operator">:</span> <span class="token string">"get"</span><span class="token punctuation">,</span><br />			header<span class="token operator">:</span> <span class="token function">getRequestHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br />		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"Fetch Error"</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><br />	<span class="token function">checkStatus</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-day-2-4">Let's add this to the module export and see if some basic requests work. Let's make a basic request that we know will respond to the GitHub API. Getting the head of this project's main commit tree should work just fine. Let's request <code>https://api.github.com/repos/AramZS/devblog/git/refs/heads/main</code>.</p>
<p>Ok, so what does a fetch returned object look like?</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/context-pages/day-2/#code-skip-day-2-3" id="skip-to-code-skip-day-2-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">{</span> size<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />  type<span class="token operator">:</span> <span class="token string">'default'</span><span class="token punctuation">,</span><br />  url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/git/refs/heads/main'</span><span class="token punctuation">,</span><br />  status<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span><br />  ok<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />  redirected<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />  statusText<span class="token operator">:</span> <span class="token string">'OK'</span><span class="token punctuation">,</span><br />  headers<span class="token operator">:</span><br />   <span class="token punctuation">{</span> get<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> get<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     forEach<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> forEach<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     values<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> values<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     entries<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> entries<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     append<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     <span class="token keyword">delete</span><span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     getAll<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     has<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     set<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     sort<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> sort<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     keys<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />  clone<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> clone<span class="token punctuation">]</span><span class="token punctuation">,</span><br />  body<span class="token operator">:</span><br />   <span class="token punctuation">{</span> _writeState<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">,</span><br />     _readableState<span class="token operator">:</span><br />      <span class="token punctuation">{</span> objectMode<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        highWaterMark<span class="token operator">:</span> <span class="token number">16384</span><span class="token punctuation">,</span><br />        buffer<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><span class="token punctuation">,</span><br />        length<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />        pipes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />        flowing<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />        ended<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        endEmitted<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        reading<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        constructed<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />        sync<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        needReadable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        emittedReadable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        readableListening<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        resumeScheduled<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        errorEmitted<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        emitClose<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />        autoDestroy<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />        destroyed<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        errored<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />        closed<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        closeEmitted<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        defaultEncoding<span class="token operator">:</span> <span class="token string">'utf8'</span><span class="token punctuation">,</span><br />        awaitDrainWriters<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />        multiAwaitDrain<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        readingMore<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        dataEmitted<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        decoder<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />        encoding<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />     _events<span class="token operator">:</span><br />      <span class="token punctuation">{</span> prefinish<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> prefinish<span class="token punctuation">]</span><span class="token punctuation">,</span><br />        close<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><span class="token punctuation">,</span><br />        end<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> onend<span class="token punctuation">]</span><span class="token punctuation">,</span><br />        finish<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><span class="token punctuation">,</span><br />        error<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><span class="token punctuation">,</span><br />        unpipe<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> onunpipe<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />     _eventsCount<span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span><br />     _maxListeners<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span><br />     _writableState<span class="token operator">:</span><br />      <span class="token punctuation">{</span> objectMode<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        highWaterMark<span class="token operator">:</span> <span class="token number">16384</span><span class="token punctuation">,</span><br />        finalCalled<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        needDrain<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        ending<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        ended<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        finished<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        destroyed<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        decodeStrings<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />        defaultEncoding<span class="token operator">:</span> <span class="token string">'utf8'</span><span class="token punctuation">,</span><br />        length<span class="token operator">:</span> <span class="token number">61</span><span class="token punctuation">,</span><br />        writing<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />        corked<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />        sync<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        bufferProcessing<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        onwrite<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> bound onwrite<span class="token punctuation">]</span><span class="token punctuation">,</span><br />        writecb<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> nop<span class="token punctuation">]</span><span class="token punctuation">,</span><br />        writelen<span class="token operator">:</span> <span class="token number">61</span><span class="token punctuation">,</span><br />        afterWriteTickInfo<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />        buffered<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />        bufferedIndex<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />        allBuffers<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />        allNoop<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />        pendingcb<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><br />        constructed<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />        prefinished<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        errorEmitted<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        emitClose<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />        autoDestroy<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />        errored<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />        closed<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        closeEmitted<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />        getBuffer<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> getBuffer<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />     allowHalfOpen<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />     bytesWritten<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />     _handle<span class="token operator">:</span><br />      <span class="token punctuation">{</span> onerror<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> zlibOnError<span class="token punctuation">]</span><span class="token punctuation">,</span><br />        buffer<span class="token operator">:</span> <span class="token operator">&lt;</span>Buffer <span class="token number">1</span>f <span class="token number">8</span>b <span class="token number">08</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">03</span> <span class="token number">9</span>d <span class="token number">8</span>e <span class="token number">3</span>f <span class="token number">6</span>b c3 <span class="token number">30</span> <span class="token number">10</span> <span class="token number">47</span> bf <span class="token number">8</span>b e6 <span class="token number">10</span> d9 <span class="token number">8</span>e <span class="token number">89</span> <span class="token number">6</span>b <span class="token number">43</span> <span class="token number">86</span> <span class="token number">40</span> e9 <span class="token number">9</span>f <span class="token number">80</span> <span class="token number">92</span> a1 <span class="token number">34</span> <span class="token number">05</span> <span class="token number">2</span>f e5 <span class="token number">24</span> <span class="token number">9</span>d <span class="token number">2</span>d <span class="token number">15</span> cb <span class="token number">12</span> <span class="token number">96</span> <span class="token number">62</span> a8 <span class="token number">43</span> be <span class="token number">7</span>b <span class="token operator">...</span> <span class="token number">11</span> more bytes<span class="token operator">></span><span class="token punctuation">,</span><br />        cb<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />        availOutBefore<span class="token operator">:</span> <span class="token number">16384</span><span class="token punctuation">,</span><br />        availInBefore<span class="token operator">:</span> <span class="token number">61</span><span class="token punctuation">,</span><br />        inOff<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />        flushFlag<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span><br />        write<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> write<span class="token punctuation">]</span><span class="token punctuation">,</span><br />        writeSync<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> writeSync<span class="token punctuation">]</span><span class="token punctuation">,</span><br />        close<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> close<span class="token punctuation">]</span><span class="token punctuation">,</span><br />        init<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> init<span class="token punctuation">]</span><span class="token punctuation">,</span><br />        params<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> params<span class="token punctuation">]</span><span class="token punctuation">,</span><br />        reset<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> reset<span class="token punctuation">]</span><span class="token punctuation">,</span><br />        getAsyncId<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> getAsyncId<span class="token punctuation">]</span><span class="token punctuation">,</span><br />        asyncReset<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> asyncReset<span class="token punctuation">]</span><span class="token punctuation">,</span><br />        getProviderType<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> getProviderType<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />     _outBuffer<span class="token operator">:</span> <span class="token operator">&lt;</span>Buffer <span class="token number">7</span>b <span class="token number">55</span> <span class="token number">55</span> <span class="token number">55</span> <span class="token number">55</span> <span class="token number">55</span> <span class="token number">55</span> <span class="token number">55</span> <span class="token number">55</span> <span class="token number">55</span> <span class="token number">55</span> <span class="token number">55</span> <span class="token number">55</span> <span class="token number">55</span> <span class="token number">55</span> <span class="token number">55</span> <span class="token number">55</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> c3 <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> e0 bd <span class="token number">80</span> f2 e8 <span class="token number">7</span>f <span class="token number">00</span> <span class="token number">00</span> <span class="token number">20</span> b8 <span class="token number">80</span> f2 e8 <span class="token number">7</span>f <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token operator">...</span> <span class="token number">16334</span> more bytes<span class="token operator">></span><span class="token punctuation">,</span><br />     _outOffset<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />     _chunkSize<span class="token operator">:</span> <span class="token number">16384</span><span class="token punctuation">,</span><br />     _defaultFlushFlag<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span><br />     _finishFlushFlag<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span><br />     _defaultFullFlushFlag<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span><br />     _info<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span><br />     _maxOutputLength<span class="token operator">:</span> <span class="token number">4294967296</span><span class="token punctuation">,</span><br />     _level<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><br />     _strategy<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />     params<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> params<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     _closed<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />     bytesRead<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />     reset<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     _flush<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     _final<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     flush<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     close<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     _destroy<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     _transform<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     _processChunk<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     _write<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     _read<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     write<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     cork<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     uncork<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     setDefaultEncoding<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> setDefaultEncoding<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     _writev<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />     end<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     destroy<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> destroy<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     _undestroy<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> undestroy<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     push<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     unshift<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     isPaused<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     setEncoding<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     read<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     pipe<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     unpipe<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     on<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     addListener<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     removeListener<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     off<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     removeAllListeners<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     resume<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     pause<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     wrap<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     iterator<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     setMaxListeners<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> setMaxListeners<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     getMaxListeners<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> getMaxListeners<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     emit<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> emit<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     prependListener<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> prependListener<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     once<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> once<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     prependOnceListener<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> prependOnceListener<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     listeners<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> listeners<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     rawListeners<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> rawListeners<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     listenerCount<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> listenerCount<span class="token punctuation">]</span><span class="token punctuation">,</span><br />     eventNames<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> eventNames<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />  bodyUsed<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />  arrayBuffer<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> arrayBuffer<span class="token punctuation">]</span><span class="token punctuation">,</span><br />  blob<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> blob<span class="token punctuation">]</span><span class="token punctuation">,</span><br />  json<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> json<span class="token punctuation">]</span><span class="token punctuation">,</span><br />  text<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> text<span class="token punctuation">]</span> <span class="token punctuation">}</span></code></pre>
<p id="code-skip-day-2-3">Ok, this is pretty standard, we can get the body as JSON or as Text by using awaited functions. So I can check for a string that I expect inside that text and that will be there no matter when I make the HTTP request.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/context-pages/day-2/#code-skip-day-2-2" id="skip-to-code-skip-day-2-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">"handle basic requests"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">timeout</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"should resolve a basic URL"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />			<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">linkModule</span><span class="token punctuation">(</span><br />				<span class="token string">"https://api.github.com/repos/AramZS/devblog/git/refs/heads/main"</span><br />			<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			result<span class="token punctuation">.</span>status<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			<span class="token keyword">const</span> textResponse <span class="token operator">=</span> <span class="token keyword">await</span> result<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>textResponse<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			textResponse<br />				<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><br />					<span class="token string">'"url":"https://api.github.com/repos/AramZS/devblog/git/refs/heads/main"'</span><br />				<span class="token punctuation">)</span><br />				<span class="token punctuation">.</span>should<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-day-2-2">That works! This is a good test.</p>
<p>Ok, I want to look up how to create oEmbeds (where they're available). I've done a lot with scraping pages but I've never done oEmbed. How does it work? Let's look around.</p>
<p>It looks like the standard is described in a pretty basic way <a href="https://oembed.com/" target="_blank">here</a>. It looks like <a href="https://github.com/WordPress/wordpress-develop/blob/5.8.1/src/wp-includes/embed.php#L25-L28" target="_blank">the relevant code for WordPress is over here</a>. There are two popular options <a href="https://www.npmjs.com/package/oembed" target="_blank">oembed</a> and <a href="https://www.npmjs.com/package/oembed-parser" target="_blank">oembed-parser</a>.</p>
<p>This is interesting. I'd always assumed oEmbeds were based off HEAD data, but it looks like sites declare an endpoint from which to retrieve them?</p>
<p><code>oembed-parser</code> looks up to date and well maintained. I think I'll try pulling that in.</p>
<p>It looks like, should any of the links be Facebook, I'll need a Facebook API key. I want to design this to be extended to other projects, so let's set up the function that way.</p>
<p>And Now we have a pretty basic oEmbed functionality. Let's see what I get as a test result.</p>
<p>Ok, first step is to log the result. Here's what I get</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/context-pages/day-2/#code-skip-day-2-1" id="skip-to-code-skip-day-2-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">{</span><br />  type<span class="token operator">:</span> <span class="token string">'photo'</span><span class="token punctuation">,</span><br />  flickr_type<span class="token operator">:</span> <span class="token string">'photo'</span><span class="token punctuation">,</span><br />  title<span class="token operator">:</span> <span class="token string">'upload'</span><span class="token punctuation">,</span><br />  author_name<span class="token operator">:</span> <span class="token string">'AramZS'</span><span class="token punctuation">,</span><br />  author_url<span class="token operator">:</span> <span class="token string">'https://www.flickr.com/photos/aramzs/'</span><span class="token punctuation">,</span><br />  width<span class="token operator">:</span> <span class="token number">640</span><span class="token punctuation">,</span><br />  height<span class="token operator">:</span> <span class="token number">640</span><span class="token punctuation">,</span><br />  url<span class="token operator">:</span> <span class="token string">'https://live.staticflickr.com/2941/33763840540_481ce97db2_z.jpg'</span><span class="token punctuation">,</span><br />  web_page<span class="token operator">:</span> <span class="token string">'https://www.flickr.com/photos/aramzs/33763840540/'</span><span class="token punctuation">,</span><br />  thumbnail_url<span class="token operator">:</span> <span class="token string">'https://live.staticflickr.com/2941/33763840540_481ce97db2_q.jpg'</span><span class="token punctuation">,</span><br />  thumbnail_width<span class="token operator">:</span> <span class="token number">150</span><span class="token punctuation">,</span><br />  thumbnail_height<span class="token operator">:</span> <span class="token number">150</span><span class="token punctuation">,</span><br />  web_page_short_url<span class="token operator">:</span> <span class="token string">'https://flic.kr/p/TrAvtJ'</span><span class="token punctuation">,</span><br />  license<span class="token operator">:</span> <span class="token string">'Attribution License'</span><span class="token punctuation">,</span><br />  license_url<span class="token operator">:</span> <span class="token string">'https://creativecommons.org/licenses/by/2.0/'</span><span class="token punctuation">,</span><br />  license_id<span class="token operator">:</span> <span class="token string">'4'</span><span class="token punctuation">,</span><br />  html<span class="token operator">:</span> <span class="token string">'&lt;a data-flickr-embed="true" href="https://www.flickr.com/photos/aramzs/33763840540/" title="upload by AramZS, on Flickr">&lt;img src="https://live.staticflickr.com/2941/33763840540_481ce97db2_z.jpg" width="640" height="640" alt="upload">&lt;/a>&lt;script async src="https://embedr.flickr.com/assets/client-code.js" charset="utf-8">&lt;/script>'</span><span class="token punctuation">,</span><br />  version<span class="token operator">:</span> <span class="token string">'1.0'</span><span class="token punctuation">,</span><br />  cache_age<span class="token operator">:</span> <span class="token number">3600</span><span class="token punctuation">,</span><br />  provider_name<span class="token operator">:</span> <span class="token string">'Flickr'</span><span class="token punctuation">,</span><br />  provider_url<span class="token operator">:</span> <span class="token string">'https://www.flickr.com/'</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-day-2-1">Ok, I can test for that. I should really modal the response instead of making an actual HTTP request, but for now this is a good place to be. Last thing I want to test is <a href="https://developers.facebook.com/docs/features-reference/oembed-read" target="_blank">if it can make a request to Facebook</a>.</p>
<p>Hmm, trying some URLs and all I'm getting is <code>nulls</code>. That's annoying.</p>
<p>Ok, well, I'm hungry for dinner, so let's stop here.</p>
<p><a target="_blank" href="https://github.com/AramZS/contexter/commit/c9f9149e61ecf9d17b836e81b5b7040a8804c43c" class="git-commit-link"><code>git commit -am &quot;Getting the Link Request modules requesting and testing oembed&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Day 1: Building a tool to generate context pages</title>
		<link>https://fightwithtools.dev/posts/projects/context-pages/day-1/?source=rss</link>
		<pubDate>Sun, 02 Jan 2022 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/context-pages/day-1/</guid>
		<description>I want to share lists of links, but make them readable and archived</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Take a link and turn it into an oEmbed/Open Graph style share card</li>
<li>Take a link and archive it in the most reliable way</li>
<li>When the link is a tweet, display the tweet but also the whole tweet thread.</li>
<li>When the link is a tweet, archive the tweets, and display them if the live ones are not available.</li>
<li>Capture any embedded retweets in the thread. Capture their thread if one exists</li>
<li>Capture any links in the Tweet</li>
<li>Create the process as an abstract function that returns the data in a savable way</li>
</ol>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Archive links on <a href="http://archive.org/" target="_blank">Archive.org</a> and save the resulting archival links</li>
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Create link IDs that can be used to cache related content</li>
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Integrate it into the site to be able to make context pages here.</li>
</ul>
<h2 id="day-1" tabindex="-1">Day 1</h2>
<p>Ok, so this is a thing that happens a lot. I collect a bunch of links to a particular topic, and I want to share it. But it's hard to read a bunch of links, so how do I make it more readable?</p>
<p>I thought through some scope requirements and to dos and put them on the top of this page first. My first goal is to take a list of links and turn them into something more easy to read. I think the best way is by creating Open Graph style share cards for each link and replacing the link in place with those cards. So let's handle that request process.</p>
<h3 id="selecting-test-tool" tabindex="-1">Selecting test tool</h3>
<p>I think the easiest way to move forward is to build some test processes first so that I can run links through the function I'm building and test my outputs. I've now done tests with Jest and Mocha. Another popular library is <a href="https://www.chaijs.com/" target="_blank">Chai</a>, so let's try that.</p>
<h3 id="archiving-tools-refrerence" tabindex="-1">Archiving Tools Refrerence</h3>
<p>It's also worthwhile to do exactly the sort of thing I'm talking about here and record some info about archiving links.</p>
<ul>
<li><a href="https://github.com/palewire/savemy.news" target="_blank">https://github.com/palewire/savemy.news</a></li>
<li><a href="https://github.com/palewire/archiveis" target="_blank">https://github.com/palewire/archiveis</a></li>
<li><a href="https://perma.cc/docs/developer" target="_blank">https://perma.cc/docs/developer</a></li>
<li><a href="https://conifer.rhizome.org/" target="_blank">https://conifer.rhizome.org/</a></li>
<li><a href="https://en.wikipedia.org/wiki/Help:Using_the_Wayback_Machine#JavaScript_bookmarklet" target="_blank">https://en.wikipedia.org/wiki/Help:Using_the_Wayback_Machine#JavaScript_bookmarklet</a></li>
<li><a href="https://help.archive.org/hc/en-us/articles/360001513491-Save-Pages-in-the-Wayback-Machine" target="_blank">https://help.archive.org/hc/en-us/articles/360001513491-Save-Pages-in-the-Wayback-Machine</a></li>
<li><a href="http://mementoweb.org/depot/native/archiveis/" target="_blank">http://mementoweb.org/depot/native/archiveis/</a></li>
<li><a href="http://mementoweb.org/guide/quick-intro/" target="_blank">http://mementoweb.org/guide/quick-intro/</a></li>
<li><a href="https://wiki.archiveteam.org/index.php/ArchiveTeam_Warrior" target="_blank">https://wiki.archiveteam.org/index.php/ArchiveTeam_Warrior</a></li>
<li><a href="https://wiki.archiveteam.org/index.php/Software" target="_blank">https://wiki.archiveteam.org/index.php/Software</a></li>
<li><a href="https://github.com/eloquence/freeyourstuff.cc" target="_blank">https://github.com/eloquence/freeyourstuff.cc</a></li>
<li><a href="https://github.com/dhamaniasad/WARCTools" target="_blank">https://github.com/dhamaniasad/WARCTools</a></li>
<li><a href="https://blog.risingstack.com/pdf-from-html-node-js-puppeteer/" target="_blank">https://blog.risingstack.com/pdf-from-html-node-js-puppeteer/</a></li>
<li><a href="https://www.npmjs.com/package/html-pdf-node" target="_blank">https://www.npmjs.com/package/html-pdf-node</a></li>
<li><a href="https://github.com/mozilla/readability" target="_blank">https://github.com/mozilla/readability</a></li>
</ul>
<p>This is all pretty much more extensive then I want to do for my first run at this project, but it is good to have a list. To start, let's turn link lists into HTML cards.</p>
<h3 id="sanitizing-the-url" tabindex="-1">Sanitizing the URL</h3>
<p>Ok, first thing is to sanitize the URL.</p>
<p>There's a fairly popular Node sanitation library, I'll start there.</p>
<p>I'll pull the regex WordPress uses to clean URLs, as I've used that in PHP and it's fairly reliable.</p>
<p>Finally, I want to strip marketing params that are commonly used in links. I could make my own code here, but a quick search around has revealed that <a href="https://github.com/mihaip/utm-stripper/blob/master/extension/background.js" target="_blank">someone built some good regexes to handle this</a>.</p>
<p>Ok, this makes for a good test setup. It looks like Chai builds on top of Mocha, so let's install that too.</p>
<p>Ok, it looks like <a href="https://www.chaijs.com/guide/styles/" target="_blank">Chai has a suite of tools, the major ones are should, expect and assert</a>.</p>
<p>Ok, let's make some bad links.</p>
<p>I want to invalidate <code>mailto</code> links also. So let's see if I can throw an error and capture it in Chai.</p>
<p>I should be able to capture the tests with <code>.should.Throw</code> and <code>expect(fn).to.throw(new Error('text'))</code></p>
<p>Hmm, that's not working.</p>
<p>Ok, <a href="https://stackoverflow.com/a/22340179" target="_blank">it looks like it has a different format</a> and does require we put the error-throwing function inside another function... for some reason. I also can't use the error object, just the error text. Also unclear from the docs.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/context-pages/day-1/#code-skip-day-1-1" id="skip-to-code-skip-day-1-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"should throw on mailto links"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />		<span class="token function">linkModule</span><span class="token punctuation">(</span><span class="token string">"mailto:test@example.com?subject=hello+world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span><span class="token string">"Invalid Mailto Link"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-day-1-1">Ok, my sanitizer looks good and I think that I have some good coverage. Next step will be handling the Fetch step and building out the data model. But this is a good place to stop.</p>
<p><a target="_blank" href="https://github.com/AramZS/contexter/commit/222119ccab48e086f4c59e1f96328bd384e57517" class="git-commit-link"><code>git commit -am &quot;Set up sanitizer and unit tests&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Brute Forcing My Way Through Markdown-It</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/retro-markdown-it/?source=rss</link>
		<pubDate>Fri, 31 Dec 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/retro-markdown-it/</guid>
		<description>I'm not sure why I decided to challenge myself with a different markdown parser than I usually use, but I'm glad I did.</description>
		<content:encoded><![CDATA[<h2 id="markdown-it-so-crunchy-so-useful-such-a-pain" tabindex="-1">Markdown-It - So Crunchy, So Useful, Such a Pain</h2>
<p>I am going to be critical of Markdown-It here, so I want to put this up front: the community was helpful, I got fast feedback on an issue, once I figured it out it was hugely useful. If you've got time and a willingness to figure stuff out yourself and a whole bunch of patience to really explore the tool... well then I couldn't recommend it more. If all you want to do is zero-config your way to a basic Markdown to HTML pipeline, then this should be fine (along with a variety of other tools). But if you want to do some basic modification, like some text-to-fun-CSS or shortcode-style template tags in Markdown itself instead of in something like Eleventy or Nunjucks (this is <a href="https://glitch.com/edit/#!/thespin?path=markdown-to-col.js%3A20%3A27" target="_blank">a thing I have definitely done</a>), then this likely isn't the Markdown renderer you're looking for.</p>
<p>And like... that's fine. That's totally cool. There's room in the world for more than one Markdown renderer. No one get mad. I'm not insulting any library here. Ok, onward.</p>
<h3 id="the-frustration" tabindex="-1">The Frustration</h3>
<p>I think it is generous to say that Markdown It's documentation is unclear. <a href="https://markdown-it.github.io/markdown-it/" target="_blank">It's very sparse</a> and everything about the project is difficult to navigate. At least it isn't misleading, which is good! But even the available in-project resources were difficult to find! The <a href="https://markdown-it.github.io/" target="_blank">Markdown-It demo page</a> was <em>really</em> useful or at least it would have been if I had found it earlier than a month+ into this project. I'm not even totally sure how I got to it? I don't think it is linked on the project readme. Maybe I just went to the URL because I was curious what the site home page was, not expecting anything? It should really be at the top of their readme. Also, <a href="https://github.com/markdown-it/markdown-it/blob/master/docs/architecture.md" target="_blank">their architecture doc</a> was hugely useful, but it was linked as plugin developer docs, so I almost didn't get to it.</p>
<p>The unclear documentation is especially difficult when paired with the standard problems of the Node ecosystem, which is a lot of badly maintained, no longer functioning, libraries. You can see me <a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-16/" target="_blank">wasting a lot of time on day 16 on the supposed Markdown-It Regex plugin</a>. This isn't Markdown It's fault, but it almost put me off using the tool at all.</p>
<p data-wordfix="true">I already noted that this combination of bad package maintenance, too many blog posts, and misleading resources seems to be especially common in Node for reasons that are unclear to me. Increasingly I think I'm going to rely less on random blogs and plugins and more on just trying to figure out how libraries work by tweezing them apart through use and logging and <strong>then</strong> maybe code reading (though good inline documentation is even more rare, even on otherwise good projects). I wish that wasn't the case, but I'm not sure what the alternatives are. One would think a more robust community would be an advantage, but it doesn't feel like it is in many mid-size projects' cases.</p>
<h3 id="project-feel-and-future-use" tabindex="-1">Project Feel and Future Use</h3>
<p>Now that I've bull-headed my way through learning Markdown It, I finally understand it. The decisions make sense. It's a smart project that is centered on a number of smart decisions that, while they might not be easy to find or initially figure out, all feel right. I understand now why the project is so popular, it's flexible, it's holistic, it's comprehensive. Like all the best libraries getting the hang of it feels like unlocking a super power.</p>
<p>It's likely that, for my future projects where I use Markdown, Markdown-It will be the project I'll use. There may be a few exceptions for extremely simple Markdown parsing, but I think I'll be continuing to use Markdown-It. It's a great tool.</p>
<h3 id="what-i-learned-(other-than-the-code-in-my-blog-posts)" tabindex="-1">What I Learned (other than the code in my blog posts)</h3>
<p>Working with Markdown-It was a great excuse to stretch my Regex legs and really try for some more complex patterns than I would usually deal with.</p>
<p>Other than that, and <a href="https://fightwithtools.dev/posts/projects/devblog/retro-getting-back-to-sass/#what-i-learned-(other-than-the-code-in-my-blog-posts)" target="_blank">what I learned about being more self-reliant when exploring libraries in the Sass project</a>, I think learning to use Markdown-It was a very code heavy experience. Which isn't at all a bad thing.</p>
<p>It was also great how responsive the project maintainers were. I don't think you can rely on that in every project, but in this case it was a great reminder that GitHub issues, if you follow the instructions and put together your example effectively, are a great place to ask questions and learn stuff, not just mark errors. I think phrasing it as &quot;what's the best practice for using your code&quot; is the right way to go, and an approach I might employ in the future.</p>
<p>Also, all things considered, I validated my approach of trying a new thing just for the sake of it being something different. I had no particular reason to stick with Markdown-It, but I'm glad I did.</p>
<h3 id="self-check:-assumptions-and-validations" tabindex="-1">Self-check: Assumptions and Validations</h3>
<h4 id="should-i-prefer-markdown-it-for-future-projects" tabindex="-1">Should I <strong>prefer</strong> Markdown-It for future projects?</h4>
<ul>
<li>I went in with the assumption being no. I assumed this would be a one-off experiment where I'd return to using Showdown later.</li>
<li>I did not validate this assumption. I will definitely use Markdown-It in the future.</li>
</ul>
<h4 id="was-markdown-it-effective" tabindex="-1">Was Markdown-It effective?</h4>
<ul>
<li>I did not go in with any particular assumptions, but early into the project I was highly frustrated and questioning Markdown It's effectiveness.</li>
<li>Invalidated. Markdown-It is absolutely effective.</li>
</ul>
<h4 id="does-markdown-it-block-collaboration" tabindex="-1">Does Markdown-It block collaboration?</h4>
<ul>
<li>I went in assuming yes.</li>
<li>This is a mixed bag. People familiar with the project already are out there and seem ready to collaborate, but I'm not sure I established enough information in my writing to make it easy for newcomers to enter my Markdown-It related code and understand what's going on.</li>
</ul>
<h4 id="does-markdown-it-have-effective-documentation-either-external-or-internal" tabindex="-1">Does Markdown-It Have Effective Documentation either External or Internal</h4>
<ul>
<li>I went in with no idea, but feeling no.</li>
<li>Validated. The documentation for Markdown-It just isn't there, either in the project or the community.</li>
</ul>
<h4 id="will-it-be-easy-to-maintain" tabindex="-1">Will it be easy to maintain?</h4>
<ul>
<li>I went in assuming no.</li>
<li>I... think it will be? Markdown It's structures, once understood, are pretty straightforward, make use of very standardized code and objects, and seem to be very stable and built on well-thought-out architecture.</li>
</ul>
<h4 id="did-learning-markdown-it-give-me-broadly-applicable-skills" tabindex="-1">Did learning Markdown-It give me broadly applicable skills?</h4>
<ul>
<li>I went in assuming no.</li>
<li>I think the exercise with Regex was very useful, but I'm not sure the rest is. Markdown is a thing I use for personal projects, but not a thing I ever anticipate using for professional projects. While their Token structure makes a lot of sense, it doesn't have a lot of overlap with text/html processing engines I've used.</li>
</ul>
<h4 id="working-on-this-will-allow-me-to-give-something-back-to-the-community" tabindex="-1">Working on this will allow me to give something back to the community</h4>
<ul>
<li>I went in assuming no.</li>
<li>Invalid. I have <a href="https://www.npmjs.com/package/markdown-it-find-and-replace" target="_blank">contributed one plugin</a> and could easily see myself writing another. There's a lot of cool things Markdown-It can do that I think I could leverage in new ways that the existing community (while large) hasn't done yet.</li>
</ul>
<h3 id="conclusion" tabindex="-1">Conclusion</h3>
<p>What an unexpected delight. After I got through the frustration of decoding how Markdown-It works, getting more advanced features up and running on my blog was just a lot of fun. I don't really know why I barreled forward on using Markdown-It, but I'm glad I did.</p>
<p><strong>Use of Markdown-It</strong>: <em>Validated</em></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Getting back to SASS</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/retro-getting-back-to-sass/?source=rss</link>
		<pubDate>Wed, 29 Dec 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/retro-getting-back-to-sass/</guid>
		<description>Setting this devblog up ran me through a Sass refresher course, and presented an opportunity. But I'm not sure it was worth it</description>
		<content:encoded><![CDATA[<h2 id="back-into-sass" tabindex="-1">Back Into Sass</h2>
<p>I've dipped my toe in and out of Sass many times over the years. This, though, is the most I've focused on it in a while.</p>
<h3 id="rebuilding-my-build-process-from-scratch" tabindex="-1">Rebuilding my build process from scratch</h3>
<p>I think it was pretty wild to basically have to re-figure-out what is essentially a CSS build process from scratch with the end of Node Sass. It was a real slow down. Also, hardly the first time I have had to do that for a Sass project. It feels like I've had to rebuild my Sass build process every time I've worked on it. I'm also not sure when the split between SCSS and SASS formats happened? Perhaps it has always been there and I've just forgotten... or my build tools took care of it for me? It was easy enough to change grooves, but weird.</p>
<p data-wordfix="true">On the flip side, Dart Sass in Node seems to be significantly simpler than its predecessor. I will give it this: it is definitely an improvement. Once I was able to struggle through the meager documentation and log my way towards how it functioned I was able to get it working well enough and able to do some flexible things with it. Obviously, once I got the hang of it I was able to really get it working for me; well enough that I was able to write an Eleventy plugin based on my code and approach. It works so well and is so much clearer to me code-wise than the Node Sass alternative I was even ready to <a href="https://github.com/11ty/11ty-website/pull/1257#pullrequestreview-841555379" target="_blank">submit it</a> to the <a href="https://www.11ty.dev/docs/plugins/" target="_blank">Eleventy plugin directory</a>.</p>
<h3 id="leveraging-best-practices" tabindex="-1">Leveraging best practices</h3>
<p data-wordfix="true">I don't know if I used Sass as well as I could. I'd hoped to find some way to do intelligent code splitting, but the build process Dart Sass has doesn't interact with Eleventy in a way I could see that happening automatically, and so I ended up doing it manually. I also am not sure I fully took advantage of Sass features. I could likely do something better in regards to variables, mixins, etc... but having built my CSS by hand on my last few projects, I think it likely would have been simpler to have done that for this project and maybe stitch the files together for ease of managing my rules.</p>
<p>There's just a lot of advanced CSS features that are native now. Features like <code>calc</code>, CSS variables, and the ever growing list of nifty pseudo-selectors seems to make <strong>unnecessary</strong> much of the stuff I once relied on Sass to do.</p>
<h3 id="project-feel-and-future-use" tabindex="-1">Project feel and future use</h3>
<p>Compounding the issue, it doesn't feel like the Sass project is especially stable these days. It was extremely disconcerting to discover that one of their main rendering functions had apparently been marked for depreciation over the course of this project (about 10 minor versions in half a year). Especially considering that this switch to a new function didn't maintain the interface of the previous function which, as far as I can see, is one which most Sass projects would have used. Worse, the transition didn't seem to be clearly documented.</p>
<p>Perhaps this is all just a result of my distance from Sass over the last few years, where I was either ending up using hand-cranked CSS or I was going to go the CSS-in-JS route. But it doesn't feel that way. My last Sass project was in June of last year. It really makes me doubt if I should go the Sass route in the future. With Eleventy especially I feel like I could likely find or build a CSS compression + source map process that would be just as effective performance-wise and easier to use. It might be worth it to try, or to look into one of the fancy frameworks like <a href="https://tailwindcss.com/" target="_blank">Tailwind</a> or a CSS-in-JS <a href="https://lit.dev/" target="_blank">process</a> that doesn't feel gross and renders out to one or more stylesheets (though those seem to be hard to find).</p>
<h3 id="what-i-learned-(other-than-the-code-in-my-blog-posts)" tabindex="-1">What I Learned (other than the code in my blog posts)</h3>
<p>I think one of the major things I learned working on the Sass part of this project is how <em>bad</em> the reliance on the community to provide documentation is. In trying to get this to work I encountered:</p>
<ul>
<li>a ton of malfunctioning code examples;</li>
<li>a plugin that looks like it should work, was only 10 months old, but is completely non functional;</li>
<li>a full on <a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-2/" target="_blank">documentation error in the core Dart Sass library</a>;</li>
<li>some misleading blog posts with bad, old or just wrong info;</li>
<li>a major depreciation mid-project;</li>
</ul>
<p>None of this makes me feel great about reusing Sass but also I think it highlights a major realization:</p>
<p>A lot of these modern projects like Sass provide <a href="https://twitter.com/Chronotope/status/1472118035205042178" target="_blank">really</a> <a href="https://twitter.com/Chronotope/status/1374369144100024322" target="_blank">bare</a> <a href="https://twitter.com/Chronotope/status/1419441920951169027" target="_blank">minimum</a> documentation. I think they rely on the community to write about their libraries and then have those show up in search. And a lot of them do have communities that <strong>do</strong> write about their use of the code libraries and how to do interesting stuff with them but...</p>
<p><strong>All that is pointless if you change your library so frequently and radically as to invalidate community-generated materials.</strong></p>
<p>This isn't just a Sass problem, it seems to be a major issue I've seen a lot ever since React started becoming popular. I don't know why this is the case, maybe it comes from some mother projects, maybe it's just a Node community tendency? I'm not sure what it is but it <em>is</em> annoying.</p>
<p>It means that there are a ton of well-meaning developer bloggers (like myself now!) who write posts that are &quot;this is how to do x&quot; without a lot of information about why, or how they navigated the library to figure out how to do X, or how others might learn for themselves. Without better docs in the actual library site the end result is that picking up any of these packages new is made <em>harder</em> when there are more people blogging about the library because it is so easy to burn time on frustrating dead ends. I think I'll do a Markdown It retro as well, but a notable overlap is that the period I gave myself to work on it without referring to developer blogs or Stack Exchange was the time I was most productive in unlocking the library's value. There are just too many out-of-date blogs and false leads. The best source material ends up being Github Issues, which at least are easy to search and sort by date.</p>
<p>The two main things I took away from this to apply to my own projects are:</p>
<p>I should apply extensive documentation and examples in the core project documentation. It's nice when your project is popular enough that people start writing about it, but it's a mistake to act in a way that assumes those resource exist or are kept up to date. Sadly, blog posts don't have a filter that checks them for forward compatibility. Instead, I need to keep documentation for my own projects verbose, up to date, and explanatory.</p>
<p>The second take away is for how I blog here on this and future projects. I endeavored here not just to document what I did but also how I figured it out; what bad processes and incorrect assumptions I made; and how I taught myself the correct way forward. I think that for this type of blog that information is far more useful than a bunch of minimally documented code samples of &quot;How to do X&quot;. Even when the code itself might no longer be usable because of library changes my process will hopefully still be useful to future developers.</p>
<h3 id="self-check:-assumptions-and-validations" tabindex="-1">Self-check: Assumptions and Validations</h3>
<h4 id="should-i-prefer-sass-for-future-projects" tabindex="-1">Should I <strong>prefer</strong> Sass for future projects?</h4>
<ul>
<li>I went in with the assumption being yes. I made a beeline for Sass both because of preference and experience.</li>
<li>I did not validate this assumption. I should not start future projects with the assumption that Sass is the best tool for the job.</li>
</ul>
<h4 id="was-sass-effective" tabindex="-1">Was Sass effective?</h4>
<ul>
<li>I went in assuming yes.</li>
<li>Validated. It was effective. It was easy to build with, I was able to fly with it once I learned how. I <strong>can</strong> use it for projects like this. I don't know if it saved me time, but it didn't feel like it took up a ton of extra time.</li>
</ul>
<h4 id="does-sass-block-collaboration" tabindex="-1">Does Sass block collaboration?</h4>
<ul>
<li>I went in assuming no.</li>
<li>Validated. It was easy to form Site Maps once I nosed out a few errors. I think it creates easy to read code on both site maps and Github. It's hard to be final on this without hearing from others, but I think it worked out.</li>
</ul>
<h4 id="sass-is-a-broad-project-with-good-documentation-either-on-it's-site-or-through-self-documentation" tabindex="-1">Sass is a broad project with good documentation either on it's site or through self-documentation</h4>
<ul>
<li>I went in assuming yes.</li>
<li>Invalidated. See above. But also it turned out that getting a good VS Code plugin <em>significantly</em> helped the process.</li>
</ul>
<h4 id="sass-will-be-easy-to-maintain" tabindex="-1">Sass will be easy to maintain</h4>
<ul>
<li>I went in assuming yes.</li>
<li>Unclear. I stumbled on errors in the docs, at least two cases of depreciation, and one feature that was marked as for future use only. Major changes in Sass meant I basically had to starting over for everything but writing the style rules themselves. We'll have to see if the project gets leveled out, but for now it worries me for something like this where I want to do minimal maintenance of the project's core code.</li>
</ul>
<h4 id="did-learning-sass-give-me-broadly-applicable-skills-that-i-could-use-elsewhere" tabindex="-1">Did learning Sass give me broadly applicable skills that I could use elsewhere?</h4>
<ul>
<li>I went in assuming yes.</li>
<li>Unclear. One of the major things I noticed looking up CSS info was that people seem to be frequently moving to Tailwind or CSS-in-JS techniques. I'm not sure I appreciate either from an abstract or best practices perspective, but it doesn't speak to Sass skills being broadly applicable. Maybe I'll see a lot of users on the plugin I built and come back to this and say that the answer is yes later.</li>
</ul>
<h4 id="sass-will-help-me-do-smart-code-splitting" tabindex="-1">Sass will help me do smart code splitting</h4>
<ul>
<li>I went in assuming yes.</li>
<li>Invalid. It really didn't. I had to build that functionality on top entirely myself.</li>
</ul>
<h4 id="working-on-this-will-allow-me-to-give-something-back-to-the-community" tabindex="-1">Working on this will allow me to give something back to the community</h4>
<ul>
<li>I went in assuming no.</li>
<li>Invalid. It turned out that Eleventy's Sass plugin, though not even a year old, wasn't really working anymore. I built a new one. Maybe people will use it? It turned out that there were big things I needed to learn myself and ways I could take what I learned and make it broadly applicable. If everything else had been bad, this would have made using Sass worth it all on its own. It's good to give back.</li>
</ul>
<h3 id="conclusion" tabindex="-1">Conclusion</h3>
<p>Using Sass more may not be in my future, but I think it was a worthwhile process to go through for this project. At some future point I may switch the relatively simple CSS I'm maintaining for this project to just plain CSS files, but right now I think it'll be good to keep iterating using Sass. There are clearly others who want to use it. Continuing to have it in this project will help me maintain my plugin and help the wider community.</p>
<p><strong>Use of Sass</strong>: <em>Validated</em></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Day 42 - Analytics time!</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-42/?source=rss</link>
		<pubDate>Wed, 01 Dec 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-42/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?) - Yes it would be!</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a Things I Learned section to the project pages that are the things I learned from that specific project.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a technical reading log to the homepage</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank">Hide</a> empty sections.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add byline to post pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Have table of contents attach to sidebar bottom on mobile</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Support dark mode</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Social Icons</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> SEO/Social/JSON-LD HEAD data</p>
</li>
</ul>
<h2 id="day-42" tabindex="-1">Day 42</h2>
<p>Ok. This site is almost ready to go. There are some enhancements I still want to do to code blocks and I want to add some more advanced content to tag pages, but it is at the point where I want to take this and show it to other people.</p>
<p>So one of the things I want to do is set up privacy-respecting analytics. I <a href="https://twitter.com/Chronotope/status/1444744757037707272" target="_blank">polled folks on this a while back and got some options</a>. I considered them and have basically come down to two options: <a href="https://plausible.io/privacy-focused-web-analytics" target="_blank">Plausible</a> or <a href="https://usefathom.com/" target="_blank">Fathom</a>. I'm going to read around both of them.</p>
<p>They both seem very privacy forward. They run in the EU to use GDPR to help them protect data. They both contribute to climate issues and have smart export settings. I think they both seem like fine services. I'm leaning towards Plausible because it is slightly cheaper, more open source, and the script itself seems to be just slightly lighter-weight (though they are both <em>very</em> lightweight). Also, I sort of like the idea of <a href="https://plausible.io/docs/visibility" target="_blank">opening up my analytics to anyone</a>. I think I'm going to start there. Oh... interesting... they let me do the 30 day trial for free, without entering anything credit card wise!</p>
<p>Very cool. Let's try it out.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/ce0b3656ed505d2f9f73279f76e25b9e588afc68" class="git-commit-link"><code>git commit -am &quot;Early commit to try out Plausible&quot;</code></a></p>
<p>Ok, it works, <a href="https://plausible.io/fightwithtools.dev" target="_blank">and I can flip on a public dashboard as well</a>!</p>
<p>Oh and it has a nice Google Search Console integration. I'll set that up as well. Huh, can I add a TXT record but there but it looks like this whole process has changed somewhat since the last time I was there. Ok. That's fine. I can get it working easily enough. Seems to be integrated now!</p>
<p>I guess that's it, it's working? Yeah! Ok. Well I don't think there's much blocking me now, I hit almost everything I wanted to hit.</p>
<p>There are a few features I'd still like to implement here, but I think things are well formed enough that I can put this out there for feedback. Last thing to do is some touch up regarding featured images, tags and titles that I can take care of tonight or tomorrow.</p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Extract Sass into an Eleventy Plugin</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/sass-plugin/?source=rss</link>
		<pubDate>Sun, 28 Nov 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/sass-plugin/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?) - Yes it would be!</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a Things I Learned section to the project pages that are the things I learned from that specific project.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a technical reading log to the homepage</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank">Hide</a> empty sections.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add byline to post pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Have table of contents attach to sidebar bottom on mobile</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Support dark mode</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Social Icons</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> SEO/Social/JSON-LD HEAD data</p>
</li>
</ul>
<h2 id="day-41" tabindex="-1">Day 41</h2>
<p>Ok, so I want to continue to get a better understanding of Eleventy so as part of my end-of-project clean up I'm extracting tools I wrote for this blog into general use plugins. Yesterday, a Markdown-It plugin. Today, let's see if I can make my Sass plugin generally usable, since that seems to be missing in the Eleventy community.</p>
<h3 id="basic-eleventy-plugin-setup" tabindex="-1">Basic Eleventy Plugin Setup</h3>
<p>Ok, so let's look at some of the useful plugins I'm familiar with: <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/blob/main/.eleventy.js" target="_blank">the TOC plugin</a> and <a href="https://github.com/takanorip/eleventy-google-fonts/blob/master/.eleventy.js" target="_blank">Eleventy Google Fonts</a>. These both handle different Eleventy flows and so are useful examples.</p>
<p>The first thing to note is that Eleventy plugins initiate with <code>.eleventy.js</code> files and take an <code>eleventyConfig</code> object and passed <code>options</code> object.</p>
<p>In the <code>.eleventy.js</code> file I'll set up a very basic structure and work in my original JS.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/sass-plugin/#code-skip-sass-plugin-6" id="skip-to-code-skip-sass-plugin-6" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> generateSass <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./src/generate-sass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br />module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">eleventyConfig<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	<span class="token keyword">return</span> <span class="token function">generateSass</span><span class="token punctuation">(</span>eleventyConfig<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-sass-plugin-6">Ok, so now what and how do I handle this eleventyConfig object? Well let's take a look at it:</p>
<p>So here's what an eleventyConfig object looks like:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/sass-plugin/#code-skip-sass-plugin-5" id="skip-to-code-skip-sass-plugin-5" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">Eleventy Plugin Info UserConfig <span class="token punctuation">{</span><br />  events<span class="token operator">:</span> EventEmitter <span class="token punctuation">{</span><br />    _events<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token operator">:</span> <span class="token keyword">null</span> prototype<span class="token punctuation">]</span> <span class="token punctuation">{</span> beforeWatch<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    _eventsCount<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><br />    _maxListeners<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span><br />    <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span>kCapture<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token boolean">false</span><br />  <span class="token punctuation">}</span><span class="token punctuation">,</span><br />  collections<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  templateFormats<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span><br />  liquidOptions<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  liquidTags<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  liquidFilters<span class="token operator">:</span> <span class="token punctuation">{</span><br />    slug<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    url<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    log<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    getCollectionItem<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    getPreviousCollectionItem<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    getNextCollectionItem<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    eleventyNavigation<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    eleventyNavigationBreadcrumb<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    eleventyNavigationToHtml<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><br />  <span class="token punctuation">}</span><span class="token punctuation">,</span><br />  liquidShortcodes<span class="token operator">:</span> <span class="token punctuation">{</span> sitemap<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />  liquidPairedShortcodes<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  nunjucksFilters<span class="token operator">:</span> <span class="token punctuation">{</span><br />    slug<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    url<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    log<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    getCollectionItem<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    getPreviousCollectionItem<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    getNextCollectionItem<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    eleventyNavigation<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    eleventyNavigationBreadcrumb<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    eleventyNavigationToHtml<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    absoluteUrl<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    getNewestCollectionItemDate<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    dateToRfc3339<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    rssLastUpdatedDate<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    rssDate<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><br />  <span class="token punctuation">}</span><span class="token punctuation">,</span><br />  nunjucksAsyncFilters<span class="token operator">:</span> <span class="token punctuation">{</span> htmlToAbsoluteUrls<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />  nunjucksTags<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  nunjucksShortcodes<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  nunjucksAsyncShortcodes<span class="token operator">:</span> <span class="token punctuation">{</span> sitemap<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />  nunjucksPairedShortcodes<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  nunjucksAsyncPairedShortcodes<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  handlebarsHelpers<span class="token operator">:</span> <span class="token punctuation">{</span><br />    slug<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    url<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    log<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    getCollectionItem<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    getPreviousCollectionItem<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    getNextCollectionItem<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    eleventyNavigation<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    eleventyNavigationBreadcrumb<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    eleventyNavigationToHtml<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><br />  <span class="token punctuation">}</span><span class="token punctuation">,</span><br />  handlebarsShortcodes<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  handlebarsPairedShortcodes<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  javascriptFunctions<span class="token operator">:</span> <span class="token punctuation">{</span><br />    slug<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    url<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    log<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    getCollectionItem<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    getPreviousCollectionItem<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    getNextCollectionItem<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    eleventyNavigation<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    eleventyNavigationBreadcrumb<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    eleventyNavigationToHtml<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />    sitemap<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><br />  <span class="token punctuation">}</span><span class="token punctuation">,</span><br />  pugOptions<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  ejsOptions<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  markdownHighlighter<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />  libraryOverrides<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  passthroughCopies<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  layoutAliases<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  linters<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  filters<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  activeNamespace<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />  DateTime<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">class</span> <span class="token class-name">DateTime</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />  dynamicPermalinks<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />  useGitIgnore<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />  dataDeepMerge<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />  extensionMap<span class="token operator">:</span> <span class="token function">Set</span><span class="token punctuation">(</span><span class="token parameter"><span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  watchJavaScriptDependencies<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />  additionalWatchTargets<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">'./_custom-plugins/'</span><span class="token punctuation">,</span> <span class="token string">'./src/_sass'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span><br />  browserSyncConfig<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  chokidarConfig<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  watchThrottleWaitTime<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />  dataExtensions<span class="token operator">:</span> <span class="token function">Map</span><span class="token punctuation">(</span><span class="token parameter"><span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br />  quietMode<span class="token operator">:</span> <span class="token boolean">false</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-sass-plugin-5">It turns out that none of these things are... directly accessible though? I'm not sure how to get into any of those. Well, I have the usual <code>eleventyConfig</code> tools though, so I guess that's the point.</p>
<p>Let's set some default options that I'll need to build CSS files along with URL-domain-based source maps.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/sass-plugin/#code-skip-sass-plugin-4" id="skip-to-code-skip-sass-plugin-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> pluginDefaults <span class="token operator">=</span> <span class="token punctuation">{</span><br />	domainName<span class="token operator">:</span> <span class="token string">"http://localhost:8080"</span><span class="token punctuation">,</span><br />	includePaths<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"**/*.{scss,sass}"</span><span class="token punctuation">,</span> <span class="token string">"!node_modules/**"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />	sassLocation<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"../../"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"src/_sass/"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br />	sassIndexFile<span class="token operator">:</span> <span class="token string">"_index.sass"</span><span class="token punctuation">,</span><br />	outDir<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"../../"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"docs"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br />	outPath<span class="token operator">:</span> <span class="token string">"/assets/css/"</span><span class="token punctuation">,</span><br />	sourceMap<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />	perTemplateFiles<span class="token operator">:</span> <span class="token string">"template-"</span><span class="token punctuation">,</span><br />	cacheBreak<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-sass-plugin-4">It's a lot, I know, but I don't think there's any way around it.</p>
<p>I could use <code>addTransform</code> to alter the HTML output to add the CSS to it, but as I explore more plugins it seems like the way to do this is to supply a shortcode and let the user leverage it. It would be fun to play with this, but I think I may end up removing it.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/sass-plugin/#code-skip-sass-plugin-3" id="skip-to-code-skip-sass-plugin-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	eleventyConfig<span class="token punctuation">.</span><span class="token function">addTransform</span><span class="token punctuation">(</span><span class="token string">"sassCore"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> outputPath</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />		<span class="token keyword">if</span> <span class="token punctuation">(</span>outputPath <span class="token operator">&amp;&amp;</span> outputPath<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">".html"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		<span class="token punctuation">}</span><br /><br />		<span class="token keyword">return</span> content<span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-sass-plugin-3">Ok, so I'll split this into three files to make it easy to handle, one each for: generating Sass stuff in the Eleventy context, creating Sass strings, writing Sass strings to the correct location.</p>
<p>It looks like my use of <code>renderSync</code> has been depreciated and <a href="https://sass-lang.com/documentation/js-api/modules#compile" target="_blank">replaced by <code>compile</code></a>. Ok.</p>
<p>You know what? I'm just going to lock patch version. I don't want to deal with this badly documented transition right now and it looks like <code>compile</code> is missing some options I depend on and has transformed other options to a new unclear property.</p>
<p>Now dependencies looks like:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/sass-plugin/#code-skip-sass-plugin-2" id="skip-to-code-skip-sass-plugin-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">  <span class="token string">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />    <span class="token string">"sass"</span><span class="token operator">:</span> <span class="token string">"~1.45.1"</span><br />  <span class="token punctuation">}</span></code></pre>
<p id="code-skip-sass-plugin-2">This feels like a problem I keep encountering in the Sass project which is that... it's a mess for no good reason and it doesn't do a great job documenting changes. Frustrating.</p>
<p>Ok, let's seperate out the functions and put in the variables.</p>
<p>Note to self: can't assume users are in Eleventy v1, so <code>addGlobalData</code> is out.</p>
<p>Ok, how am I going to pass my plugin options into the shortcode? <a href="https://github.com/gfscott/eleventy-plugin-youtube-embed/blob/main/.eleventy.js" target="_blank">Looks like it is in-scope as long as I have the call inside my function</a>.</p>
<p>Ok, some difficulty in making sure I get all my file names correct, but nothing to do other then 3 or 4 or 5 iterations until I'm sure all my filepaths are correct. Just keep going!</p>
<p>Ok, a little more fiddling on file names and source maps' names. Alrighty! It looks good.</p>
<p data-wordfix="true">Looks like <a href="https://www.11ty.dev/docs/events/#beforebuild" target="_blank">there is a way</a> I can make it rebuild that Sass on every build, even <code>watch</code> builds.</p>
<p>Let's test it as a module!</p>
<p>Oh right, I can't call it this. There's already <a href="https://www.npmjs.com/package/eleventy-plugin-sass" target="_blank">a plugin called &quot;eleventy-plugin-sass&quot;</a> that I struggled with <a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-1/" target="_blank">on Day 1</a>! Ok, let's call it the more accurate &quot;eleventy-plugin-dart-sass&quot;.</p>
<p>Works with passed configuration options. Let's try it with the defaults. Oo, nope. Ok, more path fiddling!</p>
<p>New default object figured out:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/sass-plugin/#code-skip-sass-plugin-1" id="skip-to-code-skip-sass-plugin-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> pluginDefaults <span class="token operator">=</span> <span class="token punctuation">{</span><br />	domainName<span class="token operator">:</span> <span class="token string">"http://localhost:8080"</span><span class="token punctuation">,</span><br />	includePaths<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"**/*.{scss,sass}"</span><span class="token punctuation">,</span> <span class="token string">"!node_modules/**"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />	sassLocation<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"../../../"</span><span class="token punctuation">,</span> <span class="token string">"src/_sass/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br />	sassIndexFile<span class="token operator">:</span> <span class="token string">"_index.sass"</span><span class="token punctuation">,</span><br />	outDir<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"../../../"</span><span class="token punctuation">,</span> <span class="token string">"docs"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br />	outPath<span class="token operator">:</span> <span class="token string">"/assets/css/"</span><span class="token punctuation">,</span><br />	outFileName<span class="token operator">:</span> <span class="token string">"style"</span><span class="token punctuation">,</span><br />	sourceMap<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />	perTemplateFiles<span class="token operator">:</span> <span class="token string">"template-"</span><span class="token punctuation">,</span><br />	cacheBreak<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />	outputStyle<span class="token operator">:</span> <span class="token string">"compressed"</span><span class="token punctuation">,</span><br />	watchSass<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-sass-plugin-1">Ok, yeah, everything is working now and even smoother than before! I guess I should write some tests? But that seems really really complicated right? I'm not sure where to start. Ok... well... maybe something to come back to. I'm going to write the docs and update the package. Let's test how it builds on remote first.</p>
<p>Oh, right, I need to path the paths until I update the NPM package. Ok, I will fix that annnnnddddd..... yeah, it works! Yay!</p>
<p>Ok, let's add the readme!</p>
<p>And <a href="https://www.npmjs.com/package/eleventy-plugin-dart-sass" target="_blank">it is published</a>!</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/cd1a78c164a09b0ebdd8d05cc10252937f7d987b" class="git-commit-link"><code>git commit -am &quot;Add final notes for the Sass Plugin&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Markdown It Find and Replace as Plugin</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/markdown-it-find-and-replace/?source=rss</link>
		<pubDate>Sat, 27 Nov 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/markdown-it-find-and-replace/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?) - Yes it would be!</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a Things I Learned section to the project pages that are the things I learned from that specific project.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a technical reading log to the homepage</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank">Hide</a> empty sections.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add byline to post pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Have table of contents attach to sidebar bottom on mobile</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Support dark mode</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Social Icons</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> SEO/Social/JSON-LD HEAD data</p>
</li>
</ul>
<h2 id="day-40" tabindex="-1">Day 40</h2>
<p>Ok, so I want to make my pretty simple but very useful Markdown-it short phrase replacer into a stand alone NPM package that others can use.</p>
<p>I need to set up the project, add the package.json file, the .npmignore file, the README and the other chunks of the initial setup.</p>
<p>The other thing I need to do is set it up so that a developer can pass in the patterns and replacement rules. So no more using a function outside of the exported function. Instead I need to let others pull it in. I also want to add some test coverage. I've always used Jest for testing, but never Mocha, so <a href="https://mochajs.org/#installation" target="_blank">let's try doing that</a>! I'll review the docs.</p>
<p>Good thing I wish they called out with more emphasis:</p>
<blockquote>
<p>Passing arrow functions (aka “lambdas”) to Mocha is discouraged. Lambdas lexically bind this and cannot access the Mocha context.</p>
</blockquote>
<p>I want to start testing, but that will mean a devDependency for markdown-it. It also made me realize <a href="https://nodejs.org/es/blog/npm/peer-dependencies/" target="_blank">I need to define a <code>peerDependencies</code> object</a>.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/markdown-it-find-and-replace/#code-skip-markdown-it-find-and-replace-2" id="skip-to-code-skip-markdown-it-find-and-replace-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-json"><code class="language-json"><span class="token property">"peerDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />  <span class="token property">"markdown-it"</span><span class="token operator">:</span> <span class="token string">"*"</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-markdown-it-find-and-replace-2">I want to test that the errors being thrown are working as expected, so <a href="https://github.com/Automattic/expect.js" target="_blank">I'm going to grab <code>expect.js</code></a>.</p>
<p>Using that I need to initiate the function I want to dump and error into the <code>expect</code> statement. And I need it to explicitly match a regex pattern (feeding a string in apparently doesn't work).</p>
<p>Ok, this works!</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/markdown-it-find-and-replace/#code-skip-markdown-it-find-and-replace-1" id="skip-to-code-skip-markdown-it-find-and-replace-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">"should not initiate without an array"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	<span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">mdProcessor</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>plugin<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">throwException</span><span class="token punctuation">(</span><br />		<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">Markdown-It-Find-and-Replace requires that options\.replaceRules be an array\.</span><span class="token regex-delimiter">/</span></span><br />	<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-markdown-it-find-and-replace-1">Let's throw some more tests on there!</p>
<p>Ok, it works.</p>
<p data-wordfix="true">Oh, and in writing the tests I realized I don't have a setup for when it starts a sentence or token content or when it ends one! I can fix that though with a few more regexs.</p>
<p>Ok, plugin looks good. Tests work. You know what's sort of strange, I've never created an NPM module that I've also published before. I guess this is the first time! <a href="https://docs.npmjs.com/creating-a-new-npm-user-account" target="_blank">Let's go</a>!</p>
<p>I already have an NPM account I created earlier, so that part is easy.</p>
<p>I'll reformat my author property to match their requirements.</p>
<p>I tried pulling it into this project and it looks like it works, so I think the code is good to go.</p>
<p><code>npm publish --access public</code></p>
<p>Ok, that was easy!</p>
<p>I'll pull it in to this project and see if that version works.</p>
<p>And it does!</p>
<p>Awesome, made it into a module that hopefully some other people will find useful!</p>
<p>I'll add some documentation and update that and we're done! Very useful!</p>
<p><code>npm publish</code> to update the package listing.</p>
<p><a href="https://www.npmjs.com/package/markdown-it-find-and-replace" target="_blank">Markdown It plugin package is live and ready for others to use</a>!</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/874612e280360a5ca95f22278c4ce5949cf50fb9" class="git-commit-link"><code>git commit -am &quot;Switching to use my newly published markdown-it plugin&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 39: Tweaking Code Blocks and Adding Skip Links</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-39/?source=rss</link>
		<pubDate>Fri, 26 Nov 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-39/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?) - Yes it would be!</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a Things I Learned section to the project pages that are the things I learned from that specific project.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a technical reading log to the homepage</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank">Hide</a> empty sections.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add byline to post pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Have table of contents attach to sidebar bottom on mobile</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Support dark mode</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Social Icons</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> SEO/Social/JSON-LD HEAD data</p>
</li>
</ul>
<h2 id="day-39" tabindex="-1">Day 39</h2>
<p>Look at this! Every checkmark I want to check off is checked off! Now all I have left to do is close off the last few things that are broken!</p>
<h3 id="fix-anchors" tabindex="-1">Fix anchors</h3>
<p>My anchor link generator is being broken by double-quote marks.</p>
<p>I'll change the configuration for <code>markdown-it-anchor</code> as follows:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-39/#code-skip-hello-day-39-16" id="skip-to-code-skip-hello-day-39-16" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"markdown-it-anchor"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br />			<span class="token function-variable function">slugify</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">slugify</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">"</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br />		<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p id="code-skip-hello-day-39-16">And yeah, that works!</p>
<h3 id="making-code-blocks-more-readable" tabindex="-1">Making Code Blocks More Readable</h3>
<p>So I'm going to make a few changes to the codeblocks in general here to make them more consumable.</p>
<p>First, it looks like the wisdom of the crowds is leaning towards wrapping code lines. So I'm going to add some CSSto do that:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-39/#code-skip-hello-day-39-15" id="skip-to-code-skip-hello-day-39-15" class="skip-link">Skip code block ▼</a></p>
<pre class="language-css"><code class="language-css"><span class="token selector">code[class*="language-"], pre[class*="language-"]</span> <span class="token punctuation">{</span><br />	<span class="token property">white-space</span><span class="token punctuation">:</span>pre-wrap<span class="token punctuation">;</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-39-15">Next, I use 4-space tabs and that can make my code blocks pretty roomy. Let's resize those tabs by adding a new property to the same css rule. Instead I can shrink it down to <code>1em</code> with <code>tab-size: 1em;</code>. This won't change spaces in codeblocks like YAML, but it helps with most of the rest I think.</p>
<p>There's one problem that I don't think I can solve with CSS? Some of my early code blocks take the tab level of their files so they have a bunch of extra tabs that aren't needed and make them less readable. Is there a way to fix this? I can't think of one, so I'll just try and remember to collapse my code blocks to start at zero tabs.</p>
<p>Finally, for the very long code blocks, they <em>badly</em> need skip links, both for accessibility and good UI reasons.</p>
<p>I guess... this needs to be another markdown-it plugin? That is where the code-blocks are made. Ok!</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/47464cbd5d34d5a1ad5ed1aef0bc001ccde6956b" class="git-commit-link"><code>git commit -am &quot;Fix some basic readability issues&quot;</code></a></p>
<h3 id="add-skip-links-to-code-blocks" tabindex="-1">Add skip links to code blocks</h3>
<p>Ok, I'm not going to make the same mistake I did before of starting in my <code>.eleventy</code> file. Let's open up a new custom plugin folder.</p>
<p>Now, because of my investigation on <a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-36/" target="_blank">Day 36</a> I know that there is a <code>code_block</code> rule that is absolutely the one I'm going to need to deal with. And, because I need to manipulate the token tree <em>around</em> the code block, I know that I'm going to have to use <code>ruler</code> and not <code>renderer</code>.</p>
<p>Ok, so first I'm going to figure out what token types exist:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-39/#code-skip-hello-day-39-14" id="skip-to-code-skip-hello-day-39-14" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Token Types'</span><span class="token punctuation">,</span> state<span class="token punctuation">.</span>tokens<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevV<span class="token punctuation">,</span> currV</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">return</span> prevV<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>currV<span class="token punctuation">.</span>type<span class="token punctuation">)</span><br /><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<p id="code-skip-hello-day-39-14">Result:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-39/#code-skip-hello-day-39-13" id="skip-to-code-skip-hello-day-39-13" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">[</span><br />  <span class="token string">'ordered_list_open'</span><span class="token punctuation">,</span><br />  <span class="token string">'list_item_open'</span><span class="token punctuation">,</span><br />  <span class="token string">'paragraph_open'</span><span class="token punctuation">,</span><br />  <span class="token string">'inline'</span><span class="token punctuation">,</span><br />  <span class="token string">'paragraph_close'</span><span class="token punctuation">,</span><br />  <span class="token string">'list_item_close'</span><span class="token punctuation">,</span><br />  <span class="token string">'ordered_list_close'</span><span class="token punctuation">,</span><br />  <span class="token string">'bullet_list_open'</span><span class="token punctuation">,</span><br />  <span class="token string">'bullet_list_close'</span><span class="token punctuation">,</span><br />  <span class="token string">'html_block'</span><span class="token punctuation">,</span><br />  <span class="token string">'heading_open'</span><span class="token punctuation">,</span><br />  <span class="token string">'heading_close'</span><span class="token punctuation">,</span><br />  <span class="token string">'blockquote_open'</span><span class="token punctuation">,</span><br />  <span class="token string">'blockquote_close'</span><span class="token punctuation">,</span><br />  <span class="token string">'fence'</span><br /><span class="token punctuation">]</span></code></pre>
<p id="code-skip-hello-day-39-13">Ok, so nothing clearly shows my codeblocks. So, let's try a different strategy. What about looking for my markdown codeblock indicator the three backticks?</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-39/#code-skip-hello-day-39-12" id="skip-to-code-skip-hello-day-39-12" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tokens<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">```</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br />		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><br />	<span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-39-12">Nope...</p>
<p>Ok, let's look for <code>&lt;code&gt;</code>?</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-39/#code-skip-hello-day-39-11" id="skip-to-code-skip-hello-day-39-11" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tokens<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\&lt;code\></span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br />		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><br />	<span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-39-11">Ok, that sort of worked! This is good!</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-39/#code-skip-hello-day-39-10" id="skip-to-code-skip-hello-day-39-10" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">Token <span class="token punctuation">{</span><br />  type<span class="token operator">:</span> <span class="token string">'fence'</span><span class="token punctuation">,</span><br />  tag<span class="token operator">:</span> <span class="token string">'code'</span><span class="token punctuation">,</span><br />  attrs<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />  map<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">161</span><span class="token punctuation">,</span> <span class="token number">168</span> <span class="token punctuation">]</span><span class="token punctuation">,</span><br />  nesting<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />  level<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />  children<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />  content<span class="token operator">:</span> <span class="token string">'for (let i = 0; i &lt; tokens.length; i++) {\n'</span> <span class="token operator">+</span><br />    <span class="token string">'\tif (/```/.test(tokens[i].content)){\n'</span> <span class="token operator">+</span><br />    <span class="token string">'\t\tconsole.log(tokens[i])\n'</span> <span class="token operator">+</span><br />    <span class="token string">'\t}\n'</span> <span class="token operator">+</span><br />    <span class="token string">'}\n'</span><span class="token punctuation">,</span><br />  markup<span class="token operator">:</span> <span class="token string">'```'</span><span class="token punctuation">,</span><br />  info<span class="token operator">:</span> <span class="token string">'javascript'</span><span class="token punctuation">,</span><br />  meta<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />  block<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />  hidden<span class="token operator">:</span> <span class="token boolean">false</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-39-10">Interesting. Maybe this could eventually be a way to fix some of the bad tabbing? I think this is a little out of scope, so I'll put that aside for now. This is a good place to start!</p>
<p>What does this token tree look like? Maybe I can look around it.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-39/#code-skip-hello-day-39-9" id="skip-to-code-skip-hello-day-39-9" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tokens<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	<span class="token keyword">if</span> <span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">"fence"</span> <span class="token operator">&amp;&amp;</span> tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>tag <span class="token operator">==</span> <span class="token string">"code"</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br />		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> tokens<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br />	<span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-39-9">Ok, I guess there isn't anything relevant? All are surrounded by <code>paragraph_close</code> and <code>paragraph_open</code>. So I'll need to construct the skip links around the token basically from scratch. Likely I'll need to create new paragraphs?</p>
<p>Though to make the skip link work effectively I think I'll need to add an ID to the following <code>paragraph_open</code> token that looks like this:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-39/#code-skip-hello-day-39-8" id="skip-to-code-skip-hello-day-39-8" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">Token <span class="token punctuation">{</span><br />  type<span class="token operator">:</span> <span class="token string">'paragraph_open'</span><span class="token punctuation">,</span><br />  tag<span class="token operator">:</span> <span class="token string">'p'</span><span class="token punctuation">,</span><br />  attrs<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">[</span> <span class="token string">'data-wordfix'</span><span class="token punctuation">,</span> <span class="token string">'true'</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">,</span><br />  map<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">113</span><span class="token punctuation">,</span> <span class="token number">114</span> <span class="token punctuation">]</span><span class="token punctuation">,</span><br />  nesting<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><br />  level<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />  children<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />  content<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />  markup<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />  info<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />  meta<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />  block<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />  hidden<span class="token operator">:</span> <span class="token boolean">false</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-39-8"><a target="_blank" href="https://github.com/AramZS/devblog/commit/28b520ed3b9bdad03c8c470a9113c330ea69fb94" class="git-commit-link"><code>git commit -am &quot;Saving part way through day 39&quot;</code></a></p>
<p>I'll also need some way to name the skip links. I've been thinking about this and I think I should be able to just increment a count on <code>state.env</code> since Markdown It processing occurs synchronously, right? I can pull the <code>fileSlug</code> off the page object just to be sure the anchor links are unique enough.</p>
<p>Ok, so I'm going to create the skip link name:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-39/#code-skip-hello-day-39-7" id="skip-to-code-skip-hello-day-39-7" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>env<span class="token punctuation">.</span>state<span class="token punctuation">.</span>page<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'skipCount'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br />	env<span class="token punctuation">.</span>state<span class="token punctuation">.</span>page<span class="token punctuation">.</span>skipCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><span class="token keyword">const</span> skipCount <span class="token operator">=</span> env<span class="token punctuation">.</span>state<span class="token punctuation">.</span>page<span class="token punctuation">.</span>skipCount <span class="token operator">+</span> <span class="token number">1</span><br />env<span class="token punctuation">.</span>state<span class="token punctuation">.</span>page<span class="token punctuation">.</span>skipCount <span class="token operator">=</span> skipCount<span class="token punctuation">;</span><br /><span class="token keyword">const</span> skipName <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">code-skip-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>skipCount<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span></code></pre>
<p id="code-skip-hello-day-39-7">And I'm going to apply the skip name to the following paragraph. But, what if the next block isn't a paragraph? I guess we got to check for that.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-39/#code-skip-hello-day-39-6" id="skip-to-code-skip-hello-day-39-6" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> foundGraf <span class="token operator">=</span> <span class="token boolean">false</span><br /><span class="token keyword">let</span> nextI <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br /><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>foundGraf<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	<span class="token keyword">if</span> <span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token punctuation">(</span><span class="token operator">++</span>nextI<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">"paragraph_open"</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br />		foundGraf <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br />		<span class="token keyword">break</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-39-6">Ok, didn't quite work. I guess there could be an end of the article or a non-paragraph token? Let's take that into account.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-39/#code-skip-hello-day-39-5" id="skip-to-code-skip-hello-day-39-5" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>foundGraf<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	<span class="token keyword">if</span> <span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token punctuation">(</span><span class="token operator">++</span>nextI<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> tokens<span class="token punctuation">[</span>i<span class="token operator">+</span>nextI<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> tokens<span class="token punctuation">[</span>i<span class="token operator">+</span>nextI<span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">"paragraph_open"</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br />		foundGraf <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br />		<span class="token function">addSkipGrafID</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>i<span class="token operator">+</span>nextI<span class="token punctuation">]</span><span class="token punctuation">,</span> skipName<span class="token punctuation">)</span><br />		<span class="token keyword">break</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>tokens<span class="token punctuation">[</span>i<span class="token operator">+</span>nextI<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br />		<span class="token comment">// do something</span><br />		<span class="token comment">// I guess we're at the end?</span><br />		foundGraf <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br />		<span class="token keyword">break</span><br />	<span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-39-5">Ok so this applies the needed ID! I now need to build the paragraph block above the code block and place te skip link. Good to refer to <a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-34/#a-more-complex-markdown-it-token" target="_blank">the complex Markdown It chain I recorded on Day 34</a>.</p>
<p>I'm really unclear how the nesting property is supposed to work? I guess we will just try it and see!</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-39/#code-skip-hello-day-39-4" id="skip-to-code-skip-hello-day-39-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">createSkipLink</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">TokenConstructor<span class="token punctuation">,</span> skipName</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">const</span> p_open <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenConstructor</span><span class="token punctuation">(</span><span class="token string">"paragraph_open"</span><span class="token punctuation">,</span> <span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token function">setAttr</span><span class="token punctuation">(</span>p_open<span class="token punctuation">,</span> <span class="token string">"class"</span><span class="token punctuation">,</span> <span class="token string">"skip-link-graf"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	p_open<span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br />	<span class="token keyword">const</span> link_open <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenConstructor</span><span class="token punctuation">(</span><span class="token string">"link_open"</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token function">setAttr</span><span class="token punctuation">(</span>link_open<span class="token punctuation">,</span> <span class="token string">"href"</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>skipName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token function">setAttr</span><span class="token punctuation">(</span>link_open<span class="token punctuation">,</span> <span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">skip-to-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>skipName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token function">setAttr</span><span class="token punctuation">(</span>link_open<span class="token punctuation">,</span> <span class="token string">"class"</span><span class="token punctuation">,</span> <span class="token string">"skip-link"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	p_open<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>link_open<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">const</span> link_text <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenConstructor</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	link_text<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">"Skip code block &amp;#9660;"</span><br />	p_open<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>link_text<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">const</span> link_close <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenConstructor</span><span class="token punctuation">(</span><span class="token string">"link_close"</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	p_open<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>link_close<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">const</span> p_close <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenConstructor</span><span class="token punctuation">(</span><span class="token string">"paragraph_close"</span><span class="token punctuation">,</span> <span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">return</span> <span class="token punctuation">{</span> p_open<span class="token punctuation">,</span> p_close <span class="token punctuation">}</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-39-4">Once I have my tokens, I can splce them into the token tree!</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-39/#code-skip-hello-day-39-3" id="skip-to-code-skip-hello-day-39-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Create skip link'</span><span class="token punctuation">)</span><br /><span class="token keyword">const</span> <span class="token punctuation">{</span> p_open<span class="token punctuation">,</span> p_close <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">createSkipLink</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>Token<span class="token punctuation">,</span> skipName<span class="token punctuation">)</span><br />tokens<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> p_close<span class="token punctuation">)</span><br />tokens<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> p_open<span class="token punctuation">)</span></code></pre>
<p id="code-skip-hello-day-39-3">Ok, apparently doing this drives the build process into an infinite loop? That's not great. What do I do now?</p>
<p>Ok, found the nesting info:</p>
<blockquote>
<p>Level change (number in {-1, 0, 1} set), where:</p>
<ul>
<li>1 means the tag is opening</li>
<li>0 means the tag is self-closing</li>
<li>-1 means the tag is closing</li>
</ul>
</blockquote>
<p>Got it. Well, fixing that doesn't seem to have fixed anything, still looping.</p>
<p>Let's <a href="https://github.com/markdown-it/markdown-it/blob/master/docs/architecture.md" target="_blank">read some docs I guess</a>!</p>
<p>Well <a href="https://markdown-it.github.io/" target="_blank">it looks like</a> I'm not supposed to put children on the paragraph token. In fact, it looks like it is supposed to be flat.</p>
<p>Ok tried:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-39/#code-skip-hello-day-39-2" id="skip-to-code-skip-hello-day-39-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">createSkipLink</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">TokenConstructor<span class="token punctuation">,</span> skipName</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">const</span> p_open <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenConstructor</span><span class="token punctuation">(</span><span class="token string">"paragraph_open"</span><span class="token punctuation">,</span> <span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token function">setAttr</span><span class="token punctuation">(</span>p_open<span class="token punctuation">,</span> <span class="token string">"class"</span><span class="token punctuation">,</span> <span class="token string">"skip-link-graf"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	p_open<span class="token punctuation">.</span>level <span class="token operator">=</span> <span class="token number">0</span><br />	<span class="token comment">// p_open.children = []</span><br />	<span class="token keyword">const</span> link_open <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenConstructor</span><span class="token punctuation">(</span><span class="token string">"link_open"</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token function">setAttr</span><span class="token punctuation">(</span>link_open<span class="token punctuation">,</span> <span class="token string">"href"</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>skipName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token function">setAttr</span><span class="token punctuation">(</span>link_open<span class="token punctuation">,</span> <span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">skip-to-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>skipName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token function">setAttr</span><span class="token punctuation">(</span>link_open<span class="token punctuation">,</span> <span class="token string">"class"</span><span class="token punctuation">,</span> <span class="token string">"skip-link"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	link_open<span class="token punctuation">.</span>level <span class="token operator">=</span> <span class="token number">1</span><br />	<span class="token comment">// p_open.children.push(link_open);</span><br />	<span class="token keyword">const</span> link_text <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenConstructor</span><span class="token punctuation">(</span><span class="token string">"text"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	link_text<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">"Skip code block &amp;#9660;"</span><br />	link_text<span class="token punctuation">.</span>level <span class="token operator">=</span> <span class="token number">2</span><br />	<span class="token comment">// p_open.children.push(link_text);</span><br />	<span class="token keyword">const</span> link_close <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenConstructor</span><span class="token punctuation">(</span><span class="token string">"link_close"</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	link_close<span class="token punctuation">.</span>level <span class="token operator">=</span> <span class="token number">1</span><br />	<span class="token comment">// p_open.children.push(link_close);</span><br />	<span class="token keyword">const</span> p_close <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenConstructor</span><span class="token punctuation">(</span><span class="token string">"paragraph_close"</span><span class="token punctuation">,</span> <span class="token string">"p"</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">return</span> <span class="token punctuation">{</span> p_open<span class="token punctuation">,</span> link_open<span class="token punctuation">,</span> link_text<span class="token punctuation">,</span> link_close<span class="token punctuation">,</span> p_close <span class="token punctuation">}</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-39-2">Still looping.</p>
<p>Ok, it is not my token making process, it's what happens when I splice the tokens into the chain.</p>
<p>Ok... so how <em>do</em> I add new tokens?</p>
<p>Ok, did some searching and <a href="https://docs.joshuatz.com/cheatsheets/node-and-npm/markdown-it/" target="_blank">maybe there are functions to handle this</a> on the <code>state</code> object?</p>
<p>Let's see what keys are available on the <code>state</code> object.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-39/#code-skip-hello-day-39-1" id="skip-to-code-skip-hello-day-39-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">[</span> <span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token string">'env'</span><span class="token punctuation">,</span> <span class="token string">'tokens'</span><span class="token punctuation">,</span> <span class="token string">'inlineMode'</span><span class="token punctuation">,</span> <span class="token string">'md'</span> <span class="token punctuation">]</span></code></pre>
<p id="code-skip-hello-day-39-1">Ok, not useful.</p>
<p>Ok, maybe it is an issue with a particular token? My approach <a href="https://github.com/valeriangalliat/markdown-it-anchor/issues/100" target="_blank">looks</a> like it should work. Let's see what we can add without the loop happening.</p>
<p>Oh, duh, ok the for loop is hitting the same item over and over again as new items are added above it. I'm dumb. I can <a href="https://github.com/markdown-it/markdown-it/blob/master/lib/rules_core/linkify.js#L39" target="_blank">take the approach from the linkify plugin</a> and just reverse it.</p>
<p>Oh, only now my little renderer hack for adding <code>_blank</code> targets to all the links is adding targets to the skip links which is bad. I can use the <code>meta</code> property of the tokens to note that these links are skip links and they should not be treated to <code>_blank</code> targeting.</p>
<p>Ok, looking good. It's working!</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/f0cf05c92218260c5f768cbe40aa6d60616fde9b" class="git-commit-link"><code>git commit -am &quot;Adding skip links to code blocks&quot;</code></a></p>
<p>Ok. So now I just need to give it some better styling!</p>
<p>Looking good enough for now! I may want to play with it a bit but this looks like a good place to stop.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/c786f12bc6709dfec2ed1104c0a078e3eb101a0e" class="git-commit-link"><code>git commit -am &quot;Finish day 39&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 38: Tag Level Pagination</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-38/?source=rss</link>
		<pubDate>Tue, 23 Nov 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-38/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?) - Yes it would be!</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a Things I Learned section to the project pages that are the things I learned from that specific project.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a technical reading log to the homepage</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank">Hide</a> empty sections.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add byline to post pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Have table of contents attach to sidebar bottom on mobile</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Support dark mode</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Social Icons</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> SEO/Social/JSON-LD HEAD data</p>
</li>
</ul>
<h2 id="day-38" tabindex="-1">Day 38</h2>
<p>Ok, as I listed in <a href="https://github.com/AramZS/devblog/issues/7" target="_blank">Issue 7</a> there are a few URL paths in my site that I don't want to see 404ing.</p>
<p>I thought this would be a pretty straightforward but it turned out to be harder than I thought, so instead of letting it go undocumented I figured I'd write it up.</p>
<h3 id="filling-in-fake-tags" tabindex="-1">Filling in &quot;Fake&quot; Tags</h3>
<p>Ok so I want a paginated list of all things tagged &quot;posts&quot; in a place other than the previously created <code>tag</code> structure. I can reuse the <code>tag</code> layout. But I'll need a new data structure to handle it.</p>
<p>I'm going to create a <code>postsPages</code> collection to fill <code>/posts/</code>.</p>
<p>I'll need to grab the <code>posts</code> collection with <code>collection.getFilteredByTag(&quot;posts&quot;)</code>.</p>
<p>Then I'll need to sort the collection into page-ready objects the same way I had done for <code>deepTagList</code>.</p>
<p>The first step is I'll define the form of the page object as a function.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-38/#code-skip-hello-day-38-11" id="skip-to-code-skip-hello-day-38-11" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">makePageObject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">tagName<span class="token punctuation">,</span> slug<span class="token punctuation">,</span> number<span class="token punctuation">,</span> posts<span class="token punctuation">,</span> first<span class="token punctuation">,</span> last</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />  <span class="token keyword">return</span> <span class="token punctuation">{</span><br />	tagName<span class="token operator">:</span> tagName<span class="token punctuation">,</span><br />	slug<span class="token operator">:</span> slug <span class="token operator">?</span> slug <span class="token operator">:</span> <span class="token function">slugify</span><span class="token punctuation">(</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br />	number<span class="token operator">:</span> number<span class="token punctuation">,</span><br />	posts<span class="token operator">:</span> posts<span class="token punctuation">,</span><br />	first<span class="token operator">:</span> first<span class="token punctuation">,</span><br />	last<span class="token operator">:</span> last<span class="token punctuation">,</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
<p data-wordfix="true" id="code-skip-hello-day-38-11">This is the object that I can handle via the Eleventy <a href="https://www.11ty.dev/docs/pagination/" target="_blank">paginate</a> process.</p>
<p>Next I want to get the posts per each page object. I want 10 per page and I'll again be using a similar process to the <code>deepTagList</code> in order to do so.</p>
<p>First a function to take a single array and turn it into an array of arrays, each containing the contents of my 10-post long page. I took this function straight from a Stack Overflow response.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-38/#code-skip-hello-day-38-10" id="skip-to-code-skip-hello-day-38-10" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><br /><span class="token keyword">const</span> <span class="token function-variable function">paginate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr<span class="token punctuation">,</span> size</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> val<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />		<span class="token keyword">let</span> idx <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>i <span class="token operator">/</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token keyword">let</span> page <span class="token operator">=</span> acc<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">(</span>acc<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />		page<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br />		<span class="token keyword">return</span> acc<span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span><br /></code></pre>
<p id="code-skip-hello-day-38-10">Now I have the tools to make the collection.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-38/#code-skip-hello-day-38-9" id="skip-to-code-skip-hello-day-38-9" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><br /><span class="token function-variable function">getPostClusters</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">allPosts<span class="token punctuation">,</span> tagName<span class="token punctuation">,</span> slug</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />  aSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token keyword">let</span> postArray <span class="token operator">=</span> allPosts<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />  aSet <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>postArray<span class="token punctuation">]</span><span class="token punctuation">;</span><br />  postArray <span class="token operator">=</span> <span class="token function">paginate</span><span class="token punctuation">(</span>aSet<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token keyword">let</span> paginatedPostArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br />  postArray<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />  	paginatedPostArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br />  		tagName<span class="token punctuation">,</span><br />  		slug<span class="token operator">:</span> slug <span class="token operator">?</span> slug <span class="token operator">:</span> <span class="token function">slugify</span><span class="token punctuation">(</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br />  		number<span class="token operator">:</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span><br />  		posts<span class="token operator">:</span> p<span class="token punctuation">,</span><br />  		first<span class="token operator">:</span> i <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">,</span><br />  		last<span class="token operator">:</span> i <span class="token operator">===</span> postArray<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span><br />  	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token comment">// console.log(paginatedPostArray)</span><br />  <span class="token keyword">return</span> paginatedPostArray<span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span><br /><br />eleventyConfig<span class="token punctuation">.</span><span class="token function">addCollection</span><span class="token punctuation">(</span><span class="token string">"postsPages"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">collection</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">return</span> <span class="token function">getPostClusters</span><span class="token punctuation">(</span>collection<span class="token punctuation">.</span><span class="token function">getFilteredByTag</span><span class="token punctuation">(</span><span class="token string">"posts"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Posts"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-38-9">I can use the exact same process to build a collection for projects.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-38/#code-skip-hello-day-38-8" id="skip-to-code-skip-hello-day-38-8" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">eleventyConfig<span class="token punctuation">.</span><span class="token function">addCollection</span><span class="token punctuation">(</span><span class="token string">"projectsPages"</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">collection</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">return</span> <span class="token function">getPostClusters</span><span class="token punctuation">(</span><br />		collection<span class="token punctuation">.</span><span class="token function">getFilteredByTag</span><span class="token punctuation">(</span><span class="token string">"projects"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br />		<span class="token string">"Projects"</span><br />	<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p data-wordfix="true" id="code-skip-hello-day-38-8">With these new collections I can build corresponding pages in Eleventy.</p>
<p>Posts:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-38/#code-skip-hello-day-38-7" id="skip-to-code-skip-hello-day-38-7" class="skip-link">Skip code block ▼</a></p>
<pre class="language-njk"><code class="language-njk">---<br />layout: tags<br />templateName: tag<br />eleventyExcludeFromCollections: true<br />pagination:<br />    data: collections.postsPages<br />    size: 1<br />    alias: paged<br />permalink: "posts/<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">if</span> paged<span class="token punctuation">.</span>number <span class="token operator">></span> <span class="token number">1</span> </span><span class="token templateTagBoundary template-tag-boundary">%}</span>{{ paged.number }}/<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endif </span><span class="token templateTagBoundary template-tag-boundary">%}</span>index.html"<br />eleventyComputed:<br />    title: "All Posts<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">if</span> paged<span class="token punctuation">.</span>number <span class="token operator">></span> <span class="token number">1</span> </span><span class="token templateTagBoundary template-tag-boundary">%}</span> | Page {{paged.number}}<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endif </span><span class="token templateTagBoundary template-tag-boundary">%}</span>"<br />    description: "Posts"<br />---</code></pre>
<p id="code-skip-hello-day-38-7">Projects:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-38/#code-skip-hello-day-38-6" id="skip-to-code-skip-hello-day-38-6" class="skip-link">Skip code block ▼</a></p>
<pre class="language-njk"><code class="language-njk">---<br />layout: tags<br />templateName: tag<br />eleventyExcludeFromCollections: true<br />pagination:<br />    data: collections.deepProjectPostsList<br />    size: 1<br />    alias: paged<br />permalink: "posts/projects/{{ paged.slug }}/<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">if</span> paged<span class="token punctuation">.</span>number <span class="token operator">></span> <span class="token number">1</span> </span><span class="token templateTagBoundary template-tag-boundary">%}</span>{{ paged.number }}/<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endif </span><span class="token templateTagBoundary template-tag-boundary">%}</span>index.html"<br />eleventyComputed:<br />    title: "Posts from Project: {{ paged.tagName }}<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">if</span> paged<span class="token punctuation">.</span>number <span class="token operator">></span> <span class="token number">1</span> </span><span class="token templateTagBoundary template-tag-boundary">%}</span> | Page {{paged.number}}<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endif </span><span class="token templateTagBoundary template-tag-boundary">%}</span>"<br />    description: "Project Posts tagged with {{ paged.tagName }}"<br />---</code></pre>
<p id="code-skip-hello-day-38-6">Now for the last step I need to generate pages to fill <code>posts/projects/projectName</code> pages.</p>
<p>Now I can query posts into collections by their project property. I can use my <code>projects</code> collection and filter posts based on matches.</p>
<p>Now, this is my second try. The first time I did this I screwed up because of two reasons. I forgot that it needed to be a flat array (that is one array of posts).</p>
<p>The other hard thing for me to wrap my mind around is that I don't need to separate each project into its own array or project.</p>
<p>So first I need to get the posts, separated out by projects.</p>
<p>It seems like the global data object isn't set up in <code>.eleventy.js</code>. So I'll need to import the object for use in this project with <code>const projectSet = require(&quot;./src/_data/projects&quot;);</code></p>
<p>Then I can use it to filter my posts by their project property.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-38/#code-skip-hello-day-38-5" id="skip-to-code-skip-hello-day-38-5" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> deepProjectPostList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br /><span class="token comment">// Run this for each of the projects in the `project` collection I build in my data file.</span><br />projectSet<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">project</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token comment">// Step into an individual project and only run this process for projects that have posts, otherwise we'll throw errors during the build process.</span><br />	<span class="token keyword">if</span> <span class="token punctuation">(</span>project<span class="token punctuation">.</span>count <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		<span class="token comment">// This gets all posts with the project tag, those that fall under the `src/posts/projects` folder.</span><br />		<span class="token keyword">let</span> allProjectPosts <span class="token operator">=</span> collection<span class="token punctuation">.</span><span class="token function">getFilteredByTag</span><span class="token punctuation">(</span><span class="token string">"projects"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token comment">// Now I'm going to use the filter function to return only those posts that match the project I've stepped into.</span><br />		<span class="token keyword">let</span> allPosts <span class="token operator">=</span> allProjectPosts<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />			<span class="token keyword">if</span> <span class="token punctuation">(</span>post<span class="token punctuation">.</span>data<span class="token punctuation">.</span>project <span class="token operator">==</span> project<span class="token punctuation">.</span>projectName<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br />			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br />			<span class="token punctuation">}</span><br />		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token comment">// Now I have an array of all the posts that are in this particular project, based on their project property. This isn't being called at the post level, and it is a new array anyway, so I seem to be safe to reverse it.</span><br />		allPosts<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token comment">// I take the set of all the project posts and turn it into page clusters.</span><br />		<span class="token keyword">const</span> postClusters <span class="token operator">=</span> <span class="token function">getPostClusters</span><span class="token punctuation">(</span><br />			allPosts<span class="token punctuation">,</span><br />			project<span class="token punctuation">.</span>projectName<span class="token punctuation">,</span><br />			project<span class="token punctuation">.</span>slug<br />		<span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token comment">// And I can put those clusters into an array.</span><br />		deepProjectPostList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><br />			<span class="token function">getPostClusters</span><span class="token punctuation">(</span>allPosts<span class="token punctuation">,</span> project<span class="token punctuation">.</span>projectName<span class="token punctuation">,</span> project<span class="token punctuation">.</span>slug<span class="token punctuation">)</span><br />		<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><br /><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-38-5">So now I have an array of pages. This is good, but too deep.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-38/#code-skip-hello-day-38-4" id="skip-to-code-skip-hello-day-38-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">[</span> <span class="token comment">// deepProjectPostList</span><br />	<span class="token punctuation">[</span> <span class="token comment">// Level of a project</span><br />		<span class="token punctuation">[</span> <span class="token comment">// a "page" of 10 posts</span><br /><br />		<span class="token punctuation">]</span><br />	<span class="token punctuation">]</span><br /><span class="token punctuation">]</span></code></pre>
<p data-wordfix="true" id="code-skip-hello-day-38-4">That's way too deep. Like I said earlier, my initial mistake was leaving this as is. I forgot that it needs to be one layer deep to work with how Eleventy does pagination.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-38/#code-skip-hello-day-38-3" id="skip-to-code-skip-hello-day-38-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> pagedDeepProjectList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br />deepProjectPostList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">projectCluster</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token comment">// Inside each projectCluster array is a set of "pages" each with this object.</span><br />	<span class="token comment">/**<br />	 * 	tagName,<br />		slug: slug ? slug : slugify(tagName.toLowerCase()),<br />		number: i + 1,<br />		posts: p,<br />		first: i === 0,<br />		last: i === postArray.length - 1,<br />	*/</span><br />	pagedDeepProjectList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>projectCluster<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-38-3">So I can use the spread operator here! Makes it much easier. This takes the array of arrays and pulls out the inner array and delivers it into the single level array I intend to use.</p>
<p>The end result is a much simpler array that can work with the page functionality.</p>
<p>Now I have an array of objects that look like this:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-38/#code-skip-hello-day-38-2" id="skip-to-code-skip-hello-day-38-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">[</span><br />	<span class="token punctuation">{</span><br />	 	tagName<span class="token punctuation">,</span><br />		slug<span class="token operator">:</span> slug<span class="token punctuation">,</span><br />		number<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><br />		posts<span class="token operator">:</span> postsObject<span class="token punctuation">,</span><br />		first<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />		last<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />	<span class="token punctuation">}</span><br />	<span class="token operator">...</span><br /><span class="token punctuation">]</span></code></pre>
<p id="code-skip-hello-day-38-2"><a target="_blank" href="https://github.com/AramZS/devblog/commit/0c930f0c719377b204c0919ac83d5eb340261dce" class="git-commit-link"><code>git commit -am &quot;Trying to figure out the project pages&quot;</code></a></p>
<p>See I forgot that I control the permalink structure not through the structures in the array, but the objects. So I can now take this array and use it to generate any number of paged collections at <code>/posts/projects/projectSlug/</code>. So now I can use this new collection with this <code>md</code> file:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-38/#code-skip-hello-day-38-1" id="skip-to-code-skip-hello-day-38-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-njk"><code class="language-njk">---<br />layout: tags<br />templateName: tag<br />eleventyExcludeFromCollections: true<br />pagination:<br />    data: collections.deepProjectPostsList<br />    size: 1<br />    alias: paged<br />permalink: "posts/projects/{{ paged.slug }}/<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">if</span> paged<span class="token punctuation">.</span>number <span class="token operator">></span> <span class="token number">1</span> </span><span class="token templateTagBoundary template-tag-boundary">%}</span>{{ paged.number }}/<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endif </span><span class="token templateTagBoundary template-tag-boundary">%}</span>index.html"<br />eleventyComputed:<br />    title: "Posts from Project: {{ paged.tagName }}<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">if</span> paged<span class="token punctuation">.</span>number <span class="token operator">></span> <span class="token number">1</span> </span><span class="token templateTagBoundary template-tag-boundary">%}</span> | Page {{paged.number}}<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endif </span><span class="token templateTagBoundary template-tag-boundary">%}</span>"<br />    description: "Project Posts tagged with {{ paged.tagName }}"<br />---</code></pre>
<p id="code-skip-hello-day-38-1"><a target="_blank" href="https://github.com/AramZS/devblog/commit/0c930f0c719377b204c0919ac83d5eb340261dce" class="git-commit-link"><code>git commit -am &quot;Trying to figure out the project pages&quot;</code></a></p>
<p>And this should resolve Issue 7!</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/0ce4a9689d154be15876bd3190fd39ba8a0899a7" class="git-commit-link"><code>git commit -am &quot;Finish off day 38 and resolve #7&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 37: Markdown It in it's Environment</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-37/?source=rss</link>
		<pubDate>Thu, 18 Nov 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-37/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?) - Yes it would be!</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a Things I Learned section to the project pages that are the things I learned from that specific project.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a technical reading log to the homepage</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank">Hide</a> empty sections.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add byline to post pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Have table of contents attach to sidebar bottom on mobile</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Support dark mode</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Social Icons</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> SEO/Social/JSON-LD HEAD data</p>
</li>
</ul>
<h2 id="day-37" tabindex="-1">Day 37</h2>
<p>Ok,so I need to apply the rules properly.</p>
<p>First, let's see what rules exist:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-37/#code-skip-hello-day-37-16" id="skip-to-code-skip-hello-day-37-16" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>md<span class="token punctuation">.</span>core<span class="token punctuation">.</span>ruler<span class="token punctuation">)</span></code></pre>
<p id="code-skip-hello-day-37-16">Ok:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-37/#code-skip-hello-day-37-15" id="skip-to-code-skip-hello-day-37-15" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">Ruler <span class="token punctuation">{</span><br />  __rules__<span class="token operator">:</span> <span class="token punctuation">[</span><br />    <span class="token punctuation">{</span><br />      name<span class="token operator">:</span> <span class="token string">'normalize'</span><span class="token punctuation">,</span><br />      enabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />      fn<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> normalize<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      alt<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'block'</span><span class="token punctuation">,</span> enabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> fn<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> block<span class="token punctuation">]</span><span class="token punctuation">,</span> alt<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'inline'</span><span class="token punctuation">,</span> enabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> fn<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> inline<span class="token punctuation">]</span><span class="token punctuation">,</span> alt<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    <span class="token punctuation">{</span><br />      name<span class="token operator">:</span> <span class="token string">'short-phrase-fixer'</span><span class="token punctuation">,</span><br />      enabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />      fn<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />      alt<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    <span class="token punctuation">{</span><br />      name<span class="token operator">:</span> <span class="token string">'evernote-todo'</span><span class="token punctuation">,</span><br />      enabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />      fn<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />      alt<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    <span class="token punctuation">{</span><br />      name<span class="token operator">:</span> <span class="token string">'replace-link'</span><span class="token punctuation">,</span><br />      enabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />      fn<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />      alt<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    <span class="token punctuation">{</span><br />      name<span class="token operator">:</span> <span class="token string">'linkify'</span><span class="token punctuation">,</span><br />      enabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />      fn<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> linkify<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      alt<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    <span class="token punctuation">{</span><br />      name<span class="token operator">:</span> <span class="token string">'replacements'</span><span class="token punctuation">,</span><br />      enabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />      fn<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> replace<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      alt<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    <span class="token punctuation">{</span><br />      name<span class="token operator">:</span> <span class="token string">'smartquotes'</span><span class="token punctuation">,</span><br />      enabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />      fn<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> smartquotes<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      alt<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    <span class="token punctuation">{</span><br />      name<span class="token operator">:</span> <span class="token string">'anchor'</span><span class="token punctuation">,</span><br />      enabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />      fn<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />      alt<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br />    <span class="token punctuation">}</span><br />  <span class="token punctuation">]</span><span class="token punctuation">,</span><br />  __cache__<span class="token operator">:</span> <span class="token keyword">null</span><br /><span class="token punctuation">}</span></code></pre>
<h3 id="finding-the-inline-token" tabindex="-1">Finding the inline token</h3>
<p id="code-skip-hello-day-37-15">Ok, so I need to set up a token type starting with inline. Let's try and match the right token:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-37/#code-skip-hello-day-37-14" id="skip-to-code-skip-hello-day-37-14" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> testPattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=git commit \-am [\"|\'])(.*)(?=[\"|\'])</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span><br /><br /><span class="token comment">// console.dir(md.core.ruler)</span><br />md<span class="token punctuation">.</span>core<span class="token punctuation">.</span>ruler<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token string">'inline'</span><span class="token punctuation">,</span> <span class="token string">'git_commit'</span><span class="token punctuation">,</span> <span class="token parameter">state</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />  <span class="token keyword">const</span> tokens <span class="token operator">=</span> state<span class="token punctuation">.</span>tokens<br />  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tokens<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />  	<span class="token keyword">if</span> <span class="token punctuation">(</span>testPattern<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />  		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'tokens round 1: '</span><span class="token punctuation">,</span> tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><br />  	<span class="token punctuation">}</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p id="code-skip-hello-day-37-14">Results:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-37/#code-skip-hello-day-37-13" id="skip-to-code-skip-hello-day-37-13" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"> Token <span class="token punctuation">{</span><br />  type<span class="token operator">:</span> <span class="token string">'inline'</span><span class="token punctuation">,</span><br />  tag<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />  attrs<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />  map<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">143</span><span class="token punctuation">,</span> <span class="token number">144</span> <span class="token punctuation">]</span><span class="token punctuation">,</span><br />  nesting<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />  level<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><br />  children<span class="token operator">:</span> <span class="token punctuation">[</span><br />    Token <span class="token punctuation">{</span><br />      type<span class="token operator">:</span> <span class="token string">'code_inline'</span><span class="token punctuation">,</span><br />      tag<span class="token operator">:</span> <span class="token string">'code'</span><span class="token punctuation">,</span><br />      attrs<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      map<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      nesting<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />      level<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />      children<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      content<span class="token operator">:</span> <span class="token string">'git commit -am "Get macros in the mix."'</span><span class="token punctuation">,</span><br />      markup<span class="token operator">:</span> <span class="token string">'`'</span><span class="token punctuation">,</span><br />      info<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      meta<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      block<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />      hidden<span class="token operator">:</span> <span class="token boolean">false</span><br />    <span class="token punctuation">}</span><br />  <span class="token punctuation">]</span><span class="token punctuation">,</span><br />  content<span class="token operator">:</span> <span class="token string">'`git commit -am "Get macros in the mix."`'</span><span class="token punctuation">,</span><br />  markup<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />  info<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />  meta<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />  block<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />  hidden<span class="token operator">:</span> <span class="token boolean">false</span><br /><span class="token punctuation">}</span></code></pre>
<h3 id="markdown-it-state-obj" tabindex="-1">Markdown-it State Obj</h3>
<p id="code-skip-hello-day-37-13">Good to know, ok, what is in this state object anyway?</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-37/#code-skip-hello-day-37-12" id="skip-to-code-skip-hello-day-37-12" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">StateCore <span class="token punctuation">{</span><br />  src<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />  env<span class="token operator">:</span> <span class="token punctuation">{</span><br />    defaults<span class="token operator">:</span> <span class="token punctuation">{</span> layout<span class="token operator">:</span> <span class="token string">'default.njk'</span><span class="token punctuation">,</span> description<span class="token operator">:</span> <span class="token string">'Talking about code'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    description<span class="token operator">:</span> <span class="token string">'Posts tagged with Markdown-It'</span><span class="token punctuation">,</span><br />    layout<span class="token operator">:</span> <span class="token string">'tags'</span><span class="token punctuation">,</span><br />    projects<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">,</span><br />    site<span class="token operator">:</span> <span class="token punctuation">{</span><br />      lang<span class="token operator">:</span> <span class="token string">'en-US'</span><span class="token punctuation">,</span><br />      github<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      site_url<span class="token operator">:</span> <span class="token string">'http://localhost:8080'</span><span class="token punctuation">,</span><br />      site_name<span class="token operator">:</span> <span class="token string">'Fight With Tools: A Dev Blog'</span><span class="token punctuation">,</span><br />      description<span class="token operator">:</span> <span class="token string">'A site opening up my development process to all.'</span><span class="token punctuation">,</span><br />      featuredImage<span class="token operator">:</span> <span class="token string">'nyc_noir.jpg'</span><span class="token punctuation">,</span><br />      aramPhoto<span class="token operator">:</span> <span class="token string">'https://raw.githubusercontent.com/AramZS/aramzs.github.io/master/_includes/Aram-Zucker-Scharff-square.jpg'</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    pkg<span class="token operator">:</span> <span class="token punctuation">{</span><br />      name<span class="token operator">:</span> <span class="token string">'fightwithtooldev'</span><span class="token punctuation">,</span><br />      version<span class="token operator">:</span> <span class="token string">'1.0.0'</span><span class="token punctuation">,</span><br />      description<span class="token operator">:</span> <span class="token string">"This is the repo for Aram ZS's developer notes and log, keeping track of code experiments and decisions."</span><span class="token punctuation">,</span><br />      main<span class="token operator">:</span> <span class="token string">'index.js'</span><span class="token punctuation">,</span><br />      scripts<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      keywords<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />      author<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      license<span class="token operator">:</span> <span class="token string">'ISC'</span><span class="token punctuation">,</span><br />      devDependencies<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      dependencies<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    templateName<span class="token operator">:</span> <span class="token string">'tag'</span><span class="token punctuation">,</span><br />    eleventyExcludeFromCollections<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />    pagination<span class="token operator">:</span> <span class="token punctuation">{</span><br />      data<span class="token operator">:</span> <span class="token string">'collections.deepTagList'</span><span class="token punctuation">,</span><br />      size<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><br />      alias<span class="token operator">:</span> <span class="token string">'paged'</span><span class="token punctuation">,</span><br />      pages<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      page<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      items<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      pageNumber<span class="token operator">:</span> <span class="token number">37</span><span class="token punctuation">,</span><br />      previousPageLink<span class="token operator">:</span> <span class="token string">'/tag/smo/index.html'</span><span class="token punctuation">,</span><br />      previous<span class="token operator">:</span> <span class="token string">'/tag/smo/index.html'</span><span class="token punctuation">,</span><br />      nextPageLink<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      next<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      firstPageLink<span class="token operator">:</span> <span class="token string">'/tag/blogroll/index.html'</span><span class="token punctuation">,</span><br />      lastPageLink<span class="token operator">:</span> <span class="token string">'/tag/markdown-it/index.html'</span><span class="token punctuation">,</span><br />      links<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      pageLinks<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      previousPageHref<span class="token operator">:</span> <span class="token string">'/tag/smo/'</span><span class="token punctuation">,</span><br />      nextPageHref<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      firstPageHref<span class="token operator">:</span> <span class="token string">'/tag/blogroll/'</span><span class="token punctuation">,</span><br />      lastPageHref<span class="token operator">:</span> <span class="token string">'/tag/markdown-it/'</span><span class="token punctuation">,</span><br />      hrefs<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      href<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    permalink<span class="token operator">:</span> <span class="token string">'tag/{{ paged.tagName | slug }}/{% if paged.number > 1 %}{{ paged.number }}/{% endif %}index.html'</span><span class="token punctuation">,</span><br />    eleventyComputed<span class="token operator">:</span> <span class="token punctuation">{</span><br />      title<span class="token operator">:</span> <span class="token string">'Tag: {{ paged.tagName }}{% if paged.number > 1 %} | Page {{paged.number}}{% endif %}'</span><span class="token punctuation">,</span><br />      description<span class="token operator">:</span> <span class="token string">'Posts tagged with {{ paged.tagName }}'</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    page<span class="token operator">:</span> <span class="token punctuation">{</span><br />      date<span class="token operator">:</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">13</span>T22<span class="token operator">:</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">01.651</span>Z<span class="token punctuation">,</span><br />      inputPath<span class="token operator">:</span> <span class="token string">'./src/tags-pages.md'</span><span class="token punctuation">,</span><br />      fileSlug<span class="token operator">:</span> <span class="token string">'tags-pages'</span><span class="token punctuation">,</span><br />      filePathStem<span class="token operator">:</span> <span class="token string">'/tags-pages'</span><span class="token punctuation">,</span><br />      url<span class="token operator">:</span> <span class="token string">'/tag/markdown-it/'</span><span class="token punctuation">,</span><br />      outputPath<span class="token operator">:</span> <span class="token string">'docs/tag/markdown-it/index.html'</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    paged<span class="token operator">:</span> <span class="token punctuation">{</span><br />      tagName<span class="token operator">:</span> <span class="token string">'Markdown-It'</span><span class="token punctuation">,</span><br />      number<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><br />      posts<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      first<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />      last<span class="token operator">:</span> <span class="token boolean">true</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    title<span class="token operator">:</span> <span class="token string">'Tag: Markdown-It'</span><span class="token punctuation">,</span><br />    collections<span class="token operator">:</span> <span class="token punctuation">{</span><br />      all<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      blogroll<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      <span class="token string">'Personal Blog'</span><span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      links<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      <span class="token string">'Tech Critical'</span><span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      Blockchain<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      Cryptocurrency<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      <span class="token string">'Code Reference'</span><span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      <span class="token string">'Ad Tech'</span><span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      <span class="token string">'BAd Tech'</span><span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      <span class="token string">'Broken By Design'</span><span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      posts<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      projects<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      Starters<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      <span class="token string">'11ty'</span><span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      Node<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      Sass<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      WiP<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      <span class="token string">'Github Actions'</span><span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      <span class="token constant">GPC</span><span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      <span class="token constant">CSS</span><span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      Aggregation<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      <span class="token constant">SEO</span><span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      <span class="token constant">SMO</span><span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      <span class="token string">'Markdown-It'</span><span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      tagList<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      deepTagList<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><br />    <span class="token punctuation">}</span><br />  <span class="token punctuation">}</span><span class="token punctuation">,</span><br />  tokens<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />  inlineMode<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />  md<span class="token operator">:</span> MarkdownIt <span class="token punctuation">{</span><br />    inline<span class="token operator">:</span> ParserInline <span class="token punctuation">{</span> ruler<span class="token operator">:</span> <span class="token punctuation">[</span>Ruler<span class="token punctuation">]</span><span class="token punctuation">,</span> ruler2<span class="token operator">:</span> <span class="token punctuation">[</span>Ruler<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    block<span class="token operator">:</span> ParserBlock <span class="token punctuation">{</span> ruler<span class="token operator">:</span> <span class="token punctuation">[</span>Ruler<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    core<span class="token operator">:</span> Core <span class="token punctuation">{</span> ruler<span class="token operator">:</span> <span class="token punctuation">[</span>Ruler<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    renderer<span class="token operator">:</span> Renderer <span class="token punctuation">{</span> rules<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    linkify<span class="token operator">:</span> LinkifyIt <span class="token punctuation">{</span><br />      __opts__<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      __index__<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><br />      __last_index__<span class="token operator">:</span> <span class="token number">29</span><span class="token punctuation">,</span><br />      __schema__<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      __text_cache__<span class="token operator">:</span> <span class="token string">'Especially with the variable name in the '</span><span class="token punctuation">,</span><br />      __schemas__<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      __compiled__<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      __tlds__<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      __tlds_replaced__<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />      re<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    validateLink<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> validateLink<span class="token punctuation">]</span><span class="token punctuation">,</span><br />    normalizeLink<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> normalizeLink<span class="token punctuation">]</span><span class="token punctuation">,</span><br />    normalizeLinkText<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> normalizeLinkText<span class="token punctuation">]</span><span class="token punctuation">,</span><br />    utils<span class="token operator">:</span> <span class="token punctuation">{</span><br />      lib<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      assign<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> assign<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      isString<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> isString<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      has<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> has<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      unescapeMd<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> unescapeMd<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      unescapeAll<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> unescapeAll<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      isValidEntityCode<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> isValidEntityCode<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      fromCodePoint<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> fromCodePoint<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      escapeHtml<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> escapeHtml<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      arrayReplaceAt<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> arrayReplaceAt<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      isSpace<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> isSpace<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      isWhiteSpace<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> isWhiteSpace<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      isMdAsciiPunct<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> isMdAsciiPunct<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      isPunctChar<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> isPunctChar<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      escapeRE<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> escapeRE<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      normalizeReference<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> normalizeReference<span class="token punctuation">]</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    helpers<span class="token operator">:</span> <span class="token punctuation">{</span><br />      parseLinkLabel<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> parseLinkLabel<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      parseLinkDestination<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> parseLinkDestination<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      parseLinkTitle<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> parseLinkTitle<span class="token punctuation">]</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    options<span class="token operator">:</span> <span class="token punctuation">{</span><br />      html<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />      xhtmlOut<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />      breaks<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />      langPrefix<span class="token operator">:</span> <span class="token string">'language-'</span><span class="token punctuation">,</span><br />      linkify<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />      typographer<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />      quotes<span class="token operator">:</span> <span class="token string">'“”‘’'</span><span class="token punctuation">,</span><br />      highlight<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">Function</span> <span class="token punctuation">(</span>anonymous<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />      maxNesting<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span><br />      replaceLink<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token operator">:</span> replaceLink<span class="token punctuation">]</span><br />    <span class="token punctuation">}</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-37-12">Oh, look at that. Everything I need to handle it at the rule level, instead of the <code>rerender</code> process!</p>
<p>Ok, so now I can make a plugin pretty similar to the one I did before.</p>
<h3 id="searching-for-git-commit-via-api" tabindex="-1">Searching for git commit via API</h3>
<p>I can find the commit message by searching through <code>inline</code> tokens, and pull the repo out of <code>state.env.repo</code>. I can then pull the commit message out of the inline token's <code>content</code> and use it with Octokit to search for the repo. The API query results in a <code>data</code> object with an <code>items</code> property that returns an array that looks like:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-37/#code-skip-hello-day-37-11" id="skip-to-code-skip-hello-day-37-11" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">[</span><br />  <span class="token punctuation">{</span><br />    url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/commits/29ae79850439397742e0b7147a0fd9b5683058a4'</span><span class="token punctuation">,</span><br />    sha<span class="token operator">:</span> <span class="token string">'29ae79850439397742e0b7147a0fd9b5683058a4'</span><span class="token punctuation">,</span><br />    node_id<span class="token operator">:</span> <span class="token string">'MDY6Q29tbWl0Mzc2NzA2MzI2OjI5YWU3OTg1MDQzOTM5Nzc0MmUwYjcxNDdhMGZkOWI1NjgzMDU4YTQ='</span><span class="token punctuation">,</span><br />    html_url<span class="token operator">:</span> <span class="token string">'https://github.com/AramZS/devblog/commit/29ae79850439397742e0b7147a0fd9b5683058a4'</span><span class="token punctuation">,</span><br />    comments_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/commits/29ae79850439397742e0b7147a0fd9b5683058a4/comments'</span><span class="token punctuation">,</span><br />    commit<span class="token operator">:</span> <span class="token punctuation">{</span><br />      url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/git/commits/29ae79850439397742e0b7147a0fd9b5683058a4'</span><span class="token punctuation">,</span><br />      author<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      committer<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      message<span class="token operator">:</span> <span class="token string">'Set up blogroll and links and write up day 26'</span><span class="token punctuation">,</span><br />      tree<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      comment_count<span class="token operator">:</span> <span class="token number">0</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    author<span class="token operator">:</span> <span class="token punctuation">{</span><br />      login<span class="token operator">:</span> <span class="token string">'AramZS'</span><span class="token punctuation">,</span><br />      id<span class="token operator">:</span> <span class="token number">748069</span><span class="token punctuation">,</span><br />      node_id<span class="token operator">:</span> <span class="token string">'MDQ6VXNlcjc0ODA2OQ=='</span><span class="token punctuation">,</span><br />      avatar_url<span class="token operator">:</span> <span class="token string">'https://avatars.githubusercontent.com/u/748069?v=4'</span><span class="token punctuation">,</span><br />      gravatar_id<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS'</span><span class="token punctuation">,</span><br />      html_url<span class="token operator">:</span> <span class="token string">'https://github.com/AramZS'</span><span class="token punctuation">,</span><br />      followers_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS/followers'</span><span class="token punctuation">,</span><br />      following_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS/following{/other_user}'</span><span class="token punctuation">,</span><br />      gists_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS/gists{/gist_id}'</span><span class="token punctuation">,</span><br />      starred_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS/starred{/owner}{/repo}'</span><span class="token punctuation">,</span><br />      subscriptions_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS/subscriptions'</span><span class="token punctuation">,</span><br />      organizations_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS/orgs'</span><span class="token punctuation">,</span><br />      repos_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS/repos'</span><span class="token punctuation">,</span><br />      events_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS/events{/privacy}'</span><span class="token punctuation">,</span><br />      received_events_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS/received_events'</span><span class="token punctuation">,</span><br />      type<span class="token operator">:</span> <span class="token string">'User'</span><span class="token punctuation">,</span><br />      site_admin<span class="token operator">:</span> <span class="token boolean">false</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    committer<span class="token operator">:</span> <span class="token punctuation">{</span><br />      login<span class="token operator">:</span> <span class="token string">'AramZS'</span><span class="token punctuation">,</span><br />      id<span class="token operator">:</span> <span class="token number">748069</span><span class="token punctuation">,</span><br />      node_id<span class="token operator">:</span> <span class="token string">'MDQ6VXNlcjc0ODA2OQ=='</span><span class="token punctuation">,</span><br />      avatar_url<span class="token operator">:</span> <span class="token string">'https://avatars.githubusercontent.com/u/748069?v=4'</span><span class="token punctuation">,</span><br />      gravatar_id<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS'</span><span class="token punctuation">,</span><br />      html_url<span class="token operator">:</span> <span class="token string">'https://github.com/AramZS'</span><span class="token punctuation">,</span><br />      followers_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS/followers'</span><span class="token punctuation">,</span><br />      following_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS/following{/other_user}'</span><span class="token punctuation">,</span><br />      gists_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS/gists{/gist_id}'</span><span class="token punctuation">,</span><br />      starred_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS/starred{/owner}{/repo}'</span><span class="token punctuation">,</span><br />      subscriptions_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS/subscriptions'</span><span class="token punctuation">,</span><br />      organizations_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS/orgs'</span><span class="token punctuation">,</span><br />      repos_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS/repos'</span><span class="token punctuation">,</span><br />      events_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS/events{/privacy}'</span><span class="token punctuation">,</span><br />      received_events_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/users/AramZS/received_events'</span><span class="token punctuation">,</span><br />      type<span class="token operator">:</span> <span class="token string">'User'</span><span class="token punctuation">,</span><br />      site_admin<span class="token operator">:</span> <span class="token boolean">false</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    parents<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">,</span><br />    repository<span class="token operator">:</span> <span class="token punctuation">{</span><br />      id<span class="token operator">:</span> <span class="token number">376706326</span><span class="token punctuation">,</span><br />      node_id<span class="token operator">:</span> <span class="token string">'MDEwOlJlcG9zaXRvcnkzNzY3MDYzMjY='</span><span class="token punctuation">,</span><br />      name<span class="token operator">:</span> <span class="token string">'devblog'</span><span class="token punctuation">,</span><br />      full_name<span class="token operator">:</span> <span class="token string">'AramZS/devblog'</span><span class="token punctuation">,</span><br />      <span class="token keyword">private</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />      owner<span class="token operator">:</span> <span class="token punctuation">[</span>Object<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      html_url<span class="token operator">:</span> <span class="token string">'https://github.com/AramZS/devblog'</span><span class="token punctuation">,</span><br />      description<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      fork<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />      url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog'</span><span class="token punctuation">,</span><br />      forks_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/forks'</span><span class="token punctuation">,</span><br />      keys_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/keys{/key_id}'</span><span class="token punctuation">,</span><br />      collaborators_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/collaborators{/collaborator}'</span><span class="token punctuation">,</span><br />      teams_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/teams'</span><span class="token punctuation">,</span><br />      hooks_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/hooks'</span><span class="token punctuation">,</span><br />      issue_events_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/issues/events{/number}'</span><span class="token punctuation">,</span><br />      events_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/events'</span><span class="token punctuation">,</span><br />      assignees_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/assignees{/user}'</span><span class="token punctuation">,</span><br />      branches_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/branches{/branch}'</span><span class="token punctuation">,</span><br />      tags_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/tags'</span><span class="token punctuation">,</span><br />      blobs_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/git/blobs{/sha}'</span><span class="token punctuation">,</span><br />      git_tags_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/git/tags{/sha}'</span><span class="token punctuation">,</span><br />      git_refs_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/git/refs{/sha}'</span><span class="token punctuation">,</span><br />      trees_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/git/trees{/sha}'</span><span class="token punctuation">,</span><br />      statuses_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/statuses/{sha}'</span><span class="token punctuation">,</span><br />      languages_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/languages'</span><span class="token punctuation">,</span><br />      stargazers_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/stargazers'</span><span class="token punctuation">,</span><br />      contributors_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/contributors'</span><span class="token punctuation">,</span><br />      subscribers_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/subscribers'</span><span class="token punctuation">,</span><br />      subscription_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/subscription'</span><span class="token punctuation">,</span><br />      commits_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/commits{/sha}'</span><span class="token punctuation">,</span><br />      git_commits_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/git/commits{/sha}'</span><span class="token punctuation">,</span><br />      comments_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/comments{/number}'</span><span class="token punctuation">,</span><br />      issue_comment_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/issues/comments{/number}'</span><span class="token punctuation">,</span><br />      contents_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/contents/{+path}'</span><span class="token punctuation">,</span><br />      compare_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/compare/{base}...{head}'</span><span class="token punctuation">,</span><br />      merges_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/merges'</span><span class="token punctuation">,</span><br />      archive_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/{archive_format}{/ref}'</span><span class="token punctuation">,</span><br />      downloads_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/downloads'</span><span class="token punctuation">,</span><br />      issues_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/issues{/number}'</span><span class="token punctuation">,</span><br />      pulls_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/pulls{/number}'</span><span class="token punctuation">,</span><br />      milestones_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/milestones{/number}'</span><span class="token punctuation">,</span><br />      notifications_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/notifications{?since,all,participating}'</span><span class="token punctuation">,</span><br />      labels_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/labels{/name}'</span><span class="token punctuation">,</span><br />      releases_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/releases{/id}'</span><span class="token punctuation">,</span><br />      deployments_url<span class="token operator">:</span> <span class="token string">'https://api.github.com/repos/AramZS/devblog/deployments'</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    score<span class="token operator">:</span> <span class="token number">1</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">]</span></code></pre>
<p data-wordfix="true" id="code-skip-hello-day-37-11">So what I need is definitely in there. Now I just need to figure out how to get it out of the async request on on to my new token.</p>
<h3 id="caching-commit-links" tabindex="-1">Caching Commit Links</h3>
<p data-wordfix="true">Hmm, <a href="https://github.com/markdown-it/markdown-it/blob/master/docs/development.md#i-need-async-rule-how-to-do-it" target="_blank">it looks like getting the async data into there is going to be the most complex part</a>. The right answer has to be caching, and it looks like there is <a href="https://www.11ty.dev/docs/plugins/cache/" target="_blank">an Eleventy native tool for that</a>, but I think that might be overkill. Especially because I want something I <em>can</em> save as basically a static file, since this won't be changing. Also, the Eleventy plugin won't work because it is still async. This means I'm basically required to handle this as a file. Also, need to watch out as if I write to the directory I'm watching, I may end up triggering the watch in a loop.</p>
<p>Another thing I'll need to be careful of when caching this data is if I'm automatically creating files, I should likely be using the query as a file key, that query may contain characters not safe for file names, so I'll need to pull something in to handle sanitization.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-37/#code-skip-hello-day-37-10" id="skip-to-code-skip-hello-day-37-10" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> sanitizeFilename <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"sanitize-filename"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-37-10">Ok, so let's start putting it down.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-37/#code-skip-hello-day-37-9" id="skip-to-code-skip-hello-day-37-9" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">commit_pattern</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">return</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=git commit \-am [\"|\'])(.+)(?=[\"|\'])</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><span class="token comment">// I can get the "repo" from the post object</span><br /><span class="token comment">// Then I need to change the commit message I captured</span><br /><span class="token comment">// Queries don't allow spaces, so replace them with "+"</span><br /><span class="token keyword">const</span> <span class="token function-variable function">gitSearchQuery</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">repo<span class="token punctuation">,</span> commitMsg</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">const</span> searchCommitMsg <span class="token operator">=</span> commitMsg<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">,</span> <span class="token string">"+"</span><span class="token punctuation">)</span><br />	<span class="token keyword">const</span> repoName <span class="token operator">=</span> repo<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"https://github.com/"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><br />	<span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">repo:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>repoName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">+</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>searchCommitMsg<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-37-9">Now let's create a function to figure out the path to the new cache folder.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-37/#code-skip-hello-day-37-8" id="skip-to-code-skip-hello-day-37-8" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">cacheFilePath</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">pageFilePath<span class="token punctuation">,</span> searchKey</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">const</span> cacheFolder <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"../../"</span><span class="token punctuation">,</span> <span class="token string">'/_queryCache'</span><span class="token punctuation">,</span> pageFilePath<span class="token punctuation">)</span><br />	<span class="token keyword">const</span> cacheFile <span class="token operator">=</span> cacheFolder<span class="token operator">+</span><span class="token function">sanitizeFilename</span><span class="token punctuation">(</span><span class="token function">slugify</span><span class="token punctuation">(</span>searchKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br />	<span class="token comment">// console.log('cacheFile: ', cacheFile)</span><br />	<span class="token keyword">return</span> <span class="token punctuation">{</span> cacheFolder<span class="token punctuation">,</span> cacheFile <span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-37-8">I can use <code>fs.accessSync</code> to check if the file exists before creating a cache. After all I don't want to query GitHub every time I do a build. So we can use this in the process to find the repo commit link.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-37/#code-skip-hello-day-37-7" id="skip-to-code-skip-hello-day-37-7" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">getLinkToRepo</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">repo<span class="token punctuation">,</span> commitMsg<span class="token punctuation">,</span> pageFilePath</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">const</span> searchKey <span class="token operator">=</span> <span class="token function">gitSearchQuery</span><span class="token punctuation">(</span>repo<span class="token punctuation">,</span> commitMsg<span class="token punctuation">)</span><br />	<span class="token keyword">const</span> <span class="token punctuation">{</span>cacheFolder<span class="token punctuation">,</span> cacheFile<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">cacheFilePath</span><span class="token punctuation">(</span>pageFilePath<span class="token punctuation">,</span> searchKey<span class="token punctuation">)</span><br />	<span class="token keyword">try</span> <span class="token punctuation">{</span><br />		fs<span class="token punctuation">.</span><span class="token function">accessSync</span><span class="token punctuation">(</span>cacheFile<span class="token punctuation">,</span> fs<span class="token punctuation">.</span>constants<span class="token punctuation">.</span><span class="token constant">F_OK</span><span class="token punctuation">)</span><br />		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-37-7">If it exists the function ends here and returns true.</p>
<p>But when we know the file doesn't exist we will have to continue using the <code>catch</code>. I'll make a request to GitHub using Octokit. I'm pretty much skipping over how I set up Octokit because this is basically the boilerplate.</p>
<p>The only thing that I have added into the mix here is to get my Github Key using the environment. Locally I'll use DotEnv <code>require('dotenv').config()</code>. But I'll have to figure out how to handle it on GitHub next. And I get the searchKey using my above function <code>gitSearchQuery</code>.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-37/#code-skip-hello-day-37-6" id="skip-to-code-skip-hello-day-37-6" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Query is not cached: '</span><span class="token punctuation">,</span> cacheFile<span class="token punctuation">,</span> e<span class="token punctuation">)</span><br />		<span class="token keyword">const</span> MyOctokit <span class="token operator">=</span> Octokit<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span>retry<span class="token punctuation">,</span> throttling<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br />		<span class="token keyword">const</span> myOctokit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyOctokit</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br />		auth<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">GITHUB_KEY</span><span class="token punctuation">,</span><br />		throttle<span class="token operator">:</span> <span class="token punctuation">{</span><br />			<span class="token function-variable function">onRateLimit</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">retryAfter<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />			myOctokit<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><br />				<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Request quota exhausted for request </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>method<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><br />			<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br />			<span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>request<span class="token punctuation">.</span>retryCount <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />				<span class="token comment">// only retries once</span><br />				myOctokit<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Retrying after </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>retryAfter<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> seconds!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br />			<span class="token punctuation">}</span><br />			<span class="token punctuation">}</span><span class="token punctuation">,</span><br />			<span class="token function-variable function">onAbuseLimit</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">retryAfter<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />			<span class="token comment">// does not retry, only logs a warning</span><br />				myOctokit<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><br />					<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Abuse detected for request </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>method<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><br />				<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			<span class="token punctuation">}</span><span class="token punctuation">,</span><br />		<span class="token punctuation">}</span><span class="token punctuation">,</span><br />		retry<span class="token operator">:</span> <span class="token punctuation">{</span><br />			doNotRetry<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"429"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />		<span class="token punctuation">}</span><span class="token punctuation">,</span><br />		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token keyword">const</span> r <span class="token operator">=</span> <span class="token keyword">await</span> myOctokit<span class="token punctuation">.</span>rest<span class="token punctuation">.</span>search<span class="token punctuation">.</span><span class="token function">commits</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br />			q<span class="token operator">:</span> searchKey<span class="token punctuation">,</span><br />		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token keyword">if</span> <span class="token punctuation">(</span>r <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">.</span>data <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">.</span>data<span class="token punctuation">.</span>items <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">.</span>data<span class="token punctuation">.</span>items<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span></code></pre>
<p id="code-skip-hello-day-37-6">Once the commit is found, I'll try to cache it by writing a file using the path to the post and then the search query as a file key.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-37/#code-skip-hello-day-37-5" id="skip-to-code-skip-hello-day-37-5" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">try</span> <span class="token punctuation">{</span><br />	fs<span class="token punctuation">.</span><span class="token function">mkdirSync</span><span class="token punctuation">(</span>cacheFolder<span class="token punctuation">,</span> <span class="token punctuation">{</span> recursive<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><br />	<span class="token comment">// console.log('write data to file', cacheFile)</span><br />	fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span>cacheFile<span class="token punctuation">,</span> r<span class="token punctuation">.</span>data<span class="token punctuation">.</span>items<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>html_url<span class="token punctuation">)</span><br /><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'writing to cache failed:'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><br /><span class="token punctuation">}</span><br /><span class="token keyword">return</span> r<span class="token punctuation">.</span>data<span class="token punctuation">.</span>items<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>html_url</code></pre>
<p id="code-skip-hello-day-37-5">Now that I have a way to handle caching, I need to trigger it as part of the markdown building process.</p>
<h3 id="rendering-link-with-markdown-it" tabindex="-1">Rendering link with Markdown It</h3>
<p>I'll need a process to actually create the link on the commit in the <code>markdown-it</code> way.</p>
<p>I'll need to create HTML tokens for the link open and close as follows:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-37/#code-skip-hello-day-37-4" id="skip-to-code-skip-hello-day-37-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">createLinkTokens</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">TokenConstructor<span class="token punctuation">,</span>commitLink</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">const</span> link_open <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenConstructor</span><span class="token punctuation">(</span><span class="token string">'html_inline'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><br />	link_open<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">'&lt;a href="'</span><span class="token operator">+</span>commitLink<span class="token operator">+</span><span class="token string">'" target="_blank">'</span><br />	<span class="token keyword">const</span> link_close <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenConstructor</span><span class="token punctuation">(</span><span class="token string">'html_inline'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><br />	link_close<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">'&lt;/a>'</span><br />	<span class="token keyword">return</span> <span class="token punctuation">{</span>link_open<span class="token punctuation">,</span> link_close<span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-37-4">I'll need to take the markdown-it object and create a new <code>ruler</code> rule. I'll use <code>state.env</code> to check for the <code>repo</code> property and test for the commit pattern in each <code>inline</code> token. By using <code>inline</code> instead of <code>code_inline</code> I will be able to place my new <code>html_inline</code> token around the commit text.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-37/#code-skip-hello-day-37-3" id="skip-to-code-skip-hello-day-37-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><br /><span class="token keyword">const</span> <span class="token function-variable function">gitCommitRule</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">md</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	md<span class="token punctuation">.</span>core<span class="token punctuation">.</span>ruler<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token string">'inline'</span><span class="token punctuation">,</span> <span class="token string">'git_commit'</span><span class="token punctuation">,</span> <span class="token parameter">state</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />		<span class="token keyword">const</span> tokens <span class="token operator">=</span> state<span class="token punctuation">.</span>tokens<br />		<span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'repo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br />			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tokens<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">commit_pattern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>content<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'inline'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />					<span class="token comment">// console.log('tokens round 1: ', tokens[i])</span><br />					<span class="token keyword">const</span> commitMessage <span class="token operator">=</span> tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token function">commit_pattern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><br />					<span class="token keyword">const</span> searchKey <span class="token operator">=</span> <span class="token function">gitSearchQuery</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>env<span class="token punctuation">.</span>repo<span class="token punctuation">,</span> commitMessage<span class="token punctuation">)</span><br />					<span class="token keyword">const</span> <span class="token punctuation">{</span>cacheFolder<span class="token punctuation">,</span> cacheFile<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">cacheFilePath</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>env<span class="token punctuation">.</span>page<span class="token punctuation">.</span>url<span class="token punctuation">,</span> searchKey<span class="token punctuation">)</span><br />					<span class="token function">getLinkToRepo</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>env<span class="token punctuation">.</span>repo<span class="token punctuation">,</span> commitMessage<span class="token punctuation">,</span> state<span class="token punctuation">.</span>env<span class="token punctuation">.</span>page<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">commitLink</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br /><br />					<span class="token punctuation">}</span><span class="token punctuation">)</span><br />					<span class="token keyword">let</span> envRepo <span class="token operator">=</span> state<span class="token punctuation">.</span>env<span class="token punctuation">.</span>repo<span class="token punctuation">;</span><br />					<span class="token keyword">let</span> linkToRepo <span class="token operator">=</span> <span class="token string">''</span><br />					<span class="token comment">// Let's make the default link go to the commit log, that makes more sense.</span><br />					linkToRepo <span class="token operator">=</span> envRepo<br />					<span class="token keyword">if</span> <span class="token punctuation">(</span>envRepo<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br />						<span class="token comment">// Assure the last character is a "/"</span><br />						linkToRepo <span class="token operator">+=</span> <span class="token string">"/"</span><br />					<span class="token punctuation">}</span><br />					linkToRepo <span class="token operator">+=</span> <span class="token string">"commits/main"</span><br />					<span class="token keyword">try</span> <span class="token punctuation">{</span><br />						fs<span class="token punctuation">.</span><span class="token function">accessSync</span><span class="token punctuation">(</span>cacheFile<span class="token punctuation">,</span> fs<span class="token punctuation">.</span>constants<span class="token punctuation">.</span><span class="token constant">F_OK</span><span class="token punctuation">)</span><br />						linkToRepo <span class="token operator">=</span> <span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>cacheFile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br />					<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />						<span class="token comment">// No file yet</span><br />						console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Cached link to repo not ready'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><br />					<span class="token punctuation">}</span><br />					<span class="token keyword">const</span> <span class="token punctuation">{</span> link_open<span class="token punctuation">,</span> link_close <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">createLinkTokens</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>Token<span class="token punctuation">,</span>linkToRepo<span class="token punctuation">)</span><br />					tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>link_open<span class="token punctuation">)</span><br />					tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>link_close<span class="token punctuation">)</span><br /><br />				<span class="token punctuation">}</span><br />			<span class="token punctuation">}</span><br />		<span class="token punctuation">}</span><br />	<span class="token punctuation">}</span><span class="token punctuation">)</span><br /><span class="token punctuation">}</span><br /><br />module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">md</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token function">gitCommitRule</span><span class="token punctuation">(</span>md<span class="token punctuation">)</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<h3 id="adding-link-css" tabindex="-1">Adding Link CSS</h3>
<p id="code-skip-hello-day-37-3">It's looking good here, though it isn't super clear that it is a link. Maybe I can add some style to it. Let me grab an <a href="https://www.pinclipart.com/downpngs/iRxxRho_link-icon-navy-blue-blue-link-icon-png/" target="_blank">image of a link</a> to add to the style. <a href="https://onlinepngtools.com/resize-png" target="_blank">I'll need to size it down</a>.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/16c34c4dc621d3784e9cf14be6b8be8574c2368f" class="git-commit-link"><code>git commit -am &quot;Adding links to commits across all new posts along with a whole new plugin for building links to commits automatically into new posts for day 37&quot;</code></a></p>
<p>Then I can add the CSS.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-37/#code-skip-hello-day-37-2" id="skip-to-code-skip-hello-day-37-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-scss"><code class="language-scss">.git-commit-link<br />    <span class="token property">text-decoration</span><span class="token punctuation">:</span> underline<br />    &amp;<span class="token punctuation">:</span>hover<br />        <span class="token property">text-decoration-color</span><span class="token punctuation">:</span> grey<br />    &amp;<span class="token punctuation">:</span>after<br />        <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">' '</span><br />        <span class="token property">background</span><span class="token punctuation">:</span> transparent <span class="token url">url</span><span class="token punctuation">(</span>/img/linkicon-s.png<span class="token punctuation">)</span> center right no-repeat<br />        <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<br />        <span class="token property">font-style</span><span class="token punctuation">:</span> normal<br />        <span class="token property">margin</span><span class="token punctuation">:</span> 0px 0px 0px 10px<br />        <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<br />        <span class="token property">background-size</span><span class="token punctuation">:</span> contain<br />        <span class="token property">display</span><span class="token punctuation">:</span> inline-block<br />        <span class="token property">width</span><span class="token punctuation">:</span> 12px<br />        <span class="token property">height</span><span class="token punctuation">:</span> 12px</code></pre>
<p id="code-skip-hello-day-37-2"><a target="_blank" href="https://github.com/AramZS/devblog/commit/342836cd4780ce10e42d18a5c34d4403e5101d3c" class="git-commit-link"><code>git commit -am &quot;Set the default link for repos to go to the main commit log&quot;</code></a></p>
<h3 id="touch-up-of-markdown-it-link-process" tabindex="-1">Touch Up of Markdown It Link Process</h3>
<p>After <a href="https://github.com/markdown-it/markdown-it/issues/834" target="_blank">getting a very helpful response from the Markdown-It team</a> it looks like the <code>html_inline</code> process I used to add the link isn't really best practice.</p>
<h4 id="push-to-end-of-core-rules" tabindex="-1">Push to end of core rules</h4>
<p>So I found two changes I needed to make. First, I needed to push the rule as the last <code>core</code> rule. It turns out there is a function specifically for this, so I used it and now declare my rule using <code>md.core.ruler.push('git_commit', state =&gt; {</code>.</p>
<h4 id="create-link-tokens" tabindex="-1">Create link tokens</h4>
<p>The other change is to use <code>TokenConstructer</code> to make a real token and not <code>html_inline</code> which doesn't have any of the tools and hooks that a normal token does. So now my function to create tokens looks like:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-37/#code-skip-hello-day-37-1" id="skip-to-code-skip-hello-day-37-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">setAttr</span><span class="token punctuation">(</span><span class="token parameter">token<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	<span class="token keyword">const</span> index <span class="token operator">=</span> token<span class="token punctuation">.</span><span class="token function">attrIndex</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">const</span> attr <span class="token operator">=</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> value<span class="token punctuation">]</span><span class="token punctuation">;</span><br /><br />	<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		token<span class="token punctuation">.</span><span class="token function">attrPush</span><span class="token punctuation">(</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />		token<span class="token punctuation">.</span>attrs<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> attr<span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><br /><span class="token punctuation">}</span><br /><br /><span class="token keyword">const</span> <span class="token function-variable function">createLinkTokens</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">TokenConstructor<span class="token punctuation">,</span> commitLink</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">const</span> link_open <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenConstructor</span><span class="token punctuation">(</span><span class="token string">"link_open"</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token function">setAttr</span><span class="token punctuation">(</span>link_open<span class="token punctuation">,</span> <span class="token string">"target"</span><span class="token punctuation">,</span> <span class="token string">"_blank"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token function">setAttr</span><span class="token punctuation">(</span>link_open<span class="token punctuation">,</span> <span class="token string">"href"</span><span class="token punctuation">,</span> commitLink<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token function">setAttr</span><span class="token punctuation">(</span>link_open<span class="token punctuation">,</span> <span class="token string">"class"</span><span class="token punctuation">,</span> <span class="token string">"git-commit-link"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token comment">// This is haunting me, so I asked - https://github.com/markdown-it/markdown-it/issues/834</span><br />	<span class="token keyword">const</span> link_close <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenConstructor</span><span class="token punctuation">(</span><span class="token string">"link_close"</span><span class="token punctuation">,</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">return</span> <span class="token punctuation">{</span> link_open<span class="token punctuation">,</span> link_close <span class="token punctuation">}</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-37-1">The 1/-1 here allows me to open and close the <code>a</code> tag and now I can use the <code>attrPush</code> on the token which is a much better practice.</p>
<p>Great!</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/af17fab3dd8a9f99200ecd93518eef2e5d7aaccc" class="git-commit-link"><code>git commit -am &quot;Switching git-commit process to build link using link_open and link_close&quot;</code></a></p>
<h4 id="can't-start-secrets-with-github" tabindex="-1">Can't start secrets with GITHUB</h4>
<p>While prepping to merge I wanted to add the GITHUB_KEY <code>env</code> secret. But it turns out I can't start my keynames with <code>GITHUB_</code>. So I gotta rename it.</p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 36: A Markdown It Plugin - Understand the Ruler</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-36/?source=rss</link>
		<pubDate>Sat, 13 Nov 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-36/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?) - Yes it would be!</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a Things I Learned section to the project pages that are the things I learned from that specific project.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a technical reading log to the homepage</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank">Hide</a> empty sections.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add byline to post pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Have table of contents attach to sidebar bottom on mobile</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Support dark mode</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Social Icons</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> SEO/Social/JSON-LD HEAD data</p>
</li>
</ul>
<h2 id="day-36" tabindex="-1">Day 36</h2>
<p>I'm realizing that if I want to pull the repo in for the Markdown It shortcode. How do I get the page-level data?</p>
<p>Ok, so I'm checking in the callback passed into <code>md.core.ruler.after</code> and I'm not seeing anything. Not even any <code>process.env</code>. Not a good sign. I'm going to try to <code>console.log</code> in a few places to see if I can see if any of them give me the right rights.</p>
<p>Ok, it looks like <code>ruler.after</code> isn't the right place to be. I've gone into <code>rerender.rules</code> instead.</p>
<p>Cool to see all my rules by logging them!</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-36/#code-skip-hello-day-36-4" id="skip-to-code-skip-hello-day-36-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">[</span><br />  <span class="token string">'code_inline'</span><span class="token punctuation">,</span><br />  <span class="token string">'code_block'</span><span class="token punctuation">,</span><br />  <span class="token string">'fence'</span><span class="token punctuation">,</span><br />  <span class="token string">'image'</span><span class="token punctuation">,</span><br />  <span class="token string">'hardbreak'</span><span class="token punctuation">,</span><br />  <span class="token string">'softbreak'</span><span class="token punctuation">,</span><br />  <span class="token string">'text'</span><span class="token punctuation">,</span><br />  <span class="token string">'html_block'</span><span class="token punctuation">,</span><br />  <span class="token string">'html_inline'</span><br /><span class="token punctuation">]</span></code></pre>
<p id="code-skip-hello-day-36-4">Now I've got a small plugin</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-36/#code-skip-hello-day-36-3" id="skip-to-code-skip-hello-day-36-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">		<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">md</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'rules'</span><span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>md<span class="token punctuation">.</span>renderer<span class="token punctuation">.</span>rules<span class="token punctuation">)</span><span class="token punctuation">)</span><br />			<span class="token keyword">const</span> defaultRender <span class="token operator">=</span> md<span class="token punctuation">.</span>renderer<span class="token punctuation">.</span>rules<span class="token punctuation">.</span>code_inline<span class="token punctuation">;</span><br />			md<span class="token punctuation">.</span>renderer<span class="token punctuation">.</span>rules<span class="token punctuation">.</span><span class="token function-variable function">code_inline</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">tokens<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> options<span class="token punctuation">,</span> env<span class="token punctuation">,</span> self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'env '</span><span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span><span class="token punctuation">,</span> env<span class="token punctuation">.</span>repo<span class="token punctuation">)</span><br />				<span class="token comment">// pass token to default renderer.</span><br />				<span class="token keyword">return</span> <span class="token function">defaultRender</span><span class="token punctuation">(</span>tokens<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> options<span class="token punctuation">,</span> env<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			<span class="token punctuation">}</span><br />		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p data-wordfix="true" id="code-skip-hello-day-36-3">Perfect! I can see the global vars coming from <a href="https://www.11ty.dev/docs/data-cascade/" target="_blank">the data cascade</a> inside <code>env</code> as passed to the function.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-36/#code-skip-hello-day-36-2" id="skip-to-code-skip-hello-day-36-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">[</span><br />  <span class="token string">'defaults'</span><span class="token punctuation">,</span>      <span class="token string">'description'</span><span class="token punctuation">,</span><br />  <span class="token string">'layout'</span><span class="token punctuation">,</span>        <span class="token string">'projects'</span><span class="token punctuation">,</span><br />  <span class="token string">'site'</span><span class="token punctuation">,</span>          <span class="token string">'pkg'</span><span class="token punctuation">,</span><br />  <span class="token string">'tags'</span><span class="token punctuation">,</span>          <span class="token string">'date'</span><span class="token punctuation">,</span><br />  <span class="token string">'project'</span><span class="token punctuation">,</span>       <span class="token string">'repo'</span><span class="token punctuation">,</span><br />  <span class="token string">'featuredImage'</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">,</span><br />  <span class="token string">'subtitle'</span><span class="token punctuation">,</span>      <span class="token string">'page'</span><span class="token punctuation">,</span><br />  <span class="token string">'collections'</span><br /><span class="token punctuation">]</span></code></pre>
<p id="code-skip-hello-day-36-2">Ok, a little more experimentation and it looks like I can definitely use this approach to capture my commit messages in my posts! Function now looks like this and I am seeing the git commit messages I write to mark my commits in blog posts!</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-36/#code-skip-hello-day-36-1" id="skip-to-code-skip-hello-day-36-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">md</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'rules'</span><span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>md<span class="token punctuation">.</span>renderer<span class="token punctuation">.</span>rules<span class="token punctuation">)</span><span class="token punctuation">)</span><br />			<span class="token keyword">const</span> 	defaultRender <span class="token operator">=</span> md<span class="token punctuation">.</span>renderer<span class="token punctuation">.</span>rules<span class="token punctuation">.</span>code_inline<span class="token punctuation">,</span><br />					testPattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">git commit \-am \"</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><br /><br />			md<span class="token punctuation">.</span>renderer<span class="token punctuation">.</span>rules<span class="token punctuation">.</span><span class="token function-variable function">code_inline</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">tokens<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> options<span class="token punctuation">,</span> env<span class="token punctuation">,</span> self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'env '</span><span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span><span class="token punctuation">,</span> env<span class="token punctuation">.</span>repo<span class="token punctuation">)</span><br />				<span class="token keyword">var</span> token <span class="token operator">=</span> tokens<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">,</span><br />				content <span class="token operator">=</span> token<span class="token punctuation">.</span>content<span class="token punctuation">;</span><br />				<span class="token keyword">if</span> <span class="token punctuation">(</span>testPattern<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'git content:'</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span><br />				<span class="token punctuation">}</span><br />				<span class="token comment">// pass token to default renderer.</span><br />				<span class="token keyword">return</span> <span class="token function">defaultRender</span><span class="token punctuation">(</span>tokens<span class="token punctuation">,</span> idx<span class="token punctuation">,</span> options<span class="token punctuation">,</span> env<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			<span class="token punctuation">}</span><br />		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-36-1">Progress! Gotta end now and go to sleep, but even though I could fit in a little work today, it went a long way!</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/016d8cf0e549e254fa92a1e373890429b821bbfd" class="git-commit-link"><code>git commit -am &quot;Day 36, quick but useful stuff&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 35: GitHub's API - How Does It Work?</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-35/?source=rss</link>
		<pubDate>Sat, 13 Nov 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-35/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?) - Yes it would be!</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a Things I Learned section to the project pages that are the things I learned from that specific project.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a technical reading log to the homepage</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank">Hide</a> empty sections.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add byline to post pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Have table of contents attach to sidebar bottom on mobile</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Support dark mode</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Social Icons</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> SEO/Social/JSON-LD HEAD data</p>
</li>
</ul>
<h2 id="day-35" tabindex="-1">Day 35</h2>
<p>Ok, I got my first plugin for Markdown-It working! This is great! Let's try the GitHub plugin</p>
<p>First let's <a href="https://docs.github.com/rest" target="_blank">try some API requests in the terminal</a>.</p>
<p>Looks like there <a href="https://docs.github.com/en/rest/reference/search#search-commits" target="_blank">is an endpoint for searching commits</a>.</p>
<p>Ok, so a search of <code>https --auth AramZS:[token] https://api.github.com/search/commits?q=repo:AramZS/devblog+day+32</code> results in:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-35/#code-skip-hello-day-35-1" id="skip-to-code-skip-hello-day-35-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-json"><code class="language-json"><br /><span class="token punctuation">{</span><br />    <span class="token property">"incomplete_results"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />    <span class="token property">"items"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br />        <span class="token punctuation">{</span><br />            <span class="token property">"author"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />                <span class="token property">"avatar_url"</span><span class="token operator">:</span> <span class="token string">"https://avatars.githubusercontent.com/u/748069?v=4"</span><span class="token punctuation">,</span><br />                <span class="token property">"events_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/events{/privacy}"</span><span class="token punctuation">,</span><br />                <span class="token property">"followers_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/followers"</span><span class="token punctuation">,</span><br />                <span class="token property">"following_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/following{/other_user}"</span><span class="token punctuation">,</span><br />                <span class="token property">"gists_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/gists{/gist_id}"</span><span class="token punctuation">,</span><br />                <span class="token property">"gravatar_id"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span><br />                <span class="token property">"html_url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/AramZS"</span><span class="token punctuation">,</span><br />                <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">748069</span><span class="token punctuation">,</span><br />                <span class="token property">"login"</span><span class="token operator">:</span> <span class="token string">"AramZS"</span><span class="token punctuation">,</span><br />                <span class="token property">"node_id"</span><span class="token operator">:</span> <span class="token string">"MDQ6VXNlcjc0ODA2OQ=="</span><span class="token punctuation">,</span><br />                <span class="token property">"organizations_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/orgs"</span><span class="token punctuation">,</span><br />                <span class="token property">"received_events_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/received_events"</span><span class="token punctuation">,</span><br />                <span class="token property">"repos_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/repos"</span><span class="token punctuation">,</span><br />                <span class="token property">"site_admin"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />                <span class="token property">"starred_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/starred{/owner}{/repo}"</span><span class="token punctuation">,</span><br />                <span class="token property">"subscriptions_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/subscriptions"</span><span class="token punctuation">,</span><br />                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"User"</span><span class="token punctuation">,</span><br />                <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS"</span><br />            <span class="token punctuation">}</span><span class="token punctuation">,</span><br />            <span class="token property">"comments_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/commits/f738429d2fd507f2076240c68f6704b645cb468d/comments"</span><span class="token punctuation">,</span><br />            <span class="token property">"commit"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />                <span class="token property">"author"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />                    <span class="token property">"date"</span><span class="token operator">:</span> <span class="token string">"2021-11-21T23:19:18.000-05:00"</span><span class="token punctuation">,</span><br />                    <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"Aram.Zucker-Scharff@washpost.com"</span><span class="token punctuation">,</span><br />                    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Aram Zucker-Scharff"</span><br />                <span class="token punctuation">}</span><span class="token punctuation">,</span><br />                <span class="token property">"comment_count"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />                <span class="token property">"committer"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />                    <span class="token property">"date"</span><span class="token operator">:</span> <span class="token string">"2021-11-21T23:19:18.000-05:00"</span><span class="token punctuation">,</span><br />                    <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"noreply@github.com"</span><span class="token punctuation">,</span><br />                    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"GitHub"</span><br />                <span class="token punctuation">}</span><span class="token punctuation">,</span><br />                <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"Merge pull request #6 from AramZS/day-32\n\nDay 32"</span><span class="token punctuation">,</span><br />                <span class="token property">"tree"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />                    <span class="token property">"sha"</span><span class="token operator">:</span> <span class="token string">"9ddafc9982b34cbab840ba81f0139c21eb43b5aa"</span><span class="token punctuation">,</span><br />                    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/git/trees/9ddafc9982b34cbab840ba81f0139c21eb43b5aa"</span><br />                <span class="token punctuation">}</span><span class="token punctuation">,</span><br />                <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/git/commits/f738429d2fd507f2076240c68f6704b645cb468d"</span><br />            <span class="token punctuation">}</span><span class="token punctuation">,</span><br />            <span class="token property">"committer"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />                <span class="token property">"avatar_url"</span><span class="token operator">:</span> <span class="token string">"https://avatars.githubusercontent.com/u/19864447?v=4"</span><span class="token punctuation">,</span><br />                <span class="token property">"events_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/web-flow/events{/privacy}"</span><span class="token punctuation">,</span><br />                <span class="token property">"followers_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/web-flow/followers"</span><span class="token punctuation">,</span><br />                <span class="token property">"following_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/web-flow/following{/other_user}"</span><span class="token punctuation">,</span><br />                <span class="token property">"gists_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/web-flow/gists{/gist_id}"</span><span class="token punctuation">,</span><br />                <span class="token property">"gravatar_id"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span><br />                <span class="token property">"html_url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/web-flow"</span><span class="token punctuation">,</span><br />                <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">19864447</span><span class="token punctuation">,</span><br />                <span class="token property">"login"</span><span class="token operator">:</span> <span class="token string">"web-flow"</span><span class="token punctuation">,</span><br />                <span class="token property">"node_id"</span><span class="token operator">:</span> <span class="token string">"MDQ6VXNlcjE5ODY0NDQ3"</span><span class="token punctuation">,</span><br />                <span class="token property">"organizations_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/web-flow/orgs"</span><span class="token punctuation">,</span><br />                <span class="token property">"received_events_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/web-flow/received_events"</span><span class="token punctuation">,</span><br />                <span class="token property">"repos_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/web-flow/repos"</span><span class="token punctuation">,</span><br />                <span class="token property">"site_admin"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />                <span class="token property">"starred_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/web-flow/starred{/owner}{/repo}"</span><span class="token punctuation">,</span><br />                <span class="token property">"subscriptions_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/web-flow/subscriptions"</span><span class="token punctuation">,</span><br />                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"User"</span><span class="token punctuation">,</span><br />                <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/web-flow"</span><br />            <span class="token punctuation">}</span><span class="token punctuation">,</span><br />            <span class="token property">"html_url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/AramZS/devblog/commit/f738429d2fd507f2076240c68f6704b645cb468d"</span><span class="token punctuation">,</span><br />            <span class="token property">"node_id"</span><span class="token operator">:</span> <span class="token string">"MDY6Q29tbWl0Mzc2NzA2MzI2OmY3Mzg0MjlkMmZkNTA3ZjIwNzYyNDBjNjhmNjcwNGI2NDVjYjQ2OGQ="</span><span class="token punctuation">,</span><br />            <span class="token property">"parents"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br />                <span class="token punctuation">{</span><br />                    <span class="token property">"html_url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/AramZS/devblog/commit/b0f64c92e21f230ee13692a99e347f0eed5678da"</span><span class="token punctuation">,</span><br />                    <span class="token property">"sha"</span><span class="token operator">:</span> <span class="token string">"b0f64c92e21f230ee13692a99e347f0eed5678da"</span><span class="token punctuation">,</span><br />                    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/commits/b0f64c92e21f230ee13692a99e347f0eed5678da"</span><br />                <span class="token punctuation">}</span><span class="token punctuation">,</span><br />                <span class="token punctuation">{</span><br />                    <span class="token property">"html_url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/AramZS/devblog/commit/cf3dc12d4183c10b51426d9bd45867ea37854481"</span><span class="token punctuation">,</span><br />                    <span class="token property">"sha"</span><span class="token operator">:</span> <span class="token string">"cf3dc12d4183c10b51426d9bd45867ea37854481"</span><span class="token punctuation">,</span><br />                    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/commits/cf3dc12d4183c10b51426d9bd45867ea37854481"</span><br />                <span class="token punctuation">}</span><br />            <span class="token punctuation">]</span><span class="token punctuation">,</span><br />            <span class="token property">"repository"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />                <span class="token property">"archive_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/{archive_format}{/ref}"</span><span class="token punctuation">,</span><br />                <span class="token property">"assignees_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/assignees{/user}"</span><span class="token punctuation">,</span><br />                <span class="token property">"blobs_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/git/blobs{/sha}"</span><span class="token punctuation">,</span><br />                <span class="token property">"branches_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/branches{/branch}"</span><span class="token punctuation">,</span><br />                <span class="token property">"collaborators_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/collaborators{/collaborator}"</span><span class="token punctuation">,</span><br />                <span class="token property">"comments_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/comments{/number}"</span><span class="token punctuation">,</span><br />                <span class="token property">"commits_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/commits{/sha}"</span><span class="token punctuation">,</span><br />                <span class="token property">"compare_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/compare/{base}...{head}"</span><span class="token punctuation">,</span><br />                <span class="token property">"contents_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/contents/{+path}"</span><span class="token punctuation">,</span><br />                <span class="token property">"contributors_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/contributors"</span><span class="token punctuation">,</span><br />                <span class="token property">"deployments_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/deployments"</span><span class="token punctuation">,</span><br />                <span class="token property">"description"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span><br />                <span class="token property">"downloads_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/downloads"</span><span class="token punctuation">,</span><br />                <span class="token property">"events_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/events"</span><span class="token punctuation">,</span><br />                <span class="token property">"fork"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />                <span class="token property">"forks_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/forks"</span><span class="token punctuation">,</span><br />                <span class="token property">"full_name"</span><span class="token operator">:</span> <span class="token string">"AramZS/devblog"</span><span class="token punctuation">,</span><br />                <span class="token property">"git_commits_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/git/commits{/sha}"</span><span class="token punctuation">,</span><br />                <span class="token property">"git_refs_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/git/refs{/sha}"</span><span class="token punctuation">,</span><br />                <span class="token property">"git_tags_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/git/tags{/sha}"</span><span class="token punctuation">,</span><br />                <span class="token property">"hooks_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/hooks"</span><span class="token punctuation">,</span><br />                <span class="token property">"html_url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/AramZS/devblog"</span><span class="token punctuation">,</span><br />                <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">376706326</span><span class="token punctuation">,</span><br />                <span class="token property">"issue_comment_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/issues/comments{/number}"</span><span class="token punctuation">,</span><br />                <span class="token property">"issue_events_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/issues/events{/number}"</span><span class="token punctuation">,</span><br />                <span class="token property">"issues_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/issues{/number}"</span><span class="token punctuation">,</span><br />                <span class="token property">"keys_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/keys{/key_id}"</span><span class="token punctuation">,</span><br />                <span class="token property">"labels_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/labels{/name}"</span><span class="token punctuation">,</span><br />                <span class="token property">"languages_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/languages"</span><span class="token punctuation">,</span><br />                <span class="token property">"merges_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/merges"</span><span class="token punctuation">,</span><br />                <span class="token property">"milestones_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/milestones{/number}"</span><span class="token punctuation">,</span><br />                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"devblog"</span><span class="token punctuation">,</span><br />                <span class="token property">"node_id"</span><span class="token operator">:</span> <span class="token string">"MDEwOlJlcG9zaXRvcnkzNzY3MDYzMjY="</span><span class="token punctuation">,</span><br />                <span class="token property">"notifications_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/notifications{?since,all,participating}"</span><span class="token punctuation">,</span><br />                <span class="token property">"owner"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />                    <span class="token property">"avatar_url"</span><span class="token operator">:</span> <span class="token string">"https://avatars.githubusercontent.com/u/748069?v=4"</span><span class="token punctuation">,</span><br />                    <span class="token property">"events_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/events{/privacy}"</span><span class="token punctuation">,</span><br />                    <span class="token property">"followers_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/followers"</span><span class="token punctuation">,</span><br />                    <span class="token property">"following_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/following{/other_user}"</span><span class="token punctuation">,</span><br />                    <span class="token property">"gists_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/gists{/gist_id}"</span><span class="token punctuation">,</span><br />                    <span class="token property">"gravatar_id"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span><br />                    <span class="token property">"html_url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/AramZS"</span><span class="token punctuation">,</span><br />                    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">748069</span><span class="token punctuation">,</span><br />                    <span class="token property">"login"</span><span class="token operator">:</span> <span class="token string">"AramZS"</span><span class="token punctuation">,</span><br />                    <span class="token property">"node_id"</span><span class="token operator">:</span> <span class="token string">"MDQ6VXNlcjc0ODA2OQ=="</span><span class="token punctuation">,</span><br />                    <span class="token property">"organizations_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/orgs"</span><span class="token punctuation">,</span><br />                    <span class="token property">"received_events_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/received_events"</span><span class="token punctuation">,</span><br />                    <span class="token property">"repos_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/repos"</span><span class="token punctuation">,</span><br />                    <span class="token property">"site_admin"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />                    <span class="token property">"starred_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/starred{/owner}{/repo}"</span><span class="token punctuation">,</span><br />                    <span class="token property">"subscriptions_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/subscriptions"</span><span class="token punctuation">,</span><br />                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"User"</span><span class="token punctuation">,</span><br />                    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS"</span><br />                <span class="token punctuation">}</span><span class="token punctuation">,</span><br />                <span class="token property">"private"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />                <span class="token property">"pulls_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/pulls{/number}"</span><span class="token punctuation">,</span><br />                <span class="token property">"releases_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/releases{/id}"</span><span class="token punctuation">,</span><br />                <span class="token property">"stargazers_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/stargazers"</span><span class="token punctuation">,</span><br />                <span class="token property">"statuses_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/statuses/{sha}"</span><span class="token punctuation">,</span><br />                <span class="token property">"subscribers_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/subscribers"</span><span class="token punctuation">,</span><br />                <span class="token property">"subscription_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/subscription"</span><span class="token punctuation">,</span><br />                <span class="token property">"tags_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/tags"</span><span class="token punctuation">,</span><br />                <span class="token property">"teams_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/teams"</span><span class="token punctuation">,</span><br />                <span class="token property">"trees_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/git/trees{/sha}"</span><span class="token punctuation">,</span><br />                <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog"</span><br />            <span class="token punctuation">}</span><span class="token punctuation">,</span><br />            <span class="token property">"score"</span><span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span><br />            <span class="token property">"sha"</span><span class="token operator">:</span> <span class="token string">"f738429d2fd507f2076240c68f6704b645cb468d"</span><span class="token punctuation">,</span><br />            <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/commits/f738429d2fd507f2076240c68f6704b645cb468d"</span><br />        <span class="token punctuation">}</span><span class="token punctuation">,</span><br />        <span class="token punctuation">{</span><br />            <span class="token property">"author"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />                <span class="token property">"avatar_url"</span><span class="token operator">:</span> <span class="token string">"https://avatars.githubusercontent.com/u/748069?v=4"</span><span class="token punctuation">,</span><br />                <span class="token property">"events_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/events{/privacy}"</span><span class="token punctuation">,</span><br />                <span class="token property">"followers_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/followers"</span><span class="token punctuation">,</span><br />                <span class="token property">"following_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/following{/other_user}"</span><span class="token punctuation">,</span><br />                <span class="token property">"gists_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/gists{/gist_id}"</span><span class="token punctuation">,</span><br />                <span class="token property">"gravatar_id"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span><br />                <span class="token property">"html_url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/AramZS"</span><span class="token punctuation">,</span><br />                <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">748069</span><span class="token punctuation">,</span><br />                <span class="token property">"login"</span><span class="token operator">:</span> <span class="token string">"AramZS"</span><span class="token punctuation">,</span><br />                <span class="token property">"node_id"</span><span class="token operator">:</span> <span class="token string">"MDQ6VXNlcjc0ODA2OQ=="</span><span class="token punctuation">,</span><br />                <span class="token property">"organizations_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/orgs"</span><span class="token punctuation">,</span><br />                <span class="token property">"received_events_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/received_events"</span><span class="token punctuation">,</span><br />                <span class="token property">"repos_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/repos"</span><span class="token punctuation">,</span><br />                <span class="token property">"site_admin"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />                <span class="token property">"starred_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/starred{/owner}{/repo}"</span><span class="token punctuation">,</span><br />                <span class="token property">"subscriptions_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/subscriptions"</span><span class="token punctuation">,</span><br />                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"User"</span><span class="token punctuation">,</span><br />                <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS"</span><br />            <span class="token punctuation">}</span><span class="token punctuation">,</span><br />            <span class="token property">"comments_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/commits/b0db043f14feb1ef6f9f00cad61e2fedcac6e958/comments"</span><span class="token punctuation">,</span><br />            <span class="token property">"commit"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />                <span class="token property">"author"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />                    <span class="token property">"date"</span><span class="token operator">:</span> <span class="token string">"2021-11-21T23:17:06.000-05:00"</span><span class="token punctuation">,</span><br />                    <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"aramzs@hacktext.com"</span><span class="token punctuation">,</span><br />                    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Aram Zucker-Scharff"</span><br />                <span class="token punctuation">}</span><span class="token punctuation">,</span><br />                <span class="token property">"comment_count"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />                <span class="token property">"committer"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />                    <span class="token property">"date"</span><span class="token operator">:</span> <span class="token string">"2021-11-21T23:17:06.000-05:00"</span><span class="token punctuation">,</span><br />                    <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"aramzs@hacktext.com"</span><span class="token punctuation">,</span><br />                    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Aram Zucker-Scharff"</span><br />                <span class="token punctuation">}</span><span class="token punctuation">,</span><br />                <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"Finishing off day 32"</span><span class="token punctuation">,</span><br />                <span class="token property">"tree"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />                    <span class="token property">"sha"</span><span class="token operator">:</span> <span class="token string">"b945b859b8c261d75bd02e107e1f0f3d3769aebe"</span><span class="token punctuation">,</span><br />                    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/git/trees/b945b859b8c261d75bd02e107e1f0f3d3769aebe"</span><br />                <span class="token punctuation">}</span><span class="token punctuation">,</span><br />                <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/git/commits/b0db043f14feb1ef6f9f00cad61e2fedcac6e958"</span><br />            <span class="token punctuation">}</span><span class="token punctuation">,</span><br />            <span class="token property">"committer"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />                <span class="token property">"avatar_url"</span><span class="token operator">:</span> <span class="token string">"https://avatars.githubusercontent.com/u/748069?v=4"</span><span class="token punctuation">,</span><br />                <span class="token property">"events_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/events{/privacy}"</span><span class="token punctuation">,</span><br />                <span class="token property">"followers_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/followers"</span><span class="token punctuation">,</span><br />                <span class="token property">"following_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/following{/other_user}"</span><span class="token punctuation">,</span><br />                <span class="token property">"gists_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/gists{/gist_id}"</span><span class="token punctuation">,</span><br />                <span class="token property">"gravatar_id"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span><br />                <span class="token property">"html_url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/AramZS"</span><span class="token punctuation">,</span><br />                <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">748069</span><span class="token punctuation">,</span><br />                <span class="token property">"login"</span><span class="token operator">:</span> <span class="token string">"AramZS"</span><span class="token punctuation">,</span><br />                <span class="token property">"node_id"</span><span class="token operator">:</span> <span class="token string">"MDQ6VXNlcjc0ODA2OQ=="</span><span class="token punctuation">,</span><br />                <span class="token property">"organizations_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/orgs"</span><span class="token punctuation">,</span><br />                <span class="token property">"received_events_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/received_events"</span><span class="token punctuation">,</span><br />                <span class="token property">"repos_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/repos"</span><span class="token punctuation">,</span><br />                <span class="token property">"site_admin"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />                <span class="token property">"starred_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/starred{/owner}{/repo}"</span><span class="token punctuation">,</span><br />                <span class="token property">"subscriptions_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/subscriptions"</span><span class="token punctuation">,</span><br />                <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"User"</span><span class="token punctuation">,</span><br />                <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS"</span><br />            <span class="token punctuation">}</span><span class="token punctuation">,</span><br />            <span class="token property">"html_url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/AramZS/devblog/commit/b0db043f14feb1ef6f9f00cad61e2fedcac6e958"</span><span class="token punctuation">,</span><br />            <span class="token property">"node_id"</span><span class="token operator">:</span> <span class="token string">"MDY6Q29tbWl0Mzc2NzA2MzI2OmIwZGIwNDNmMTRmZWIxZWY2ZjlmMDBjYWQ2MWUyZmVkY2FjNmU5NTg="</span><span class="token punctuation">,</span><br />            <span class="token property">"parents"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br />                <span class="token punctuation">{</span><br />                    <span class="token property">"html_url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/AramZS/devblog/commit/ae757146534498b1eb1429564f38c310a8697440"</span><span class="token punctuation">,</span><br />                    <span class="token property">"sha"</span><span class="token operator">:</span> <span class="token string">"ae757146534498b1eb1429564f38c310a8697440"</span><span class="token punctuation">,</span><br />                    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/commits/ae757146534498b1eb1429564f38c310a8697440"</span><br />                <span class="token punctuation">}</span><br />            <span class="token punctuation">]</span><span class="token punctuation">,</span><br />            <span class="token property">"repository"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />                <span class="token property">"archive_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/{archive_format}{/ref}"</span><span class="token punctuation">,</span><br />                <span class="token property">"assignees_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/assignees{/user}"</span><span class="token punctuation">,</span><br />                <span class="token property">"blobs_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/git/blobs{/sha}"</span><span class="token punctuation">,</span><br />                <span class="token property">"branches_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/branches{/branch}"</span><span class="token punctuation">,</span><br />                <span class="token property">"collaborators_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/collaborators{/collaborator}"</span><span class="token punctuation">,</span><br />                <span class="token property">"comments_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/comments{/number}"</span><span class="token punctuation">,</span><br />                <span class="token property">"commits_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/commits{/sha}"</span><span class="token punctuation">,</span><br />                <span class="token property">"compare_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/compare/{base}...{head}"</span><span class="token punctuation">,</span><br />                <span class="token property">"contents_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/contents/{+path}"</span><span class="token punctuation">,</span><br />                <span class="token property">"contributors_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/contributors"</span><span class="token punctuation">,</span><br />                <span class="token property">"deployments_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/deployments"</span><span class="token punctuation">,</span><br />                <span class="token property">"description"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span><br />                <span class="token property">"downloads_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/downloads"</span><span class="token punctuation">,</span><br />                <span class="token property">"events_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/events"</span><span class="token punctuation">,</span><br />                <span class="token property">"fork"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />                <span class="token property">"forks_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/forks"</span><span class="token punctuation">,</span><br />                <span class="token property">"full_name"</span><span class="token operator">:</span> <span class="token string">"AramZS/devblog"</span><span class="token punctuation">,</span><br />                <span class="token property">"git_commits_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/git/commits{/sha}"</span><span class="token punctuation">,</span><br />                <span class="token property">"git_refs_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/git/refs{/sha}"</span><span class="token punctuation">,</span><br />                <span class="token property">"git_tags_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/git/tags{/sha}"</span><span class="token punctuation">,</span><br />                <span class="token property">"hooks_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/hooks"</span><span class="token punctuation">,</span><br />                <span class="token property">"html_url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/AramZS/devblog"</span><span class="token punctuation">,</span><br />                <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">376706326</span><span class="token punctuation">,</span><br />                <span class="token property">"issue_comment_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/issues/comments{/number}"</span><span class="token punctuation">,</span><br />                <span class="token property">"issue_events_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/issues/events{/number}"</span><span class="token punctuation">,</span><br />                <span class="token property">"issues_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/issues{/number}"</span><span class="token punctuation">,</span><br />                <span class="token property">"keys_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/keys{/key_id}"</span><span class="token punctuation">,</span><br />                <span class="token property">"labels_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/labels{/name}"</span><span class="token punctuation">,</span><br />                <span class="token property">"languages_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/languages"</span><span class="token punctuation">,</span><br />                <span class="token property">"merges_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/merges"</span><span class="token punctuation">,</span><br />                <span class="token property">"milestones_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/milestones{/number}"</span><span class="token punctuation">,</span><br />                <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"devblog"</span><span class="token punctuation">,</span><br />                <span class="token property">"node_id"</span><span class="token operator">:</span> <span class="token string">"MDEwOlJlcG9zaXRvcnkzNzY3MDYzMjY="</span><span class="token punctuation">,</span><br />                <span class="token property">"notifications_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/notifications{?since,all,participating}"</span><span class="token punctuation">,</span><br />                <span class="token property">"owner"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />                    <span class="token property">"avatar_url"</span><span class="token operator">:</span> <span class="token string">"https://avatars.githubusercontent.com/u/748069?v=4"</span><span class="token punctuation">,</span><br />                    <span class="token property">"events_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/events{/privacy}"</span><span class="token punctuation">,</span><br />                    <span class="token property">"followers_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/followers"</span><span class="token punctuation">,</span><br />                    <span class="token property">"following_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/following{/other_user}"</span><span class="token punctuation">,</span><br />                    <span class="token property">"gists_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/gists{/gist_id}"</span><span class="token punctuation">,</span><br />                    <span class="token property">"gravatar_id"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span><br />                    <span class="token property">"html_url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/AramZS"</span><span class="token punctuation">,</span><br />                    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">748069</span><span class="token punctuation">,</span><br />                    <span class="token property">"login"</span><span class="token operator">:</span> <span class="token string">"AramZS"</span><span class="token punctuation">,</span><br />                    <span class="token property">"node_id"</span><span class="token operator">:</span> <span class="token string">"MDQ6VXNlcjc0ODA2OQ=="</span><span class="token punctuation">,</span><br />                    <span class="token property">"organizations_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/orgs"</span><span class="token punctuation">,</span><br />                    <span class="token property">"received_events_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/received_events"</span><span class="token punctuation">,</span><br />                    <span class="token property">"repos_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/repos"</span><span class="token punctuation">,</span><br />                    <span class="token property">"site_admin"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />                    <span class="token property">"starred_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/starred{/owner}{/repo}"</span><span class="token punctuation">,</span><br />                    <span class="token property">"subscriptions_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS/subscriptions"</span><span class="token punctuation">,</span><br />                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"User"</span><span class="token punctuation">,</span><br />                    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/users/AramZS"</span><br />                <span class="token punctuation">}</span><span class="token punctuation">,</span><br />                <span class="token property">"private"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />                <span class="token property">"pulls_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/pulls{/number}"</span><span class="token punctuation">,</span><br />                <span class="token property">"releases_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/releases{/id}"</span><span class="token punctuation">,</span><br />                <span class="token property">"stargazers_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/stargazers"</span><span class="token punctuation">,</span><br />                <span class="token property">"statuses_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/statuses/{sha}"</span><span class="token punctuation">,</span><br />                <span class="token property">"subscribers_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/subscribers"</span><span class="token punctuation">,</span><br />                <span class="token property">"subscription_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/subscription"</span><span class="token punctuation">,</span><br />                <span class="token property">"tags_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/tags"</span><span class="token punctuation">,</span><br />                <span class="token property">"teams_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/teams"</span><span class="token punctuation">,</span><br />                <span class="token property">"trees_url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/git/trees{/sha}"</span><span class="token punctuation">,</span><br />                <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog"</span><br />            <span class="token punctuation">}</span><span class="token punctuation">,</span><br />            <span class="token property">"score"</span><span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span><br />            <span class="token property">"sha"</span><span class="token operator">:</span> <span class="token string">"b0db043f14feb1ef6f9f00cad61e2fedcac6e958"</span><span class="token punctuation">,</span><br />            <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://api.github.com/repos/AramZS/devblog/commits/b0db043f14feb1ef6f9f00cad61e2fedcac6e958"</span><br />        <span class="token punctuation">}</span><span class="token punctuation">,</span><br />        ...<br />    <span class="token punctuation">]</span><span class="token punctuation">,</span><br />    <span class="token property">"total_count"</span><span class="token operator">:</span> <span class="token number">4</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-35-1">So I can even use a more precise search and get back more useful results, like: <code>https --auth AramZS:[token] https://api.github.com/search/commits?q=repo:AramZS/devblog+Finish+day+34</code> will give me back 2 results which is more useful.</p>
<p>I <a href="https://httpie.io/docs#examples" target="_blank">tried out Httpie on the CLI</a> for this and it worked pretty well.</p>
<p>Good to know how to do this raw, but it might be more useful to use the Github maintained <code>octokit/rest.js</code> tool? Looks like <a href="https://octokit.github.io/rest.js/v18#search-commits" target="_blank">it supports this type of query</a>. There are <a href="https://github.com/pksunkara/octonode" target="_blank">a few</a> <a href="https://github.com/github-tools/github" target="_blank">other options</a> to use as well.</p>
<p>Only a little time to work today, but unblocked this issue by better understanding the GitHub API and I think making this plugin work is possible.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/90f3b22388bb98ff4c0ba73fe56eaf8fbc4d1b40" class="git-commit-link"><code>git commit -am &quot;Finish day 35&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 34: In Which I Really Dig Into Markdown It</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-34/?source=rss</link>
		<pubDate>Sat, 13 Nov 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-34/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?) - Yes it would be!</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a Things I Learned section to the project pages that are the things I learned from that specific project.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a technical reading log to the homepage</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank">Hide</a> empty sections.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add byline to post pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Have table of contents attach to sidebar bottom on mobile</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Support dark mode</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Social Icons</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> SEO/Social/JSON-LD HEAD data</p>
</li>
</ul>
<h2 id="day-34" tabindex="-1">Day 34</h2>
<p>Ok, took some real vacation time, so on the flight back and back to work on trying to build my own markdown-it plugin.</p>
<h3 id="modifying-the-markdown-it-plugin" tabindex="-1">Modifying the Markdown-It Plugin</h3>
<p>Ok, dealing with some errors when it does processing. But I made a good choice this time before getting on the flight, I loaded up the documentation page on Markdown-It. The problem is I needed to give my rule a unique (non-overlapping name with the to-do rule).</p>
<p>Changed it to <code>md.core.ruler.after(&quot;inline&quot;, &quot;short-phrase-fixer&quot;, (state) =&gt; {</code> and now the plugin isn't crashing the build process!</p>
<p>But it isn't doing what I want either.</p>
<p>Ok, it's advancing to the point in the while loop where it is executing my function. That's good, it means my check to find valid language to replace <code>isMyWords</code> is working properly I think.</p>
<p>Ah, ok, it looks like I am absolutely required to change the content of both the token and it's first child. Interesting, I'm not sure why Markdown-it works that way, but good to know. Ok, basic functionality is working! Looks like this now:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-34/#code-skip-hello-day-34-10" id="skip-to-code-skip-hello-day-34-10" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><br /><span class="token keyword">const</span> <span class="token function-variable function">isInline</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">token</span><span class="token punctuation">)</span> <span class="token operator">=></span> token <span class="token operator">&amp;&amp;</span> token<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">"inline"</span><span class="token punctuation">;</span><br /><span class="token keyword">const</span> <span class="token function-variable function">isParagraph</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">token</span><span class="token punctuation">)</span> <span class="token operator">=></span> token <span class="token operator">&amp;&amp;</span> token<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">"paragraph_open"</span><span class="token punctuation">;</span><br /><span class="token keyword">const</span> <span class="token function-variable function">hasMyWords</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">token</span><span class="token punctuation">)</span> <span class="token operator">=></span> token <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"> 11ty | prob </span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">function</span> <span class="token function">setAttr</span><span class="token punctuation">(</span><span class="token parameter">token<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	<span class="token keyword">const</span> index <span class="token operator">=</span> token<span class="token punctuation">.</span><span class="token function">attrIndex</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">const</span> attr <span class="token operator">=</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> value<span class="token punctuation">]</span><span class="token punctuation">;</span><br /><br />	<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		token<span class="token punctuation">.</span><span class="token function">attrPush</span><span class="token punctuation">(</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />		token<span class="token punctuation">.</span>attrs<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> attr<span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><br /><span class="token punctuation">}</span><br /><br /><span class="token keyword">function</span> <span class="token function">isMyWords</span><span class="token punctuation">(</span><span class="token parameter">tokens<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	<span class="token keyword">return</span> <span class="token punctuation">(</span><br />		<span class="token function">isInline</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span><br />		<span class="token function">hasMyWords</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><br />	<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br /><span class="token keyword">function</span> <span class="token function">fixMyWords</span><span class="token punctuation">(</span><span class="token parameter">token<span class="token punctuation">,</span> TokenConstructor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	<span class="token keyword">let</span> wordChoice <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span><br />	<span class="token keyword">const</span> betterWord <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenConstructor</span><span class="token punctuation">(</span><span class="token string">"inline"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"> 11ty </span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		betterWord<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">" Eleventy "</span><span class="token punctuation">;</span><br />		wordChoice <span class="token operator">=</span> <span class="token string">" 11ty "</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"> prob </span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		betterWord<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">" probably "</span><span class="token punctuation">;</span><br />		wordChoice <span class="token operator">=</span> <span class="token string">" prob "</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />		<span class="token keyword">return</span> <span class="token punctuation">{</span> betterWord<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> wordChoice<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><br /><br />	<span class="token keyword">return</span> <span class="token punctuation">{</span> betterWord<span class="token punctuation">,</span> wordChoice <span class="token punctuation">}</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br /><span class="token keyword">function</span> <span class="token function">fixWordify</span><span class="token punctuation">(</span><span class="token parameter">token<span class="token punctuation">,</span> TokenConstructor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	<span class="token keyword">const</span> <span class="token punctuation">{</span> betterWord<span class="token punctuation">,</span> wordChoice <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">fixMyWords</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> TokenConstructor<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>betterWord<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br />	token<span class="token punctuation">.</span>content <span class="token operator">=</span> token<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>wordChoice<span class="token punctuation">,</span> betterWord<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">const</span> fixedContent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenConstructor</span><span class="token punctuation">(</span><span class="token string">"inline"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	fixedContent<span class="token punctuation">.</span>content <span class="token operator">=</span> token<span class="token punctuation">.</span>content<span class="token punctuation">;</span><br />	token<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>content <span class="token operator">=</span> fixedContent<span class="token punctuation">.</span>content<span class="token punctuation">;</span><br />	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"token:"</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br />module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">md</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	md<span class="token punctuation">.</span>core<span class="token punctuation">.</span>ruler<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token string">"inline"</span><span class="token punctuation">,</span> <span class="token string">"short-phrase-fixer"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />		<span class="token keyword">const</span> tokens <span class="token operator">=</span> state<span class="token punctuation">.</span>tokens<span class="token punctuation">;</span><br />		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><br />			<span class="token string">"Walking through possible words to fix3"</span><span class="token punctuation">,</span><br />			state<span class="token punctuation">.</span>tokens<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">token</span><span class="token punctuation">)</span> <span class="token operator">=></span> token<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">"text"</span><span class="token punctuation">)</span><br />		<span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tokens<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>tokens<span class="token punctuation">,</span> <span class="token function">isMyWords</span><span class="token punctuation">(</span>tokens<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Trying to fix some words!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />				<span class="token function">fixWordify</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> state<span class="token punctuation">.</span>Token<span class="token punctuation">)</span><span class="token punctuation">;</span><br />				<span class="token function">setAttr</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"data-wordfix"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			<span class="token punctuation">}</span><br />		<span class="token punctuation">}</span><br />	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-34-10">But what if more than one word that I need to correct is in the paragraph? I'll need to set it up to run more than once on any piece of content, or do a smarter replace process.</p>
<h3 id="better-replacement-of-words" tabindex="-1">Better replacement of words</h3>
<p>So what if I want to use both <code>prob</code> and <code>11ty</code> in a sentence or if I want to use <code>11ty</code> twice? I need to set it up so I can use both.</p>
<p>Ok, so my instinct here is to set up a set of patterns and their replacements than walk through it. Only, I'm getting an error <code>token.content.replaceAll is not a function</code>. Ok, is this applying to everything or is there some weird edge case?</p>
<p>I'm going to try this for the new <code>fixWordify</code> setup.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-34/#code-skip-hello-day-34-9" id="skip-to-code-skip-hello-day-34-9" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> replaceMe <span class="token operator">=</span> <span class="token punctuation">[</span><br />		<span class="token punctuation">{</span> pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"> 11ty </span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> replace<span class="token operator">:</span> <span class="token string">" Eleventy "</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />		<span class="token punctuation">{</span> pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"> prob </span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> replace<span class="token operator">:</span> <span class="token string">" probably "</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />		<span class="token punctuation">{</span> pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"> graf </span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> replace<span class="token operator">:</span> <span class="token string">" paragraph "</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />	<span class="token punctuation">]</span><span class="token punctuation">;</span><br />	<span class="token keyword">try</span> <span class="token punctuation">{</span><br />		replaceMe<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">wordReplace</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />			<span class="token keyword">const</span> betterWord <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenConstructor</span><span class="token punctuation">(</span><span class="token string">"inline"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			betterWord<span class="token punctuation">.</span>content <span class="token operator">=</span> token<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><br />				wordReplace<span class="token punctuation">.</span>pattern<span class="token punctuation">,</span><br />				wordReplace<span class="token punctuation">.</span>replace<br />			<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			token<span class="token punctuation">.</span>content <span class="token operator">=</span> betterWord<span class="token punctuation">.</span>content<span class="token punctuation">;</span><br />			token<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>content <span class="token operator">=</span> betterWord<span class="token punctuation">.</span>content<span class="token punctuation">;</span><br />			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"token:"</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Could not replace content in token: "</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span><br />		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-34-9">Ok, now build continues, but notably the replacements don't seem to be happening. So it looks like it is breaking every time. Some of the tokens are indeed very complex like:</p>
<h4 id="a-more-complex-markdown-it-token" tabindex="-1">A More Complex Markdown-It Token</h4>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-34/#code-skip-hello-day-34-8" id="skip-to-code-skip-hello-day-34-8" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">Token <span class="token punctuation">{</span><br />  type<span class="token operator">:</span> <span class="token string">'inline'</span><span class="token punctuation">,</span><br />  tag<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />  attrs<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />  map<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">82</span><span class="token punctuation">,</span> <span class="token number">83</span> <span class="token punctuation">]</span><span class="token punctuation">,</span><br />  nesting<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />  level<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><br />  children<span class="token operator">:</span> <span class="token punctuation">[</span><br />    Token <span class="token punctuation">{</span><br />      type<span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span><br />      tag<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      attrs<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      map<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      nesting<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />      level<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />      children<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      content<span class="token operator">:</span> <span class="token string">"First of all, I want a chunk of that page that shows my various Work in Progress posts. I've tagged the posts themselves correctly "</span><span class="token punctuation">,</span><br />      markup<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      info<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      meta<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      block<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />      hidden<span class="token operator">:</span> <span class="token boolean">false</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    Token <span class="token punctuation">{</span><br />      type<span class="token operator">:</span> <span class="token string">'link_open'</span><span class="token punctuation">,</span><br />      tag<span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span><br />      attrs<span class="token operator">:</span> <span class="token punctuation">[</span>Array<span class="token punctuation">]</span><span class="token punctuation">,</span><br />      map<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      nesting<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><br />      level<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />      children<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      content<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      markup<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      info<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      meta<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      block<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />      hidden<span class="token operator">:</span> <span class="token boolean">false</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    Token <span class="token punctuation">{</span><br />      type<span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span><br />      tag<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      attrs<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      map<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      nesting<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />      level<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span><br />      children<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      content<span class="token operator">:</span> <span class="token string">'to create an 11ty collection'</span><span class="token punctuation">,</span><br />      markup<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      info<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      meta<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      block<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />      hidden<span class="token operator">:</span> <span class="token boolean">false</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    Token <span class="token punctuation">{</span><br />      type<span class="token operator">:</span> <span class="token string">'link_close'</span><span class="token punctuation">,</span><br />      tag<span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span><br />      attrs<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      map<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      nesting<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><br />      level<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />      children<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      content<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      markup<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      info<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      meta<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      block<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />      hidden<span class="token operator">:</span> <span class="token boolean">false</span><br />    <span class="token punctuation">}</span><span class="token punctuation">,</span><br />    Token <span class="token punctuation">{</span><br />      type<span class="token operator">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span><br />      tag<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      attrs<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      map<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      nesting<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />      level<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br />      children<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      content<span class="token operator">:</span> <span class="token string">", but I need to figure out how to call it. And I may want to display it elsewhere, so I'm going to create a component I can easily include that walks through the WiP tag."</span><span class="token punctuation">,</span><br />      markup<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      info<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />      meta<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />      block<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />      hidden<span class="token operator">:</span> <span class="token boolean">false</span><br />    <span class="token punctuation">}</span><br />  <span class="token punctuation">]</span><span class="token punctuation">,</span><br />  content<span class="token operator">:</span> <span class="token string">"First of all, I want a chunk of that page that shows my various Work in Progress posts. I've tagged the posts themselves correctly [to create an 11ty collection](https://www.11ty.dev/docs/collections/), but I need to figure out how to call it. And I may want to display it elsewhere, so I'm going to create a component I can easily include that walks through the WiP tag."</span><span class="token punctuation">,</span><br />  markup<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />  info<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span><br />  meta<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><br />  block<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />  hidden<span class="token operator">:</span> <span class="token boolean">false</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-34-8">But some are simple. And they all have content I can replace.</p>
<p>Ok, let's add more detail to the log.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-34/#code-skip-hello-day-34-7" id="skip-to-code-skip-hello-day-34-7" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><br />			<span class="token string">"Could not replace content in token: "</span><span class="token punctuation">,</span><br />			token<span class="token punctuation">.</span>content<span class="token punctuation">,</span><br />			token<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>content<span class="token punctuation">,</span><br />			token<br />		<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-34-7">I'm still not seeing what could go wrong. These things are strings and should have <code>replaceAll</code>? I double checked and indeed, <code>replace</code> works just fine. I guess we can just use <code>replace</code> if I have the right configuration for the regex, ending it with <code>/gi</code>.</p>
<p>Ok, that's working! Now let's remove my potential future human error opportunity by keeping the patterns I'm walking through in a single place:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-34/#code-skip-hello-day-34-6" id="skip-to-code-skip-hello-day-34-6" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">myWords</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">return</span> <span class="token punctuation">[</span><br />		<span class="token punctuation">{</span> pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"> 11ty </span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> replace<span class="token operator">:</span> <span class="token string">" Eleventy "</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />		<span class="token punctuation">{</span> pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"> prob </span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> replace<span class="token operator">:</span> <span class="token string">" probably "</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />		<span class="token punctuation">{</span> pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"> graf </span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> replace<span class="token operator">:</span> <span class="token string">" paragraph "</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />	<span class="token punctuation">]</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-34-6">and now my check is a little more complex:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-34/#code-skip-hello-day-34-5" id="skip-to-code-skip-hello-day-34-5" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">hasMyWords</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">token</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		<span class="token comment">// myWords().forEach((word) => {</span><br />		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">myWords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">myWords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>pattern<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Word Replacement Time"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />				<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br />			<span class="token punctuation">}</span><br />		<span class="token punctuation">}</span><br />	<span class="token punctuation">}</span><br />	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-34-5">Ok. Looking good. But it turns out this method doesn't handle the more complicated objects like the one above, instead of expecting only one child, we'll need to walk through all the children and do their replacements individually.</p>
<h3 id="handle-each-token-child" tabindex="-1">Handle each token child</h3>
<p>Ok, let's turn the <code>token.content</code> process into its own function I can use during the interation of token children:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-34/#code-skip-hello-day-34-4" id="skip-to-code-skip-hello-day-34-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">fixMyWords</span><span class="token punctuation">(</span><span class="token parameter">wordReplace<span class="token punctuation">,</span> token<span class="token punctuation">,</span> TokenConstructor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	<span class="token keyword">const</span> betterWord <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenConstructor</span><span class="token punctuation">(</span><span class="token string">"inline"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">const</span> replaced <span class="token operator">=</span> token<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><br />		wordReplace<span class="token punctuation">.</span>pattern<span class="token punctuation">,</span><br />		wordReplace<span class="token punctuation">.</span>replace<br />	<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">if</span> <span class="token punctuation">(</span>replaced<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		betterWord<span class="token punctuation">.</span>content <span class="token operator">=</span> replaced<span class="token punctuation">;</span><br />		token<span class="token punctuation">.</span>content <span class="token operator">=</span> betterWord<span class="token punctuation">.</span>content<span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-34-4">Now we can use a simpler version of <code>replaceMe</code> that works with walking over the children!</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-34/#code-skip-hello-day-34-3" id="skip-to-code-skip-hello-day-34-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">replaceMe<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">wordReplace</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token function">fixMyWords</span><span class="token punctuation">(</span>wordReplace<span class="token punctuation">,</span> token<span class="token punctuation">,</span> TokenConstructor<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> token<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		<span class="token function">fixMyWords</span><span class="token punctuation">(</span>wordReplace<span class="token punctuation">,</span> token<span class="token punctuation">.</span>children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> TokenConstructor<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><br /><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p id="code-skip-hello-day-34-3">That works!</p>
<p>Last thing I want to do... make sure this works if one of my replacement words is at the end of a sentence or has a comma after it and still needs to be replaced. I forgot about this case.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/e71045edccd9dcbeabb4828137b287a855a37a78" class="git-commit-link"><code>git commit -am &quot;Get replacement working with complex tokens&quot;</code></a></p>
<h3 id="replacing-the-word-with-punctuation" tabindex="-1">Replacing the word with punctuation</h3>
<p>This one should be pretty easy, I just need to add a look ahead for a variety of eligible punctuation. <code>(?=[\?\.\,\s\! ])</code> should do it.</p>
<p>Now the <code>myWords</code> function looks like this:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-34/#code-skip-hello-day-34-2" id="skip-to-code-skip-hello-day-34-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">myWords</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">return</span> <span class="token punctuation">[</span><br />		<span class="token punctuation">{</span> pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"> 11ty(?=[\?\.\,\s\! ])</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> replace<span class="token operator">:</span> <span class="token string">" Eleventy"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />		<span class="token punctuation">{</span> pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"> prob(?=[\?\.\,\s\! ])</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> replace<span class="token operator">:</span> <span class="token string">" probably"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />		<span class="token punctuation">{</span> pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"> graf(?=[\?\.\,\s\! ])</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> replace<span class="token operator">:</span> <span class="token string">" paragraph"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />	<span class="token punctuation">]</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-34-2">I specifically don't want to include quotes in this But what about parenthesis? It looks like <code>Markdown-It</code> does indeed break out the chunks of text in such a way that I don't have to worry about breaking Markdown links. Should be easy enough. Just need a lookbehind. Also, I can add in new lines or tabs as characters as well.</p>
<p>Now it looks like this:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-34/#code-skip-hello-day-34-1" id="skip-to-code-skip-hello-day-34-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">myWords</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">return</span> <span class="token punctuation">[</span><br />		<span class="token punctuation">{</span><br />			pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=[\t\s\S\( ])11ty(?=[\?\.\,\s\r\n\!\) ])</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span><br />			replace<span class="token operator">:</span> <span class="token string">"Eleventy"</span><span class="token punctuation">,</span><br />		<span class="token punctuation">}</span><span class="token punctuation">,</span><br />		<span class="token punctuation">{</span><br />			pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=[\t\s\( ])prob(?=[\?\.\,\s\r\n\!\) ])</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span><br />			replace<span class="token operator">:</span> <span class="token string">"probably"</span><span class="token punctuation">,</span><br />		<span class="token punctuation">}</span><span class="token punctuation">,</span><br />		<span class="token punctuation">{</span><br />			pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=[\t\s\( ])graf(?=[\?\.\,\s\r\n\!\) ])</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span><br />			replace<span class="token operator">:</span> <span class="token string">"paragraph"</span><span class="token punctuation">,</span><br />		<span class="token punctuation">}</span><span class="token punctuation">,</span><br />	<span class="token punctuation">]</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-34-1">Looking good! I can test and add more words later, landing now.</p>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</li>
</ul>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/08a817d45c3cd5d9e888b640326159c8f3023c4f" class="git-commit-link"><code>git commit -am &quot;Finish day 34&quot;</code></a></p>
<h2 id="a-few-notes-on-touch-up" tabindex="-1">A few notes on touch up</h2>
<p>Just noting on here that I touched up the above Regex which had a few bad errors I didn't want anyone to repeat. Most importantly, I removed my use of <code>\S</code>.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/a901930b83fe4006c4f5759b0041f9192312585d" class="git-commit-link"><code>git commit -am &quot;Touch up day 34 stuff&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 33: Markdown It Playtime and CSS Touchups</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-33/?source=rss</link>
		<pubDate>Sat, 13 Nov 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-33/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?) - Yes it would be!</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a Things I Learned section to the project pages that are the things I learned from that specific project.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a technical reading log to the homepage</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank">Hide</a> empty sections.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add byline to post pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Have table of contents attach to sidebar bottom on mobile</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Support dark mode</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Social Icons</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> SEO/Social/JSON-LD HEAD data</p>
</li>
</ul>
<h2 id="day-33" tabindex="-1">Day 33</h2>
<p>Ok, got some plane time today. Let's see how far I can get without connecting to the internet.</p>
<h3 id="syntax-highlighting-for-njk-snippets." tabindex="-1">Syntax highlighting for NJK snippets.</h3>
<p>I think I want to try to take on some of the hacking I need to do to the markdown parser. This is a good time to work at it a little and see what I can get it to do.</p>
<p>First, I've noticed that there isn't really a syntax highlight for Nunjucks in the Prism system I'm using for code hints. I've been building the code blocks using Liquid instead since they are basically the same. But it would be nice to use the correct naming convention. I think I should be able to? I copied the extension for how Prism handles Markdown from the Eleventy site. Can I do something similar here? Let's try.</p>
<h4 id="extending-liquid" tabindex="-1">Extending Liquid</h4>
<p>New statement adding in Prism for code highlighting like this.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-33/#code-skip-hello-day-33-8" id="skip-to-code-skip-hello-day-33-8" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	eleventyConfig<span class="token punctuation">.</span><span class="token function">addPlugin</span><span class="token punctuation">(</span>syntaxHighlight<span class="token punctuation">,</span> <span class="token punctuation">{</span><br />		templateFormats<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"md"</span><span class="token punctuation">,</span> <span class="token string">"njk"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />		<span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> Prism <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />			Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>markdown <span class="token operator">=</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token string">"markup"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br />				frontmatter<span class="token operator">:</span> <span class="token punctuation">{</span><br />					pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^---[\s\S]*?^---$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">m</span></span><span class="token punctuation">,</span><br />					greedy<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />					inside<span class="token operator">:</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>yaml<span class="token punctuation">,</span><br />				<span class="token punctuation">}</span><span class="token punctuation">,</span><br />			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Prism<span class="token punctuation">.</span>languages<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>njk <span class="token operator">=</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token string">"liquid"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token punctuation">}</span><span class="token punctuation">,</span><br />	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-33-8">Ok, it didn't throw an error. Let's see what we can do? I added the console.log because I'm curious about what other languages are in there and interestingly it appears that maybe I don't need to have this language extension? I see a bunch of good looking rules in there under <code>md</code>. Something to try later.</p>
<p>Hmm I changed the log to only throw up the keys and the list is more limited than I thought.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-33/#code-skip-hello-day-33-7" id="skip-to-code-skip-hello-day-33-7" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">[</span><br />  <span class="token string">'extend'</span><span class="token punctuation">,</span> <span class="token string">'insertBefore'</span><span class="token punctuation">,</span><br />  <span class="token string">'DFS'</span><span class="token punctuation">,</span>    <span class="token string">'markup'</span><span class="token punctuation">,</span><br />  <span class="token string">'html'</span><span class="token punctuation">,</span>   <span class="token string">'mathml'</span><span class="token punctuation">,</span><br />  <span class="token string">'svg'</span><span class="token punctuation">,</span>    <span class="token string">'xml'</span><span class="token punctuation">,</span><br />  <span class="token string">'ssml'</span><span class="token punctuation">,</span>   <span class="token string">'atom'</span><span class="token punctuation">,</span><br />  <span class="token string">'rss'</span><span class="token punctuation">,</span>    <span class="token string">'css'</span><span class="token punctuation">,</span><br />  <span class="token string">'clike'</span><span class="token punctuation">,</span>  <span class="token string">'javascript'</span><span class="token punctuation">,</span><br />  <span class="token string">'js'</span><span class="token punctuation">,</span>     <span class="token string">'yaml'</span><span class="token punctuation">,</span><br />  <span class="token string">'yml'</span><span class="token punctuation">,</span>    <span class="token string">'markdown'</span><br /><span class="token punctuation">]</span></code></pre>
<p id="code-skip-hello-day-33-7">So I guess using <code>liquid</code> was doing me no favors either. Annoying. I guess HTML is likely the way I want to go then?</p>
<h4 id="extending-html" tabindex="-1">Extending HTML</h4>
<p>Hmmm extending HTML for liquid/njk is doing me no favors. It's too bad that the handlebars-style syntax is not more JS like because I could likely use a pattern to make it easier to read. Worth a try at least?</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-33/#code-skip-hello-day-33-6" id="skip-to-code-skip-hello-day-33-6" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">			Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>liquid <span class="token operator">=</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token string">"html"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br />				templateTag<span class="token operator">:</span> <span class="token punctuation">{</span><br />					pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=\{\%).*?(?=\%\})</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><br />					greedy<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />					inside<span class="token operator">:</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>javascript<span class="token punctuation">,</span><br />				<span class="token punctuation">}</span><span class="token punctuation">,</span><br />			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>njk <span class="token operator">=</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token string">"liquid"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-33-6">Ok this is looking much better, though I'd like to have some color on the opening and closing brackets.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-33/#code-skip-hello-day-33-5" id="skip-to-code-skip-hello-day-33-5" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">			Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>liquid <span class="token operator">=</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token string">"html"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br />				templateTag<span class="token operator">:</span> <span class="token punctuation">{</span><br />					pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=\{\%).*?(?=\%\})</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><br />					greedy<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />					inside<span class="token operator">:</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>javascript<span class="token punctuation">,</span><br />				<span class="token punctuation">}</span><span class="token punctuation">,</span><br />				templateTagBoundary<span class="token operator">:</span> <span class="token punctuation">{</span><br />					pattern<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\{\%}?|\%\}?</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><br />					greedy<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br />					alias<span class="token operator">:</span> <span class="token string">"template-tag-boundary"</span><span class="token punctuation">,</span><br />				<span class="token punctuation">}</span><span class="token punctuation">,</span><br />			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="css-touchup-for-new-code-blocks" tabindex="-1">CSS Touchup for new Code Blocks</h4>
<p id="code-skip-hello-day-33-5">Ok by adding the pattern to capture the tag boundaries I've now wrapped every template tag opener and closer in <code>&lt;span&gt;</code> tags with the class set to <code>token templateTagBoundary template-tag-boundary</code>. Perfect. So now I just have to add the style I want. And you know what, while I'm in there I might touch up a few more styles.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-33/#code-skip-hello-day-33-4" id="skip-to-code-skip-hello-day-33-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-sass"><code class="language-sass"><span class="token selector">.template-tag-boundary {</span><br /><span class="token property-line">	<span class="token property">color</span><span class="token punctuation">:</span> #ec4984;</span><br /><span class="token selector">}</span><br /><br /><span class="token selector">.tag > .tag > .punctuation</span><span class="token selector">,</span><br /><span class="token selector">.tag > .punctuation:last-of-type {</span><br /><span class="token property-line">	<span class="token property">color</span><span class="token punctuation">:</span> #1cf08d;</span><br /><span class="token selector">}</span></code></pre>
<p id="code-skip-hello-day-33-4">Ok, adding this to my syntax highlighting sheet means things are starting to look good. Great this is really great. I think I'm pretty satisfied with the code styling for now. Regex is always a mind-bender but I'm definitely getting better at it. I'd like to make the code blocks a little more readable. Let's start by giving them 100% width to fill to the width of the parent container.</p>
<p>Oh, this <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/overscroll-behavior.html" target="_blank">overscroll behavior</a> looks useful. Maybe I'll add that, even if it isn't widely supported. Using <code>overscroll-behavior-x: contain</code> will hopefully at least prevent some of the browsers from bouncing when the user overscrolls on the <code>pre</code> elements on mobile.</p>
<p>I'm also going to shrink the size a bit, make it so that more fits into the pre box on smaller screens.</p>
<p>All together I think that should help make the code samples a little more readable on mobile.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/12cae322c05692f40a201fbe4e7ffb3f064a6277" class="git-commit-link"><code>git commit -am &quot;Touching up syntax highlighting&quot;</code></a></p>
<h3 id="touching-up-table-of-contents" tabindex="-1">Touching up Table of Contents</h3>
<p>Hmmm, while I was in here touching up the CSS I was not happy with some of the behavior of the table of contents. It really needs a <em>lot</em> of vertical space. But why not support big screens when they are available? A few small touch ups and I can make my site a little easier to navigate on larger screens.</p>
<p>Let's add a size to my variables Sass for the minimum width I'll need to fit everything in: <code>$ultra-large: 1336px</code> and now I'll want to cover ultra long TOCs, just in case:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-33/#code-skip-hello-day-33-3" id="skip-to-code-skip-hello-day-33-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-sass"><code class="language-sass"><span class="token selector">#toc-container__inner</span><br /><span class="token atrule-line">    <span class="token atrule">@media</span> (min-width: variables.$large-mobile) and (min-height: 962px)</span><br /><span class="token property-line">        <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto</span><br /><span class="token property-line">        <span class="token property">max-height</span><span class="token punctuation">:</span> 225px</span><br /><span class="token atrule-line">    <span class="token atrule">@media</span> (min-width: variables.$ultra-large)</span><br /><span class="token property-line">        <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto</span><br /><span class="token property-line">        <span class="token property">max-height</span><span class="token punctuation">:</span> 80<span class="token operator">%</span></span></code></pre>
<p id="code-skip-hello-day-33-3">And then I can fix the unit itself to the side of the content.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-33/#code-skip-hello-day-33-2" id="skip-to-code-skip-hello-day-33-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-sass"><code class="language-sass"><span class="token atrule-line"><span class="token atrule">@media</span> (min-width: variables.$ultra-large)</span><br /><span class="token property-line">    <span class="token property">position</span><span class="token punctuation">:</span> fixed</span><br /><span class="token property-line">    <span class="token property">top</span><span class="token punctuation">:</span> 10px</span><br /><span class="token property-line">    <span class="token property">left</span><span class="token punctuation">:</span> 1005px</span><br /><span class="token property-line">    <span class="token property">width</span><span class="token punctuation">:</span> 295px</span></code></pre>
<p id="code-skip-hello-day-33-2">Perfect and I put it below the left sidebar, so it'll prefer this new layout if the screen is large enough, even if there is enough height available on the screen.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/9b4cf1ddf51990e57461923aa104b766a224845a" class="git-commit-link"><code>git commit -am &quot;Fix up TOC for ultra wide screens&quot;</code></a></p>
<h3 id="continuing-to-muck-with-markdown-it" tabindex="-1">Continuing to muck with Markdown It</h3>
<p>Ok, now that I've got a lot of big stuff out of the way I'd really like to see if I can load in my own Markdown-It plugin. I've still not connected to the internet, so let's examine one of the simple plugins I've got in my <code>node_modules</code> to see if I can learn something from that. I'll try <code>markdown-it-todo</code> as it seems closest to some of the stuff I want to do.</p>
<p>Ok, promising choice! The code totals 68 lines.</p>
<p data-wordfix="true">I'm going to start real simple. I want to turn <code>11ty</code> into <code>Eleventy</code>. I can see I was working on this before. So let's put Eleventy into this blog post.</p>
<p>I'm actually currious, before I dive too deep into it, why the <code>markdown-it-regexp</code> library wasn't working when I tried it before. It looks like it is making some weird assumptions about what my regex should be, so I'm going to copy it local and see what happens if I change it a bit.</p>
<p>Ok, I fiddled with it and you know what? There is a lot of broken stuff. I'm not sure how it ever worked. I don't even see how it hooks into Markdown-it? Baffling. I'm going to drop it for real now I think it is too broken to save.</p>
<p>Ok, I'm sort of working blind from the example of the todo plugin but I've tried both that and a version of my previous work for creating <code>_blank</code> on links and neither are working.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-33/#code-skip-hello-day-33-1" id="skip-to-code-skip-hello-day-33-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-js"><code class="language-js"><span class="token string">"use strict"</span><span class="token punctuation">;</span><br /><br /><span class="token comment">/**<br />const Plugin = require("../markdown-it-regexp");<br /><br />module.exports = Plugin(/s11tys/g, (match, utils) => {<br />	console.log("Markdown It shorthand match", match);<br />	return String(` Eleventy `);<br />});<br /> */</span><br /><br /><span class="token keyword">const</span> <span class="token function-variable function">isInline</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">token</span><span class="token punctuation">)</span> <span class="token operator">=></span> token <span class="token operator">&amp;&amp;</span> token<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">"inline"</span><span class="token punctuation">;</span><br /><span class="token keyword">const</span> <span class="token function-variable function">isParagraph</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">token</span><span class="token punctuation">)</span> <span class="token operator">=></span> token <span class="token operator">&amp;&amp;</span> token<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">"paragraph_open"</span><span class="token punctuation">;</span><br /><span class="token keyword">const</span> <span class="token function-variable function">hasMyWords</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">token</span><span class="token punctuation">)</span> <span class="token operator">=></span><br />	token <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\[( 11ty | prob )]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">function</span> <span class="token function">setAttr</span><span class="token punctuation">(</span><span class="token parameter">token<span class="token punctuation">,</span> name<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	<span class="token keyword">const</span> index <span class="token operator">=</span> token<span class="token punctuation">.</span><span class="token function">attrIndex</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">const</span> attr <span class="token operator">=</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> value<span class="token punctuation">]</span><span class="token punctuation">;</span><br /><br />	<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		token<span class="token punctuation">.</span><span class="token function">attrPush</span><span class="token punctuation">(</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />		token<span class="token punctuation">.</span>attrs<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> attr<span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><br /><span class="token punctuation">}</span><br /><br /><span class="token keyword">function</span> <span class="token function">isMyWords</span><span class="token punctuation">(</span><span class="token parameter">tokens<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	<span class="token keyword">return</span> <span class="token punctuation">(</span><br />		<span class="token function">isInline</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span><br />		<span class="token comment">// isParagraph(tokens[index - 1]) &amp;&amp;</span><br />		<span class="token function">hasMyWords</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><br />	<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br /><span class="token keyword">function</span> <span class="token function">fixMyWords</span><span class="token punctuation">(</span><span class="token parameter">token<span class="token punctuation">,</span> TokenConstructor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	<span class="token keyword">let</span> wordChoice <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span><br />	<span class="token keyword">const</span> betterWord <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TokenConstructor</span><span class="token punctuation">(</span><span class="token string">"inline"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"> 11ty </span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		betterWord<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">" Eleventy "</span><span class="token punctuation">;</span><br />		wordChoice <span class="token operator">=</span> <span class="token string">" 11ty "</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"> prob </span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		betterWord<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">" probably "</span><span class="token punctuation">;</span><br />		wordChoice <span class="token operator">=</span> <span class="token string">" prob "</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><br /><br />	<span class="token keyword">return</span> <span class="token punctuation">{</span> betterWord<span class="token punctuation">,</span> wordChoice <span class="token punctuation">}</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br /><span class="token keyword">function</span> <span class="token function">fixWordify</span><span class="token punctuation">(</span><span class="token parameter">token<span class="token punctuation">,</span> TokenConstructor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	<span class="token keyword">const</span> <span class="token punctuation">{</span> betterWord<span class="token punctuation">,</span> wordChoice <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">fixMyWords</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> TokenConstructor<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	token<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>betterWord<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br />	<span class="token keyword">const</span> sliceIndex <span class="token operator">=</span> wordChoice<span class="token punctuation">.</span>length<span class="token punctuation">;</span><br />	token<span class="token punctuation">.</span>content <span class="token operator">=</span> token<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>sliceIndex<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	token<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>content <span class="token operator">=</span> token<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>sliceIndex<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br />module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">md</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	md<span class="token punctuation">.</span>core<span class="token punctuation">.</span>ruler<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token string">"inline"</span><span class="token punctuation">,</span> <span class="token string">"evernote-todo"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />		<span class="token keyword">const</span> tokens <span class="token operator">=</span> state<span class="token punctuation">.</span>tokens<span class="token punctuation">;</span><br />		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Walking through possible words to fix2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tokens<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isMyWords</span><span class="token punctuation">(</span>tokens<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Trying to fix some words!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />				<span class="token function">fixMyWords</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> state<span class="token punctuation">.</span>Token<span class="token punctuation">)</span><span class="token punctuation">;</span><br />				<span class="token function">setAttr</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">"data-wordfix"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			<span class="token punctuation">}</span><br />		<span class="token punctuation">}</span><br />	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span><br /><br /><span class="token comment">/**<br />module.exports = (markdownSetup) => {<br />	var defaultRender =<br />		markdownSetup.renderer.rules.fix_my_words ||<br />		function (tokens, idx, options, env, self) {<br />			return self.renderToken(tokens, idx, options);<br />		};<br />	markdownSetup.renderer.rules.fix_my_words = function (<br />		tokens,<br />		idx,<br />		options,<br />		env,<br />		self<br />	) {<br />		for (let i = 0; i &lt; tokens.length; i++) {<br />			if (isMyWords(tokens, i)) {<br />				console.log("Trying to fix some words!");<br />				fixWordify(tokens[i], tokens);<br />				setAttr(tokens[i - 1], "data-wordfix", "true");<br />			}<br />		}<br /><br />		// pass token to default renderer.<br />		return defaultRender(tokens, idx, options, env, self);<br />	};<br />};<br />*/</span></code></pre>
<p id="code-skip-hello-day-33-1">I'm not even sure it is scanning the right stuff?! Time to do some logging.</p>
<p data-wordfix="true">It's especially annoying to test because I can't use Eleventy watch to reload the plugin and have it work consistently.</p>
<p>Ok so... <code>inline</code> is not the token type I need to target, it's just showing my little one-line code samples</p>
<p>Ok. It doesn't seem to be <code>inline</code> but I'm not sure what <code>paragraph_open</code> is and removing it has the plugin adding the <code> &quot;data-wordfix&quot;</code> property to the <code>p</code> tags properly. So progress!</p>
<p>Oops, I need to use <code>fixWordify</code>!</p>
<p>Ok, the todo plugin is just cutting the first few characters off the string. That's fine for it I guess, but I'm operating on the middle of the string. It looks like I may need to (from the code they have) change the content of both the <code>token.content</code> value and the <code>token.children[1].content</code> value? (Presumably because it <code>unshift</code>s the new token in to the beginning of that array, for some reason?) Well let's take it once at a time.</p>
<p>Hmmm, still no good. But I think I'm getting closer. Ok backs straight, tables in the upright position time.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/f7df50a19efdb36b4c15098670c08967f041dd78" class="git-commit-link"><code>git commit -am &quot;Save day 33&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 32: Project Pages and loops</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-32/?source=rss</link>
		<pubDate>Sat, 13 Nov 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-32/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?) - Yes it would be!</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a Things I Learned section to the project pages that are the things I learned from that specific project.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a technical reading log to the homepage</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank">Hide</a> empty sections.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add byline to post pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Have table of contents attach to sidebar bottom on mobile</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Support dark mode</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Social Icons</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> SEO/Social/JSON-LD HEAD data</p>
</li>
</ul>
<h2 id="day-32" tabindex="-1">Day 32</h2>
<h3 id="projects-page" tabindex="-1">Projects Page</h3>
<p>I realized that at some point I'm going to have too many projects to fit on the home page, so I <a href="https://github.com/AramZS/devblog/issues/4" target="_blank">need to limit the number that show up and set up a page to list the overall projects</a>.</p>
<p>I want it to sit at <code>/projects</code> so I'll create a MD file to handle that and a template to handle this specific page type.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-32/#code-skip-hello-day-32-3" id="skip-to-code-skip-hello-day-32-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span><br /><span class="token key atrule">layout</span><span class="token punctuation">:</span> project<span class="token punctuation">-</span>list<br /><span class="token key atrule">pagination</span><span class="token punctuation">:</span><br />    <span class="token key atrule">data</span><span class="token punctuation">:</span> projects<br />    <span class="token key atrule">size</span><span class="token punctuation">:</span> <span class="token number">1</span><br />    <span class="token key atrule">alias</span><span class="token punctuation">:</span> project<br /><span class="token key atrule">permalink</span><span class="token punctuation">:</span> <span class="token string">"projects/"</span><br /><span class="token key atrule">eleventyComputed</span><span class="token punctuation">:</span><br />  <span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">"Project List"</span><br />  <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">"A list of projects that Aram Zucker-Scharff has documented working on."</span><br /><span class="token punctuation">---</span></code></pre>
<p id="code-skip-hello-day-32-3">I'll start with the project page as the template. Then I can take the loop through the projects object from the front page.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-32/#code-skip-hello-day-32-2" id="skip-to-code-skip-hello-day-32-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid">				<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">for</span> project <span class="token keyword">in</span> projects </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>capitalize-first<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br />						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{project.url}}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{project.title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span> | <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>Days worked: {{project.count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span> | <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>Status: {{project.complete}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- last updated:  {{project.lastUpdatedPost}} --></span><br />					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br />				<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endfor </span><span class="token templateTagBoundary template-tag-boundary">%}</span></code></pre>
<p id="code-skip-hello-day-32-2">Ok this is good. To make this easy to debug I should put the link on the front page. So to do that I need to do two things, break the project <code>for</code> loop, and add a link to the new projects page.</p>
<p>Hmm, <a href="https://github.com/mozilla/nunjucks/issues/296" target="_blank">it doesn't look like there is actually a <code>break</code> in Nunjucks</a>. Perhaps I should try altering the array?</p>
<p>Can I use an if check like <code> if loop.index &lt; 6</code> in the for statement? No that doesn't work. Looks like the <code>if</code> check <a href="https://stackoverflow.com/questions/22150273/how-can-i-break-a-for-loop-in-jinja2" target="_blank">is only for properties of the looped object</a>.</p>
<p>Ah, no, that's not it at all. That doesn't work. Ah, ok, the best thing to do here is to slice the array before looping it. Instead of a <code>break</code> for this situation, we use slice.</p>
<p><code>for project in projects | slice(5)</code></p>
<p>Yup, that worked!</p>
<p>And I'll remove the dots on the li elements.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-32/#code-skip-hello-day-32-1" id="skip-to-code-skip-hello-day-32-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-css"><code class="language-css">    #all-projects<br />        li<br />            <span class="token property">list-style</span><span class="token punctuation">:</span> none</code></pre>
<p id="code-skip-hello-day-32-1">Ok, did a little touching up of the formatting, and now we've got that page. Good to go.</p>
<h3 id="preview-images-on-lists" tabindex="-1">Preview Images on Lists</h3>
<p>Ok, next thing I wanted to check off is including the image on some of the post preview pages. Let's start with the tag pages.</p>
<p>First I'll set up a stand-alone Sass file for the post preview component. Then I'll add a containing class to the post-summary component itself.</p>
<p>Then I'm going to pull the post image HTML out of <code>post.njk</code> and into its own file in the <code>partials</code> folder. This way I can reuse the basic HTML structure of the image across the site.</p>
<p>Ok, had to make sure my styles are in place but it looks good. I may want to modify the styles a little bit, it isn't perfect and I may want to play with it a bit.</p>
<p>Now I want to add it to the front page as well. But I'll save that until the next day of working on this project.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/b0db043f14feb1ef6f9f00cad61e2fedcac6e958" class="git-commit-link"><code>git commit -am &quot;Finishing off day 32&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 31: Pagination</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-31/?source=rss</link>
		<pubDate>Sat, 13 Nov 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-31/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?) - Yes it would be!</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a Things I Learned section to the project pages that are the things I learned from that specific project.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a technical reading log to the homepage</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank">Hide</a> empty sections.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add byline to post pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Have table of contents attach to sidebar bottom on mobile</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Support dark mode</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Social Icons</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> SEO/Social/JSON-LD HEAD data</p>
</li>
</ul>
<h2 id="day-31" tabindex="-1">Day 31</h2>
<p>Looking good!</p>
<h3 id="setting-up-previous-and-next-project-post-pages." tabindex="-1">Setting up previous and next project post pages.</h3>
<p data-wordfix="true">Ok, today we're going to try next and previous pages. Apparently there are <a href="https://www.11ty.dev/docs/filters/collection-items/" target="_blank">universal filters built in to Eleventy that we can use to find previous and next posts</a>. Let's give it a try.</p>
<p>Ok, the default set up is for a general posts collection, but what I need is the project collection. But first I'm going to make sure it works in the standard configuration. I can pull the styling in from the work I did on tag pages.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/46e7421d752e035f307b0280fb695790160c1f2f" class="git-commit-link"><code>git commit -am &quot;Basic post pagination&quot;</code></a></p>
<p>Ok, figuring out the collection time.</p>
<p>Judging from my work back on days 10 and 11 I don't think there's a really good way to do so just within the Nunjucks template. I guess I'll need a custom shortcode. I can use the <code>projectList</code> shortcode again and see if I can't pull some useful code out of the <code>getPreviousCollectionItem</code> function <a href="https://github.com/11ty/eleventy/blob/36713b3af81b08530fac532ceef24f5dde8acb36/src/defaultConfig.js#L25" target="_blank">built into 11ty</a>.</p>
<p data-wordfix="true">Ok, so I want to use the same function that is being referred to in Eleventy. I'll pull it in</p>
<p><code>const getCollectionItem = require(&quot;@11ty/eleventy/src/Filters/GetCollectionItem&quot;);</code></p>
<p data-wordfix="true">Ok, unlike before, this should be a filter if I want to duplicate the functionality in Eleventy core.</p>
<h4 id="create-the-filter-tag" tabindex="-1">Create the Filter tag</h4>
<p>I gotta remember that the <code>page</code> object is very specific. I had to log it to remember how the object worked.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-31/#code-skip-hello-day-31-8" id="skip-to-code-skip-hello-day-31-8" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">{</span><br />  date<span class="token operator">:</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">16</span>T03<span class="token operator">:</span><span class="token number">59</span><span class="token operator">:</span><span class="token number">43.100</span>Z<span class="token punctuation">,</span><br />  inputPath<span class="token operator">:</span> <span class="token string">'./src/posts/projects/devblog/hello-day-4.md'</span><span class="token punctuation">,</span><br />  fileSlug<span class="token operator">:</span> <span class="token string">'hello-day-4'</span><span class="token punctuation">,</span><br />  filePathStem<span class="token operator">:</span> <span class="token string">'/posts/projects/devblog/hello-day-4'</span><span class="token punctuation">,</span><br />  url<span class="token operator">:</span> <span class="token string">'/posts/projects/devblog/hello-day-4/'</span><span class="token punctuation">,</span><br />  outputPath<span class="token operator">:</span> <span class="token string">'docs/posts/projects/devblog/hello-day-4/index.html'</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-31-8">So no project property. The project proprty of the post is escaped into its own variable in the page template</p>
<p>So now the template calls the filter like:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-31/#code-skip-hello-day-31-7" id="skip-to-code-skip-hello-day-31-7" class="skip-link">Skip code block ▼</a></p>
<pre class="language-njk"><code class="language-njk">	<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">set</span> previousPost <span class="token operator">=</span> collections<span class="token punctuation">.</span>posts <span class="token operator">|</span> <span class="token function">getPreviousProjectItem</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> project<span class="token punctuation">)</span> </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />	<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">set</span> nextPost <span class="token operator">=</span> collections<span class="token punctuation">.</span>posts <span class="token operator">|</span> <span class="token function">getNextProjectItem</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> project<span class="token punctuation">)</span> </span><span class="token templateTagBoundary template-tag-boundary">%}</span></code></pre>
<p id="code-skip-hello-day-31-7">Ok so now I have passed into the function the posts collection, the page object and the project name. Now to set up a function to walk through the posts collection and find the right post that is a project post and this project's post in particular.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-31/#code-skip-hello-day-31-6" id="skip-to-code-skip-hello-day-31-6" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">eleventyConfig<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><br />		<span class="token string">"getPreviousProjectItem"</span><span class="token punctuation">,</span><br />		<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">collection<span class="token punctuation">,</span> page<span class="token punctuation">,</span> project</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br />			<span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br />			<span class="token keyword">let</span> found <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br />			<span class="token keyword">if</span> <span class="token punctuation">(</span>project<span class="token punctuation">)</span><span class="token punctuation">{</span><br />				<span class="token keyword">let</span> lastPost<span class="token punctuation">;</span><br />				<span class="token keyword">while</span> <span class="token punctuation">(</span>found <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />					lastPost <span class="token operator">=</span> <span class="token function">getCollectionItem</span><span class="token punctuation">(</span>collection<span class="token punctuation">,</span> page<span class="token punctuation">,</span> index<span class="token punctuation">)</span><br />					<span class="token keyword">if</span> <span class="token punctuation">(</span>lastPost<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">"project"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> lastPost<span class="token punctuation">.</span>data<span class="token punctuation">.</span>project <span class="token operator">==</span> project<span class="token punctuation">)</span><span class="token punctuation">{</span><br />						found <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br />					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />						index <span class="token operator">=</span> index<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br />					<span class="token punctuation">}</span><br />				<span class="token punctuation">}</span><br />				<span class="token keyword">return</span> lastPost<span class="token punctuation">;</span><br />			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br />			<span class="token punctuation">}</span><br /><br />		<span class="token punctuation">}</span><br />	<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-31-6">Ok, I want to simplify it. But also, I am seeing one issue. Gotta check that the post exists, otherwise the first and last page will crash. Ok, let's fix that first.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-31/#code-skip-hello-day-31-5" id="skip-to-code-skip-hello-day-31-5" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	eleventyConfig<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><br />		<span class="token string">"getNextProjectItem"</span><span class="token punctuation">,</span><br />		<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">collection<span class="token punctuation">,</span> page<span class="token punctuation">,</span> project</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br />			<span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><br />			<span class="token keyword">let</span> found <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br />			<span class="token keyword">if</span> <span class="token punctuation">(</span>project<span class="token punctuation">)</span><span class="token punctuation">{</span><br />				<span class="token keyword">let</span> lastPost<span class="token punctuation">;</span><br />				<span class="token keyword">while</span> <span class="token punctuation">(</span>found <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />					lastPost <span class="token operator">=</span> <span class="token function">getCollectionItem</span><span class="token punctuation">(</span>collection<span class="token punctuation">,</span> page<span class="token punctuation">,</span> index<span class="token punctuation">)</span><br />					<span class="token keyword">if</span> <span class="token punctuation">(</span>lastPost <span class="token operator">&amp;&amp;</span> lastPost<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">"project"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> lastPost<span class="token punctuation">.</span>data<span class="token punctuation">.</span>project <span class="token operator">==</span> project<span class="token punctuation">)</span><span class="token punctuation">{</span><br />						found <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br />					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>lastPost<span class="token punctuation">)</span><span class="token punctuation">{</span><br />							<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br />						<span class="token punctuation">}</span><br />						index <span class="token operator">=</span> index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span><br />					<span class="token punctuation">}</span><br />				<span class="token punctuation">}</span><br />				<span class="token keyword">return</span> lastPost<span class="token punctuation">;</span><br />			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />				<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br />			<span class="token punctuation">}</span><br />		<span class="token punctuation">}</span><br />	<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="simplify-the-while-loop" tabindex="-1">Simplify the While loop</h4>
<p id="code-skip-hello-day-31-5">Ok, let's pull out the function, make it repeatable.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-31/#code-skip-hello-day-31-4" id="skip-to-code-skip-hello-day-31-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	<span class="token keyword">function</span> <span class="token function">getNProjectItem</span><span class="token punctuation">(</span><span class="token parameter">collection<span class="token punctuation">,</span> page<span class="token punctuation">,</span> projectName<span class="token punctuation">,</span> index<span class="token punctuation">,</span> operation</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br />		<span class="token keyword">let</span> found <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br />		<span class="token keyword">if</span> <span class="token punctuation">(</span>projectName<span class="token punctuation">)</span><span class="token punctuation">{</span><br />			<span class="token keyword">let</span> lastPost<span class="token punctuation">;</span><br />			<span class="token keyword">while</span> <span class="token punctuation">(</span>found <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />				lastPost <span class="token operator">=</span> <span class="token function">getCollectionItem</span><span class="token punctuation">(</span>collection<span class="token punctuation">,</span> page<span class="token punctuation">,</span> index<span class="token punctuation">)</span><br />				<span class="token keyword">if</span> <span class="token punctuation">(</span>lastPost <span class="token operator">&amp;&amp;</span> lastPost<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">"project"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> lastPost<span class="token punctuation">.</span>data<span class="token punctuation">.</span>project <span class="token operator">==</span> projectName<span class="token punctuation">)</span><span class="token punctuation">{</span><br />					found <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br />				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />					<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>lastPost<span class="token punctuation">)</span><span class="token punctuation">{</span><br />						<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br />					<span class="token punctuation">}</span><br />					index <span class="token operator">=</span> <span class="token function">operation</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span><br />				<span class="token punctuation">}</span><br />			<span class="token punctuation">}</span><br />			<span class="token keyword">return</span> lastPost<span class="token punctuation">;</span><br />		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br />		<span class="token punctuation">}</span><br />	<span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-31-4">Now my filter call looks like this.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-31/#code-skip-hello-day-31-3" id="skip-to-code-skip-hello-day-31-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	eleventyConfig<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><br />		<span class="token string">"getPreviousProjectItem"</span><span class="token punctuation">,</span><br />		<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">collection<span class="token punctuation">,</span> page<span class="token punctuation">,</span> project</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br />			<span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><br />			<span class="token keyword">return</span> <span class="token function">getNProjectItem</span><span class="token punctuation">(</span>collection<span class="token punctuation">,</span> page<span class="token punctuation">,</span> project<span class="token punctuation">,</span> index<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-31-3">Ok, there's one other thing I need. I need to exclude the &quot;Things I Learned&quot; posts.</p>
<p>I have the check for them now, the <code>wrapup</code> property.</p>
<p>That means the check now looks like this:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-31/#code-skip-hello-day-31-2" id="skip-to-code-skip-hello-day-31-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><br />	lastPost <span class="token operator">&amp;&amp;</span><br />	lastPost<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">"project"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span><br />	lastPost<span class="token punctuation">.</span>data<span class="token punctuation">.</span>project <span class="token operator">==</span> projectName <span class="token operator">&amp;&amp;</span><br />	<span class="token operator">!</span>lastPost<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'wrapup'</span><span class="token punctuation">)</span><br /><span class="token punctuation">)</span><span class="token punctuation">{</span></code></pre>
<p id="code-skip-hello-day-31-2">Ok it's looking good!</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/0c62e6ab21d2556e2bcd3df554e3342ad5dfc7e9" class="git-commit-link"><code>git commit -am &quot;Setting up in-post pagination for projects&quot;</code></a></p>
<p>Ok, clean up time. Oh and I should make sure this is only for project work days, so an <code>if</code> check for that in the template.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-31/#code-skip-hello-day-31-1" id="skip-to-code-skip-hello-day-31-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid">    <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">if</span> project and not wrapup </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />        <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">set</span> previousPost <span class="token operator">=</span> collections<span class="token punctuation">.</span>posts <span class="token operator">|</span> <span class="token function">getPreviousProjectItem</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> project<span class="token punctuation">)</span> </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />        <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">set</span> nextPost <span class="token operator">=</span> collections<span class="token punctuation">.</span>posts <span class="token operator">|</span> <span class="token function">getNextProjectItem</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> project<span class="token punctuation">)</span> </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagination<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br />            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{% if previousPost %}{{ previousPost.url }}{% else %}javascript:void(0){% endif %}<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagination-link {% if previousPost %}cursor-pointer {% else %} cursor-default disabled-link{% endif %}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Previous Project Days<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br /><br />            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{% if nextPost %}{{ nextPost.url }}{% else %}javascript:void(0){% endif %}<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagination-link {% if nextPost %}cursor-pointer {% else %} disabled-link cursor-default{% endif %}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Next Project Day<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br />        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br />    <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endif </span><span class="token templateTagBoundary template-tag-boundary">%}</span></code></pre>
<p id="code-skip-hello-day-31-1">Ok, looking good. One more thing to check off the list!</p>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</li>
</ul>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/b0f64c92e21f230ee13692a99e347f0eed5678da" class="git-commit-link"><code>git commit -am &quot;Finish off day 31&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 30: Learning how to do Things I Learned</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-30/?source=rss</link>
		<pubDate>Sat, 13 Nov 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-30/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?) - Yes it would be!</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Add a Things I Learned section to the project pages that are the things I learned from that specific project.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a technical reading log to the homepage</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank">Hide</a> empty sections.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add byline to post pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Have table of contents attach to sidebar bottom on mobile</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Support dark mode</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Social Icons</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> SEO/Social/JSON-LD HEAD data</p>
</li>
</ul>
<h2 id="day-30" tabindex="-1">Day 30</h2>
<p>Ok, day 30. Pretty big benchmark and it looks like I'm getting close to being done.</p>
<p>Let's check a small one off the list first and hide the empties.</p>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank">Hide</a> empty sections.</li>
</ul>
<h3 id="adding-things-i-learned-to-the-project-page" tabindex="-1">Adding Things I Learned to the Project Page</h3>
<p>I am going to want to create some boxes if I want to set up Things I Learned on the project pages. That's going to mean collapsing some boxes too.</p>
<p>Ok, I'm on a new computer and for some reason the Sass file for the project template is not rebuilding. What's going on here?</p>
<p>Oh, something weird must be going on because for some reason on this computer (which is an old laptop I've tried to reclaim some usefulness via setting it up with Ubuntu) is not passing the <code>process.env.DOMAIN</code> variable. Oops... forgot to set up my <code>.env</code> file with <code>IS_LOCAL=true</code>. Ok, everything is working now!</p>
<p>Ok, everything is loading now and I did some styling with Flexbox for a fast and easy two column layout.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-30/#code-skip-hello-day-30-1" id="skip-to-code-skip-hello-day-30-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-scss"><code class="language-scss"> #postcontent<br />        .content-lists-container<br />            <span class="token property">display</span><span class="token punctuation">:</span> flex<br />            <span class="token property">justify-content</span><span class="token punctuation">:</span> center<br />            @media print<span class="token punctuation">,</span> screen <span class="token operator">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 630px<span class="token punctuation">)</span><br />                <span class="token property">display</span><span class="token punctuation">:</span> block<br />            .content-list<br />                <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<br />                <span class="token property">min-width</span><span class="token punctuation">:</span> 38%<br />                &amp;<span class="token punctuation">:</span><span class="token function">nth-child</span><span class="token punctuation">(</span>2<span class="token punctuation">)</span><br />                    <span class="token property">margin-left</span><span class="token punctuation">:</span> 10px<br />                    <span class="token property">padding-left</span><span class="token punctuation">:</span> 10px<br />                    <span class="token property">border-left</span><span class="token punctuation">:</span> 1px solid black<br />                @media print<span class="token punctuation">,</span> screen <span class="token operator">and</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> 630px<span class="token punctuation">)</span><br />                    <span class="token property">padding</span><span class="token punctuation">:</span> 0<br />                    &amp;<span class="token punctuation">:</span><span class="token function">nth-child</span><span class="token punctuation">(</span>2<span class="token punctuation">)</span><br />                        <span class="token property">border-left</span><span class="token punctuation">:</span> 0<br />                        <span class="token property">margin-left</span><span class="token punctuation">:</span> 0<br />                        <span class="token property">padding</span><span class="token punctuation">:</span> 0</code></pre>
<p id="code-skip-hello-day-30-1">Looks good!</p>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a Things I Learned section to the project pages that are the things I learned from that specific project.</li>
</ul>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/722f40c430343e84f32aec91ce665d99c3a4feaf" class="git-commit-link"><code>git commit -am &quot;Style work for  day 30&quot;</code></a></p>
<p>I put in a dummy post for things I learned just to make sure everything worked and it did. Don't forget, I need a <code>h2</code> level header in every post. I'll remove it now.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/feaa407464ed13b5c26288008386e953de0d2db7" class="git-commit-link"><code>git commit -am &quot;Finish off day 30&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 29: Schema.org and Authorship</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-29/?source=rss</link>
		<pubDate>Sat, 13 Nov 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-29/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?) - Yes it would be!</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Add a Things I Learned section to the project pages that are the things I learned from that specific project.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a technical reading log to the homepage</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank">Hide</a> empty sections.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add byline to post pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Have table of contents attach to sidebar bottom on mobile</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Support dark mode</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Social Icons</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> SEO/Social/JSON-LD HEAD data</p>
</li>
</ul>
<h2 id="day-29" tabindex="-1">Day 29</h2>
<p>Ok, all the SEO/SEM stuff is good. It's been a while so let's knock out an easy one and add my byline to post pages.</p>
<p>I'll pull the byline header from the index page and turn it into a partial. But I don't want people to click off the site to my ID page like they are now. I should use <a href="https://schema.org/Person" target="_blank">the Microdata for the Person object</a> to link my identity page on Github to my byline on this site.</p>
<p>Hopefully I'll get this right. It looks like way to handle it is with a container of <code>itemprop</code> with the Person type.</p>
<p><code>&lt;h5 itemprop=&quot;author&quot; itemscope itemtype=&quot;https://schema.org/Person&quot;&gt;</code></p>
<p>I want to keep the link to my ID and it <a href="https://schema.org/Person#eg-0189" target="_blank">looks like the way to do that</a> is using a self-closing <code>link</code> tag.</p>
<p><code>&lt;link itemprop=&quot;sameAs&quot; href=&quot;http://aramzs.github.io/aramzs/&quot; /&gt;</code></p>
<p>But if I want it to properly designate this as 'author' it can't stand on it's own. It'll need to be in a larger schema object. I guess that means giving my blog posts the <a href="http://schema.org/" target="_blank">Schema.org</a> markup for a <a href="https://schema.org/CreativeWork" target="_blank">Creative Work</a>. Might not be worth it but I wonder... can I have a block that is just properties for a tag?</p>
<p>Looks like yes:</p>
<p><code>&lt;body {% block bodytags %}{% endblock %}&gt;</code></p>
<p>And then I can fill that in with:</p>
<p><code>{% block bodytags %}itemscope itemtype=&quot;https://schema.org/CreativeWork&quot;{% endblock %}</code></p>
<p>End then I can add a little custom styling to make it smaller for the article context where it is less relevant. I'll move the style up to my <code>user.sass</code> file and then add a post specific rule to change the size.</p>
<p>Looks good and <a href="https://validator.schema.org/" target="_blank">looks like it validates</a>!</p>
<p>Ok, didn't have much time today, so just a short dip of the toe.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/e9199fb6a99425e68ca654632a4f590ae384aee8" class="git-commit-link"><code>git commit -am &quot;Set up byline on posts&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 28: Featured Images</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-28/?source=rss</link>
		<pubDate>Fri, 08 Oct 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-28/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?) - Yes it would be!</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Add a Things I Learned section to the project pages that are the things I learned from that specific project.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a technical reading log to the homepage</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank">Hide</a> empty sections.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Add byline to post pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Have table of contents attach to sidebar bottom on mobile</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Support dark mode</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Social Icons</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> SEO/Social/JSON-LD HEAD data</p>
</li>
</ul>
<h2 id="day-28" tabindex="-1">Day 28</h2>
<p>Ok, we're blocked from finishing the various social and search tags by the lack of feature images in the blog. So that's next.</p>
<h3 id="featured-images" tabindex="-1">Featured Images</h3>
<p>So I want to have intellegent defaults here as well. I can have defaults at the project level, the site level and the individual post level. For the Devblog project I'll add to the <code>devblog.json</code> file <code>&quot;featuredImage&quot;: &quot;radial_crosshair.jpg&quot;</code>. All my images will be in <code>../img/</code> so to keep it DRY let's leave that out of the filepaths.</p>
<p>I'll set the same property at the site level, taking my default image from my GitHub blog.</p>
<p>Ok, for the individual blog posts I guess I'll need a little more detail. Since I'll often be taking photos from Creative Commons I need to have a place to put credit. Ok, so I've got a few things to add to the YAML metadata.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-28/#code-skip-hello-day-28-3" id="skip-to-code-skip-hello-day-28-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">featuredImage</span><span class="token punctuation">:</span> <span class="token string">"close-up-keys.jpg"</span><br /><span class="token key atrule">featuredImageCredit</span><span class="token punctuation">:</span> <span class="token string">"'TYPE' by SarahDeer is licensed with CC BY 2.0"</span><br /><span class="token key atrule">featuredImageLink</span><span class="token punctuation">:</span> <span class="token string">"https://www.flickr.com/photos/40393390@N00/2386752252"</span><br /><span class="token key atrule">featuredImageAlt</span><span class="token punctuation">:</span> <span class="token string">"Close up photo of keys."</span></code></pre>
<p id="code-skip-hello-day-28-3">I can add the following block to my <code>social-header.njk</code> file now:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-28/#code-skip-hello-day-28-2" id="skip-to-code-skip-hello-day-28-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid"><span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">if</span> featuredImage </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br /><br /><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>og:image<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{site.site_url}}/img/{{featuredImage}}<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br /><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>twitter:image<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{site.site_url}}/img/{{featuredImage}}<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br /><br /><span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endif </span><span class="token templateTagBoundary template-tag-boundary">%}</span></code></pre>
<p id="code-skip-hello-day-28-2"><a target="_blank" href="https://github.com/AramZS/devblog/commit/0dd045779d40d7e34b5461b6cc8547f33c1d9bc9" class="git-commit-link"><code>git commit -am &quot;Day 28 half way done.&quot;</code></a></p>
<p data-wordfix="true"><a href="https://aramzs.github.io/jekyll/social-media/2015/11/11/be-social-with-jekyll.html" target="_blank">In my Jekyll site</a> I had to code a page-level value with a site-level fallback. <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">11ty's deep data merge process</a> allows me to just rely on the cascade of settings and JSON files to properly select a default.</p>
<p>Ok, that's the social tags! I'll set an else condition to make sure that there is always an og:type (default to <code>content=&quot;website&quot;</code>) and we're good to go.</p>
<p>Oh, I want to add the post image to the template too, but only when it is one set at the post level. Being a good web citizen, I should always have alt text on my image, so I'm going to only include it in the post template when I have alt text, that's an easy way to assure not every post has the default image.</p>
<p>I dunno what the right tag is for this? Sometimes I use <code>aside</code> but I think I'm supposed to use <code>figure</code> right? I'll use that here.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-28/#code-skip-hello-day-28-1" id="skip-to-code-skip-hello-day-28-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid">    <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">if</span> featuredImageAlt </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>figure</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>figure preview-image<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br />        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{site.site_url}}/img/{{featuredImage}}<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{featuredImageAlt}}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br />        <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">if</span> featuredImageCaption or featuredImageCredit </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>figcaption</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>figcaption<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br />            <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">if</span> featuredImageCaption  </span><span class="token templateTagBoundary template-tag-boundary">%}</span>{{featuredImageCaption}}<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endif </span><span class="token templateTagBoundary template-tag-boundary">%}</span><span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">if</span> featuredImageCredit  </span><span class="token templateTagBoundary template-tag-boundary">%}</span> | <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ featuredImageLink }}<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{featuredImageCredit}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">></span></span> | <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endif </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>figcaption</span><span class="token punctuation">></span></span><br />        <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endif </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>figure</span><span class="token punctuation">></span></span><br />    <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endif </span><span class="token templateTagBoundary template-tag-boundary">%}</span></code></pre>
<p id="code-skip-hello-day-28-1">Ok, basic image stuff works!</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/0f04a9efac2aad66546be0131707a6ae2a4d9060" class="git-commit-link"><code>git commit -am &quot;Last commit from day 28&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 27: CSS and Social Tags</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-27/?source=rss</link>
		<pubDate>Tue, 05 Oct 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-27/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?) - Yes it would be!</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Add a Things I Learned section to the project pages that are the things I learned from that specific project.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a technical reading log to the homepage</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank">Hide</a> empty sections.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Add byline to post pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Have table of contents attach to sidebar bottom on mobile</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Support dark mode</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Social Icons</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> SEO/Social/JSON-LD HEAD data</p>
</li>
</ul>
<h2 id="day-27" tabindex="-1">Day 27</h2>
<h3 id="footer-size" tabindex="-1">Footer size</h3>
<p>I want to add a link to the repo for the blog. Hmm, the footer's <code>small</code> element is getting its style overwritten. I'll decrease the size, but it looks like the line-height isn't applying the way I'd like. Didn't this happen before? Oh yeah, on <a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-27/hello-day-22.md" target="_blank">Day 22</a>. It had something to do with the <code>display</code> type in the CSS right? Yup. Ok, so let's just switch to <code>display: block</code>.</p>
<h3 id="social-icons" tabindex="-1">Social Icons</h3>
<p>Ok, let's create some social icons! I've pulled down some of the icons I want to use in SVG format and to create clear reusable modules here I've given each social icon its own NJK file and creating a <code>social-block</code> NJK file.</p>
<p>Good stuff, now I just have to size and align the social media icon containers, that will size the SVGs inside.</p>
<p>I'll use <code>text-align: center</code> on the containing block to get the icons centered underneath my byline on the homepage.</p>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Social Icons</li>
</ul>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/9b2fee8b143cb6463ff4bcedaa8ddea68e06b9ee" class="git-commit-link"><code>git commit -am &quot;Fix footer and set homepage social icons&quot;</code></a></p>
<h3 id="socialseo-block" tabindex="-1">Social/SEO Block</h3>
<p>Ok, let's set up some social header data. Let's refer back to <a href="https://aramzs.github.io/jekyll/social-media/2015/11/11/be-social-with-jekyll.html" target="_blank">my post on social meta tags for Jekyll</a>, as I suspect it will be useful to reuse here.</p>
<p>First I'll set up a partial file <code>social-header.njk</code>. Like with my Jekyll site I have a <code>site</code> object that contains basic information I can keep in the mix as a default.</p>
<p>I'll need to add a <code>description</code> to my site object, but that's easy enough.</p>
<p>Oh and I need to have my <code>og:url</code> work without an extra trailing slash, so I'll add an if statement - <code>{{site.site_url}}{% if page.url %}/{{ page.url }}{% endif %}</code></p>
<p>Huh... I still have a trailing slash.</p>
<p>Oh interesting, the homepage <code>page.url</code> is just <code>/</code> so I don't need an if statement I guess?</p>
<p>Yup, that works!</p>
<p>But I don't have a truncate function here, so I'll have to <a href="https://mozilla.github.io/nunjucks/api#custom-filters" target="_blank">make my own filter</a> to handle truncating a string.</p>
<p>Oh wait, no, <a href="https://mozilla.github.io/nunjucks/templating.html#truncate" target="_blank">there is a preexisting filter</a>.</p>
<p>Ok the filters I was using in Jekyll don't port over exactly. It looks like I can replace <code>strip_html | strip_newlines</code> with <code>| striptags(false)</code>.</p>
<p>Apparently I can't put line breaks into the templates the same way I can with Jekyll, so I'll have to collapse the various line-breaks and make it slightly less readable.</p>
<p>Ok, easy enough, I got everything figured out. Let's get the rest of the tags in.</p>
<p>Oh, right, I can't use <code>excerpt</code>, I'm using the more... uhh... descriptive 'description' property. Let's switch that. And I can't forget to strip out <code>page.</code> for individual posts.</p>
<p>Hmmm... <a href="https://github.com/11ty/eleventy/issues/869" target="_blank">no built-in last-modified</a>, so I guess I'll handle it the same way, it will be in place when I manually add it to the post metadata, otherwise it will get skipped.</p>
<p>I'll switch my <code>section</code> to be the <code>project</code> property in my posts. Cool, make sure to add an if check and we're good there.</p>
<p>The rest of my old post deals with featured images, which I haven't figured out yet, so I figure I'll handle that next time.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/61c18e87a89a5aea0c48a22a71d18301c9a2710c" class="git-commit-link"><code>git commit -am &quot;Set up initial social sharing tags&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 26: Metadata and Short Browsers</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-26/?source=rss</link>
		<pubDate>Tue, 28 Sep 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-26/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?) - Yes it would be!</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Add a Things I Learned section to the project pages that are the things I learned from that specific project.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Add a technical reading log to the homepage</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank">Hide</a> empty sections.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Add byline to post pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Have table of contents attach to sidebar bottom on mobile</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Support dark mode</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Social Icons</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> SEO/Social/JSON-LD HEAD data</p>
</li>
</ul>
<h2 id="day-26" tabindex="-1">Day 26</h2>
<p>Wait... what am I using the <code>subtitle</code> metadata for? Maybe that should go under the title on post pages? Yeah let's do that.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-26/#code-skip-hello-day-26-4" id="skip-to-code-skip-hello-day-26-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid">                        <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">if</span> <span class="token string">'/posts'</span> not <span class="token keyword">in</span> page<span class="token punctuation">.</span>url </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ description }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br />                        <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endif </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />                        <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">if</span> <span class="token string">'/posts'</span> <span class="token keyword">in</span> page<span class="token punctuation">.</span>url and subtitle </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ subtitle }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br />                        <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endif </span><span class="token templateTagBoundary template-tag-boundary">%}</span></code></pre>
<h3 id="short-browsers" tabindex="-1">Short Browsers</h3>
<p id="code-skip-hello-day-26-4">Also, there's a chance the user can really make the browser short if they do it may cause the footer elements to overlap, so let's try and get rid of that.</p>
<p>Using <code>@media (min-width: variables.$large-mobile) and [height argument]</code> I'll hide specific fixed elements in my makeshift sidebar based on window height. By using <code>and (max-height: 850px)</code> I can restrict fixed elements to appear only when there is room for them.</p>
<p>I'll hide the table of contents when the window is 850px or smaller with <code>@media (min-width: variables.$large-mobile) and (max-height: 850px)</code> and hide the taglist and footer at shorter heights so if the window is very short, we'll only have the title.</p>
<p>Actually... I'd prefer not to totally hide the Table of Contents, but have it return to place above the content if the browser is too short. While I'll keep the CSS Media Query <code>and</code> rule for the tags and footer as is, I can switch the <code>#toc-container</code> rule to be <code> and (min-height: 962px)</code></p>
<p>But wait... the element is not going to scroll when it gets too high. Hmmm. Let's try a containing element... hmm no that's not it by itself. Oh, let's set a max-height on the content itself. Hmm, it makes it a little narrow. Let's try and attach that scrollbar somewhere else.</p>
<p>Ok, I'll use the container div I set up when I was playing with getting <code>max-height</code> working and set my overflow CSS on that. Oh yeah, that looks much better.</p>
<p><code>git commit -m &quot;Fix height and positioning for short browser windows&quot;</code></p>
<h3 id="autolinks-for-git-commits" tabindex="-1">Autolinks for Git Commits?</h3>
<p>Ok, I <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">found some interesting ideas for traversing the Github API</a> to get the actual commit links that I can auto apply to links here. Finding the strings will be it's own interesting task but for now I am experimenting with the API with the following requests:</p>
<ul>
<li><a href="https://api.github.com/repos/AramZS/devblog/git/refs/heads/main" target="_blank">Get the repo HEAD on the <code>main</code> branch</a>.</li>
<li><a href="https://api.github.com/repos/AramZS/devblog/git/commits/22240416f821b3aafe4e47f3d95fc23ec3021d58" target="_blank">Get commit by hash at HEAD</a></li>
<li><a href="https://api.github.com/repos/AramZS/devblog/git/commits/3907d1444d79208d41995dfc41db5e85d7de94f3" target="_blank">Get commit by parent hash of HEAD commit</a></li>
<li><a href="https://api.github.com/repos/AramZS/devblog/git/trees/3cd2735001a8c60d995d49391f9b45b6ce530e6d" target="_blank">Get commit tree</a></li>
<li><a href="https://api.github.com/repos/AramZS/devblog/events" target="_blank">Look at commits by push event</a></li>
<li><a href="https://github.com/AramZS/devblog/commits/main.atom" target="_blank">Get latest commits via Atom feed</a></li>
</ul>
<p>None are exactly right, but I might be able to walk backwards through parent commits if I start at the HEAD. I think I'll also want to cache commits so I don't have to walk the tree of commits on every build.</p>
<p><code>git commit -m &quot;Add repo URL for future API calls.&quot;</code></p>
<h3 id="blogroll-and-links" tabindex="-1">Blogroll and Links</h3>
<p>Ok, I know I said I'd lock scope, but this one last expansion! I want to have useful links on the homepage and a blogroll as well. Easy enough to do right? This is the last extra feature, I promise! I'm going to add them as non-post collections in their own folders at <code>src/links</code> and <code>src/blogroll</code>. I'll follow the same pattern I did with posts and projects and create a base <code>json</code> file with default values including the initial collection &quot;tag&quot; and the template I want to use (which won't be the standard one). As an example, I'll put a file at <code>src/blogroll/blogroll.json</code> that has these valeus:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-26/#code-skip-hello-day-26-3" id="skip-to-code-skip-hello-day-26-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br />	<span class="token property">"layout"</span><span class="token operator">:</span> <span class="token string">"fwd.njk"</span><span class="token punctuation">,</span><br />	<span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Aram is regularly reading"</span><span class="token punctuation">,</span><br />	<span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"blogroll"</span> <span class="token punctuation">]</span><span class="token punctuation">,</span><br />	<span class="token property">"date"</span><span class="token operator">:</span> <span class="token string">"Last Modified"</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-26-3">Good stuff! Now I need a template that can handle forwarding users to the correct off-site location. There's some fun and fancy ways to do this with Netlify I know, but I'm not using Netlify. So basic is the goal.</p>
<p>I'm going to use <code>isBasedOn</code> as the YAML metadata for the origin URL. This is broadly applicable if I write posts that are not intended to forward, so it means less metadata fields to get confused over and syncs with the <a href="http://schema.org/" target="_blank">Schema.org</a> property, which I like to use for this sort of thing. For the page itself, I'm going to steal an iteration of the template from <a href="http://bit.ly/" target="_blank">Bit.ly</a> and make some modifications. I'll give it a title, a canonical link, and a JSON-LD block. Finally, the key to all this is a META refresh tag with the refresh time sent to <code>0</code> so it forwards immediately.</p>
<p>Here's the final template (for now).</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-26/#code-skip-hello-day-26-2" id="skip-to-code-skip-hello-day-26-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span><br />    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span><br />        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br />        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br />        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canonical<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ isBasedOn }}<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br />        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Link<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>canonical<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ isBasedOn }}<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br />        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>refresh<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0; URL=<span class="token punctuation">'</span>{{ isBasedOn }}<span class="token punctuation">'</span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><br />        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Fight With Tools Redirect: {{title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span><br />		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>application/ld+json<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"><br />        <span class="token punctuation">{</span><br />            <span class="token string">"@context"</span><span class="token operator">:</span> <span class="token string">"http://schema.org"</span><span class="token punctuation">,</span><br />            <span class="token string">"@type"</span><span class="token operator">:</span> <span class="token string">"BlogPosting"</span><span class="token punctuation">,</span><br />            <span class="token string">"headline"</span><span class="token operator">:</span> <span class="token string">"{{title}}"</span><span class="token punctuation">,</span><br />            <span class="token string">"description"</span><span class="token operator">:</span> <span class="token string">"{{description}}"</span><span class="token punctuation">,</span><br />            <span class="token string">"mainEntityOfPage"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />                <span class="token string">"@type"</span><span class="token operator">:</span> <span class="token string">"WebPage"</span><span class="token punctuation">,</span><br />                <span class="token string">"@id"</span><span class="token operator">:</span> <span class="token string">"{{ isBasedOn }}"</span><br />            <span class="token punctuation">}</span><span class="token punctuation">,</span><br />            <span class="token string">"isBasedOn"</span><span class="token operator">:</span> <span class="token string">"{{ isBasedOn }}"</span><span class="token punctuation">,</span><br />            <span class="token string">"isPartOf"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br />                <span class="token string">"@type"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"CreativeWork"</span><span class="token punctuation">,</span> <span class="token string">"Product"</span><span class="token punctuation">,</span> <span class="token string">"Blog"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />                <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"Fight With Tools.dev"</span><span class="token punctuation">,</span><br />                <span class="token string">"productID"</span><span class="token operator">:</span> <span class="token string">"fightwithtools.dev"</span><br />            <span class="token punctuation">}</span><br />        <span class="token punctuation">}</span><br />    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><br />    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span><br />    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span><br />        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{isBasedOn}}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>moved here<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br />    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><br /><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>
<p id="code-skip-hello-day-26-2">And here's a YAML statement in <code>src/blogroll/hacktext.md</code>.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-26/#code-skip-hello-day-26-1" id="skip-to-code-skip-hello-day-26-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">"Hack Text"</span><br /><span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">"Thinking about Narrative"</span><br /><span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2021-09-27 22:59:43.10 -4</span><br /><span class="token key atrule">isBasedOn</span><span class="token punctuation">:</span> <span class="token string">"https://hacktext.com"</span><br /><span class="token key atrule">tags</span><span class="token punctuation">:</span><br />  <span class="token punctuation">-</span> Personal Blog</code></pre>
<p id="code-skip-hello-day-26-1">Looks like it works! I think for a fast put-together, this works just fine and lets me do what I want! Good stuff. If I'm going to open a scope, I might as well close it on the same day. But no more of that, let's focus on closing the last remaining todos for next days.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/29ae79850439397742e0b7147a0fd9b5683058a4" class="git-commit-link"><code>git commit -am &quot;Set up blogroll and links and write up day 26&quot;</code></a></p>
<p>Oops forgot to add the <code>raw</code> tags to escape my code.</p>
<p><code>git commit -am &quot;Add escaping tags to day 26</code></p>
<p>Touching up this post and realized, I didn't expand the scope, the reading log was already in there, lol.</p>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Add a technical reading log to the homepage</li>
</ul>
<p><code>git commit -m &quot;Touching up day 26 post&quot;</code></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 25: Tweaking TOC Styles</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-25/?source=rss</link>
		<pubDate>Mon, 27 Sep 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-25/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?) - Yes it would be!</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Add a Things I Learned section to the project pages that are the things I learned from that specific project.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Add a technical reading log to the homepage</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:empty" target="_blank">Hide</a> empty sections.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Add byline to post pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Have table of contents attach to sidebar bottom on mobile</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Support dark mode</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Social Icons</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> SEO/Social/JSON-LD HEAD data</p>
</li>
</ul>
<h2 id="day-25" tabindex="-1">Day 25</h2>
<p>Ok, wow, looking back on my last &quot;day's&quot; notes and it has been a while. Almost a month. I got very busy!</p>
<p>I did a quick review of some of my tasks and checked them off. Getting closer to catching up with my ever-broadining scope!</p>
<p>After some examination of what is in the project thus far and what I've added and completed... I think this is the time to declare a lock on this project. I've added two more items to complete and the 7 primary features I required from this project are done. Now, once I check off all the items of the remaining To Dos I think it'll be time to shift my focus back to Backreads... or to another project.</p>
<p>Ok! That's settled then!</p>
<p>The tag pages do appear to have working pagination with my last changes, though they need some design work, so it seems like now is a good time to do some CSS work!</p>
<p>I'll pull most of the preexisting classes that were on the elements from the theme I took the HTML from and add one of my own for disabled links, that'll be good to reuse. I'll also need to make sure to add an override for the hover state.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-25/#code-skip-hello-day-25-1" id="skip-to-code-skip-hello-day-25-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-sass"><code class="language-sass"><span class="token selector">.disabled-link</span><br /><span class="token property-line">    <span class="token property">color</span><span class="token punctuation">:</span> grey</span><br /><span class="token property-line">    <span class="token property">text-decoration</span><span class="token punctuation">:</span> none</span><br /><span class="token property-line">    <span class="token property">&amp;</span><span class="token punctuation">:</span><span class="token property">hover</span></span><br /><span class="token property-line">        <span class="token property">text-decoration</span><span class="token punctuation">:</span> none</span><br /><span class="token property-line">        <span class="token property">color</span><span class="token punctuation">:</span> grey</span></code></pre>
<p id="code-skip-hello-day-25-1">I next need to set the pagination links to align with the article block. I'll give it a left padding of <code>25px</code> to match the UL indentation on tag pages. Now I need to make it clearer what the links are and what they do.</p>
<p>It's sort of old school, but I'll layer some basic colors and a drop shadow. Why not?</p>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Tags pages with Pagination</li>
</ul>
<p><code>git commit -m &quot;Style pagination&quot;</code></p>
<p>Ok, I'm going to add a sass file and a few per-file overrides to support a dark theme.</p>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Support dark mode</li>
</ul>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/ccb004991de58b4a10fb41b37eff5ad364046bba" class="git-commit-link"><code>git commit -am &quot;Set up dark mode styles&quot;</code></a></p>
<p>Ok, I'm going to move the post description to be below the table of contents and that way I can set a fixed position for the ToC on wider screens and not worry about the <code>header</code> area overlapping with the fixed contents position. And to make sure it doesn't overlap with the footer I'll give it a max-height and set it to scroll if there is too much content.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/22240416f821b3aafe4e47f3d95fc23ec3021d58" class="git-commit-link"><code>git commit -am &quot;Set fixed table of contents&quot;</code></a></p>
<p>Ok, pretty good for a short day's work!</p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Parg 24: Page Template, Nunjucks and Eleventy Filters</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-24/?source=rss</link>
		<pubDate>Mon, 30 Aug 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-24/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create Next Day/Previous Day links on each post / Next/Previous post on post templates from projects</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?) - Yes it would be!</p>
</li>
</ul>
<h2 id="day-24" tabindex="-1">Day 24</h2>
<p>I'm going to pause on trying to debug the nunjucks stuff not working as expected. I have no idea why content is appearing in the wrong block and I see no previous examples of this problem. It makes me more sure than ever that I likely screwed something up with an open tag <em>somewhere</em> but I have no idea where and the tooling isn't showing me like it should. Let's just try and get tag pages' content done first, even if that content is showing up in the wrong area.</p>
<p>I think I need to get better insight into how this object is showing on the page. I want to dump it on the page and examine it. Nunjucks <a href="https://github.com/mozilla/nunjucks/issues/94#issuecomment-241729768" target="_blank">seems to have</a> <code>{{ object | dump | safe}}</code> but it isn't working with a more complicated eleventy-generated object. Let's give a custom debug filter a try. <a href="https://github.com/11ty/eleventy/issues/266#issuecomment-716176366" target="_blank">Looks like some good ideas in the eleventy issues.</a></p>
<p>Ok, <a href="https://github.com/11ty/eleventy/issues/266#issuecomment-841304247" target="_blank">used the comment with a clean echo</a>.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-24/#code-skip-hello-day-24-3" id="skip-to-code-skip-hello-day-24-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">eleventyConfig<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token string">'console'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />    <span class="token keyword">const</span> str <span class="token operator">=</span> util<span class="token punctuation">.</span><span class="token function">inspect</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><br />    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div style="white-space: pre-wrap;"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">unescape</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div>;</span><span class="token template-punctuation string">`</span></span><br /><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-24-3">But when it has a posts object, you end up with all the posts and their content in the middle of the object, which is no good.</p>
<p data-wordfix="true">I'm just going to remove the posts part of the object, but I want to make sure that doesn't impact the overall object, which might be used elsewhere, so I'm going to clone it. I have to use <code>Object.assign</code> for this, because <code>JSON.stringify</code> can't deal with circular references. I may also want to <a href="https://www.11ty.dev/docs/filters/log/" target="_blank">try <code>log</code></a> if this doesn't work.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-24/#code-skip-hello-day-24-2" id="skip-to-code-skip-hello-day-24-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	eleventyConfig<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token string">"console"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		<span class="token keyword">let</span> objToEcho<span class="token punctuation">;</span><br />		<span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">.</span>posts<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />			objToEcho <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			<span class="token keyword">delete</span> objToEcho<span class="token punctuation">.</span>posts<span class="token punctuation">;</span><br />		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />			objToEcho <span class="token operator">=</span> value<span class="token punctuation">;</span><br />		<span class="token punctuation">}</span><br />		<span class="token keyword">const</span> str <span class="token operator">=</span> util<span class="token punctuation">.</span><span class="token function">inspect</span><span class="token punctuation">(</span>objToEcho<span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div style="white-space: pre-wrap;"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">unescape</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div>;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-24-2">Ok, this is useful, so there's three objects to concern oneself with. <code>paged</code> is the object I created with the contents of this page. <code>page</code> is specific metadata about the page, and <code>pagination</code> gives me the information about the previous and next pages, along with information about the collection itself. I can look at them all with this:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-24/#code-skip-hello-day-24-1" id="skip-to-code-skip-hello-day-24-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid">        Pages dump:<br />        {{ paged | console | safe }}<br />        {{ page | console | safe }}<br />        {{ pagination | console | safe }}</code></pre>
<p id="code-skip-hello-day-24-1">Ok, that works, the code I used from the other theme gets me most of the way there, but I'll have to alter the style to make it work properly for me.</p>
<p>Ok. Now that I know what's going on, I feel a little more comfortable asking... wtf is going on with the pagination content not falling into the given block? It has to be something wrong with my <code>base.njk</code> file. But I don't know what. Let's walk it through.</p>
<p>Ok, first I'm going to switch all spacing to spaces. Then I'm going to clean up my messy if/else in defining the <code>html</code> tag as that's difficult to read or manage.</p>
<p>Does Nunjucks support <code>elif</code> as an &quot;else if&quot; expression as I thought on <a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-9/" target="_blank">Day 9</a>? It doesn't appear in Nunjucks docs, but I would assume it does. Removing it doesn't fix my problem, but it isn't really needed, so let's remove it anyway.</p>
<p>It is sort of irritating to have a section before my content when I don't need it, so let's remove the precontent section HTML tag from the base template and add it in the areas I use it instead.</p>
<p>Still nothing.</p>
<p>I'll try a blank page.</p>
<p>Still nothing. Maybe I'm crazy, but unless the rendering engine is broken by HTML comments, something at the rendering engine level is broken.</p>
<p>Let's google this and read some Github issues.</p>
<p>Ok... <a href="https://github.com/11ty/eleventy/issues/834#issuecomment-569474008" target="_blank">this is some eleventy stuff apparently. It just doesn't work as anticipated</a>. I guess it is just rendering everything in the <code>content</code> tag.</p>
<p>Yup, that is what it is... the warning there isn't very clear but yup, can't mix and match. So no njk templates that use blocks in the base site, anywhere I want to have Nunjuck inherence I'll need to use a markdown file in my site folder and manage the actual templates using <code>_layouts</code>.</p>
<p>Ok, that works, time to commit and quit for the night.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/724988a41d3d8b4390b42cf3a310092fe2328bfb" class="git-commit-link"><code>git commit -am &quot;Finishing off day 23, TOC working, pagination is not.&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 23: A Table of Contents</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-23/?source=rss</link>
		<pubDate>Sun, 29 Aug 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-23/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with <a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">links to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create Next Day/Previous Day links on each post</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Next/Previous post on post templates from projects</p>
</li>
</ul>
<h2 id="day-23" tabindex="-1">Day 23</h2>
<p>Huh, pretty sure RSS feeds should be in reverse chronological order, right?</p>
<p><code>git commit -m &quot;Reverse chronological order on feeds.&quot;</code></p>
<h3 id="fix-tag-styling" tabindex="-1">Fix Tag Styling</h3>
<p>Ok, going to fix the tag styling so it works on all sizes.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/083babda199a04d4777e6abb0fabd2342ef843e1" class="git-commit-link"><code>git commit -am &quot;Fix post tag section styling&quot;</code></a></p>
<h3 id="activate-table-of-contents" tabindex="-1">Activate Table of Contents</h3>
<p>Ok, <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">let's try the Table of Contents Plugin</a> real quick. Then I'll need to get the pagination working for tag pages.</p>
<p>I'm going to grab the style from the Wikipedia table of Contents, including their nifty little trick of setting the container to <code>display: table</code> to have it size with the contained text.</p>
<p>Interesting, my Day 1 and Day 2 posts seem to be breaking, with the following error: <code>attempted to output null or undefined value</code>. Looks like it is because there's only an <code>h1</code> tag generated out of that markdown. Because of that, it seems to be printing it twice.</p>
<p>It looks like the issue is in <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/blob/master/src/BuildTOC.js#L20" target="_blank">how the code is processing the headers</a>. But I'm not seeing exactly what it is.</p>
<p>Whatever the problem is, it seems like adding <code>h1</code> to the set of tags is working. I just need to make sure to use the right headers at the right time when writing my markdown.</p>
<p>I want to have the style working a little better now. That means including the same constant for mobile mode so the TOC can have different header spacing on mobile and desktop. Can I move it to a standalone Sass file?</p>
<p>Ok, easy enough to theoretically work. I can move the variable decleration into <code>constants.sass</code> and then import it using <code>@use 'constants'</code>.</p>
<p>Hmmm. That didn't work. <a href="https://stackoverflow.com/questions/17598996/sass-use-variables-across-multiple-files/61500282#61500282" target="_blank">It looks like it should</a>.</p>
<p>I think <a href="https://alistapart.com/article/getting-started-with-sass/" target="_blank">maybe I need to rename the files to have underscores at the beginning</a>.</p>
<p>Hmm... <a href="https://stackoverflow.com/questions/60012955/how-to-use-a-sass-variable-across-multiple-pages-using-use" target="_blank">looks like the variables are namespaced now</a>? Renamed the file to <code>_variables</code> as well. Yup, that seems to have solved the issue.</p>
<p>Now when I want to use variables inside the <code>variables</code> file I have to refer to them as follows:</p>
<p><code>@media (max-width: variables.$mobile-width)</code></p>
<p><code>git commit -m &quot;Add table of contents to posts&quot;</code></p>
<h3 id="tag-pages" tabindex="-1">Tag Pages</h3>
<p>Ok, next we need to paginate the tag pages. I took the structure for the deepTagList from the <code>vredeburg</code> theme so I'm going to look to their structure for pagination as well.</p>
<p>Hmm, just pulling it in doesn't seem to work, but doesn't throw any useful errors either.</p>
<p>My <a href="https://mozilla.github.io/nunjucks/templating.html" target="_blank">block rendering</a> doesn't seem to be working as expected?</p>
<p>Here are my blocks:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-23/#code-skip-hello-day-23-2" id="skip-to-code-skip-hello-day-23-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br />  <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> block content </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />  	{{ content | safe }}<br />  <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endblock </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br /><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span><br /><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>postcontent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br />  <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> block postcontent </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />    <span class="token comment">&lt;!-- postcontent --></span><br />    Post Content Test<br />  <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endblock </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br /><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></code></pre>
<p id="code-skip-hello-day-23-2">And my extending template:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-23/#code-skip-hello-day-23-1" id="skip-to-code-skip-hello-day-23-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid"><span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> block content </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span>Posts tagged: {{paged.tagName}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><br />    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post-summary-list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br />        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><br />        <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"><span class="token operator">-</span> <span class="token keyword">for</span> post <span class="token keyword">in</span> paged<span class="token punctuation">.</span>posts </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> include <span class="token string">"partials/post-summary.njk"</span> </span><span class="token templateTagBoundary template-tag-boundary">%}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br />        <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"><span class="token operator">-</span> endfor </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br />    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br /><span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endblock </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br /><br /><span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> block postcontent </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pagination-block<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br />        Pages:<br />        <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">if</span> collections<span class="token punctuation">.</span>tagList<span class="token punctuation">[</span>paged<span class="token punctuation">.</span>tagName<span class="token punctuation">]</span> <span class="token operator">></span> site<span class="token punctuation">.</span>paginate </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />            <span class="token comment">&lt;!--Pagination--></span><br />            <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> include <span class="token string">"partials/pagination.njk"</span> </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />        <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endif </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br /><span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endblock </span><span class="token templateTagBoundary template-tag-boundary">%}</span></code></pre>
<p id="code-skip-hello-day-23-1">But for some reason the content of <code>postcontent</code> is showing up in the <code>content</code> block.</p>
<p>Is there an open tag somewhere?</p>
<p>(<a href="https://symfony.com/blog/better-white-space-control-in-twig-templates" target="_blank">Found out that I was copying code with newline controls in it, not a problem, but good to know.</a>)</p>
<p>Gotta stop here.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/724988a41d3d8b4390b42cf3a310092fe2328bfb" class="git-commit-link"><code>git commit -am &quot;Finishing off day 23, TOC working, pagination is not.&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Hello World Devblog - Pt. 22</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-22/?source=rss</link>
		<pubDate>Fri, 20 Aug 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-22/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with l<a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">inks to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create Next Day/Previous Day links on each post</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?)</p>
</li>
</ul>
<h2 id="day-22" tabindex="-1">Day 22</h2>
<p>Ok did the basics of finishing off tags pages. I also want to link to them on the individual posts.</p>
<p>But we don't want to link to tag pages that I removed because they're collections but not what I think of as tags. So the same filter I applied to build out the tag pages themselves needs to be applied to the post template. Luckily, I have it set up already.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-22/#code-skip-hello-day-22-6" id="skip-to-code-skip-hello-day-22-6" class="skip-link">Skip code block ▼</a></p>
<pre class="language-js"><code class="language-js">	<span class="token keyword">function</span> <span class="token function">filterTagList</span><span class="token punctuation">(</span><span class="token parameter">tags</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		<span class="token keyword">return</span> <span class="token punctuation">(</span>tags <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><br />			<span class="token punctuation">(</span><span class="token parameter">tag</span><span class="token punctuation">)</span> <span class="token operator">=></span><br />				<span class="token punctuation">[</span><span class="token string">"all"</span><span class="token punctuation">,</span> <span class="token string">"nav"</span><span class="token punctuation">,</span> <span class="token string">"post"</span><span class="token punctuation">,</span> <span class="token string">"posts"</span><span class="token punctuation">,</span> <span class="token string">"projects"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><br />		<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><br /><br />	eleventyConfig<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token string">"filterTagList"</span><span class="token punctuation">,</span> filterTagList<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-22-6">And now I can run my tags list through that filter in the template.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-22/#code-skip-hello-day-22-5" id="skip-to-code-skip-hello-day-22-5" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid"><span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> block prefooter </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>taglist<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br />		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h6</span><span class="token punctuation">></span></span>Tags: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h6</span><span class="token punctuation">></span></span><br />        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><br />			<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"><span class="token operator">-</span> <span class="token keyword">for</span> tag <span class="token keyword">in</span> tags <span class="token operator">|</span> filterTagList <span class="token operator">-</span></span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />			    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ site.site_url }}/tag/{{ tag | slug }}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ tag }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br />			<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"><span class="token operator">-</span> endfor <span class="token operator">-</span></span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br />	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br /><span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endblock </span><span class="token templateTagBoundary template-tag-boundary">%}</span></code></pre>
<p id="code-skip-hello-day-22-5">I don't like how that looks though, so let's apply some styling. We'll keep it in the semantically correct unordered list HTML, but I want to change the layout. First let's move it to be an <code>inline-block</code>. Then let's add some symbols.</p>
<p>Ok we're going to use <code>:after</code>. Oh, why is it autocorrecting me to use <code>::after</code>?</p>
<p><a href="https://stackoverflow.com/questions/17684797/should-i-use-single-colons-or-double-colons-for-before-after-first-le" target="_blank">Apparently, that's the standard!</a> Did not know that. Ok, so I want to have a <code>|</code> seperater between each element, along with the list starting with the character. I know the pseudo-classes for this!</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-22/#code-skip-hello-day-22-4" id="skip-to-code-skip-hello-day-22-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-sass"><code class="language-sass"><span class="token selector">#taglist</span><br />    <span class="token selector">li</span><br /><span class="token property-line">        <span class="token property">font-size</span><span class="token punctuation">:</span> 10px</span><br /><span class="token property-line">        <span class="token property">line-height</span><span class="token punctuation">:</span> 6px</span><br /><span class="token property-line">        <span class="token property">display</span><span class="token punctuation">:</span> inline-block</span><br /><span class="token property-line">        <span class="token property">&amp;</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token property">after</span></span><br /><span class="token property-line">            <span class="token property">content</span><span class="token punctuation">:</span> </span><span class="token string">"|"</span><br /><span class="token property-line">            <span class="token property">margin</span><span class="token punctuation">:</span> 0 3px</span><br /><span class="token property-line">        <span class="token property">&amp;</span><span class="token punctuation">:</span><span class="token property">first-of-type</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token property">before</span></span><br /><span class="token property-line">            <span class="token property">content</span><span class="token punctuation">:</span> </span><span class="token string">"|"</span><br /><span class="token property-line">            <span class="token property">margin</span><span class="token punctuation">:</span> 0</span><br /><span class="token property-line">            <span class="token property">margin-right</span><span class="token punctuation">:</span> 3px</span></code></pre>
<p id="code-skip-hello-day-22-4">Hmm, even with line-height set low, I'm still seeing a large separation between lines. It doesn't appear to be based on line-height, I'm not sure where the separation is coming from, it isn't in margin or padding in the Computed area of the styles.</p>
<p>I think it is just the nature of using <code>inline-block</code> so better to use something else. I'll use <code>display: block</code> and <code>float: left</code>. Then to make things flow properly without it colliding into the element below it I'll have to add the same to the <code>ul</code> container. So final style is like this.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-22/#code-skip-hello-day-22-3" id="skip-to-code-skip-hello-day-22-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-sass"><code class="language-sass"><span class="token selector">#taglist</span><br />    <span class="token selector">ul</span><br /><span class="token property-line">        <span class="token property">display</span><span class="token punctuation">:</span> block</span><br /><span class="token property-line">        <span class="token property">position</span><span class="token punctuation">:</span> relative</span><br /><span class="token property-line">        <span class="token property">float</span><span class="token punctuation">:</span> left</span><br /><span class="token property-line">        <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 12px</span><br />        <span class="token selector">li</span><br /><span class="token property-line">            <span class="token property">font-size</span><span class="token punctuation">:</span> 10px</span><br /><span class="token property-line">            <span class="token property">line-height</span><span class="token punctuation">:</span> 12px</span><br /><span class="token property-line">            <span class="token property">height</span><span class="token punctuation">:</span> 12px</span><br /><span class="token property-line">            <span class="token property">display</span><span class="token punctuation">:</span> block</span><br /><span class="token property-line">            <span class="token property">float</span><span class="token punctuation">:</span> left</span><br /><span class="token property-line">            <span class="token property">margin</span><span class="token punctuation">:</span> 3px 0</span><br /><span class="token property-line">            <span class="token property">padding</span><span class="token punctuation">:</span> 0</span><br /><span class="token property-line">            <span class="token property">&amp;</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token property">after,</span> <span class="token property">&amp;</span><span class="token punctuation">:</span><span class="token property">first-of-type</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token property">before</span></span><br /><span class="token property-line">                <span class="token property">content</span><span class="token punctuation">:</span> </span><span class="token string">"|"</span><br /><span class="token property-line">                <span class="token property">font-size</span><span class="token punctuation">:</span> 11px</span><br /><span class="token property-line">                <span class="token property">font-weight</span><span class="token punctuation">:</span> bold</span><br /><span class="token property-line">                <span class="token property">margin</span><span class="token punctuation">:</span> 0 3px</span><br /><span class="token property-line">            <span class="token property">&amp;</span><span class="token punctuation">:</span><span class="token property">first-of-type</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token property">before</span></span><br /><span class="token property-line">                <span class="token property">margin</span><span class="token punctuation">:</span> 0</span><br /><span class="token property-line">                <span class="token property">margin-right</span><span class="token punctuation">:</span> 3px</span></code></pre>
<h3 id="first-response!" tabindex="-1">First response!</h3>
<p id="code-skip-hello-day-22-3">Ok, I noticed <a href="https://github.com/AramZS/devblog/pull/1" target="_blank">I have a PR</a> around <a href="https://github.com/11ty/eleventy/issues/1879" target="_blank">my attempt to open a custom environment</a>. Let's see if it solves <a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-11/" target="_blank">my problems from day 11</a>.</p>
<p>First <a href="https://github.com/pdehaan" target="_blank"><code>pdehaan</code></a> noted I had a dumb error. Let's see if we can get the array of file strings working properly.</p>
<p data-wordfix="true">Also they ask: Why did I include the normalize function? Well, I can look back <a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-10/" target="_blank">at day 10</a> and see that the reason is because, <a href="https://github.com/11ty/eleventy/blob/6776e871128cc3f9895edddadc6408db8abd7fde/src/TemplatePath.js#L95" target="_blank">that's what Eleventy did</a>. Good to know. It doesn't look like I need it... on Mac at least? But I assume that this has to do with handling weird paths in a multitude of operating systems, so I'll leave it in, just in case I want to develop in another environment.</p>
<p>Ok, let's leave it in place, but correctly fix all the paths.</p>
<p>Good stuff! Looks like it works.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-22/#code-skip-hello-day-22-2" id="skip-to-code-skip-hello-day-22-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">[</span><br />  <span class="token string">'/Users/zuckerscharffa/Dev/fightwithtooldev/src/_includes'</span><span class="token punctuation">,</span><br />  <span class="token string">'/Users/zuckerscharffa/Dev/fightwithtooldev/src/_layouts'</span><span class="token punctuation">,</span><br />  <span class="token string">'/Users/zuckerscharffa/Dev/fightwithtooldev/src'</span><span class="token punctuation">,</span><br />  <span class="token string">'.'</span><br /><span class="token punctuation">]</span></code></pre>
<p id="code-skip-hello-day-22-2">So, do all the other things that broke when I last tried this work? Nope, let's move on to the other comments in the PR.</p>
<p>Ok, so first, I've got a new error. For some reason, it isn't going down to the <code>partials</code> path inside my <code>_includes</code> folder. Ok, I tried removing that specific call and it still isn't working, now it can't see <code>base.njk</code>, so the <code>_includes</code> folder isn't working at all. Let's try the version in the PR.</p>
<p>Huh, ok, does it need <em>relative</em> paths, not absolute ones for some reason?</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-22/#code-skip-hello-day-22-1" id="skip-to-code-skip-hello-day-22-1" class="skip-link">Skip code block ▼</a></p>
<pre><code>[ 'src/_includes', 'src/_layouts', 'src' ]
</code></pre>
<p data-wordfix="true" id="code-skip-hello-day-22-1"><code>pdehaan</code> left off the <code>.</code> path, though that is included in the standard Eleventy setup. I'll add it back in, just for consistency.</p>
<p>Let's fix the other errors I made, before we dive back into the environment issues in more detail.</p>
<p>Ok, I think I've puilled in all of <code>pdehaan</code> suggestions. (Oops I probably should have made a commit after the tags work huh?)</p>
<p>A commit to cover tags changes:</p>
<p><code>git commit -m &quot;Get tags pages working&quot;</code></p>
<p>Ok now let's commit with the relative file paths working in the suggested way, since everything seems to be working.</p>
<p data-wordfix="true">Oh, <a href="https://github.com/11ty/11ty-website/pull/1135" target="_blank">let's also fix the styles for my PR to the Eleventy website while I'm here</a>. And, while checking the issues involved with the problem, I noticed <a href="https://github.com/11ty/eleventy/issues/895" target="_blank">my input may have helped push a Nunjucks config option into the eventual Eleventy v1 release</a>.</p>
<p>His suggestions to add the <code>or</code> to the title, while I understand, I want to avoid, as part of the reason I want it to throw errors is specifically to catch stuff like leaving out a title where there needs to be a title.</p>
<p>I tried a bunch of different ways to do it with the structure of code I had before, but <a href="https://github.com/AramZS/devblog/pull/1/files/7a7fdd4e87fe39360c573b23da06606ae5e9b072#r692597530" target="_blank">something is wonky</a>. I'll remove it out of the flow for now so I can deploy.</p>
<p>Going to break for now, gotta eat.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/4e4fd0139dfecf65b13cabc7394b869163ceabe6" class="git-commit-link"><code>git commit -am &quot;Finishing off day 22&quot; </code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 21: Complex Eleventy Tags</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-21/?source=rss</link>
		<pubDate>Tue, 17 Aug 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-21/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with l<a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">inks to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create Next Day/Previous Day links on each post</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Tags should be in the sidebar of articles and link to tag pages</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a skiplink for the todo section (or would this be better served with the ToC plugin?)</p>
</li>
</ul>
<h2 id="day-21" tabindex="-1">Day 21</h2>
<p>Hmm I still want to paginate my tags pages. I originally thought that I could just add to the number of <code>size</code> in the YAML front matter. But of course that doesn't work, the template doesn't have knowledge of anything other than the list of tags at that point.</p>
<p>So we need to pass in a set of tags with the actual posts mapped per-tag. There doesn't seem to be a built in way to do this, so I need to adjust the <code>tagList</code> collection. I need to make it return an object where each tag is a top-level property that points to an array of posts.</p>
<p>Previously I had:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-21/#code-skip-hello-day-21-5" id="skip-to-code-skip-hello-day-21-5" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">collection<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token punctuation">(</span>item<span class="token punctuation">.</span>data<span class="token punctuation">.</span>tags <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tag</span><span class="token punctuation">)</span> <span class="token operator">=></span> tagSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-21-5">But now lets switch it around.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-21/#code-skip-hello-day-21-4" id="skip-to-code-skip-hello-day-21-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">filterTagList</span><span class="token punctuation">(</span><span class="token parameter">tags</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	<span class="token keyword">return</span> <span class="token punctuation">(</span>tags <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><br />		<span class="token punctuation">(</span><span class="token parameter">tag</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span><span class="token string">"all"</span><span class="token punctuation">,</span> <span class="token string">"nav"</span><span class="token punctuation">,</span> <span class="token string">"post"</span><span class="token punctuation">,</span> <span class="token string">"posts"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><br />	<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br />collection<span class="token punctuation">.</span><span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />			<span class="token function">filterTagList</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>data<span class="token punctuation">.</span>tags<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tag</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />				<span class="token keyword">if</span> <span class="token punctuation">(</span>tagSet<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />					tagSet<span class="token punctuation">[</span>tag<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span><br />				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />					tagSet<span class="token punctuation">[</span>tag<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />					tagSet<span class="token punctuation">[</span>tag<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span><br />				<span class="token punctuation">}</span><br />			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />		<span class="token keyword">return</span> tagSet<span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-21-4">Hmmm, not the most efficient, we're doing the same line of code twice. Let's simplify.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-21/#code-skip-hello-day-21-3" id="skip-to-code-skip-hello-day-21-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">filterTagList</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>data<span class="token punctuation">.</span>tags<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tag</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>tagSet<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>tag<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />  	tagSet<span class="token punctuation">[</span>tag<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><br />  tagSet<span class="token punctuation">[</span>tag<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-21-3">Ok, let's see if this works. Should be good, but how do I get the actual items? I'll have to change the template. Hmm, it looks like there isn't really a way to access the key in the YAML arguments. I'll have to add that too somehow?</p>
<p>Note the use of Set here, to keep posts unique.</p>
<p>Oops forgot that <code>Set</code> uses <code>add</code> not <code>push</code> for adding to the set.</p>
<p>Hmm. Better.</p>
<p>Now I'll have to adjust the pagination permalink it looks like to resolve this error:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-21/#code-skip-hello-day-21-2" id="skip-to-code-skip-hello-day-21-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-bash"><code class="language-bash">Problem writing Eleventy templates: <span class="token punctuation">(</span>more <span class="token keyword">in</span> DEBUG output<span class="token punctuation">)</span><br /><span class="token operator">></span> Having trouble rendering njk template ./src/tags-pages.njk<br /><br /><span class="token variable"><span class="token variable">`</span>TemplateContentRenderError<span class="token variable">`</span></span> was thrown<br /><span class="token operator">></span> <span class="token punctuation">(</span>./src/tags-pages.njk<span class="token punctuation">)</span><br />  Error: slugify: string argument expected<br /><br /><span class="token variable"><span class="token variable">`</span>Template render error<span class="token variable">`</span></span> was thrown:<br />    Template render error: <span class="token punctuation">(</span>./src/tags-pages.njk<span class="token punctuation">)</span><br />      Error: slugify: string argument expected</code></pre>
<p data-wordfix="true" id="code-skip-hello-day-21-2">Oh, right, I can't access <code>Set</code>s with <code>[0]</code>. I don't think Eleventy anticipates Sets anyway, so I should likely take the time to convert the Sets of posts into Arrays.</p>
<p>Ok, easy enough, let's use the spread operator, that's what it is for right?</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-21/#code-skip-hello-day-21-1" id="skip-to-code-skip-hello-day-21-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">		Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>tagSet<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />			<span class="token comment">// console.log(key);        // the name of the current key.</span><br />			<span class="token comment">// console.log(myObj[key]); // the value of the current key.</span><br />			tagSet<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>tagSet<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br />		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><br />			<span class="token string">"tagset"</span><span class="token punctuation">,</span><br />			tagSet<span class="token punctuation">[</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>tagSet<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>verticalTag<br />		<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-21-1">Ok, I'm getting the right information here in the console.log statement. It would seem that this is set up properly as a collection, but something about how it is being handled into the tags-pages isn't working.</p>
<p data-wordfix="true">I'm going to take a look around and see how it works. There's <a href="https://www.11ty.dev/docs/quicktips/tag-pages/" target="_blank">a basic tag page post on the Eleventy.dev site</a>, but it doesn't allow for pagination of the tag pages in the way I was hoping.</p>
<p data-wordfix="true">Ok. So I think that, <a href="https://www.11ty.dev/docs/pagination/nav/" target="_blank">judging from the page on Pagination Navigation</a>, I have to pass an array, not an object. Let's change the transformation into a set into a transformation from an object to an array.</p>
<p data-wordfix="true">Nope, that doesn't do it. And checking the docs it makes it clear that <a href="https://www.11ty.dev/docs/pagination/#paging-an-object" target="_blank">we can indeed paginate an object</a>.</p>
<p>Hmmm. So I think maybe this just isn't working the way I would have hoped. <a href="https://github.com/11ty/eleventy/issues/332" target="_blank">It looks like I'm not the only person to want to do this</a>. <a href="https://github.com/11ty/eleventy/blob/master/src/Plugins/Pagination.js" target="_blank">Judging by the pagination code</a> this is indeed the best way to do what I want to do, which seems, sort of a shame. <a href="https://github.com/dafiulh/vredeburg/blob/master/src/tag.njk" target="_blank">Others have taken a similar approach as well it looks like</a>.</p>
<p>I like how the <a href="https://vredeburg.netlify.app/" target="_blank">vredeburg</a> these handles it. Very solid objects that make pagination easy and page links available. I should be able to adapt it easy. Switching over the code seems like it should be easy enough. The pagination seems to have applied, but the <code>eleventyComputed</code> doesn't seem to be working. Oh, a good time to commit!</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/6804f3143608ac461173f76e0b467dfd382d5bd3" class="git-commit-link"><code>git commit -am &quot;Getting tag pages working, mostly there&quot;</code></a></p>
<p>Oh, I used tabs instead of spaces. That was the problem. Well, solved now! I'll add that to my editorconfig file and be good to go!</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/428928442fe2ddf76cd8195b106e871d161101c2" class="git-commit-link"><code>git commit -am &quot;Getting the basics of tags pages working&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 20: Working with Shortcodes and Collections</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-20/?source=rss</link>
		<pubDate>Tue, 03 Aug 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-20/</guid>
		<description>More devblog</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Create a Markdown-It plugin that reads the project's repo URL off the folder data file and renders commit messages with l<a href="https://stackoverflow.com/questions/15919635/on-github-api-what-is-the-best-way-to-get-the-last-commit-message-associated-w" target="_blank">inks to the referenced commit</a>. (Is this even possible?) (Is there a way to do it with eleventy instead?)</p>
</li>
</ul>
<h2 id="day-20" tabindex="-1">Day 20</h2>
<p>Ok, well, first problem was I hadn't switched the variable. Doing that got the reverse working. Let's try removing the array clone.</p>
<p>Hmm. Interesting, doing that appears to keep the tag pages reversed, but the homepage post list from the <code>projectList</code> shortcode is broken again.</p>
<p>I checked <a href="https://github.com/11ty/eleventy/issues/215" target="_blank">this issue</a> first and it looks this was reported, but not this exact context. <a href="https://github.com/11ty/eleventy/issues/352" target="_blank">It looks like it was an issue with getAllSorted</a>. Ok, I'm going to suggest documentation and keep <code>.slice</code> in place. I could potentially use the <code>reverse</code> filter, but I'm not sure that would work well with the functionality I'm trying to create, which gives me the ability to generate and alter these lists using arguments from the Markdown front-matter. It would be good <a href="https://github.com/11ty/11ty-website/pull/1135" target="_blank">to warn that collections manipulated in shortcodes impact other uses of the same collections</a>.</p>
<p>Got a late start so, short day today.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/bcc261dba24bbc26d86c539f851f18a1a723512e" class="git-commit-link"><code>git commit -am &quot;Solve issue with shortcodes mutating collections&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 19: Project Tag Pages</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-19/?source=rss</link>
		<pubDate>Sun, 01 Aug 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-19/</guid>
		<description>Generating multiple tag pages</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
</ul>
<h2 id="day-19" tabindex="-1">Day 19</h2>
<h3 id="oh-let's-turn-on-gpc" tabindex="-1">Oh let's turn on GPC</h3>
<p>Oh, I'm not doing any personalized tracking to turn off, but I might as well register my support for <a href="https://globalprivacycontrol.org/" target="_blank">GPC</a>. It should be easy enough to set up a location for me to store <code>.well-known</code> data and pass it through. I'll have an internal folder at <code>src/_well-known</code> and set up a passthrough copy from there.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-19/#code-skip-hello-day-19-3" id="skip-to-code-skip-hello-day-19-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// added to .eleventy.js</span><br />eleventyConfig<span class="token punctuation">.</span><span class="token function">addPassthroughCopy</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">"src/_well-known"</span><span class="token operator">:</span> <span class="token string">".well-known"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-19-3">Then I can just add a <code>gpc.json</code> file in that folder</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-19/#code-skip-hello-day-19-2" id="skip-to-code-skip-hello-day-19-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br />	<span class="token property">"gpc"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />	<span class="token property">"lastUpdate"</span><span class="token operator">:</span> <span class="token string">"2021-07-31"</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-19-2"><a target="_blank" href="https://github.com/AramZS/devblog/commit/f320bf640e1538d18f03f157f6279dee1111f4c5" class="git-commit-link"><code>git commit -am &quot;Add GPC .well-known file&quot;</code></a></p>
<h3 id="tag-pages-let's-do-it!" tabindex="-1">Tag pages, let's do it!</h3>
<p data-wordfix="true">Huh, my front page posts are no longer reversing properly. I think because <code>reverse</code> <a href="https://www.11ty.dev/docs/collections/#sort-descending" target="_blank">happens in-place</a> it's causing some issues.</p>
<p>Let's clone the array before we operate on it in the shortcode. This will be an easy way to avoid any accidental problems.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-19/#code-skip-hello-day-19-1" id="skip-to-code-skip-hello-day-19-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	eleventyConfig<span class="token punctuation">.</span><span class="token function">addShortcode</span><span class="token punctuation">(</span><br />		<span class="token string">"projectList"</span><span class="token punctuation">,</span><br />		<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">collectionName<span class="token punctuation">,</span> collectionOfPosts<span class="token punctuation">,</span> order<span class="token punctuation">,</span> hlevel<span class="token punctuation">,</span> limit</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />			<span class="token keyword">var</span> postCollection <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br />			<span class="token keyword">if</span> <span class="token punctuation">(</span>collectionOfPosts<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />				postCollection <span class="token operator">=</span> collectionOfPosts<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />			<span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-19-1">Ok, good stuff!</p>
<p>Now let's look into pagination of tags pages.</p>
<p>Ok, the reverse is not working again... wtf...</p>
<p data-wordfix="true">Yeah, I'm pretty sure every place I'm calling reverse now is on a clone of the collections array. My post collection pull for the index page isn't reversing, it's just slicing one off the end. I'm not sure why the ordering here is wonky. Especially because it shouldn't even be a problem. <a href="https://www.11ty.dev/docs/collections/#advanced-custom-filtering-and-sorting" target="_blank">According to the Eleventy site</a>:</p>
<blockquote>
<p>Note that while Array .reverse() mutates the array in-place, all Eleventy Collection API methods return new copies of collection arrays and can be modified without side effects to other collections.</p>
</blockquote>
<p>So what is happening here?</p>
<p data-wordfix="true">Should I just use <a href="https://www.11ty.dev/docs/pagination/#reverse-the-data" target="_blank">the reverse call intended for pagination</a> instead?</p>
<p>Got distracted and ended up not finishing. The downside of weekend development.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/672899d827824beee1556b3dd22cf7372499c660" class="git-commit-link"><code>git commit -am &quot;First run at tag pages&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 18: Tag Pages</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-18/?source=rss</link>
		<pubDate>Sat, 31 Jul 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-18/</guid>
		<description>Ok, I'm still disappointed with markdown-it. So let's take on a different task today. I'm going to take on showing the latest post and the tags pages, if I can pull off both.</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
</ul>
<h2 id="day-18" tabindex="-1">Day 18</h2>
<p>Ok, I'm still disappointed with markdown-it. So let's take on a different task today. I'm going to take on showing the latest post and the tags pages, if I can pull off both.</p>
<p>For the home page, it looks like <a href="https://stackoverflow.com/questions/64337175/get-latest-post-to-show-on-home-page-with-eleventy" target="_blank">I can pull a good example</a>. It is dependent on <a href="https://github.com/11ty/eleventy-base-blog/blob/1be6346bde9ebe4afc23d7feaf0370817ad90f15/.eleventy.js#L31" target="_blank">a filter</a> though. Oh this idea, to truncate an array with a filter, is really cool. I wish I hard realized it existed before I set up the limit number on the collection. But I'll pull it over. That said, I prefer to name it what it actually does and call it <code>slice</code>. Ok, now I can have a single post on the homepage. But I don't really want the whole thing. Time to use the &quot;description&quot; metadata key and value. I'll need it for SEO anyway, so good to have something else on the site that uses the value. I want to have a good separator in place to differentiate the post content. I can add an <code>hr</code>, but it will need some custom styling.</p>
<p>I'll use my index-specific Sass here.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-18/#code-skip-hello-day-18-2" id="skip-to-code-skip-hello-day-18-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-css"><code class="language-css">    .front-post<br />        hr<br />            <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 6px<br />        h3<br />            <span class="token property">margin-top</span><span class="token punctuation">:</span> 2px</code></pre>
<p id="code-skip-hello-day-18-2">Ok, on to the tag pages.</p>
<p>I'll start by duplicating the projects page. Now the question is how to get a list of collections.</p>
<p data-wordfix="true">There doesn't seem to be a native way, but <a href="https://github.com/11ty/eleventy-base-blog/blob/1be6346bde9ebe4afc23d7feaf0370817ad90f15/.eleventy.js#L47" target="_blank">I can build on the techniques that the Eleventy site itself uses</a>.</p>
<p>Ok, what does that create exactly? According to <code>console.log</code>:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-18/#code-skip-hello-day-18-1" id="skip-to-code-skip-hello-day-18-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">[</span><br />  <span class="token string">'projects'</span><span class="token punctuation">,</span><br />  <span class="token string">'Starters'</span><span class="token punctuation">,</span><br />  <span class="token string">'11ty'</span><span class="token punctuation">,</span><br />  <span class="token string">'Node'</span><span class="token punctuation">,</span><br />  <span class="token string">'Sass'</span><span class="token punctuation">,</span><br />  <span class="token string">'WiP'</span><span class="token punctuation">,</span><br />  <span class="token string">'Github Actions'</span><br /><span class="token punctuation">]</span></code></pre>
<p data-wordfix="true" id="code-skip-hello-day-18-1">Ok and from there I can base the new page off <a href="https://www.11ty.dev/docs/pagination/#paging-a-collection" target="_blank">the example from the eleventy site</a>. It worked! Now I have a set of pages.</p>
<p>I can use my postList shortcode here to get a list of posts. Just have to update it so the posts are linked.</p>
<p>This is a good start, next step is paginating these tag pages!</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/5c52159e6bd3edfe79a54f8b9e6d66c56cb02c11" class="git-commit-link"><code>git commit -am &quot;Setting up homepage post and tag pages&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Homepage Fixes on Day 17</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-17/?source=rss</link>
		<pubDate>Fri, 30 Jul 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-17/</guid>
		<description>Part 17 of setting up 11ty dev blog.</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
</ul>
<h2 id="day-17" tabindex="-1">Day 17</h2>
<p>So as of last time I checked out <a href="https://docs.joshuatz.com/cheatsheets/node-and-npm/markdown-it/" target="_blank">this walkthrough</a>.</p>
<p>It has a little more information for me to use than the Markdown-it documentation. It also recommended I check out one of the markdown-it plugins I was actually able to get working. <a href="https://github.com/valeriangalliat/markdown-it-anchor/blob/HEAD/index.js" target="_blank">So let's do that</a>.</p>
<p>Just looking at my homepage and realizing I need to add some to-dos:</p>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Order projects listing by last posted blog in that project</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Limit the output of home page post lists to a specific number of posts</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Show the latest post below the site intro on the homepage.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Tags pages with Pagination</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Posts should be able to support a preview header image that can also be shown on post lists.</p>
</li>
</ul>
<p>Ok, let's take on projects by last updated. I guess this means another field to add to that projects object. I guess I'll start off by getting the front matter. I guess the first step is pulling in a markdown frontmatter processor.</p>
<p data-wordfix="true">It looks <a href="https://www.npmjs.com/package/markdown-it-front-matter" target="_blank">like <code>markdown-it</code> doesn't ship with frontmatter parsing</a>. <a href="https://www.11ty.dev/docs/data-frontmatter/" target="_blank">Eleventy uses grey-matter to handle frontmatter</a> so if I pull that package in it won't increase our NPM package footprint.</p>
<p>Ok, so with that in hand, let's get the file content.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-17/#code-skip-hello-day-17-4" id="skip-to-code-skip-hello-day-17-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span> readdirSync<span class="token punctuation">,</span> readFileSync <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"fs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token keyword">const</span> matter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"gray-matter"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token comment">// ...</span><br />	<span class="token keyword">const</span> projectFilesContent <span class="token operator">=</span> projectFiles<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">filePath</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />		<span class="token keyword">return</span> <span class="token function">readFileSync</span><span class="token punctuation">(</span><br />			path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./src/posts/projects/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>projectDir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>filePath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><br />		<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Don't forget the `toString` part!</span><br />	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-17-4">Gotta remember to use <code>path</code> in this because otherwise it just gives me the last portion of the path.</p>
<p>Ok, so let's use grey-matter to pull out that data. Where on the object does it live? I'm not getting anything yet.</p>
<p>Ok, it's because the front-matter data lives on <code>object.data</code> so my date is at <code>object.data.date</code>. Cool. Ok, got it working now. I can use <code>Array.reduce</code> here to figure out the most recent date.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-17/#code-skip-hello-day-17-3" id="skip-to-code-skip-hello-day-17-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	lastUpdated <span class="token operator">=</span> projectFilesContent<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevValue<span class="token punctuation">,</span> fileContent</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />		<span class="token keyword">try</span> <span class="token punctuation">{</span><br />			<span class="token keyword">const</span> mdObject <span class="token operator">=</span> <span class="token function">matter</span><span class="token punctuation">(</span>fileContent<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			<span class="token comment">// console.log("data", mdObject.data);</span><br />			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mdObject<span class="token punctuation">.</span>data <span class="token operator">||</span> <span class="token operator">!</span>mdObject<span class="token punctuation">.</span>data<span class="token punctuation">.</span>date<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />				<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><br />			<span class="token punctuation">}</span><br />			<span class="token keyword">const</span> datetime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>mdObject<span class="token punctuation">.</span>data<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			<span class="token keyword">if</span> <span class="token punctuation">(</span>prevValue <span class="token operator">></span> datetime<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />				<span class="token keyword">return</span> prevValue<span class="token punctuation">;</span><br />			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />				<span class="token keyword">return</span> datetime<span class="token punctuation">;</span><br />			<span class="token punctuation">}</span><br />		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Could not find date"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><br />		<span class="token punctuation">}</span><br />	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-17-3">And then I can sort it.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-17/#code-skip-hello-day-17-2" id="skip-to-code-skip-hello-day-17-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">directorySet<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=></span> b<span class="token punctuation">.</span>lastUpdatedPost <span class="token operator">-</span> a<span class="token punctuation">.</span>lastUpdatedPost<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-17-2">Done!</p>
<p>Ok, now I can limit the posts output on the homepage by adding a limit count ot the shortcode.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-17/#code-skip-hello-day-17-1" id="skip-to-code-skip-hello-day-17-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	eleventyConfig<span class="token punctuation">.</span><span class="token function">addShortcode</span><span class="token punctuation">(</span><br />		<span class="token string">"projectList"</span><span class="token punctuation">,</span><br />		<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">collectionName<span class="token punctuation">,</span> collectionOfPosts<span class="token punctuation">,</span> order<span class="token punctuation">,</span> hlevel<span class="token punctuation">,</span> limit</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		<span class="token comment">// ...</span><br />			<span class="token keyword">if</span> <span class="token punctuation">(</span>collectionOfPosts <span class="token operator">&amp;&amp;</span> limit<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />				collectionOfPosts <span class="token operator">=</span> collectionOfPosts<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> limit<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			<span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-17-1">Works!</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/a0d669c443f642038be890304bd4d10dea002045" class="git-commit-link"><code>git commit -am &quot;Improve homepage outputs and ordering!&quot; </code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 16: Taking a run at Markdown It Plugins</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-16/?source=rss</link>
		<pubDate>Mon, 26 Jul 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-16/</guid>
		<description>Day 16 of setting up 11ty dev blog.</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
</ul>
<h2 id="day-16" tabindex="-1">Day 16</h2>
<p>Ok, so I'd like to continue using my shortcuts like <code>b/c</code> or <code>prob</code>. Seems like the way to go there is to set it up as a markdown-it shortcode. I'd like to try my hand at that.</p>
<h3 id="run-one-at-a-markdown-it-plugins" tabindex="-1">Run One at a Markdown It Plugins</h3>
<p>We can take a look at <a href="https://github.com/markdown-it/markdown-it#api" target="_blank">Markdown-it's documentation</a> for help here.</p>
<p>Oh, README says this is the wrong place to look at for plugins. Ok.</p>
<p><a href="https://github.com/markdown-it/markdown-it/tree/master/docs" target="_blank">Info for plugin developers</a>... ok, two links in here.</p>
<p data-wordfix="true">Ok... I'm not sure how useful these are. The douments are nice for understanding the philosophy involved. But not great to kick me off. Ok, <a href="https://github.com/markdown-it/markdown-it/blob/master/docs/development.md#general-considerations-for-plugins" target="_blank">let's take recommendation 2</a> and look at some existing plugins. It sounds like I might possibly conflict with other plugins, so I probably should use an inline or block rule. That's useful.</p>
<p>Oh, this looks useful and like a good idea, <a href="https://www.npmjs.com/package/markdown-it-anchor" target="_blank">anchor links on my headers</a>.</p>
<p>Let's try and pull it in along with a slugify method that can make for clear URLs.</p>
<p>It recommends I use <code>'@sindresorhus/slugify'</code> or <code>string</code> to handle the slugify process. The 2nd is basic, but the first doesn't work well with how I structured this project. (It requires being called from a module, and my project isn't set up that way.) So, I'll use <code>slugify</code> which I have used in other projects in the past.</p>
<p>Ok, that worked!</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/f7e81ae7548dda8e7f9186f9a0d4861b366a7482" class="git-commit-link"><code>git commit -am &quot;Add anchors to headers&quot;</code></a></p>
<p>Oh, there are some good looking markdown-it plugins here. I'm going to install <a href="https://www.npmjs.com/package/@gerhobbelt/markdown-it-footnote" target="_blank">the footnote one</a> as well. Oh that didn't work. I'll try <a href="https://github.com/markdown-it/markdown-it-footnote" target="_blank">the base one instead</a> in a little bit.</p>
<h3 id="trying-to-figure-out-the-markdown-it-data-structure" tabindex="-1">Trying to Figure Out the Markdown It Data Structure</h3>
<p>Ok... What's a basic looking plugin I can look at easily as an example? The <a href="https://github.com/kwvanderlinde/markdown-it-wikilinks/blob/master/index.js" target="_blank">Wikilinks plugin</a> looks good.</p>
<p>Ok so... no particular described format and I don't feel like digging through the markdown-it code to figure out how these plugins are supposed to work. Not the most developer friendly library I guess.</p>
<p>Ok, to facilitate a similar structure, I'll take the Wikilinks plugin and place it in my own folder under <code>_custom-plugins</code>. I'm not going to be taking in options right now, so I can remove that stuff from the plugin.</p>
<p>The plugin looks like it is very dependent on a modules called <code>markdown-it-regexp</code>. So let's <a href="https://github.com/rlidwka/markdown-it-regexp" target="_blank">check out how that works</a>. It <a href="https://github.com/rlidwka/markdown-it-regexp/blob/master/lib/index.js#L61" target="_blank">looks like it handles regex rules and does the work of registering those rules</a> with the Markdown-it rules manager called <code>ruler</code>. It seems to take two arguments, a regex pattern and a function to run on that regex pattern. All this seems relatively straightforward, which makes me feel a lot better about using a library that doesn't seem to have had any activity since 2016.</p>
<p>I have to admit, I'm not super thrilled with Markdown-it. <a href="https://glitch.com/edit/#!/thespin?path=markdown-to-col.js%3A1%3A0" target="_blank">Normally I use</a> <a href="https://www.npmjs.com/package/showdown" target="_blank">Showdown</a> for Markdown parsing, but a lot of the Eleventy docs push Markdown-it. I guess I'll stick with it for now, but I'm not sure I'd recommend it or use it in a future project.</p>
<p>Ok, let's strip it down to the basics.</p>
<p data-wordfix="true">First my regex, I want to replace my use of <code>prob</code> with <code>probably</code>. So easy enough, gotta surround it with spaces. <code>/\sprob\s/</code> is a start. But it looks from the example that I should also have a capture group. Ok so instead I'll make it <code>/\s(prob)\s/,</code> Let's assume I'll eventually have a bunch of patterns, so I need to check to see that the pattern is giving me back one of a set of specific patterns. Then I can apply my specific transform.</p>
<p>Hmmm it should work now, but I'm not seeing any results. I tried adding a console.log, but still nothing.</p>
<p>Oh, oops, the pattern I'm using from the Wikilinks plugin, <a href="https://github.com/kwvanderlinde/markdown-it-wikilinks#usage" target="_blank">means I have to execute it as a function first</a>.</p>
<p>Hmmmm. Still no go. Is the plugin even initiating? Let's put a console.log outside of the return statement and see.</p>
<p>Ok, the console.log outside of the return fired (once I exited watch mode and restarted it, I guess plugins don't get reloaded during <code>watch</code> mode?). But it isn't treating my text?</p>
<h3 id="markdown-it-and-regexp" tabindex="-1">Markdown It and Regexp</h3>
<p>Ok, <a href="https://jsfiddle.net/yd2gLxev/" target="_blank">the sample code</a> given in the Readme of <code>markdown-it-regexp</code> doesn't work. It's just failing silently. This isn't a good sign. But there seem to be more modern plugins using it fine? Ok, the issue seems to be with how the jsfiddle is setup. When I set it up in a Glitch site, it seems to work just fine.</p>
<p>Ok, now I am even more annoyed that this isn't working. It should, by all rights. All I can think is that it must have something to do with the specific way eleventy implements Markdown-It?</p>
<p>I tried returning the <code>Plugin</code> function from <code>markdown-it-regexp</code>. No go there either. Frustrating. Just none of this stuff is executing. I'm starting to think that maybe this is a lost cause. It isn't working and I'm wondering if I should <a href="https://www.npmjs.com/package/markdown-it-regex" target="_blank">switch to trying out another option</a>. Nothing but silent failures. Nothing is working.</p>
<p>Ok, trying to use <a href="https://www.npmjs.com/package/markdown-it-regex" target="_blank">markdown-it-regex</a>. But it won't work either. I keep getting <code>plugin.apply is not a function</code>. Which makes me think the problem with the last plugin might be showing up here, where the way the markdown-it tool is being applied by eleventy isn't normal or at least isn't what some of these plugin authors expect.</p>
<p>Ok, nothing working here. Time to switch approaches. <a href="https://docs.joshuatz.com/cheatsheets/node-and-npm/markdown-it/" target="_blank">This walkthrough looks like it might be promising</a>.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/89bf4940ef9ccd80deef9151549a3fd1da77d66a" class="git-commit-link"><code>git commit -am &quot;Day 16 - I fail to write a Markdown-it plugin&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 15: Mobile Style Tweaks</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-15/?source=rss</link>
		<pubDate>Sun, 25 Jul 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-15/</guid>
		<description>Day 15 of setting up 11ty dev blog.</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
</ul>
<h2 id="day-15" tabindex="-1">Day 15</h2>
<p>Ok, let's add a little styling to handle mobile devices. Looking at the sizes the changes happen and also when the lines tend to start to break, I think I want a custom break point for the frontpage grid.</p>
<p>I'll put <code>$mobile-width: 890px</code> at the top of my stylesheet and set the width there. Then I can reuse it on per-unit queries like:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-15/#code-skip-hello-day-15-4" id="skip-to-code-skip-hello-day-15-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-css"><code class="language-css">        @media <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> $mobile-width<span class="token punctuation">)</span><br />            <span class="token property">display</span><span class="token punctuation">:</span> block</code></pre>
<p id="code-skip-hello-day-15-4">Ok, I want to set a link to the home page on every page. I started with a query to check for <code>/posts</code> and <code>/projects</code> in the base template. But I don't like how it looks if it is below the main content of the header. Let's switch up the design.</p>
<p>Ok, that's looking better. But I want the title of the page to span longer then it does now.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-15/#code-skip-hello-day-15-3" id="skip-to-code-skip-hello-day-15-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-css"><code class="language-css">@media print<span class="token punctuation">,</span> screen and <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span> $large-mobile<span class="token punctuation">)</span><br />    header<br />        <span class="token property">padding-right</span><span class="token punctuation">:</span> 260px</code></pre>
<p id="code-skip-hello-day-15-3">Hm. That's not working.</p>
<p>I'll come back to it in a second. I want to get a breadcrumb path working, but there's no way to split the URL at the build process, at least not one that I can see that's built in. I guess the answer is a filter I can run the URL through.</p>
<p>To manipulate chunks of the URL I am going to have to turn the URL into an array and manipulate it, along with handling the domain env variable.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-15/#code-skip-hello-day-15-2" id="skip-to-code-skip-hello-day-15-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	eleventyConfig<span class="token punctuation">.</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token string">"relproject"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		<span class="token keyword">var</span> urlArray <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><br />		<span class="token keyword">var</span> urlFiltered <span class="token operator">=</span> urlArray<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=></span> e<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><br />		urlFiltered<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Remove post path</span><br />		urlFiltered<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Remove `posts/`</span><br />		<span class="token keyword">return</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DOMAIN</span> <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> urlFiltered<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><br />	  <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p id="code-skip-hello-day-15-2">Now I can use it in a template tag like this:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-15/#code-skip-hello-day-15-1" id="skip-to-code-skip-hello-day-15-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>project-link<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ page.url | relproject }}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{project}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code></pre>
<p id="code-skip-hello-day-15-1">Ok, back to SaaS. What's going on there?</p>
<p>Oops, forgot to give it a <code>px</code> for the unit type.</p>
<p>Ok. That works now.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/e09597eb8e2539dbdfb2dd861fa5356886296eb3" class="git-commit-link"><code>git commit -am &quot;Set up changes to styles and add some additional elements to the design&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 14: Project Pages</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-14/?source=rss</link>
		<pubDate>Sat, 24 Jul 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-14/</guid>
		<description>Day 14 of setting up 11ty dev blog.</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
</ul>
<h2 id="day-14" tabindex="-1">Day 14</h2>
<p>Ok, let's work though making these vertical pages a little more functional. We'll start with the home page. I want to have links to the project pages, so I'm going to need to build a URL for those. To do that I think I'll need to place it into my <code>projects</code> object. I can use the same technique of environment variables I set up for the feeds to have proper absolute links here.</p>
<p>I'll add this to <code>project.js</code>.</p>
<p><code>url: (function(){ return process.env.DOMAIN + &quot;/projects/&quot; + projectDir })(),</code></p>
<p>Then I can use this data property to build the template links that go out to the project pages.</p>
<p>I don't like the lack of headers, I'll add an <code>hlevel</code> argument to my shortcode to allow me to set headers on each post list.</p>
<p>Good list headers now! Time to add links to the other post lists. I also want to format the post titles with the project name. To do that I'm going to create another shortcode that formats the post titles a little differently.</p>
<p>This also seems like a good time to move my posts over to the right folder.</p>
<p>Ok, adding the site name to the non-index pages and now its time to do some css.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/a3c97b376a74b52a6b79a1d4e2b33bcbe634d061" class="git-commit-link"><code>git commit -am &quot;Done with setting up vertical content, on to vertical styles.&quot;</code></a></p>
<h3 id="better-styles-ready-for-reuse" tabindex="-1">Better styles, ready for reuse</h3>
<p>Ok, to get the layouts the way I want while still having the base template be very reusable, I need to have some custom CSS that applies only to specific pages. I can handle that by adding an ID with the template name to the <code>body</code> HTML tag. That's easy. But I don't want to load down the CSS file with these file specific rules where I don't need them. So let's accomplish one of my early goals and split the CSS into smaller files.</p>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</li>
</ul>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/1b54c1065efece52cc16ad263a139c94b88f34f8" class="git-commit-link"><code>git commit -am &quot;Set up SASS &gt; CSS Code spliting with template selection&quot;</code></a></p>
<p>Very annoying that SASS changes don't cause a watch trigger. I'll need to handle that.</p>
<p><code>eleventyConfig.addWatchTarget(&quot;./src/_sass&quot;);</code></p>
<p>Ok. It's looking good now. A basic grid layout that can fit inside the 650px wide main body. I'll need to add some media queries too, but it's the direction I want to go.</p>
<p>Dinner time!</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/c4b46a5ddf48381abd857df2be689252bcec001d" class="git-commit-link"><code>git commit -am &quot;Add front page styles&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 13: Building new Eleventy Taxonomies</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-13/?source=rss</link>
		<pubDate>Fri, 23 Jul 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-13/</guid>
		<description>Day 13 of setting up 11ty dev blog.</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
</ul>
<h2 id="day-13" tabindex="-1">Day 13</h2>
<p data-wordfix="true">Ok, I'm trying to create a taxonomy that queries projects so I can list posts by their parent project. I tried to do it with <code>addGlobalData</code> but that's apparently a future feature of Eleventy. So I'm headed back from DC now on the Acela (it's been a long time since the last time that was true) so it's coooooooooooooooode time.</p>
<p>The main thing to note here is I want to be able to get:</p>
<ol>
<li>A list of &quot;projects&quot;</li>
<li>A list of posts under each Project.</li>
</ol>
<h3 id="global-data-and-new-taxonomies" tabindex="-1">Global Data and new Taxonomies</h3>
<p>So instead I'm going to use the global data folder <code>_data</code> and move my operation over there.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-13/#code-skip-hello-day-13-6" id="skip-to-code-skip-hello-day-13-6" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// In src/_data/projects.js</span><br /><span class="token keyword">const</span> <span class="token punctuation">{</span> readdirSync <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">const</span> <span class="token function-variable function">getDirectories</span> <span class="token operator">=</span> <span class="token parameter">source</span> <span class="token operator">=></span><br /><span class="token function">readdirSync</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> <span class="token punctuation">{</span> withFileTypes<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><br />	<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">dirent</span> <span class="token operator">=></span> dirent<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br />	<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">dirent</span> <span class="token operator">=></span> dirent<span class="token punctuation">.</span>name<span class="token punctuation">)</span><br /><br />console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getDirectories</span><span class="token punctuation">(</span><span class="token string">'src/posts/projects/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br />module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">getDirectories</span><span class="token punctuation">(</span><span class="token string">'src/posts/projects/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-13-6">And now I have a global data object I can iterate over. Sweet!</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-13/#code-skip-hello-day-13-5" id="skip-to-code-skip-hello-day-13-5" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid">		<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"><span class="token operator">-</span> <span class="token keyword">for</span> project <span class="token keyword">in</span> projects </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>capitalize-first<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{project}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br />		<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"><span class="token operator">-</span> endfor </span><span class="token templateTagBoundary template-tag-boundary">%}</span></code></pre>
<p id="code-skip-hello-day-13-5">Ok, now that I have the list of projects. I need to do something with them. Basically these should link to project pages that work like category pages in WordPress.</p>
<p>But before I get to that, every time I go through a tunnel my local environment dies because it is loading a remote URL for my Prism styles. Let's fix that. I'm going to copy it locally and set up a passthrough.</p>
<p>Ok, and while I'm here, let me add proper categories for the home page.</p>
<p>Oh wait, that didn't work. It doesn't have the capacity to handle empty collections. I thought I'd get an empty array, but apparently not. Ok, I'll write some checks in to my shortcode.</p>
<p><code>git commit -m &quot;Setting up home page structure with local prism css&quot;</code></p>
<p data-wordfix="true">Ok. That worked. Time to read about <a href="https://www.11ty.dev/docs/pages-from-data/" target="_blank">building Pages from Data with Eleventy</a>.</p>
<h3 id="implementing-tag-data-for-new-templates" tabindex="-1">Implementing Tag Data for New Templates</h3>
<p>Ok so, let's build it out at <code>project-pages.njk</code>.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-13/#code-skip-hello-day-13-4" id="skip-to-code-skip-hello-day-13-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid">---<br />pagination:<br />    data: projects<br />    size: 1<br />    alias: project<br />permalink: "projects/{{ project | slug }}/"<br />title: "Project: {{ project | slug }}"<br />---<br /><br /><span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> block postcontent </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>capitalize-first<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{project}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><br /><br />	<span class="token comment">&lt;!-- post list: --></span><br /><span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endblock </span><span class="token templateTagBoundary template-tag-boundary">%}</span></code></pre>
<p id="code-skip-hello-day-13-4">Alright, the page is getting built, but the title meta isn't populated. How to fix?</p>
<p>Ok, <a href="https://github.com/11ty/eleventy/issues/1061#issuecomment-606217361" target="_blank">it doesn't appear to be clearly documented, but I need to use</a> <code>eleventyComputed</code></p>
<p>So I replace the <code>title</code> property as follows:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-13/#code-skip-hello-day-13-3" id="skip-to-code-skip-hello-day-13-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid">---<br />pagination:<br />    data: projects<br />    size: 1<br />    alias: project<br />permalink: "projects/{{ project | slug }}/"<br />eleventyComputed:<br />  title: "Project: {{ project.title }}"<br />---</code></pre>
<p id="code-skip-hello-day-13-3">Ok, I'm getting the title now. But I want to filter the list of project posts by the project metadata.</p>
<p>This is more complicated.</p>
<p>But ok, here's what I ended up doing</p>
<h3 id="folder-based-tags" tabindex="-1">Folder Based Tags</h3>
<p>First, I needed to make the project global data object even more complicated. It now needs a Title, a slug and a <code>projectName</code>.</p>
<p data-wordfix="true">To fill out that projectName I need to stop putting the project data in the blog post and instead put it in the<br />
<a href="https://www.11ty.dev/docs/data-template-dir/" target="_blank">directory's data file</a>.</p>
<p>Then I need to pull the content of that data file into my new global object's <code>projectName</code> like so:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-13/#code-skip-hello-day-13-2" id="skip-to-code-skip-hello-day-13-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span> readdirSync <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><br /><br /><span class="token keyword">const</span> <span class="token function-variable function">getDirectories</span> <span class="token operator">=</span> <span class="token parameter">source</span> <span class="token operator">=></span><br /><span class="token function">readdirSync</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> <span class="token punctuation">{</span> withFileTypes<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><br />	<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">dirent</span> <span class="token operator">=></span> dirent<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br />	<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">dirent</span> <span class="token operator">=></span> dirent<span class="token punctuation">.</span>name<span class="token punctuation">)</span><br /><br /><span class="token keyword">const</span> directorySet <span class="token operator">=</span> <span class="token function">getDirectories</span><span class="token punctuation">(</span><span class="token string">'src/posts/projects/'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><br />	<span class="token punctuation">(</span><span class="token parameter">projectDir</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />		<span class="token keyword">return</span> <span class="token punctuation">{</span><br />			title<span class="token operator">:</span> projectDir<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> projectDir<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br />			slug<span class="token operator">:</span> projectDir<span class="token punctuation">,</span><br />			projectName<span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./src/posts/projects/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>projectDir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>projectDir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.json</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>project<br />		<span class="token punctuation">}</span><br />	<span class="token punctuation">}</span><br /><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-13-2">Now the pages that I'm generating for individual projects can filter by that value:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-13/#code-skip-hello-day-13-1" id="skip-to-code-skip-hello-day-13-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid">	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><br />		<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"><span class="token operator">-</span> <span class="token keyword">for</span> post <span class="token keyword">in</span> collections<span class="token punctuation">.</span>projects <span class="token operator">-</span></span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />			<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">if</span> post<span class="token punctuation">.</span>data<span class="token punctuation">.</span>project <span class="token operator">==</span> project<span class="token punctuation">.</span>projectName </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><br />					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ post.url }}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ post.data.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><br />				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br />			<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endif </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />		<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"><span class="token operator">-</span> endfor <span class="token operator">-</span></span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></code></pre>
<p id="code-skip-hello-day-13-1">Ok, it works!</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/61cfcbae41c8366fca24541455faf5a571421bc4" class="git-commit-link"><code>git commit -am &quot;Project pages&quot;</code></a></p>
<p>Ok, I'm going to add a description for the overall project and make it available the same way. Looks good.</p>
<p>I want to show tags in the sidebar/footer but the current layout isn't great. I'll have to add CSS to handle it.</p>
<p>Ok, train ride is over!</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/dd017c18b47f501a7a06b179b1788f81019bc487" class="git-commit-link"><code>git commit -am &quot;Finishing project pages&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 12: How to make a collection?</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-12/?source=rss</link>
		<pubDate>Tue, 06 Jul 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-12/</guid>
		<description>Day 12 of setting up 11ty dev blog.</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
</ul>
<h2 id="day-12" tabindex="-1">Day 12</h2>
<p>Ok, I'd like to have a custom collection so I can get a list of project names. So is there a way to add a collection API that's an entirely different collection? Something I can use instead of <code>tags</code> in other words</p>
<ul class="task-list">
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Not what I want, but I should probably do this <a href="https://www.eleventy.dev/docs/quicktips/tag-pages/" target="_blank">https://www.Eleventy.dev/docs/quicktips/tag-pages/</a></p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> This will be good to have on the bottom of these posts - <a href="https://www.eleventy.dev/docs/filters/collection-items/" target="_blank">https://www.Eleventy.dev/docs/filters/collection-items/</a></p>
</li>
</ul>
<p data-wordfix="true">Feels a little hacky, but it looks like <a href="https://stackoverflow.com/questions/66083103/how-to-generate-a-list-of-all-collections-in-11ty" target="_blank">the way to do this is to create a global object and filter the output I want into there</a>.</p>
<p>There's another way I could potentially handle this, and that's by folder structure. I think it makes sense to try that first and see what we can do with it. First we'll move a post into this new folder structure to try and see if we can query the path usefuly.</p>
<p>I'll move my hello-day-1 post into <code>src/posts/projects/devblog</code>.</p>
<p>Now can I get a list of paths under a particular path? I'm not seeing a way actually. It seems like the sort of thing that it would make sense to be easy to do. Yet, no clear sign of how to do it.</p>
<p>I thought this might work, but no go:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-12/#code-skip-hello-day-12-1" id="skip-to-code-skip-hello-day-12-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	eleventyConfig<span class="token punctuation">.</span><span class="token function">addCollection</span><span class="token punctuation">(</span><span class="token string">'projects'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">collectionApi</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />        <span class="token keyword">return</span> collectionApi<span class="token punctuation">.</span><span class="token function">getFilteredByGlob</span><span class="token punctuation">(</span><span class="token string">'src/projects/*'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-12-1">Ok, looks like I'm going to have to do something a little more complex.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/bedec5a5301db8eb0bd8bf6f5f9456ef1c8bc8b1" class="git-commit-link"><code>git commit -am &quot;First attempt at setting up projects list&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 11: Nunjucks and Shortcodes</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-11/?source=rss</link>
		<pubDate>Tue, 06 Jul 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-11/</guid>
		<description>Day 8 of setting up 11ty dev blog.</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
</ul>
<h2 id="day-11" tabindex="-1">Day 11</h2>
<p data-wordfix="true">Ok, still not getting Macros working exactly the way I wanted. It would be really useful to have Eleventy throw actual errors as part of this, but when I tried to set my own version of the Nunjucks Environment I kept hitting against undocumented settings that Eleventy apparently sets up. This is getting way off the main thing I was trying to build. I could dive deeper in, but this site still isn't live and I would like to get it to that point first. So, for now, I'm going to just drop it.</p>
<p>But before I do, I do think this is a major problem and would be useful for eleventy to fix. So, let's check issues one last time, and check if there is something for me to file.</p>
<p>It looks like <a href="https://github.com/11ty/eleventy/issues/895" target="_blank">there is an issue in the right space</a>, but the suggested solution on the issue doesn't work. If I <a href="https://github.com/pdehaan/11ty-blog-ideas/issues/7" target="_blank">follow through the tickets</a> a little more I can <a href="https://github.com/pdehaan/11ty-nunjucks-config/blob/master/.eleventy.js" target="_blank">see another suggested solution</a>. But it doesn't solve the issue with the raw tags no longer working either.</p>
<h3 id="difficulties-with-nunjucks-library-setup" tabindex="-1">Difficulties with Nunjucks Library Setup</h3>
<p>I don't understand. <a href="https://github.com/11ty/eleventy/blob/master/src/Engines/Nunjucks.js#L128" target="_blank">This</a> <em>should</em> work. I even checked to make sure my version of Nunjucks is the same! I even tried removing one of the files, but now my Nunjucks execution is failing on a different chunk of JS in the <code>js</code> front matter block in <code>rss2-feed.njk</code>.</p>
<p>So let's add my voice.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/f8732c00f54cbf1bf2b50e258b0bb8500af58487" class="git-commit-link"><code>git commit -am &quot;Bookmarking attempt to set custom NJK library.&quot;</code></a></p>
<p>A quick bookmark of the current state of the site to help the Eleventy folks with debugging my issue!</p>
<p>And now <a href="https://github.com/11ty/eleventy/issues/1879" target="_blank">a write up</a>!</p>
<p>Ok, let's move on!</p>
<h3 id="shortcodes" tabindex="-1">Shortcodes</h3>
<p data-wordfix="true">I'm going to give up on Macros for now and instead I'll <a href="https://www.11ty.dev/docs/languages/nunjucks/#single-shortcode" target="_blank">use a Shortcode</a>.</p>
<p>Ok, honestly this is a <strong>ton</strong> easier. I should have just gone this direction in the first place.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-11/#code-skip-hello-day-11-4" id="skip-to-code-skip-hello-day-11-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	eleventyConfig<span class="token punctuation">.</span><span class="token function">addShortcode</span><span class="token punctuation">(</span><span class="token string">"postList"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">collectionName<span class="token punctuation">,</span> collectionOfPosts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		<span class="token keyword">let</span> postList <span class="token operator">=</span> collectionOfPosts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />			<span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;li></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>post<span class="token punctuation">.</span>data<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li></span><span class="token template-punctuation string">`</span></span><br />		<span class="token punctuation">}</span><span class="token punctuation">)</span><br />		<span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;p></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>collectionName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p><br />		&lt;ul><br />			&lt;!-- Collection: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>collectionName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> --><br />			</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>postList<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br />		&lt;/ul><br />		</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p data-wordfix="true" id="code-skip-hello-day-11-4">and then I can call it easily with Eleventy data like this:</p>
<p><code>{% postList &quot;WiP&quot;, collections[&quot;WiP&quot;] %}</code></p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/909ea707e6297787a6dc7508458be964addfac97" class="git-commit-link"><code>git commit -am &quot;Set up a shortcode for postlist&quot;</code></a></p>
<p>Ok, now I want to be able to pass the post type I want to list in the Markdown file.</p>
<p>New markdown front matter to make that work:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-11/#code-skip-hello-day-11-3" id="skip-to-code-skip-hello-day-11-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span><br /><span class="token key atrule">layout</span><span class="token punctuation">:</span> index<br /><span class="token key atrule">eleventyExcludeFromCollections</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><br /><span class="token key atrule">internalPageTypes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'home'</span> <span class="token punctuation">]</span><br /><span class="token key atrule">postLists</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><br />	<span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"WiP"</span><span class="token punctuation">,</span> <span class="token key atrule">collection</span><span class="token punctuation">:</span> <span class="token string">"WiP"</span><span class="token punctuation">,</span> <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token string">"date"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br />	<span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"Posts"</span><span class="token punctuation">,</span> <span class="token key atrule">collection</span><span class="token punctuation">:</span> <span class="token string">"posts"</span><span class="token punctuation">,</span> <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token string">"reverse"</span> <span class="token punctuation">}</span><br />	<span class="token punctuation">]</span><br /><span class="token punctuation">---</span></code></pre>
<p id="code-skip-hello-day-11-3">and I'll alter the shortcode to use the new arguments.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-11/#code-skip-hello-day-11-2" id="skip-to-code-skip-hello-day-11-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	eleventyConfig<span class="token punctuation">.</span><span class="token function">addShortcode</span><span class="token punctuation">(</span><span class="token string">"postList"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">collectionName<span class="token punctuation">,</span> collectionOfPosts<span class="token punctuation">,</span> order</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>order<span class="token punctuation">)</span><span class="token punctuation">{</span><br />			order <span class="token operator">=</span> <span class="token string">"reverse"</span><br />		<span class="token punctuation">}</span><br />		<span class="token keyword">if</span> <span class="token punctuation">(</span>order <span class="token operator">===</span> <span class="token string">"reverse"</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br />			collectionOfPosts<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br />		<span class="token punctuation">}</span><br />		<span class="token keyword">let</span> postList <span class="token operator">=</span> collectionOfPosts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />			<span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;li></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>post<span class="token punctuation">.</span>data<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li></span><span class="token template-punctuation string">`</span></span><br />		<span class="token punctuation">}</span><span class="token punctuation">)</span><br />		<span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;p></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>collectionName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p><br />		&lt;ul><br />			&lt;!-- Collection: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>collectionName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> --><br />			</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>postList<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"><br />		&lt;/ul><br />		</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-11-2">and now my <code>index.njk</code> file is reusable for any vertical file I wish to reuse it with.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-11/#code-skip-hello-day-11-1" id="skip-to-code-skip-hello-day-11-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid"><span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">extends</span> <span class="token string">"base.njk"</span> </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br /><br /><span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> block postcontent </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />	<span class="token comment">&lt;!-- post list: --></span><br />	<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"><span class="token operator">-</span> <span class="token keyword">for</span> postType <span class="token keyword">in</span> postLists </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />		<span class="token templateTagBoundary template-tag-boundary">{%</span> postList postType.name,<br />		collections[postType.collection],<br />		postType.order <span class="token templateTagBoundary template-tag-boundary">%}</span><br />	<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"><span class="token operator">-</span> endfor </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br /><span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endblock </span><span class="token templateTagBoundary template-tag-boundary">%}</span></code></pre>
<p id="code-skip-hello-day-11-1"><a target="_blank" href="https://github.com/AramZS/devblog/commit/16489980c08be5ebaab225ed4178fb314d8f80f9" class="git-commit-link"><code>git commit -am &quot;Got shortcode + vertical layout template working&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 11: Nunjucks and Macros</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-10/?source=rss</link>
		<pubDate>Mon, 05 Jul 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-10/</guid>
		<description>Day 10 of setting up 11ty dev blog.</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
</ul>
<h2 id="day-10" tabindex="-1">Day 10</h2>
<p>Ok, when we left off I had totally failed to build a macro in Nunjucks.</p>
<p>Ok, I forgot to change the argument that was passed in the macros file and when I did that it worked.</p>
<p>So... progress!</p>
<p>Now let's try and figure out how to make it more useful.</p>
<h3 id="macros" tabindex="-1">Macros</h3>
<p>There are some interesting things you can do with Macros! I really would like to get it to work, so before we go the filter route, let's see if we can make my intended methodology work. This seems like it would be a thing people would want to do! So some more web searching may be in order.</p>
<p data-wordfix="true">Ok, after trying a few different search terms <a href="https://stackoverflow.com/questions/50685814/nunjucks-nested-variables" target="_blank">I've found a useful middle ground</a>. But I know that <a href="https://www.11ty.dev/docs/languages/nunjucks/#filters" target="_blank">Nunjucks applies filters in a specific way in Eleventy</a>.</p>
<p data-wordfix="true">Hmmm, apparently part of the issue <a href="https://github.com/11ty/eleventy/issues/354#issuecomment-449904901" target="_blank">is that Nunjucks fails silently on rendering stuff</a>. Is there a way to turn it off? Looks like first <a href="https://www.11ty.dev/docs/languages/nunjucks/#optional-use-your-nunjucks-environment" target="_blank">I'll have to redefine the Nunjucks rendering environment</a>.</p>
<p data-wordfix="true">The Nunjucks page on Eleventy suggests we pass in the <code>_includes</code> folder name as a string: <code>new Nunjucks.FileSystemLoader(&quot;_includes&quot;)</code>. But that's an extra instance of that string to keep track of. Better to use my Eleventy config object instead. I also want to switch <code>throwOnUndefined</code> to <code>true</code>, but only in the local environment. Another good use for <code>process.env.DOMAIN</code>.</p>
<p>Now at the top of my <code>.eleventy.js</code> file I have</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-10/#code-skip-hello-day-10-3" id="skip-to-code-skip-hello-day-10-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> domain_name <span class="token operator">=</span> <span class="token string">"https://fightwithtools.dev"</span><span class="token punctuation">;</span><br /><span class="token keyword">let</span> throwOnUndefinedSetting <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">IS_LOCAL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />	domain_name <span class="token operator">=</span> <span class="token string">"http://localhost:8080"</span><span class="token punctuation">;</span><br />	throwOnUndefinedSetting <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-10-3">And I have a new section that sets up my own Nunjucks filter:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-10/#code-skip-hello-day-10-2" id="skip-to-code-skip-hello-day-10-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	<span class="token keyword">let</span> nunjucksEnvironment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Nunjucks<span class="token punctuation">.</span>Environment</span><span class="token punctuation">(</span><br />		<span class="token keyword">new</span> <span class="token class-name">Nunjucks<span class="token punctuation">.</span>FileSystemLoader</span><span class="token punctuation">(</span>siteConfiguration<span class="token punctuation">.</span>dir<span class="token punctuation">.</span>includes<span class="token punctuation">,</span><br />		<span class="token punctuation">{</span><br />			throwOnUndefined<span class="token operator">:</span> throwOnUndefinedSetting<br />		<span class="token punctuation">}</span><br />	<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	eleventyConfig<span class="token punctuation">.</span><span class="token function">setLibrary</span><span class="token punctuation">(</span><span class="token string">"njk"</span><span class="token punctuation">,</span> nunjucksEnvironment<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p data-wordfix="true" id="code-skip-hello-day-10-2">Ok... interesting... when I set it up, it no longer reads the include statement properly, which calls a template located in <code>src/_layouts</code> and passed into the configuration object to Eleventy as <code>dir.layouts</code>:</p>
<p><code>{% extends &quot;base.njk&quot; %}</code></p>
<h3 data-wordfix="true" id="eleventy-and-nunjucks" tabindex="-1">Eleventy and Nunjucks</h3>
<p data-wordfix="true">Hmmmm. Well <a href="https://github.com/11ty/eleventy/blob/master/src/Engines/Nunjucks.js#L124" target="_blank">let's take a look at how Eleventy configures it</a>.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-10/#code-skip-hello-day-10-1" id="skip-to-code-skip-hello-day-10-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	<span class="token keyword">const</span> normalize <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"normalize-path"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br />	<span class="token operator">...</span><br /><br />	<span class="token keyword">const</span> <span class="token function-variable function">pathNormalizer</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">pathString</span><span class="token punctuation">)</span><span class="token punctuation">{</span><br />		<span class="token keyword">return</span> <span class="token function">normalize</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br />	<span class="token punctuation">}</span><br /><br />	<span class="token keyword">let</span> nunjucksEnvironment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Nunjucks<span class="token punctuation">.</span>Environment</span><span class="token punctuation">(</span><br />		<span class="token keyword">new</span> <span class="token class-name">Nunjucks<span class="token punctuation">.</span>FileSystemLoader</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br />			<span class="token function">pathNormalizer</span><span class="token punctuation">(</span>siteConfiguration<span class="token punctuation">.</span>dir<span class="token punctuation">.</span>includes<span class="token punctuation">)</span><span class="token punctuation">,</span><br />			<span class="token function">pathNormalizer</span><span class="token punctuation">(</span>siteConfiguration<span class="token punctuation">.</span>dir<span class="token punctuation">.</span>layouts<span class="token punctuation">)</span><span class="token punctuation">,</span><br />			<span class="token function">pathNormalizer</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><br />		<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br />		<span class="token punctuation">{</span><br />			throwOnUndefined<span class="token operator">:</span> throwOnUndefinedSetting<br />		<span class="token punctuation">}</span><br />	<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	eleventyConfig<span class="token punctuation">.</span><span class="token function">setLibrary</span><span class="token punctuation">(</span><span class="token string">"njk"</span><span class="token punctuation">,</span> nunjucksEnvironment<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p data-wordfix="true" id="code-skip-hello-day-10-1">Well, <a href="https://github.com/11ty/eleventy/blob/master/src/Engines/Nunjucks.js#L124" target="_blank">it looks like Eleventy does more to configure the Nunjucks rendering engine than I thought</a>. Let's see if I can try to duplicate how the core Eleventy approach does it.</p>
<p data-wordfix="true">Hmmm, pulled the same configuration, but now it looks like one of my posts isn't working. It looks like Nunjucks is adding some secret juice to the <code>raw</code> tag for escaping stuff. Hmmm, ok, there is a lot of badly documented stuff that Eleventy is doing with the Nunjucks engine and modifying it. Perhaps it is time to step back from attempting to mod it and take a different approach.</p>
<p>Maybe I should go for the custom filter method instead. Let's step back.</p>
<p data-wordfix="true"><a target="_blank" href="https://github.com/AramZS/devblog/commit/0fdca3ba87195cddd06f16a0c7b909c9ed838018" class="git-commit-link"><code>git commit -am &quot;Trying to get variable variables working and 11ty to set throwOnUndefined for nunjucks&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 9: Post Data in Templates</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-9/?source=rss</link>
		<pubDate>Tue, 29 Jun 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-9/</guid>
		<description>Day 9 of setting up 11ty dev blog.</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
</ul>
<h2 id="day-9" tabindex="-1">Day 9</h2>
<h3 id="rss-feed-and-file-type-on-github" tabindex="-1">RSS Feed and File Type on GitHub</h3>
<p>Looks like the RSS feed is correct but being served from Github Pages as &quot;application/octet-stream&quot;. I found a Stack Overflow that said it needs a trailing slash. But now that serves it as text/html. Apparently it needs to have an xml ending, but if we want to keep <code>/rss/</code> <a href="https://luosky.com/2012/07/24/create-custom-rss-feed-for-octopress/" target="_blank">we need to create an xml file</a>.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/03e5122bbc07fd0a51d777087c7162a96954beca" class="git-commit-link"><code>git commit -am &quot;Set an xml index for the rss path&quot;</code></a></p>
<p>That did it! Good to know that Github Pages is <em>very</em> dependent on file endings, and if it doesn't get them it defaults <code>/path-with-no-ending-slash</code> to a downloadable octet-stream and <code>/path-with-ending-slash/</code> to HTML.</p>
<h3 id="filling-in-post-data-and-templates" tabindex="-1">Filling in Post Data and Templates</h3>
<p>I want to build some post-only conditionals into a common base template. The goal here is to make my templates as DRY as possible. No code should have to be repeated. Looks like there <a href="https://bryanlrobinson.com/blog/using-nunjucks-if-expressions-to-create-an-active-navigation-state-in-11ty/" target="_blank">are some tools to do that in Nunjucks</a>.</p>
<p>Ok, so I'm going to split this into a few chunks.</p>
<p>First I'm going to establish a base template, one that all the others can pull off of. This can set up the basic HTML structure, my HTML, HEAD and BODY tags. It can also establish the baseline HTML to make the template work, like the wrapper-classed div and the semantic HTML5 tags within.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/c5393b66b174dea6da6a5487ba85488b974cd3b6" class="git-commit-link"><code>git commit -am &quot;Setting up some templates to inheret from.&quot;</code></a></p>
<p>Then I'll want to define the areas that the layouts that pull off the base can pull from. Nunjucks seems to do this with <code>block</code> tags. So I'll set up some of these block tags in the <code>&lt;main&gt;</code> area to start with.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-9/#code-skip-hello-day-9-4" id="skip-to-code-skip-hello-day-9-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid">		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">></span></span><br />			<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> block precontent </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />			<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endblock </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span><br />				<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> block content </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />				{{ content | safe }}<br />				<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endblock </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span><br />			<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> block postcontent </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />			<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endblock </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span></code></pre>
<p id="code-skip-hello-day-9-4">With the basics in place, I can actually drop the entire content of <code>post.njk</code> and replace it with an <code>extends</code> statement.</p>
<p>{% extends &quot;base.njk&quot; %}</p>
<p>The original dinky template was designed for single page sites. So the post template works pretty much unchanged with no issues. But what about my index page? I'm going to want to add stuff to there.</p>
<h3 id="post-lists" tabindex="-1">Post Lists</h3>
<p data-wordfix="true">First of all, I want a chunk of that page that shows my various Work in Progress posts. I've tagged the posts themselves correctly <a href="https://www.11ty.dev/docs/collections/" target="_blank">to create an Eleventy collection</a>, but I need to figure out how to call it. And I may want to display it elsewhere, so I'm going to create a component I can easily include that walks through the WiP tag.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-9/#code-skip-hello-day-9-3" id="skip-to-code-skip-hello-day-9-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><br />    <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">for</span> post <span class="token keyword">in</span> collections<span class="token punctuation">.</span>WiP </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>{{post.data.title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br />	<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endfor </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br /><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></code></pre>
<p id="code-skip-hello-day-9-3">This is a good start, but what if I only want one category of WiP? Or if I want to separate it out into projects? I need to make this more reusable.</p>
<p>But what about sorting? I may need to sort by date and dates are always messy. To make sure I can get them work right, I should start by adding a date to all post templates. I could add it in the post template itself, but I suspect there may be other pages I want to have the date on, so I'm going to handle it with an if/else chain at the base template.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-9/#code-skip-hello-day-9-2" id="skip-to-code-skip-hello-day-9-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid">	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">></span></span><br />	<br /><br />		<br />		<span class="token comment">&lt;!-- post mode --></span><br />		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>time</span><span class="token punctuation">></span></span>Tue Jun 29 2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>time</span><span class="token punctuation">></span></span><br />		<br />		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Part 9: Post Data in Templates<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br />		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Day 9 of setting up 11ty dev blog.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br /><br />	<br />	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span></code></pre>
<p data-wordfix="true" id="code-skip-hello-day-9-2">Oh, these dates aren't great, they seem to be pulling from some info that isn't totally accurate via the Eleventy defaults</p>
<p data-wordfix="true">Surprising no one, dates are a <a href="https://www.11ty.dev/docs/pitfalls/" target="_blank">Common Pitfall</a>. <a href="https://www.11ty.dev/docs/dates/" target="_blank">Eleventy documentation advises to directly set the date</a>. And I can't just set them any which way, I need to set them <a href="https://yaml.org/type/timestamp.html" target="_blank">via the YAML date format</a>. Once that's done, I can display them using that built-in toDateString function in a way that makes the dates more human readable.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/e59d4078e5fc07346e15ecc897922e9f583209cc" class="git-commit-link"><code>git commit -am &quot;Adding template parts&quot;</code></a></p>
<p>Ok back to my reusable post list. I started with a pretty basic version, but it looks to me like <a href="https://www.trysmudford.com/blog/encapsulated-11ty-components/" target="_blank">the right approach is Macros</a>.</p>
<p>Huh... that didn't work.</p>
<p>Ok maybe this:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-9/#code-skip-hello-day-9-1" id="skip-to-code-skip-hello-day-9-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid"><span class="token comment">&lt;!-- https://www.11ty.dev/docs/collections/ --></span><br /><span class="token comment">&lt;!-- Should I use {{ "abcdef" | reverse }} --></span><br /><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><br />	<span class="token comment">&lt;!-- Collection: {{collectionName}} --></span><br />    <span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> <span class="token keyword">for</span> post <span class="token keyword">in</span> collections<span class="token punctuation">.</span><span class="token punctuation">{</span><span class="token punctuation">{</span>collectionName<span class="token punctuation">}</span><span class="token punctuation">}</span> </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br />	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>{{post.data.title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br />	<span class="token templateTagBoundary template-tag-boundary">{%</span><span class="token templateTag"> endfor </span><span class="token templateTagBoundary template-tag-boundary">%}</span><br /><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><br /></code></pre>
<p data-wordfix="true" id="code-skip-hello-day-9-1">Especially with the variable name in the <code>for</code> deceleration? I don't know if that works the way I think it does and I may even just need <a href="https://www.11ty.dev/docs/languages/nunjucks/#shortcodes" target="_blank">a shortcode instead</a>. But I'd like to get it working. Let's try just echoing out the passed in value first.</p>
<p>Damn, still no go.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/b67b72c0a011aecb0fd6bf070fed41ddcbf9ed2e" class="git-commit-link"><code>git commit -am &quot;Get macros in the mix.&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Source Maps, Site Paths and GitHub Actions</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-8/?source=rss</link>
		<pubDate>Wed, 23 Jun 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-8/</guid>
		<description>Part 8 of setting up 11ty dev blog.</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/blob/master/src/BuildTOC.js" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Should I <a href="https://www.madebymike.com.au/writing/11ty-filters-data-shortcodes/" target="_blank">explore some shortcodes</a>?</p>
</li>
</ul>
<h2 id="day-8" tabindex="-1">Day 8</h2>
<h3 id="source-maps" tabindex="-1">Source Maps</h3>
<p>So, the Sass source-map is still giving me file:// URLs. This is apparently some sort of weird error in the dart-sass implementation? I found a few issues, all of which seem to point at <a href="https://github.com/sass/libsass/issues/908#issuecomment-76452477" target="_blank">one issue's set of solutions</a>. But none of these worked for me. I'm not really sure why. I think because dart-sass assumes source maps are only used for local development, not also for public-facing examples like I want. But the top of that thread pointed me <a href="https://github.com/joliss/node-sass-source-map-example/blob/master/better-output.js" target="_blank">at a useful build script example</a>.</p>
<h4 id="filename-fixes" tabindex="-1">Filename Fixes</h4>
<p>On the basis of that (which still uses dirname for local file paths) I altered it to match my reality of running a local server&quot;</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-8/#code-skip-hello-day-8-9" id="skip-to-code-skip-hello-day-8-9" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	<span class="token keyword">const</span> outFile <span class="token operator">=</span> <span class="token string">"/assets/css/style.css"</span><span class="token punctuation">;</span><br />	<span class="token keyword">var</span> result <span class="token operator">=</span> sass<span class="token punctuation">.</span><span class="token function">renderSync</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br />		includePaths<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"**/*.{scss,sass}"</span><span class="token punctuation">,</span> <span class="token string">"!node_modules/**"</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br />		file<span class="token operator">:</span> <span class="token string">"src/_sass/_index.sass"</span><span class="token punctuation">,</span><br />		outputStyle<span class="token operator">:</span> <span class="token string">"compressed"</span><span class="token punctuation">,</span><br />		sourceMap<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />		sourceMapContents<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />		outFile<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>outFile<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br />	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Sass renderSync result"</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">var</span> fullCSS <span class="token operator">=</span> result<span class="token punctuation">.</span>css<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">var</span> map <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span><br />	map<span class="token punctuation">.</span>sourceRoot <span class="token operator">=</span> domain<span class="token punctuation">;</span><br />	result<span class="token punctuation">.</span>map <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>map<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	<span class="token keyword">var</span> fullMap <span class="token operator">=</span> result<span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-8-9">I understand everything that my code is doing here, but the use of <code>process.cwd</code> here is very confusing. It works, for sure! I now have:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-8/#code-skip-hello-day-8-8" id="skip-to-code-skip-hello-day-8-8" class="skip-link">Skip code block ▼</a></p>
<pre class="language-json"><code class="language-json">	<span class="token property">"version"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span><br />	<span class="token property">"sourceRoot"</span><span class="token operator">:</span> <span class="token string">"http://localhost:8080"</span><span class="token punctuation">,</span><br />	<span class="token property">"sources"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br />		<span class="token string">"dinky/_sass/jekyll-theme-dinky.scss"</span><span class="token punctuation">,</span><br />		<span class="token string">"dinky/_sass/rouge-github.scss"</span><span class="token punctuation">,</span><br />		<span class="token string">"src/_sass/base-syntax-highlighting.scss"</span><span class="token punctuation">,</span><br />		<span class="token string">"src/_sass/syntax-highlighting.scss"</span><span class="token punctuation">,</span><br />		<span class="token string">"src/_sass/user.sass"</span><br />	<span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre>
<p id="code-skip-hello-day-8-8">The code sample says &quot;HACK 1: Force all &quot;sources&quot; to be relative to project root&quot; but it apparently does this so that dart-sass... gets rid of the project root? I find this process very confusing, I'm adding the project root so Sass can remove the project root? This is fking baffling to me and apparently hits some process that is very badly documented in dart-sass. The other hack &quot;node-sass does not support sourceRoot, but we can add it&quot; at least makes sense. Seems like something you should support! It looks like some iteration of Node-based Sass takes the <code>sourceMapRoot</code> configuration property, but not dart-sass. The documentation and debugging process is very confusing for this because dart-sass links to node-sass for most of its documentation, but node-sass clearly has some features that dart-sass does not, and the fact that issues are often in node-sass that are actually about dart-sass is just a <em>mess</em>.</p>
<p>Anyway, this works now... and it gives me a really useful insight into how the source map is built. I can hack better paths for sources! The paths themselves are useful for the project, but having them at the base of the website sort of irks me. Now I can put them all in a nice <code>sass</code> folder, makes it neat.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-8/#code-skip-hello-day-8-7" id="skip-to-code-skip-hello-day-8-7" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	<span class="token keyword">var</span> newSources <span class="token operator">=</span> map<span class="token punctuation">.</span>sources<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />		<span class="token keyword">return</span> <span class="token string">"sass/"</span> <span class="token operator">+</span> source<span class="token punctuation">;</span><br />	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	map<span class="token punctuation">.</span>sources <span class="token operator">=</span> newSources<span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-8-7">And I can also change my passthroughs in <code>.eleventy.js</code>.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-8/#code-skip-hello-day-8-6" id="skip-to-code-skip-hello-day-8-6" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	eleventyConfig<span class="token punctuation">.</span><span class="token function">addPassthroughCopy</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br />		<span class="token string">"dinky/_sass"</span><span class="token operator">:</span> <span class="token string">"sass/dinky/_sass"</span><span class="token punctuation">,</span><br />	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	eleventyConfig<span class="token punctuation">.</span><span class="token function">addPassthroughCopy</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br />		<span class="token string">"src/_sass"</span><span class="token operator">:</span> <span class="token string">"sass/src/_sass"</span><span class="token punctuation">,</span><br />	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-8-6">If this works correctly on publish, it will resolve the last of my base requirements!</p>
<h3 id="cache-break-with-github" tabindex="-1">Cache Break with GitHub</h3>
<p>Ok, I was thinking about how to handle build-time cache-breaking and realized that there's likely a way to handle getting a cache-break variable at the build stage. There's <a href="https://github.com/jekyll/github-metadata" target="_blank">a plugin for Jekyll to do it</a>, it looks like <a href="https://github.com/jekyll/github-metadata/blob/master/docs/authentication.md" target="_blank">it does so at least partially via the Github API</a>. It gets <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">a pretty good list of data too</a>. There's also <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">the &quot;Github Context&quot; which is available to GitHub actions</a>. I could call the API during build time, which is what it appears that Jekyll is doing (I didn't really look too deeply into the plugin). But if this data is available in the Actions context... couldn't I export it as a environment variable? Why not try adding that to the Github Actions script?</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-8/#code-skip-hello-day-8-5" id="skip-to-code-skip-hello-day-8-5" class="skip-link">Skip code block ▼</a></p>
<pre class="language-yaml"><code class="language-yaml">        <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> export GITHUB_HEAD_SHA=$<span class="token punctuation">{</span><span class="token punctuation">{</span> github.run_id <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-8-5">Now I should be able to call this in my site data, right? So I'll update the file at <code>src/_data/site.js</code>.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-8/#code-skip-hello-day-8-4" id="skip-to-code-skip-hello-day-8-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />	<span class="token keyword">return</span> <span class="token punctuation">{</span><br />		lang<span class="token operator">:</span> <span class="token string">"en-US"</span><span class="token punctuation">,</span><br />		github<span class="token operator">:</span> <span class="token punctuation">{</span><br />			build_revision<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">GITHUB_HEAD_SHA</span> <span class="token operator">||</span> <span class="token number">1.0</span><span class="token punctuation">,</span><br />		<span class="token punctuation">}</span><span class="token punctuation">,</span><br />		site_url<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DOMAIN</span><span class="token punctuation">,</span><br />	<span class="token punctuation">}</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-8-4">Huh... about to try this but a thought occurs... should I just export the whole <code>github</code> object? Would that work? Wait... <a href="https://docs.github.com/en/actions/reference/environment-variables" target="_blank">is it already there</a>? Let me try that both ways and see what I get.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/e25ca3229277e2348f288607e48322d1ee66fef1" class="git-commit-link"><code>git commit -am &quot;Set up new Sass build process and new build vars in use&quot; </code></a></p>
<p>Well... the Sass sitemaps built properly, but none of the Github Actions env stuff seemed to have gone off. For some reason calling <code>process.env.GITHUB_JOB</code> just got me <code>deploy</code>. Which is the job name, not a job-run ID. But a step in the right direction, just me mistakenly reading the docs.</p>
<p data-wordfix="true">What if I set the <code>env</code> at the level of job? I think this means I could probably use <code>GITHUB_SHA</code>, but I want to see what works.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-8/#code-skip-hello-day-8-3" id="skip-to-code-skip-hello-day-8-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">jobs</span><span class="token punctuation">:</span><br />  <span class="token key atrule">deploy</span><span class="token punctuation">:</span><br />    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest<br />    <span class="token key atrule">env</span><span class="token punctuation">:</span><br />      <span class="token key atrule">MY_GITHUB_RUN_ID</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> github.run_id <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-8-3">Ah, that did it, so now I know how to use both!</p>
<h3 id="site-maps" tabindex="-1">Site Maps</h3>
<p>The sitemap plugin looks easy to implement. Let's try that!</p>
<p>Looks good! A little basic as sitemaps go, and if this site gets extensive I may have to figure out file splitting, but there's a lot of flexibility and options in the plugin so I'm not too worried.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/e527c030ea5012de9b0d77fb1d8abeaf92f51bf8" class="git-commit-link"><code>git commit -am &quot;Set up sitemap&quot;</code></a></p>
<p>Just checking off stuff in this post!</p>
<p>Looks like the Deep Data Merge is up and running already. I'll do a quick double check and it does appear to work fine!</p>
<h3 id="managing-page-data" tabindex="-1">Managing Page Data</h3>
<p>RSS feed next. Need to add the collection tag to my <code>posts.json</code> in <code>src/posts</code> in order to have it properly in a <code>posts</code> collection.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-8/#code-skip-hello-day-8-2" id="skip-to-code-skip-hello-day-8-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br />	<span class="token property">"layout"</span><span class="token operator">:</span> <span class="token string">"post.njk"</span><span class="token punctuation">,</span><br />	<span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Aram is talking about code"</span><span class="token punctuation">,</span><br />	<span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"posts"</span> <span class="token punctuation">]</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-8-2">Huh, I'm getting this in the output now: <code>Benchmark (Configuration): &quot;htmlToAbsoluteUrls&quot; Nunjucks Async Filter took 40ms (8.9%, called 8×, 5.0ms each)</code> and the domain name is wrong in the RSS feed. Found some info on building permalinks that may be useful for my more dynamic link urls, but doesn't seem to be for this. Huh, looks like this generates an Atom feed, not an RSS standard one. Going to rename the file accordingly.</p>
<p>Still no go on getting those URLs set up properly. I need to pass the calculated domain in to the page metadata, but using template tags or JS functions doesn't seem to be doing it. The domain data just isn't going through.</p>
<p>Ok, I had thought the functions in the <code>js</code> layout-based front matter would execute themselves, but it looks like I have to write them to execute in the context of the front matter itself. So now the front matter looks like this:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-8/#code-skip-hello-day-8-1" id="skip-to-code-skip-hello-day-8-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-liquid"><code class="language-liquid">---js<br />{<br />  "permalink": "feed.xml",<br />  "eleventyExcludeFromCollections": true,<br />  "metadata": {<br />    "title": "Feed for Fight With Tools - Aram's Dev Blog",<br />    "subtitle": "Notes on various projects",<br />    "url": (function(){ return process.env.DOMAIN + "/" })(),<br />    "feedUrl": (function(){ return process.env.DOMAIN + "/feed.xml" })(),<br />    "author": {<br />      "name": "Aram Zucker-Scharff",<br />      "email": "aramdevblog@aramzs.me"<br />    }<br />  },<br />  "internalPageTypes": [ "feed" ]<br />}<br />---</code></pre>
<p id="code-skip-hello-day-8-1">Looks like the solution was to use a immediately-invoked function there. Working well now!</p>
<h3 id="robots.txt" tabindex="-1">Robots.txt</h3>
<p>Looks like <a href="https://obsolete29.com/posts/ogp-seo-favicons-eleventy/" target="_blank">there is a straightforward way to handle building a good robots.txt</a> file.</p>
<p>I'll hand build an RSS template so I have an RSS2 feed as well.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/016bcea57a7cdde543f314b07b98f4adf544a569" class="git-commit-link"><code>git commit -am &quot;Set up various feeds and crawling tools&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 7: Getting GitHub Actions to Publish my Site</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-7/?source=rss</link>
		<pubDate>Mon, 21 Jun 2021 02:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-7/</guid>
		<description>Day 7 of setting up 11ty dev blog.</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/blob/master/src/BuildTOC.js" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is <a href="https://github.com/jekyll/github-metadata/blob/master/docs/site.github.md" target="_blank">how Jekyll accomplishes this</a>, but is there a way to push <a href="https://docs.github.com/en/actions/reference/context-and-expression-syntax-for-github-actions#github-context" target="_blank">that</a> <a href="https://stackoverflow.com/questions/54310050/how-to-version-build-artifacts-using-github-actions" target="_blank">into the build process</a> for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
</li>
</ul>
<h2 id="day-7" tabindex="-1">Day 7</h2>
<p>Ok, after struggling with the plane wifi and spending some time talking to my row-mate about us both being web engineers, I didn't get quite as much as I had planned done on the plane. So we're back with an empty build branch.</p>
<p>Time to get back to it. I think the first thing is to check the various GitHub actions. I'd hoped they'd work right out of the box but no-go (maybe?). The LinkedIn post was helpful, but the fact that the author's project is no longer public makes it a pain to make sure I'm following directions properly.</p>
<h3 id="github-actions-with-node" tabindex="-1">GitHub Actions with Node</h3>
<p>First is <a href="https://github.com/actions/setup-node" target="_blank">setup-node</a>. And some immediate things pop out at me. First I'd set up with Node 15 locally. But it looks like this action is only able to use up to and including Node 14. So, let's use nvm and rebuild the node_modules and package-lock.json files with Node 14. Deleting them both, changing the value in <code>.nvmrc</code> and rebooting my terminal.</p>
<p>Oh, NVM doesn't automatically use the latest node version huh? Ok, I'll specify the version to match the action on Github. Downloading and installing it now.</p>
<p><code>npm install</code></p>
<p>Ok. Everything still works, so that is good!</p>
<p>But what could be the issue, it must be me gitignoring the docs folder, I guess it has to commit the folder? I still don't want the docs folder on my main branch if I can avoid it. What if I just remove the docs gitignore during the build process?</p>
<p>I'll add the line to the top of the commands run, it basically echoes the contents of .gitignore starting at the 2nd line back into the .gitignore file:</p>
<p><code>- run: echo &quot;$(tail -n +2 .gitignore)&quot; &gt; .gitignore</code></p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/6749588d3451a8f787932430adeec07aa72ce567" class="git-commit-link"><code>git commit -am &quot;Update build process and attempt to commit the docs folder in the build process&quot;</code></a></p>
<p>Hmmm still no go. Let's read <a href="https://github.com/peaceiris/actions-gh-pages#github-actions-for-github-pages" target="_blank">the actions-gh-pages docs</a> from zero instead.</p>
<p>It looks like <code>publish_dir:</code> in the build task says is the <em>source</em> folder to publish onto the gh-pages branch. A good lesson to read the docs right here because literally line 2 is</p>
<blockquote>
<p>The next example step will deploy ./public directory to the remote gh-pages branch.</p>
</blockquote>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/4301b2aed961f6df305f227ec7ea5429cc65a162" class="git-commit-link"><code>git commit -am &quot;Is the issue the docs directory needs to be the public_dir?&quot;</code></a></p>
<p>Interesting, now the content is properly in the gh-pages branch! I might not even need the gitignore change?</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/0a5c8daaedff730db83931f989458d8b12fbb02d" class="git-commit-link"><code>git commit -am &quot;Remove the gitignore rewrite&quot;</code></a></p>
<p>I also originally had the folder set for Github Pages to be <code>/docs</code> but that's not how this works, the action publishes the content inside the docs folder to the root of the <code>gh-pages</code> branch. I have to fix that in the repo settings.</p>
<p>Sweet, I see a page now! Just have to fix how the stylesheet works in the build environment!</p>
<h3 id="mapping-the-site" tabindex="-1">Mapping the site</h3>
<p>While I'm here I should <a href="https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site" target="_blank">map my apex domain to the Github Site</a>. Easy enough, create a bunch of A records in GoDaddy's DNS controls and then direct my <code>www</code> record CNAME to my <a href="http://github.io/" target="_blank">github.io</a> user page.</p>
<p data-wordfix="true">I'll create the correct CNAME file and set up Eleventy to pass it through to the build process.</p>
<p><code>eleventyConfig.addPassthroughCopy(&quot;./CNAME&quot;);</code></p>
<p>And I'm going to set up my site data using <a href="https://www.npmjs.com/package/dotenv" target="_blank">dotenv</a> in order to have my local <code>http://localhost:8080</code> server used for the site domain when local and otherwise have it use my domain.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/4d7e6819540e013935077525b0c3274f9f8b8a5c" class="git-commit-link"><code>git commit -am &quot;Setting up dotenv to have proper site data and domain use&quot;</code></a></p>
<p>Oops, swapped my prod and local domains.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/d6f84e6d95d1635bec1681e4959fc479ed544e4d" class="git-commit-link"><code>git commit -am &quot;Ooops mixed up my local and prod urls&quot;</code></a></p>
<p>Ok, it looks like it is all working for my my base level requirements 1-6. I still want a source map for my CSS and that isn't done yet, but that is a Sass task.</p>
<p>I still have some other major tasks... like building a real home page, including serious SE/MO and a few other things, but now I can move forward on that work confident that this system hits my baseline requirements and I can invest more time into it.</p>
<p>Finishing off my requirements means handling some Sass to get mapping to work. I can define <code>sourceMap</code> and write the file appropriately, but it looks like I'll need handle two complications, first the relative paths to the source file will have to be passed through so the Sass files can be exposed on the front end. That's easy enough with a few functions in <code>.eleventy.js</code>. But it also apparently will need to have a full, not relative, url.</p>
<p data-wordfix="true">I thought I might be able to use <a href="https://www.11ty.dev/docs/data-global-custom/" target="_blank">global data added at the config level, but it looks like that isn't available yet</a>. Didn't see that on my first run through as it isn't super obviously called out.</p>
<p>I decided to use a combination of dotenv and setting some internal Node-level variables here to set up the domain name once and reuse it elsewhere.</p>
<h3 id="image-and-link-conflicts" tabindex="-1">Image and Link Conflicts</h3>
<p>Hmmm, while trying to debug I noticed my image rewrite method was also applying to all links. Oops. I'll need to pass in a smarter function.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-7/#code-skip-hello-day-7-1" id="skip-to-code-skip-hello-day-7-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">		<span class="token function-variable function">replaceLink</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">link<span class="token punctuation">,</span> env</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />			<span class="token comment">// console.log("env:", env);</span><br />			<span class="token keyword">var</span> imageLinkRegex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^..\/img\/</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span><br />			<span class="token keyword">if</span> <span class="token punctuation">(</span>link <span class="token operator">&amp;&amp;</span> imageLinkRegex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>link<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />				<span class="token keyword">return</span> <span class="token punctuation">(</span><br />					env<span class="token punctuation">.</span>site<span class="token punctuation">.</span>site_url <span class="token operator">+</span><br />					<span class="token string">"/img/"</span> <span class="token operator">+</span><br />					link<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>imageLinkRegex<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><br />				<span class="token punctuation">)</span><span class="token punctuation">;</span><br />			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />				<span class="token keyword">return</span> link<span class="token punctuation">;</span><br />			<span class="token punctuation">}</span><br />		<span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-7-1">While I'm fiddling with markdown-it, I should also <a href="https://github.com/markdown-it/markdown-it/blob/master/docs/architecture.md#renderer" target="_blank">add <code>target=&quot;_blank&quot;</code> to all my links</a>.</p>
<p>Still looking at how to get <a href="https://developer.mozilla.org/en-US/docs/Tools/Debugger/How_to/Use_a_source_map" target="_blank">sourcemaps</a> working.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/ab13317595a5affa40ded39e3fda0926e4687d2e" class="git-commit-link"><code>git commit -am &quot;Fixing a number of path and link issues, still trying to get Sass working with sourcemaps&quot;</code></a></p>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> See if we can start Markdown's interpretation of H tags to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements#multiple_h1" target="_blank">start at 2, since H1</a> is always pulled from the page title metadata. If it isn't easy, I just have to change my pattern of writing in the MD documents.</li>
</ul>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 6: Starting to deal with GitHub Actions</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-6/?source=rss</link>
		<pubDate>Sat, 19 Jun 2021 03:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-6/</guid>
		<description>Day 6 of setting up 11ty dev blog.</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/blob/master/src/BuildTOC.js" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is how Jekyll accomplishes this, but is there a way to push that into the build process for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
</ul>
<h2 id="day-6" tabindex="-1">Day 6</h2>
<p>Ok, here we go on day 6. Today I write code on a Delta flight.</p>
<p data-wordfix="true">I've resolved some of the very basic blockers that were absolute need-to-haves from a design perspective. There is more work to be done on the design side (obviously, I still don't have a home page) but I think I need to answer questions about the GitHub Pages deployment process before I go any further. I know I can make an Eleventy blog that satisfies me now, but can I do so while also satisfying the ease of deployment and management that comes with Jekyll-style Github Pages deployment? Luckily the internet is free today, so I can find out at no added cost to my flight.</p>
<h3 id="looking-at-the-examples" tabindex="-1">Looking at the Examples</h3>
<p>The most upvoted solution I saw for Github Pages deployment was <a href="https://www.linkedin.com/pulse/eleventy-github-pages-lea-tortay/" target="_blank">the LinkedIn post by Lea Tortay</a> I found earlier. While I've managed a number of other deploy approaches, I actually have never written my own Github Pages deployment process, so figuring that out was one of my goals with this project. Let's start with that.</p>
<p>Oh, lol the wifi was only free for the first 5 minutes I guess? Ok, I'll pay.</p>
<p>Hmmmmm Captive Portal problems. Time to reboot.</p>
<p>Had to reboot, find the captive portal URL, cycle my DHCP lease and then pay for the privlige, but on the interwebs again. Payed to get on.</p>
<p>Ok, implimented the Github actions file with a few small changes, I went ahead and updated <code>node-version</code> to match my latest version and switched by branch from master to main. Took care of the keys as specified. The action ran... but no joy. Maybe the problem is a lack of index page? Let's try putting one together.</p>
<p>Huh... it build from the file at <code>src/index.njk</code> once... and now it hasn't again. I made my defaults layout the same as my posts layout, so it should work. But after I wiped it out one time, it hasn't built again.</p>
<p>Is it possible to have the docs content not committed on <code>main</code> but only on <code>gh-pages</code>? That would seem to be a good solution, but let's see.</p>
<p>Ooops, I was fiddling with trying to build a useful gitignore file for docs and passing it through and accidentally deleted all my layouts.</p>
<p>Let me pull those files back in from the last good commit: <code>git checkout 32e6206c0680d9009a316b85e33461479058d81d src/_layouts/*</code></p>
<p>Yup that did it. My Index file is back.</p>
<h3 id="finding-github-actions-log" tabindex="-1">Finding GitHub Actions log</h3>
<p>Build still isn't working. Hmmm where are the logs for this?</p>
<p>Ok, <a href="https://github.com/AramZS/devblog/actions" target="_blank">in the Actions tab</a>, not in settings.</p>
<p>Looks like it isn't pulling in Dinky properly as a submodule because <a href="https://docs.github.com/en/pages/getting-started-with-github-pages/using-submodules-with-github-pages" target="_blank">Github Pages needs the https url for the repo in .gitsubmodules</a>.</p>
<p>Hmmm, still not working.</p>
<h3 id="fixing-submodules" tabindex="-1">Fixing Submodules</h3>
<p>Ah, the issue is that the default configuration of Jekyll github pages pulls in submodules, but <a href="https://github.com/actions/checkout" target="_blank">the default configuration of the checkout action doesn't</a>. I just need to add that property to the yml file.</p>
<p>Oh, and fix my <code>.editorconfig</code> to work better with yml files.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/88c0d76e164179a2626941d0e3c1f35113e39326" class="git-commit-link"><code>git commit -am &quot;Get submodules working for github actions hopefully&quot;</code></a></p>
<p>Good news, a new error!</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-6/#code-skip-hello-day-6-1" id="skip-to-code-skip-hello-day-6-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-bash"><code class="language-bash">Run peaceiris/actions-gh-pages@v3<br /><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> Usage https://github.com/peaceiris/actions-gh-pages<span class="token comment">#readme</span><br />Dump inputs<br />Setup auth token<br />  Error: Action failed with <span class="token string">"not found deploy key or tokens"</span></code></pre>
<p id="code-skip-hello-day-6-1">Oops, but the secret in a custom environment instead of the <code>github-pages</code> <a href="https://github.com/AramZS/devblog/settings/environments" target="_blank">environment</a>.</p>
<p data-wordfix="true">Hmmm... deploy was a success this time, but no-go on seeing any pages? Looks like it just deleted everything but the nojekyll file? I should probably look a little deeper into what is going on with these GitHub actions.</p>
<p>Ooooh. I should make a markdown code to expand my little typing shortcuts!</p>
<p data-wordfix="true">[ ] Build a Markdown-it plugin to take my typing shortcuts <code>[prob, b/c, ...?]</code> and expand them on build.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/74db6c5f65a117b4c8590422703a30317ad6e524" class="git-commit-link"><code>git commit -am &quot;Have I got the secret now?&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 5: Image Handling and CSS Improvements</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-5/?source=rss</link>
		<pubDate>Thu, 17 Jun 2021 03:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-5/</guid>
		<description>Part 5 of setting up 11ty dev blog.</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/blob/master/src/BuildTOC.js" target="_blank">this TOC plugin</a> mby?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
</li>
</ul>
<s>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo" /> Can I use the template inside of dinky that already exists instead of copy/pasting it?</li>
</ul>
</s>
<ul class="task-list">
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
</li>
<li class="task-list-item">
<p data-wordfix="true"><input disabled="true" type="checkbox" class="markdown-todo" /> How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is how Jekyll accomplishes this, but is there a way to push that into the build process for Eleventy?</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" class="markdown-todo" /> Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
</li>
<li class="task-list-item">
<p><input disabled="true" type="checkbox" checked="true" class="markdown-todo" /> Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
</li>
</ul>
<h2 id="day-5" tabindex="-1">Day 5</h2>
<p>Ok, yesterday I didn't have that much time to work, but today I'm feeling as good as I can after having my main battery and a whole bunch of USB sticks, a Yubi key, and my main external Anker power battery robbed out of the back of a rental car in San Antonio yesterday.</p>
<h3 id="figuring-out-the-images" tabindex="-1">Figuring out the Images</h3>
<p>Good news, finally a check mark on my ever-expanding scope list. Some bad news for the task list as well, in that I'm now 99% sure I can't just pull the template from the dinky submodule. I think there are just too significant a set of differences between Jekyll and Nunjucks. I could explore more similar templating languages, but getting better at Nunjucks is part of the point of all this, so I'm going to dismiss that from my work scope for now.</p>
<p>So, since it hasn't been a great 24hs IRL, let's see if I can harvest a few more easy wins.</p>
<p>How do the GitHub variables work for cachebreaking? That seems like a potentially non-obvious but relatively easy win. A-searching we do go.</p>
<p>Interesting to see someone <a href="https://snook.ca/archives/servers/deploying-11ty-to-gh-pages" target="_blank">handling their build via Travis</a>, good to remember.</p>
<p>Ok, that was unexpected. No one seems to have asked this question? Maybe it just works? I guess I'll have to wait to deploy in order to see. Moving on to something entirely in my hands, let's make the links look less shitty.</p>
<p>Let me show you the problem.</p>
<p>Oh, wait, need to get the image folder working first...</p>
<p>Ok, following the pattern of posts the <code>img</code> folder should be inside of <code>src</code>. Gotta fix the passthrough <code>eleventyConfig.addPassthroughCopy(&quot;src/img&quot;, &quot;img&quot;);</code>.</p>
<p data-wordfix="true">Oh, I actually <a href="https://www.11ty.dev/docs/copy/#how-passthrough-file-copy-handles-input-directories" target="_blank">don't need to be that explicit</a>. <code>eleventyConfig.addPassthroughCopy(&quot;src/img&quot;, &quot;img&quot;);</code> works just fine.</p>
<p>Hmmm, I could do full URLs, but this is actually one of the things I hate about Jekyll.</p>
<p>Ugh... <a href="https://github.com/11ty/eleventy/issues/379" target="_blank">it looks like the general strategy in GitHub issues is to copy images to be relative to the folders of the associated posts</a>. That's... meh. I dislike it intensely. What if I want to reuse the image? Now I have multiples. One image, one URL IMHO.</p>
<p>Ok, looks like I'm not the only one fiddling around with this, <a href="https://www.npmjs.com/package/markdown-it-replace-link" target="_blank">someone else wrote all the annoying regexes for me in a markdown-it plugin</a>.</p>
<p data-wordfix="true">There's <a href="https://www.11ty.dev/docs/data-eleventy-supplied/" target="_blank">no way to really get the base URL</a>, but at least I can do it <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" target="_blank">DRY</a>.</p>
<aside>
<p data-wordfix="true">(I also saw <a href="https://www.11ty.dev/docs/quicktips/eliminate-js/" target="_blank">how Eleventy pulls from the Github API on build</a>, which may be useful if I need to use <a href="https://docs.github.com/en/rest/reference/repos#get" target="_blank">that sort of info</a> for cachebreaking later.)</p>
</aside>
<div style="border: 2px black solid">
<p><img src="https://fightwithtools.dev/img/links-and-not-links.png" alt="Links look bad inside the text." /></p>
</div>
<h3 id="making-links-more-visible" tabindex="-1">Making Links More Visible</h3>
<p>This comes from that whole annoying school of &quot;native link styles are ugly so let's change them as much as possible and try to use some other thing to indicate they are links.&quot;</p>
<p>That school is one I do not attend. Clear and legible UX has to build on top of standards of design the user is familiar with lest a site confuse the reader. I can give any theme some room, you can remove underlines, or change the color to something other than close-to-link-blue, but both?! Nien.</p>
<p>Huh... first things first... that Sass folder should really be in <code>src</code>.</p>
<p>Ok, now to set up a <code>user</code> overwrite to be the last file in the Sass compile process, and t/f the one that overrides general site-level stuff. Let's fix it to a blue color and remove that <em>very</em> annoying light weight on the font.</p>
<p>Much better.</p>
<p>Oh, I want to make those checkboxes show up correctly. Bet there's a markdown-it plugin I can use. It looks like there are 2 possible node modules, <a href="https://www.npmjs.com/package/markdown-it-task-checkbox" target="_blank">a more used one with some unresolved PRs and ignored issues</a> and <a href="https://www.npmjs.com/package/markdown-it-todo" target="_blank">a barely used one that correctly makes checkboxes readonly</a>. It might be less popular, but I'm going with the version that works the way I want right out of the box. It also happens to be a very simple plugin, so if it goes wrong, I can always hack at it.</p>
<p>Looks good!</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/62f4e132faa143fa7d1a81234018076c594c319c" class="git-commit-link"><code>git commit -am &quot;Adding days 4 and 5 progress and notes&quot;</code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 4: A quick run at syntax highlighting</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-4/?source=rss</link>
		<pubDate>Wed, 16 Jun 2021 03:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-4/</guid>
		<description>Part 4 of setting up 11ty deb blog.</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<p>[ ] Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
<p>[ ] So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
<p>[ ] Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/blob/master/src/BuildTOC.js" target="_blank">this TOC plugin</a> mby?</p>
<p data-wordfix="true">[ ] Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
<p>[ ] Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
<p>[ ] Can I use the template inside of dinky that already exists instead of copy/pasting it?</p>
<p>[ ] Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
<p data-wordfix="true">[ ] How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is how Jekyll accomplishes this, but is there a way to push that into the build process for Eleventy?</p>
<p>[ ] Make link text look less shitty. It looks like it is a whole, lighter, font.</p>
<p>[ ] Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
<h2 id="day-4" tabindex="-1">Day 4</h2>
<p>Ok, don't have a ton of time to work today, but I've been thinking more about the shitty code blocks.</p>
<p>The core of the problem is that I can't even apply styles the way I want because the code is not being broken down properly.</p>
<p>Here's what I'm getting:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-4/#code-skip-hello-day-4-2" id="skip-to-code-skip-hello-day-4-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>language-markdown<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br />	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>language-markdown<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br />		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>token front-matter-block<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br />		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>token punctuation<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>---<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span><br />		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>token font-matter yaml language-yaml<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>layout: page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span><br />		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>token punctuation<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>---<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br />	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">></span></span><br /><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">></span></span></code></pre>
<p id="code-skip-hello-day-4-2">What I want would look like this:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-4/#code-skip-hello-day-4-1" id="skip-to-code-skip-hello-day-4-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span><span class="token punctuation">></span></span><br />	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>code</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>language-markdown<span class="token punctuation">"</span></span> <span class="token attr-name">data-lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>markdown<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br />		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>---<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br />		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>na<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>layout<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pi<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>s<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>post<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br />		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>---<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><br />	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>code</span><span class="token punctuation">></span></span><br /><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pre</span><span class="token punctuation">></span></span></code></pre>
<p id="code-skip-hello-day-4-1">See the greater level of styling detail available via the additional span tags?</p>
<p data-wordfix="true">Ok. So, like I said, surely a lot of people are using Eleventy to demo code. Why not take a step back?</p>
<p>Instead of trying to get some increasingly complex markdown processor in play to do this, let's see if there is a code block plugin instead? If anyone uses it I bet 11ty's website does?</p>
<p><a href="https://github.com/11ty/11ty-website/blob/master/.eleventy.js#L14" target="_blank">Yup</a>!</p>
<p data-wordfix="true"><a href="https://www.11ty.dev/docs/plugins/syntaxhighlight/" target="_blank">Reading the docs</a>. Looks like it uses Prism, which I'm also familiar with. I'll try to implement like the Eleventy site does.</p>
<p>Ok, that looks a LOT better! I'll have to walk through some examples to make sure it works.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/dbc56d6f34a038e210367d60961cc4c0bef34da0" class="git-commit-link">git commit -am &quot;Syntax highlighting actually working now?&quot;</a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Part 3: Deciding on a template tool</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-3/?source=rss</link>
		<pubDate>Tue, 15 Jun 2021 03:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-3/</guid>
		<description>Part 3 of setting up 11ty dev blog.</description>
		<content:encoded><![CDATA[<h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<p>[ ] Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
<p>[ ] So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
<p>[ ] Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/blob/master/src/BuildTOC.js" target="_blank">this TOC plugin</a> mby?</p>
<p data-wordfix="true">[ ] Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
<p>[ ] Decide if I want to render the CSS fancier than just a base file and do per-template splitting.</p>
<p>[ ] Can I use the template inside of dinky that already exists instead of copy/pasting it?</p>
<h2 id="day-3" tabindex="-1">Day 3</h2>
<p>Ok, so I'm at day 3 and everything is working at a basic level. I need an index/entry page and some ways to present posts in lists. I also am not a huge fan of the <code>site/posts/post-name</code> structure.</p>
<p>[ ] Is there a way to have permalinks to posts contain metadata without organizing them into subfolders?</p>
<h3 id="nunjucks-vs-mustache" tabindex="-1">Nunjucks vs Mustache</h3>
<p data-wordfix="true">There's also an open question of Why Nunjucks? I'm not the biggest fan of Nunjucks, outside of the Eleventy community that seems to be heavily invested into it, not many people seem to be using it. Documentation is (as we've already seen) sorta iffy and its relatively low adoption makes it harder to get questions answered.</p>
<p>I also haven't quite gotten syntax highlighting to work for <code>njk</code> files in VS Code, which is <em>very</em> frustrating and often turns me off from using something.</p>
<p data-wordfix="true">I could, at this point, switch to Mustache, which I'm <a href="https://glitch.com/edit/#!/thespin?path=server.js" target="_blank">already pretty familiar</a> with. Mustache also has the advantage of having template tags that are more similar to Jekyll and more familiar to Javascript users. But, unless I hit a real bad obstacle I don't think I will, for two reasons. First, the point of this is to learn something new! Second, when I last tried Eleventy to basically generate a few quick pages from a common template, it had terrible trouble rendering with Mustache, even with the instructions from their site. I've got other things to complicate first, can save that for later. If I get everything working, I might come back to this issue.</p>
<h3 id="build-process" tabindex="-1">Build Process</h3>
<p>Ok, <a href="https://marketplace.visualstudio.com/items?itemName=ronnidc.nunjucks" target="_blank">got Nunjucks syntax highlighting to properly work</a> for now!</p>
<p>Stepping back it looks like the rendered site in the <code>docs</code> folder is generally looking ok. There's one issue, my passthrough of assets includes an <code>assets/css</code> folder with an entirely useless sass file that would be public-facing. So I'm going to have to do subdirectories of assets instead. Should be easy enough.</p>
<p>Huh... it doesn't clean up the now defunct <code>css</code> folder. Is there a build tool to clean things up?</p>
<p><a href="https://github.com/11ty/eleventy/issues/19" target="_blank">Looks like it doesn't ship with 11ty</a>. But there <a href="https://github.com/11ty/eleventy/issues/744" target="_blank">are other solutions that people have done</a>.</p>
<p>I like <a href="https://github.com/11ty/eleventy/issues/744#issuecomment-800323968" target="_blank">the solution that defines the site configuration earlier</a>, it seems generally useful. I'll give it a try.</p>
<p>That works! Deleting the whole folder and building it all new seems super inefficient, but there doesn't seem to be another way to handle things.</p>
<h3 id="eleventy-build-and-serve" tabindex="-1">Eleventy Build and Serve</h3>
<p data-wordfix="true">One other throught now occurs. I saw that the dinky template uses some sort of build version number passed by github on build to cachebreak. I'm not sure how that works or if it can work the same way for Eleventy. Perhaps I need to pass a datetime stamp for each build instead? Something to figure out later.</p>
<p data-wordfix="true">[ ] How do I cachebreak files on the basis of new build events? Datetime? <code>site.github.build_revision</code> is how Jekyll accomplishes this, but is there a way to push that into the build process for Eleventy?</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/27dbbaf47799a901a62857a34742d12418edc0cc" class="git-commit-link"><code>git commit -am &quot;Self-cleaning builds&quot;</code></a></p>
<p data-wordfix="true">Eleventy build is now stable enough that I might be able to develop with <code>npx @11ty/eleventy --serve</code> and check in on it. Let's see what it looks like.</p>
<p>Gotta adjust my CSS output path to match the template file's.</p>
<p>Ok, content is rendering as escaped HTML. That's not right at all.</p>
<p>Ahhh, apparently (here we are at poorly documented Nunjucks again...) my content tag needs to be <code>{{ content | safe }}</code>.</p>
<p>Ok, it's working now! Good signs! Hmmm. I was hoping that 1-space empty brackets would be rendered as a checkbox, as in Github-flavored markdown. But apparently not. How difficult would that be to fix?</p>
<p>Hmmm also some other problems:</p>
<p>[ ] Make link text look less shitty. It looks like it is a whole, lighter, font.<br />
[ ] Code blocks do not have good syntax highlighting. I want good syntax highlighting.</p>
<h3 id="sass-and-syntax-highlighting" tabindex="-1">Sass and Syntax Highlighting</h3>
<p>I <a href="https://github.com/AramZS/aramzs.github.io/blob/master/_sass/_syntax-highlighting.scss" target="_blank">have syntax highlighting styles</a> I like on my Github user Pages site. Let's just reuse it.</p>
<p data-wordfix="true">Huh... why doesn't the plugin for building Sass re-trigger on watch? <a href="https://www.11ty.dev/docs/events/#beforewatch" target="_blank">Looks like there's a way to fix that</a>.</p>
<p>Ugh... apparently the Sass syntax has changed significantly since the last time I used it and also since it was set up in my other site. I'll need to correct.</p>
<p><em>sigh</em></p>
<p>Ok <a href="https://stackoverflow.com/questions/56858150/i-am-gettiing-an-error-expected-new-line-while-compiling-sass" target="_blank">it's changed a lot</a>. And the Sass build tools are dickishly specific about spaces over tabs. Need to add a new section to my <code>.editorconfig</code>.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-3/#code-skip-hello-day-3-5" id="skip-to-code-skip-hello-day-3-5" class="skip-link">Skip code block ▼</a></p>
<pre><code>
[*.sass]
indent_style = space

</code></pre>
<p id="code-skip-hello-day-3-5">Ok, I tried building the extendable <a href="https://sass-lang.com/documentation/style-rules/placeholder-selectors" target="_blank">placeholder</a> into a standalone Sass file and a standalone Scss file and <a href="https://sass-lang.com/documentation/at-rules/extend#placeholder-selectors" target="_blank">it looks right</a>. But <code>@extend %vertical-rhythm</code> still isn't working.</p>
<p>My ordering looks correct!</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-3/#code-skip-hello-day-3-4" id="skip-to-code-skip-hello-day-3-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-sass"><code class="language-sass"><span class="token atrule-line"><span class="token atrule">@use</span> '_sass/base-syntax-highlighting'</span><br /><span class="token atrule-line"><span class="token atrule">@use</span> '_sass/syntax-highlighting'</span></code></pre>
<p id="code-skip-hello-day-3-4">What's going on?</p>
<p>First error is a depreciation error. It <em>shouldn't</em> be a problem, but let's just get rid of it.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-3/#code-skip-hello-day-3-3" id="skip-to-code-skip-hello-day-3-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-bash"><code class="language-bash">DEPRECATION WARNING: Using / <span class="token keyword">for</span> division is deprecated and will be removed <span class="token keyword">in</span> Dart Sass <span class="token number">2.0</span>.0.<br /><br />Recommendation: math.div<span class="token punctuation">(</span><span class="token variable">$spacing</span>-unit, <span class="token number">2</span><span class="token punctuation">)</span><br /><br />More info and automated migrator: https://sass-lang.com/d/slash-div</code></pre>
<p id="code-skip-hello-day-3-3">Alrighty. <a href="https://sass-lang.com/documentation/breaking-changes/slash-div" target="_blank">Go to the docs and do what it says</a>. Side comment... this is dumb. Why is it <em>easier</em> to do this type of math with standard CSS (where it would be <code>calc()</code>) than it is with Sass. Why is Sass harder to use now than it was when I got deep into it years ago? Grrrrr.</p>
<p>OMG why does this documentation start off with <code>// Future Sass, doesn't work yet!</code>?!?! Why would you start off a documentation file with a suggested solution that <strong>doesn't work</strong>?!</p>
<p>Ok. Down to one error. Still not importing the placeholder, why not?</p>
<p>Oh no. This is <a href="https://github.com/sass/dart-sass/issues/1042#issuecomment-656338728" target="_blank">A Problem</a>. Apparently the move to @use has not synced well with the old ways of using mixins, imports and placeholders?</p>
<p>The answer seems to be that you can't have a master file import a variables and expect them to be picked up by downstream files <code>@use</code>ed by that master file, instead you have to import them directly into the file you inted to use? I could have sworn that worked differently before? That isn't how it seems to work in my Jekyll site, perhaps there is a better way to do this?</p>
<p>[ ] Why is the logic around <code>@use</code> not working how I expect it to? Is there a better way?</p>
<p>Ok, I'm... not sure the styles are applying. Let's replicate a markdown block from my other site and see if it looks good.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-3/#code-skip-hello-day-3-2" id="skip-to-code-skip-hello-day-3-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-markdown"><code class="language-markdown"><span class="token frontmatter"><span class="token punctuation">---</span><br /><span class="token key atrule">layout</span><span class="token punctuation">:</span> page<br /><span class="token punctuation">---</span></span></code></pre>
<p id="code-skip-hello-day-3-2">It doesn't look good, but looking at the HTML markup... it looks like the problem is 11ty's processing and output of the actual markup.</p>
<p>:/</p>
<p>What does Jekyll use?</p>
<blockquote>
<p>Confusingly, GitHub Pages renders Markdown differently than GitHub does. GitHub uses its own Markdown processor; GitHub Pages uses jekyll-commonmark.</p>
</blockquote>
<p>lol <a href="https://www.markdownguide.org/tools/github-pages/" target="_blank">thanks</a>.</p>
<p data-wordfix="true">Looks like <a href="https://www.npmjs.com/package/markdown-it" target="_blank">Markdown-It</a> is <a href="https://www.11ty.dev/docs/languages/markdown/" target="_blank">a popular choice</a> on Eleventy to switch to commonmark.</p>
<p>Oh no, <a href="https://www.npmjs.com/package/markdown-it#syntax-highlighting" target="_blank">it doesn't ship with syntax highlighting</a>.</p>
<p data-wordfix="true">Ok, <code>highlight.js</code> is still not applying good tags. Is it an Eleventy issue, or is it that I need to use Pygments, which is apparently the code syntax highlighting engine that Github Pages uses? Ok, how does that work in Node? There <a href="https://www.npmjs.com/package/pygments" target="_blank">is a package, let's read up</a>!</p>
<p>I am concerned that it hasn't been update in 5 years. You know what? let's try <a href="https://highlightjs.org/" target="_blank">https://highlightjs.org/</a> and see if I can force it to build better styles.</p>
<p>Oh no... white text on bright red background. This is a bad sign.</p>
<p>Ok, this looks like it actually should work ok though, what is going on? I'm going to add some <code>console.log</code> statements.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-3/#code-skip-hello-day-3-1" id="skip-to-code-skip-hello-day-3-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	<span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><br />		html<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />		breaks<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />		linkify<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br />		langPrefix<span class="token operator">:</span> <span class="token string">"language-"</span><span class="token punctuation">,</span><br />		<span class="token function-variable function">highlight</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">,</span> lang</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />			<span class="token keyword">if</span> <span class="token punctuation">(</span>lang <span class="token operator">&amp;&amp;</span> hljs<span class="token punctuation">.</span><span class="token function">getLanguage</span><span class="token punctuation">(</span>lang<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />				<span class="token keyword">try</span> <span class="token punctuation">{</span><br />					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Syntax highlight good"</span><span class="token punctuation">,</span> lang<span class="token punctuation">)</span><span class="token punctuation">;</span><br />					<span class="token keyword">return</span> hljs<span class="token punctuation">.</span><span class="token function">highlight</span><span class="token punctuation">(</span>lang<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span><br />				<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>__<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Syntax highlight fail"</span><span class="token punctuation">,</span> lang<span class="token punctuation">)</span><span class="token punctuation">;</span><br />				<span class="token punctuation">}</span><br />			<span class="token punctuation">}</span><br /><br />			<span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span> <span class="token comment">// use external default escaping</span><br />		<span class="token punctuation">}</span><span class="token punctuation">,</span><br />	<span class="token punctuation">}</span><span class="token punctuation">;</span><br />	eleventyConfig<span class="token punctuation">.</span><span class="token function">setLibrary</span><span class="token punctuation">(</span><span class="token string">"md"</span><span class="token punctuation">,</span> <span class="token function">markdownIt</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />	eleventyConfig<span class="token punctuation">.</span><span class="token function">setLibrary</span><span class="token punctuation">(</span><span class="token string">"markdown"</span><span class="token punctuation">,</span> <span class="token function">markdownIt</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p id="code-skip-hello-day-3-1">Ok, they aren't triggering. No logging, this isn't working.</p>
<p>The eleventy website has good syntax highlighting. <a href="https://github.com/11ty/11ty-website/blob/master/.eleventy.js" target="_blank">How are they doing it</a>?</p>
<p>Ok, there's a lot going on there and I need a break. Break time.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/619a3292f27005d85a771d304bad09aafd858d88" class="git-commit-link"><code>git commit -am &quot;Trying to get better syntax highlighting&quot; </code></a></p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Hello World Devblog - Day 2</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-2/?source=rss</link>
		<pubDate>Mon, 14 Jun 2021 03:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-2/</guid>
		<description>Part 2 of setting up 11ty dev blog.</description>
		<content:encoded><![CDATA[<h2 id="day-2" tabindex="-1">Day 2</h2>
<p>Ok, day 2. Let's restate the requirements and todos!</p>
<h3 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h3>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<p>[ ] Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
<p>[ ] So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
<p>[ ] Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/blob/master/src/BuildTOC.js" target="_blank">this TOC plugin</a> mby?</p>
<p data-wordfix="true">[ ] Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
<p>[ ] Decide if I want to render the CSS fancier than just a base file.</p>
<p>[ ] Can I use the template inside of dinky that already exists instead of copy/pasting it?</p>
<h2 id="setting-up-layouts-folder" tabindex="-1">Setting up Layouts folder</h2>
<p data-wordfix="true">Ok, so why isn't it picking up the layout from either <code>_layouts/post.njk</code> or <code>_layouts/default.njk</code>? Maybe I need to define a default <a href="https://www.11ty.dev/docs/data-template-dir/" target="_blank">at the data level</a>? Or do I need to move it to <code>src</code> even if I define the location in the returned configuration?</p>
<p data-wordfix="true">Moving it into <code>src</code> doesn't seem to do anything. But it looks like all the files I configure into Eleventy in the returned object do need to be in there, so apparently I can't set a default layout in the <code>data</code> folder?</p>
<p>Adding a template to <code>src/posts/posts.json</code></p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-2/#code-skip-hello-day-2-4" id="skip-to-code-skip-hello-day-2-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span> <span class="token property">"layout"</span><span class="token operator">:</span> <span class="token string">"layouts/post.njk"</span> <span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-2-4">Ok, yay, an error!</p>
<p><code>Error You’re trying to use a layout that does not exist layouts/post.njk (undefined)</code></p>
<p>Because I defined a path to layouts in the config, I don't need to include it?</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-2/#code-skip-hello-day-2-3" id="skip-to-code-skip-hello-day-2-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span> <span class="token property">"layout"</span><span class="token operator">:</span> <span class="token string">"post.njk"</span> <span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-2-3">Yup, now I have an error in the template!</p>
<p>Ok, looks like I can't use this structure:</p>
<p><code>{{ site.lang | default: &quot;en-US&quot; }}&quot;</code></p>
<p data-wordfix="true">So, default values, how should I do them? It <a href="https://www.11ty.dev/docs/data-cascade/" target="_blank">looks like</a> the answer is to define it as <a href="https://www.11ty.dev/docs/data-global/" target="_blank">a data global</a>. Ok let's try it, place the default in <code>src/_data/site.json</code>.</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-2/#code-skip-hello-day-2-2" id="skip-to-code-skip-hello-day-2-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br />	<span class="token property">"lang"</span><span class="token operator">:</span> <span class="token string">"en-US"</span><br /><span class="token punctuation">}</span></code></pre>
<p id="code-skip-hello-day-2-2">Huh... render error on <em>this</em> file:</p>
<p><code>TemplateContentRenderError ... expected variable end</code></p>
<p>Going to remove <code>{% seo %}</code> from the template. I assume it is a template fragment without looking it up but I'm not prepared to figure it out. Still no solve. Good time to commit!</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/909100be8205f3ea7d7fd6094a823d9a1252d646" class="git-commit-link"><code>git commit -am &quot;Template still not working but getting closer&quot;</code></a></p>
<p data-wordfix="true">Ok, let's start stripping out stuff from the template. The error indicates the problem is in my markdown, but that doesn't make sense, so simpler template. Ok, first, I want the dinky assets folder so it works properly in the template. There are <a href="https://www.11ty.dev/docs/copy/#change-the-output-directory" target="_blank">more ways to configure the passthrough rules</a> to make this work for me.</p>
<p><code>eleventyConfig.addPassthroughCopy({ &quot;dinky/assets&quot;: &quot;assets&quot; });</code></p>
<p>Ok, passthrough works! But the template still won't render. The error is still in my markdown! At <code>[Line 49, Column 67]</code>. What is going on?! That line is empty, it doesn't have columns.</p>
<p>Wait... the line number is likely being calculated after the metadata is removed from the head of the <code>md</code> file. Ok... my metadata takes up 10 lines so it is really line <em>59</em>. Oh! It's a code sample <em>from</em> the template. It's trying to render an njk variable from the markdown file?! That's very dumb.</p>
<p>To Google! &quot;njk picking up code sample of njk code&quot; &gt; <a href="https://github.com/11ty/eleventy/issues/791" target="_blank">result</a>.</p>
<p>Raw tag huh? How does that work exactly? Oh... like <a href="https://github.com/11ty/11ty-website/blob/master/src/docs/languages/nunjucks.md" target="_blank">this</a>.</p>
<p>Ok, works both for blocks and inline, good!</p>
<p>Ok, defaults for posts <em>have</em> to be in the <code>posts</code> folder's <code>posts.json</code>. I cannot seem to set any defaults for posts in the <code>_data</code> folder. Or at least I haven't figured out how. But ok, things are rendering now in the right template. Also the assets are being passed out of the <code>dinky</code> submodule! This is good. The process works, so now I can start to build in my weirdness.</p>
<p>I still really want to figure out the defaults thing first. How do I make this work?</p>
<p>Ok, <a href="https://github.com/11ty/eleventy/issues/380#issuecomment-568033456" target="_blank">here we go</a>.</p>
<p>So to get a default <code>description</code> value in my template I can set it up with a file at <code>src/_data/description.js</code> and have the content of that file be <code>module.exports = &quot;Talking about code&quot;;</code>. Ok, that works!</p>
<p data-wordfix="true">Yay, Eleventy defaults work now! Good place to commit.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/2b51f07a382a3c0311810197e50b603eff45b5be" class="git-commit-link"><code>git commit -am &quot;Ok, renders and defaults are working now&quot;</code></a></p>
<h3 id="sass-figuring-out-_rendersync" tabindex="-1">Sass - figuring out _renderSync</h3>
<p>Hmmm... ok I guess that I picked a bad example plugin, because the one I used <a href="https://www.npmjs.com/package/eleventy-plugin-meta-generator#usage" target="_blank">doesn't have a typical footprint</a>. Well, I'm not going to have a typical footprint I guess. Let's start without that. It runs sync, so I can just call the function during setup mby? Just add <code>sassBuild();</code> to the inside of my .eleventy.js function inside of <code>module.exports = function (eleventyConfig) {</code>?</p>
<p>Ok... renderSync from <code>dart-sass</code> threw an error:</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-2/#code-skip-hello-day-2-1" id="skip-to-code-skip-hello-day-2-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-bash"><code class="language-bash">Receiver: Closure <span class="token string">'_renderSync'</span><br />Arguments: <span class="token punctuation">[</span>Instance of <span class="token string">'PlainJavaScriptObject'</span>, Instance of <span class="token string">'JavaScriptFunction'</span><span class="token punctuation">]</span><br /><br />`` was thrown:<br />    NoSuchMethodError: method not found: <span class="token string">'call'</span></code></pre>
<p id="code-skip-hello-day-2-1">Lol <a href="https://github.com/sass/dart-sass/issues/23#issuecomment-259011350" target="_blank">documentation error in dart-sass</a> apparently. Don't pass two functions, because that's an async pattern, instead return the result.</p>
<p>Cool. New error!</p>
<p><code>Invalid argument(s): Either options.data or options.file must be set.</code></p>
<p>Can I not use multiple files? I guess I need a single file that calls the others <a href="https://sass-lang.com/documentation/at-rules/use" target="_blank">using @use</a>. Last time I used Sass it was @import, but according to docs, that method is out now. Good to know!</p>
<p data-wordfix="true">Oh, gotta remember paths are relative to execution, so I have to set up paths in both the Sass plugin AND the <code>@use</code> relative to the base of the project, where I'm executing the Eleventy build process.</p>
<p>Still no css file.</p>
<p>Oh, <a href="https://sass-lang.com/documentation/js-api#outfile" target="_blank">lol</a></p>
<blockquote>
<p>Despite the name, Sass does not write the CSS output to this file. The caller must do that themselves.</p>
</blockquote>
<p>Ok, gotta do that.</p>
<h3 id="writing-out-the-sass-file" tabindex="-1">Writing out the Sass file</h3>
<p>Ok, I want to use <code>fs</code> to write the resulting file into <code>docs/styles/styles.css</code>. Only, the <code>styles</code> directory does not predictably exist so <code>fs</code> fails because I have to make that folder. Of course, forgot. Easy enough.</p>
<p>Ok, it works! This is a good place to stop because it is almost midnight.</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/f4a1307dcf0fbe5dcc03b2ae4d2be737177c3276" class="git-commit-link"><code>git commit -am &quot;Compile that sass&quot;</code></a></p>
<p>And this is pretty far along, huh? Time to push it to Github.</p>
]]></content:encoded>
	</item>
	
	<item>
		<title>Hello World - A Dev Blog</title>
		<link>https://fightwithtools.dev/posts/projects/devblog/hello-day-1/?source=rss</link>
		<pubDate>Sun, 13 Jun 2021 03:59:43 GMT</pubDate>
		<dc:creator>Aram Zucker-Scharff</dc:creator>
		<guid isPermaLink="true">https://fightwithtools.dev/posts/projects/devblog/hello-day-1/</guid>
		<description>Building this very blog for my development notes, using Eleventy.</description>
		<content:encoded><![CDATA[<h2 id="day-1" tabindex="-1">Day 1</h2>
<p>I have decided I want a blog to write down some of my decisions as I build various public projects. So, inital requirements:</p>
<ol>
<li>Static Site Generator that can build the blog and let me host it on Github Pages</li>
<li>I want to write posts in Markdown because I'm lazy, it's easy, and it is how I take notes now.</li>
<li>I don't want to spend a ton of time doing design work. I'm doing complicated designs for other projects, so I want to pull a theme I like that I can rely on someone else to keep up.</li>
<li>Once it gets going, I want template changes to be easy.</li>
<li>It should be as easy as Jekyll, so I need to be able to build it using GitHub Actions, where I can just commit a template change or Markdown file and away it goes. If I can't figure this out than fk it, just use Jekyll.</li>
</ol>
<p data-wordfix="true">So, after being completly put off by the Hugo quickstart page, I decided to go to Eleventy. I'd been using Eleventy for a very basic build process on another project, so I wanted to see what it would be like for a more complex blog. Everyone I know seems to love Eleventy so if I complain about it on Twitter someone will likely give me an answer. This is a requirement I only just realized:</p>
<ol start="6">
<li>I require it to be used by a significant percent of my professional peers so I can get easy answers when something goes wrong.</li>
</ol>
<p data-wordfix="true">Ok. Eleventy it is.</p>
<p>Ok, first things first. New folder. <code>git init</code>.</p>
<p>Oh, it starts new projects with the <code>master</code> branch? I don't like that, I like using <code>main</code>. I can checkout main and delete master right?</p>
<p>Huh... if you don't have anything committed to any branch and you checkout a new branch the <code>master</code> branch ceases to exist. Cool. I guess I don't need to do <a href="https://www.git-tower.com/learn/git/faq/git-rename-master-to-main/" target="_blank">this</a>.</p>
<p data-wordfix="true">Wait... does Eleventy work with GitHub Actions to build? I have no idea. <a href="https://www.linkedin.com/pulse/eleventy-github-pages-lea-tortay/" target="_blank">Looks like yes</a>... let's move forward.</p>
<p><code>npm init -y</code></p>
<p><code>npm install --save-dev @11ty/eleventy</code></p>
<p data-wordfix="true">Here we go with Eleventy! Only...</p>
<p data-wordfix="true">All the pre-built... ughhh &quot;Themes&quot; or &quot;Starters&quot; (I can't say template here, because searching for &quot;Eleventy templates&quot;, while a logical thing to do, just gives me a ton of pages about using Nunjucks) suck. They all suck hardcore. I mean, they're all single page sites with no clear navigation or nav bar and look barely worked out beyond the Bootstrap Starter Template phase. I can't stand any of them. Is there a secret location for good Eleventy themes or is it just that the type of folks most likely to use Eleventy lack design skills?</p>
<p>But... I really like the Jekyll dinky theme. All I really need is the CSS and I can pull a copy of its template into whatever. Easy enough in theory (never in practice).</p>
<p>I'm going to pull it in as a submodule. I forgot how to do submodules. <a href="https://github.blog/2016-02-01-working-with-submodules/" target="_blank">Here we go</a>.</p>
<p><code>git submodule add git@github.com:pages-themes/dinky.git</code></p>
<p><code>git submodule update --init --recursive</code></p>
<p>Alright, what have we got here.</p>
<p>Sass. We've got Sass. That's going to need to be figured out.</p>
<p data-wordfix="true">Let's go to the Eleventy plugins and see what, if anything, can help me here.</p>
<p>Oh and let's grab some cool looking ones.</p>
<p><code>npm install @11ty/eleventy-img</code></p>
<p>Huh, some funkyness on the install... because I forgot that, for various complicated reasons, my Node install defaults to 8.*.</p>
<p>Ok. Create the <code>.nvmrc</code> file and what's the latest version of node these days? Put <code>16</code> in it.</p>
<p>Reboot my console so I take advantage of <a href="https://gist.github.com/AramZS/fda9c04a38908789dccdf78bb94e2b45" target="_blank">the nifty nvm auto-load ZSH script</a>.</p>
<p>Dump package-lock, dump node_modules, <code>npm install</code> again.</p>
<p>Plugin install works now.</p>
<p><code>npm install @11ty/eleventy-plugin-syntaxhighlight --save-dev</code><br />
<code>npm install @11ty/eleventy-navigation --save-dev</code><br />
<code>npm install @11ty/eleventy-plugin-rss --save-dev</code></p>
<p><code>npm install eleventy-plugin-sass --save </code></p>
<p data-wordfix="true">Ok, that didn't work. And the whole point of looking at plugins was a SASS processor integrated into the Eleventy build process. Not great. What's wrong?</p>
<p>Looks like something with <code>node-gyp</code>. Frequently a problem.</p>
<p>Let's check <code>node-gyp</code>.</p>
<p>Ok, a whole thing for problems from an upgrade.</p>
<p>Let's do all of <a href="https://github.com/nodejs/node-gyp/blob/master/macOS_Catalina.md" target="_blank">that</a>. XCode needed an update and for some reason updating to Catalina also wiped out my XCode CLI tools... didn't realize that. Reinstall those:</p>
<p><code>xcode-select --install</code></p>
<p>Ok, cool. Moving on...</p>
<p data-wordfix="true">Oh, I am looking at the configuration options for <code>gulp-sass</code> which get passed into the Eleventy plugin and looks like <code>gulp-sass</code> is depreciated. So this plugin is not one I want to use. And it looks like there isn't an up to date Sass plugin.</p>
<p>lol.</p>
<p data-wordfix="true">So, let's assume I'm going to have to write my own plugin. I know nothing about Eleventy plugins. Find a real basic one and use that as the template to start a new one.</p>
<p>This <a href="https://www.npmjs.com/package/eleventy-plugin-meta-generator" target="_blank">one</a> looks pretty simple! So I'm going to keep that tab open for reference as I build out a Sass processor.</p>
<p>[ ] Also <a href="https://www.npmjs.com/package/@quasibit/eleventy-plugin-sitemap" target="_blank">the sitemap plugin</a> looks cool. Should grab that later.</p>
<p>[ ] So does the <a href="https://www.npmjs.com/package/eleventy-plugin-reading-time" target="_blank">reading time one</a>.</p>
<p>I also saw <a href="https://www.npmjs.com/package/eleventy-load" target="_blank">a Loader plugin</a>... but it looks way more complicated than I need while also <em>not doing what I need</em>, so mark it, move on. Might have something in its code that's useful for later.</p>
<p>[ ] Also <a href="https://github.com/jdsteinbach/eleventy-plugin-toc/blob/master/src/BuildTOC.js" target="_blank">this TOC plugin</a> mby?</p>
<p>Ok, back to Sass. Now, I don't want to fk around with building a whole NPM module for this right now, so let's start with the plugin internal to the project.</p>
<p>There does not seem to be a standard pattern for these like there is for layouts, data, etc... so I'm going to imitate the <code>_{thing}</code> pattern and make a <code>_custom-plugins</code> folder. Maybe someday someone will read this and tell me this is a dumb pattern. Put it in there. Node module structure, <code>index.js</code> at the base, <code>src</code> folder with the files that actually do stuff.</p>
<p>Ok let's get Sass in here. I want the Javascript library, so read through docs <a href="https://sass-lang.com/dart-sass" target="_blank">at their site</a>.</p>
<p><code>npm install sass --save-dev</code><br />
<code>npm install fiber --save-dev</code></p>
<p>That 2nd one didn't work... cool, what is Fiber... let's <a href="https://github.com/laverdet/node-fibers" target="_blank">read about it</a>.</p>
<blockquote>
<p>Update [April 13th, 2021] -- Fibers is not compatible with nodejs v16.0.0 or later. Unfortunately, v8 commit dacc2fee0f is a breaking change and workarounds are non-trivial.</p>
</blockquote>
<p><em>sigh</em></p>
<p>Ok, using latest version of Node, clearly a bad choice.</p>
<p><code>.nvmrc</code> changed to <code>15</code>. I like 15, I've used 15 for other stuff. Hopefully no problem.</p>
<p data-wordfix="true">You know... reading node-fiber's documentation... I... don't actually need it anyway. I want <code>renderSync</code>, to block the build process of Eleventy until the right assets are done.</p>
<p>Whatever... never use latest Node... it always causes problems. I have encountered this time and time again. Clear out package-lock and node_modules.</p>
<p><code>npm install</code></p>
<p>Ok at this point my process has already become more muddled then I'm comfortable with. Better start documenting it actually. Oh wait, this is a dev blog, I should start documenting it AS A BLOG POST.</p>
<p data-wordfix="true">I forgot the pattern for Eleventy posts' folders in a project. <a href="https://github.com/11ty/eleventy-base-blog/tree/master/posts" target="_blank">Here it is</a>.</p>
<p>Started this file.</p>
<p data-wordfix="true">Forgot the number of dashes for the metadata format for markdown that Eleventy likes because it is not 8:30pm and I have not yet had dinner. I was reading about some feature that mentioned it in the context of merging data from templates with markdown files, I should likely note that.</p>
<p data-wordfix="true">[ ] Use <a href="https://www.11ty.dev/docs/data-deep-merge/" target="_blank">Data Deep Merge</a> in this blog.</p>
<p>Ok now:</p>
<p>[x] Write everything down that I've done to this point before it zeroes out of my head.</p>
<p>God bless CLI and browser history.</p>
<p>Ok, back to the Sass plugin. And also: this would be a good time to do a commit huh?</p>
<p data-wordfix="true"><a target="_blank" href="https://github.com/AramZS/devblog/commit/ad3eb51eb8d2aea5f20a18793054d7831966920f" class="git-commit-link"><code>git commit -am &quot;a real 11ty blog... I don't know wtf I'm doing to make this work yet&quot;</code></a></p>
<p>Ok, <code>dart-sass</code>. I don't know what any of these listed options are...</p>
<p>Annoying, since they are emulating the <code>node-sass</code> API, it's just a link to the <code>node-sass</code> README documentation. Ok, taking a look.</p>
<ol start="7">
<li>I want source maps. This is a dev log site which means whatever I do with it should be easy for other developers to read.</li>
</ol>
<p>I also would like to have smart CSS, where it only loads the CSS files it needs for a template, so we'd have a main CSS file and then per-template CSS files? That would be cool. Or maybe <a href="https://github.com/addyosmani/critical#usage" target="_blank">this thing</a>? You know what... table that... let's just render the damn CSS first.</p>
<p>[ ] Decide if I want to render the CSS fancier than just a base file.</p>
<p data-wordfix="true">Huh... a thought... can I just run any arbitrary function in Eleventy as part of the build?</p>
<p data-wordfix="true"><a href="https://www.11ty.dev/docs/data-js/" target="_blank">Looks like</a> the <code>_data</code> folder can contain functions that output arbitrary files?</p>
<p>Should I do that? I mean... I likely could... but it isn't elegant, it isn't the <em>right</em> way. Skip it.</p>
<p data-wordfix="true">Ok, set it up with the most basic Sass build rules. Let's hold there, I'm going to want to try it out, but first, let's make sure the normal Eleventy build works.</p>
<p>Ok, to do that I need a layout in place. Get it in <a href="https://github.com/11ty/eleventy-base-blog/tree/master/_includes/layouts" target="_blank">the right place</a>.</p>
<p data-wordfix="true">To make sure my CSS works properly, I should probably set up the dinky layout here. <code>dinky/_layouts</code>. Ok... only one file, easy enough. And the template syntax looks basically identical. Copy it and paste it into the <code>_includes/layouts</code> folder and rename it to <code>default.njk</code>.</p>
<p data-wordfix="true">NOTE: I'm pretty sure that Nunjucks can process HTML files. Do I want to just add a Eleventy alias to just pull default.html from dinky in the style of <code>eleventyConfig.addLayoutAlias(&quot;base&quot;, &quot;dinky/_layouts/default.html&quot;);</code>? Would that work? Put a pin in that:</p>
<p>[ ] Can I use the template inside of dinky that already exists instead of copy/pasting it?</p>
<p>Pull the .eleventy.js return from the <a href="https://github.com/11ty/eleventy-base-blog/blob/master/.eleventy.js" target="_blank">base blog</a> and change output to <code>docs</code> for Github Pages...</p>
<p class="skip-link-graf">
<a href="https://fightwithtools.dev/posts/projects/devblog/hello-day-1/#code-skip-hello-day-1-1" id="skip-to-code-skip-hello-day-1-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">		dir<span class="token operator">:</span> <span class="token punctuation">{</span><br />			input<span class="token operator">:</span> <span class="token string">"."</span><span class="token punctuation">,</span><br />			includes<span class="token operator">:</span> <span class="token string">"_includes"</span><span class="token punctuation">,</span><br />			data<span class="token operator">:</span> <span class="token string">"_data"</span><span class="token punctuation">,</span><br />			output<span class="token operator">:</span> <span class="token string">"docs"</span><span class="token punctuation">,</span><br />		<span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre>
<p id="code-skip-hello-day-1-1">Wait... it's pulling njk files from the base of the project? Mixing project files with build configuration files? That's HOT NONSENSE. I did that last time, but it was becaause I wanted to build some real basic pages and only a few of them. Not good for a larger project IMO. Create an <code>src</code> folder.</p>
<p><code>input: &quot;src&quot;,</code></p>
<p>Crap... what of these folders do I need to move in? I guess <code>posts</code>? That is likely it. I'll find out later!</p>
<p>Ok, theoretically should be able to make a build. Moment of truth.</p>
<p><code>npx @11ty/eleventy</code></p>
<p>It did not pick up the template</p>
<p>Let's try altering the .eleventy.js returned data to include, and I'll move the folder accordingly:</p>
<p><code>layouts: &quot;_layouts&quot;,</code></p>
<p>Still didn't pick it up.</p>
<p>Ok, gotta play around, but good time to commit</p>
<p><a target="_blank" href="https://github.com/AramZS/devblog/commit/448f44a4e9e1ec604bee4665d56f12abf78cfe6a" class="git-commit-link"><code>git commit -am &quot;First render, didn't work&quot;</code></a></p>
<p>Time to take a break for dinner.</p>
]]></content:encoded>
	</item>
	</channel>
</rss>
