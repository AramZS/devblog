{"initialLink":"https://web.dev/prefers-color-scheme/","sanitizedLink":"https://web.dev/prefers-color-scheme/","finalLink":"https://web.dev/prefers-color-scheme/","htmlEmbed":"<script>window.contexterSetup=window.contexterSetup||function(){window.contexterSetupComplete=!0;class ContexterLink extends HTMLAnchorElement{constructor(){super()}connectedCallback(){this.setAttribute(\"target\",\"_blank\")}}customElements.define(\"contexter-link\",ContexterLink,{extends:\"a\"}),customElements.define(\"contexter-inner\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__inner\"}}),customElements.define(\"contexter-thumbnail\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__thumbnail\"}}),customElements.define(\"contexter-byline\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__byline\"}}),customElements.define(\"contexter-keywordset\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__keywordset\"}}),customElements.define(\"contexter-linkset\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__linkset\"}}),customElements.define(\"contexter-meta\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__meta\"}}),customElements.define(\"contexter-summary\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"p-summary entry-summary\"}}),customElements.define(\"contexter-box-head\",class extends HTMLElement{constructor(){super()}connectedCallback(){this.className=\"contexter-box__head\"}}),customElements.define(\"contexter-box-inner\",class extends HTMLElement{constructor(){super()}connectedCallback(){}});class ContexterBox extends HTMLElement{constructor(){super(),this.first=!0,this.shadow=this.attachShadow({mode:\"open\"})}connectedCallback(){if(this.first){this.first=!1;var style=document.createElement(\"style\"),lightDomStyle=(style.innerHTML=`:host {--background: #f5f6f7;--border: darkblue;--blue: #0000ee;--font-color: black;--inner-border: black;font-family: Franklin,Arial,Helvetica,sans-serif;font-size: 14px;background: var(--background);width: 600px;color: var(--font-color);min-height: 90px;display: block;padding: 8px;border: 1px solid var(--border);cursor: pointer;box-sizing: border-box;margin: 6px;contain: content;margin: 6px auto;}// can only select top-level nodes with slotted::slotted(*) {max-width: 100%;display:block;}::slotted([slot=thumbnail]) {max-width: 100%;display:block;}::slotted([slot=header]) {width: 100%;font-size: 1.25rem;font-weight: bold;display:block;margin-bottom: 6px;}::slotted([slot=author]) {max-width: 50%;font-size: 12px;display:inline-block;float: left;}::slotted([slot=time]) {max-width: 50%;font-size: 12px;display:inline-block;float: right;}::slotted([slot=summary]) {width: 100%;margin-top: 6px;padding: 10px 2px;border-top: 1px solid var(--inner-border);font-size: 15px;display:inline-block;margin-bottom: 6px;}contexter-meta {height: auto;margin-bottom: 4px;width: 100%;display: grid;position: relative;min-height: 16px;grid-template-columns: repeat(2, 1fr);}::slotted([slot=keywords]) {width: 80%;padding: 2px 4px;border-top: 1px solid var(--inner-border);font-size: 11px;display: block;float: right;font-style: italic;text-align: right;grid-column: 2/2;grid-row: 1;align-self: end;justify-self: end;}::slotted([slot=keywords]):empty {border-top: 0px solid var(--inner-border);}::slotted([slot=archive-link]) {font-size: 1em;display: inline;}::slotted([slot=archive-link])::after {content: \"|\";display: inline;color: var(--font-color);text-decoration: none;margin: 0 .5em;}::slotted([slot=read-link]) {font-size: 1em;display: inline;}contexter-linkset {width: 80%;padding: 2px 4px;font-size: 13px;float: left;font-weight: bold;grid-row: 1;grid-column: 1/2;align-self: end;justify-self: start;}/* Extra small devices (phones, 600px and down) */@media only screen and (max-width: 600px) {:host {width: 310px;}}/* Small devices (portrait tablets and large phones, 600px and up) */@media only screen and (min-width: 600px) {...}/* Medium devices (landscape tablets, 768px and up) */@media only screen and (min-width: 768px) {...}/* Large devices (laptops/desktops, 992px and up) */@media only screen and (min-width: 992px) {...}/* Extra large devices (large laptops and desktops, 1200px and up) */@media only screen and (min-width: 1200px) {...}@media (prefers-color-scheme: dark){:host {--background: #354150;--border: #1f2b37;--blue: #55b0ff;--font-color: #ffffff;--inner-border: #787a7c;background: var(--background);border: 1px solid var(--border)}}`,document.createElement(\"style\"));lightDomStyle.innerHTML=`contexter-box {contain: content;}contexter-box .read-link {font-weight: bold;}contexter-box a {color: #0000ee;}contexter-box img {width: 100%;border: 0;padding: 0;margin: 0;}/* Extra small devices (phones, 600px and down) */@media only screen and (max-width: 600px) {...}/* Small devices (portrait tablets and large phones, 600px and up) */@media only screen and (min-width: 600px) {...}/* Medium devices (landscape tablets, 768px and up) */@media only screen and (min-width: 768px) {...}/* Large devices (laptops/desktops, 992px and up) */@media only screen and (min-width: 992px) {...}/* Extra large devices (large laptops and desktops, 1200px and up) */@media only screen and (min-width: 1200px) {...}@media (prefers-color-scheme: dark){contexter-box a {color: #55b0ff;}}`,this.appendChild(lightDomStyle),this.shadow.appendChild(style);const innerContainer=document.createElement(\"contexter-box-inner\"),innerSlotThumbnail=(this.shadow.appendChild(innerContainer),document.createElement(\"slot\")),innerSlotHeader=(innerSlotThumbnail.name=\"thumbnail\",innerContainer.appendChild(innerSlotThumbnail),document.createElement(\"slot\")),innerSlotAuthor=(innerSlotHeader.name=\"header\",innerContainer.appendChild(innerSlotHeader),document.createElement(\"slot\")),innerSlotTime=(innerSlotAuthor.name=\"author\",innerContainer.appendChild(innerSlotAuthor),document.createElement(\"slot\")),innerSlotSummary=(innerSlotTime.name=\"time\",innerContainer.appendChild(innerSlotTime),document.createElement(\"slot\")),metaContainer=(innerSlotSummary.name=\"summary\",innerContainer.appendChild(innerSlotSummary),document.createElement(\"contexter-meta\")),innerSlotInfo=(innerContainer.appendChild(metaContainer),document.createElement(\"slot\")),linkContainer=(innerSlotInfo.name=\"keywords\",metaContainer.appendChild(innerSlotInfo),document.createElement(\"contexter-linkset\")),innerSlotArchiveLink=(metaContainer.appendChild(linkContainer),document.createElement(\"slot\")),innerSlotReadLink=(innerSlotArchiveLink.name=\"archive-link\",linkContainer.appendChild(innerSlotArchiveLink),document.createElement(\"slot\"));innerSlotReadLink.name=\"read-link\",linkContainer.appendChild(innerSlotReadLink),this.className=\"contexter-box\",this.onclick=e=>{if(!e.target.className.includes(\"read-link\")&&!e.target.className.includes(\"title-link\")){const mainLinks=this.querySelectorAll(\"a.main-link\");mainLinks[0].click()}}}}}customElements.define(\"contexter-box\",ContexterBox)},window.contexterSetupComplete||window.contexterSetup();</script><contexter-box class=\"link-card h-entry hentry\" itemscope=\"\" itemtype=\"https://schema.org/CreativeWork\"><contexter-thumbnail class=\"thumbnail\" slot=\"thumbnail\"></contexter-thumbnail><contexter-box-head slot=\"header\" class=\"p-name entry-title\" itemprop=\"headline\"><contexter-box-head slot=\"header\" class=\"p-name entry-title\" itemprop=\"headline\"><a is=\"contexter-link\" href=\"https://web.dev/prefers-color-scheme/\" itemprop=\"url\">prefers-color-scheme: Hello darkness, my old friend</a></contexter-box-head></contexter-box-head><time class=\"dt-published published\" slot=\"time\" itemprop=\"datePublished\" datetime=\"2022-03-07T01:04:06.926Z\">2/6/2022</time><contexter-summary class=\"p-summary entry-summary\" itemprop=\"abstract\" slot=\"summary\"><p>Many devices now support an operating system wide dark mode or dark theme experience. This post explains how dark mode can be supported on web pages, lists best practices, and introduces a custom element named dark-mode-toggle that allows web developers to offer users a way to override their operating system level preference on specific web pages. </p></contexter-summary><contexter-keywordset itemprop=\"keywords\" slot=\"keywords\"></contexter-keywordset><a href=\"https://web.archive.org/web/20220307010412/https://web.dev/prefers-color-scheme/\" is=\"contexter-link\" target=\"_blank\" rel=\"timemap\" class=\"read-link archive-link\" itemprop=\"archivedAt\" slot=\"archive-link\">Archived</a><a is=\"contexter-link\" href=\"https://web.dev/prefers-color-scheme/\" class=\"read-link main-link\" itemprop=\"sameAs\" slot=\"read-link\">Read</a></contexter-box>","linkId":"bb15fc4689d2e8c9fb6ec880676d97db22d99963","data":{"originalLink":"https://web.dev/prefers-color-scheme/","sanitizedLink":"https://web.dev/prefers-color-scheme/","canonical":"https://web.dev/prefers-color-scheme/","htmlText":"<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta content=\"width=device-width,initial-scale=1\" name=viewport><link href=/fonts/google-sans/regular/latin.woff2 rel=preload as=font crossorigin><link href=/fonts/google-sans/bold/latin.woff2 rel=preload as=font crossorigin><link href=https://web-dev.imgix.net rel=preconnect><meta content=#fff name=theme-color><title>prefers-color-scheme: Hello darkness, my old friend</title><meta content=\"Many devices now support an operating system wide dark mode or dark theme experience. This post explains how dark mode can be supported on web pages, lists best practices, and introduces a custom element named dark-mode-toggle that allows web developers to offer users a way to override their operating system level preference on specific web pages. \" name=description><link href=https://web.dev/prefers-color-scheme/ rel=canonical><link href=https://web.dev/i18n/es/prefers-color-scheme/ rel=alternate hreflang=es><link href=https://web.dev/i18n/ja/prefers-color-scheme/ rel=alternate hreflang=ja><link href=https://web.dev/i18n/ko/prefers-color-scheme/ rel=alternate hreflang=ko><link href=https://web.dev/i18n/ru/prefers-color-scheme/ rel=alternate hreflang=ru><link href=https://web.dev/prefers-color-scheme/ rel=alternate hreflang=en><meta content=\"prefers-color-scheme: Hello darkness, my old friend\" itemprop=name><meta content=\"Many devices now support an operating system wide dark mode or dark theme experience. This post explains how dark mode can be supported on web pages, lists best practices, and introduces a custom element named dark-mode-toggle that allows web developers to offer users a way to override their operating system level preference on specific web pages. \" itemprop=description><meta content=\"https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&fit=max&w=1200&fm=auto\" itemprop=image><meta content=en_US property=og:locale><meta content=article property=og:type><meta content=https://web.dev/prefers-color-scheme/ property=og:url><meta content=web.dev property=og:site_name><meta content=\"prefers-color-scheme: Hello darkness, my old friend\" property=og:title><meta content=\"Many devices now support an operating system wide dark mode or dark theme experience. This post explains how dark mode can be supported on web pages, lists best practices, and introduces a custom element named dark-mode-toggle that allows web developers to offer users a way to override their operating system level preference on specific web pages. \" property=og:description><meta content=\"https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&fit=max&w=1200&fm=auto\" property=og:image><meta content=\"Silhouette photo of a mountain during nighttime, photo by Nathan Anderson on Unsplash. \" property=og:image:alt><meta content=css property=tag><meta content=summary_large_image name=twitter:card><meta content=\"prefers-color-scheme: Hello darkness, my old friend\" name=twitter:title><meta content=\"Many devices now support an operating system wide dark mode or dark theme experience. This post explains how dark mode can be supported on web pages, lists best practices, and introduces a custom element named dark-mode-toggle that allows web developers to offer users a way to override their operating system level preference on specific web pages. \" name=twitter:description><meta content=\"https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&fit=max&w=1200&fm=auto\" name=twitter:image><link href=/feed.xml rel=alternate type=application/atom+xml data-title=\"web.dev feed\"><link href=/manifest.webmanifest rel=manifest><link href=/images/favicon.ico rel=\"shortcut icon\"><link href=/images/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/images/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/images/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=/images/safari-pinned-tab.svg rel=mask-icon color=#0054ff><script>window.applyThemeSetting=function(e){const t=window.matchMedia(\"(prefers-color-scheme: dark)\").matches?\"dark\":\"light\",o=e||localStorage.getItem(\"user-color-scheme\")||t,r=document.documentElement.getAttribute(\"data-user-theme\");if(o){o!==r&&document.documentElement.setAttribute(\"data-user-theme\",o);const e=document.querySelector(\"web-lighthouse-viewer article.lh-root\");e&&e.classList.toggle(\"lh-dark\",\"dark\"===o)}},window.applyThemeSetting();</script><link href=\"/css/next.css?v=1d8a0695\" rel=stylesheet><link href=\"/css/legacy-rollout.css?v=c92bcb17\" rel=stylesheet><link href=/fonts/material-icons/regular.woff2 rel=preload as=font crossorigin><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga(\"create\",\"UA-126406676-2\"),ga(\"set\",\"transport\",\"beacon\"),ga(\"set\",\"anonymizeIp\",!0),ga(\"set\",\"page\",window.location.pathname),ga(\"set\",\"dimension5\",\"9\");try{ga(\"set\",\"dimension6\",performance.getEntriesByType(\"navigation\")[0].type)}catch(a){ga(\"set\",\"dimension6\",\"(not set)\")}ga(\"send\",\"pageview\");</script><script>function loadScript(e,t){const o=document.createElement(\"script\");if(o.src=e,t&&(o.type=t),\"module\"===t){o.async=!1;const t=document.createElement(\"link\");t.rel=\"modulepreload\",t.href=e,document.head.append(t),window.addEventListener(\"DOMContentLoaded\",(()=>{document.head.append(o)}))}else document.head.append(o)}loadScript(\"/js/app.js?v=145f0867\",\"module\"),loadScript(\"/js/content.js?v=ba13cad3\",\"module\"),loadScript(\"https://www.google-analytics.com/analytics.js\",null),loadScript(\"https://www.google.com/recaptcha/api.js\",null);</script></head><body class=unresolved><web-snackbar-container></web-snackbar-container><a href=#main class=\"button skip-link\" data-type=primary>Skip to content</a><web-header class=site-header role=banner><div class=\"cluster gutter-base\"><button class=\"color-core-text icon-button md:hidden-yes tooltip\" data-alignment=right data-open-drawer-button><svg height=24 viewBox=\"0 0 24 24\" width=24 xmlns=http://www.w3.org/2000/svg><path d=\"M0 0h24v24H0z\" fill=none /><path d=\"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\"/></svg> <span class=tooltip__content>Open menu</span></button> <a href=/ class=\"brand site-header__brand\"><svg height=22.32 viewBox=\"0 0 119.79 22.32\" width=119.79 xmlns=http://www.w3.org/2000/svg aria-label=web.dev role=img><path d=\"M114.99 19.32h-2.2l-4.8-11.9h2.4l3.5 9.2 3.5-9.2h2.4Zm-16.8-7.3h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.56 3.56 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-14 0c-3.1 0-5.7-2.8-5.7-6.3s2.6-6.3 5.7-6.3a5 5 0 0 1 4.1 2h.1l-.1-1.6v-5.5h2.2v17.3h-2.1v-1.6h-.1a5.12 5.12 0 0 1-4.1 2Zm.3-2c2.2 0 3.8-1.7 3.8-4.3s-1.6-4.3-3.8-4.3a4 4 0 0 0-3.8 4.3 4 4 0 0 0 3.8 4.3Zm-6.8.1a1.61 1.61 0 0 1-1.7 1.6 1.74 1.74 0 0 1-1.7-1.6 1.67 1.67 0 0 1 1.7-1.6 1.61 1.61 0 0 1 1.7 1.6Zm-10.5-.1a4 4 0 0 0 3.8-4.3 4 4 0 0 0-3.8-4.3c-2.2 0-3.8 1.8-3.8 4.3s1.6 4.3 3.8 4.3Zm.4 2a5 5 0 0 1-4.1-2h-.1v1.6h-2.1V2.02h2.2v5.5l-.1 1.6h.1a4.84 4.84 0 0 1 4.1-2c3.1 0 5.7 2.8 5.7 6.3s-2.6 6.3-5.7 6.3Zm-17.4-7.7h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.67 3.67 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-6.3-12.2-3.8 11.9h-2.3l-3-9.1-2.9 9.1h-2.3l-3.9-11.9h2.3l2.6 9 2.9-9h2.3l2.9 9 2.6-9Z\" fill=#5f6368 fill-rule=evenodd class=brand__text /><path d=\"M0 19.28a3 3 0 0 1 3-3h16.27a3.045 3.045 0 0 1 0 6.09H3.04A3 3 0 0 1 0 19.28Z\" fill=#6cf /><path d=\"M.89.9a3 3 0 0 1 4.3 0l8.12 8.11a3.05 3.05 0 0 1 0 4.3l-8.12 8.12a3.04 3.04 0 1 1-4.3-4.3l5.6-5.61a.51.51 0 0 0 0-.72L.89 5.22A3 3 0 0 1 .89.9Z\" fill=#06f fill-rule=evenodd /><path d=\"m10.39 16.22-5.2 5.2a3.04 3.04 0 1 1-4.3-4.3l.89-.9Z\" fill=#c6f /><circle cx=19.27 cy=19.27 fill=#06f r=3.04 /></svg></a></div><web-navigation-drawer type=standard><nav aria-label=\"main navigation\" class=site-header__nav data-drawer-container><a href=/learn/ class=site-header__link data-category=\"Site-Wide Custom Events\" data-label=\"Tab: Learn\">Learn </a><a href=/measure/ class=site-header__link data-category=\"Site-Wide Custom Events\" data-label=\"Tab: Measure\">Measure </a><a href=/blog/ class=site-header__link data-category=\"Site-Wide Custom Events\" data-label=\"Tab: Blog\">Blog </a><a href=/tags/case-study/ class=site-header__link data-category=\"Site-Wide Custom Events\" data-label=\"Tab: Case Studies\">Case studies </a><a href=/about/ class=site-header__link data-category=\"Site-Wide Custom Events\" data-label=\"Tab: About\">About </a><button class=\"color-core-text icon-button md:hidden-yes tooltip\" data-drawer-close-button><svg height=24 viewBox=\"0 0 24 24\" width=24 xmlns=http://www.w3.org/2000/svg aria-label=close role=img class=icon><path d=\"M0 0h24v24H0z\" fill=none /><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/></svg> <span class=tooltip__content>Close</span></button></nav></web-navigation-drawer><div class=\"cluster site-header__actions\"><div class=site-header__search><web-search i18n='{\"search\":{\"en\":\"Search\"},\"open_search\":{\"en\":\"Open search\"},\"all_articles\":{\"en\":\"All articles\"},\"close_search\":{\"en\":\"Close search\"}}' results-id=search-main-results></web-search><web-search-results id=search-main-results></web-search-results></div></div></web-header><main id=main><img alt=\"Silhouette photo of a mountain during nighttime, photo by Nathan Anderson on Unsplash.\" height=480 src=\"https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format\" width=1600 sizes=100vw srcset=\"https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&w=200 200w, https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&w=228 228w, https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&w=260 260w, https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&w=296 296w, https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&w=338 338w, https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&w=385 385w, https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&w=439 439w, https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&w=500 500w, https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&w=571 571w, https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&w=650 650w, https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&w=741 741w, https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&w=845 845w, https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&w=964 964w, https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&w=1600 1600w\" class=hero-image importance=high><div class=\"post wrapper\" data-flush><div class=\"flex-align-start flex-dir-rev flex-wrap-no region sidebar\"><nav aria-label=\"On this page\" class=\"toc course__toc hidden-yes over-scroll xl:hidden-no\" data-type=side><div class=\"course-toc__heading font-google-sans weight-medium\">On this page</div><web-scroll-spy><div class=\"flow-recursive toc__wrapper\"><ul class=toc__list><li class=toc__listitem><a href=#introduction class=toc__anchor>Introduction</a><ul class=toc__list><li class=toc__listitem><a href=#dark-mode-before-dark-mode class=toc__anchor>Dark mode before Dark Mode</a></li><li class=toc__listitem><a href=#why-dark-mode class=toc__anchor>Why dark mode</a></li></ul></li><li class=toc__listitem><a href=#activating-dark-mode-in-the-operating-system class=toc__anchor>Activating dark mode in the operating system</a></li><li class=toc__listitem><a href=#the-prefers-color-scheme-media-query class=toc__anchor>The prefers-color-scheme media query</a></li><li class=toc__listitem><a href=#supporting-dark-mode class=toc__anchor>Supporting dark mode</a><ul class=toc__list><li class=toc__listitem><a href=#finding-out-if-dark-mode-is-supported-by-the-browser class=toc__anchor>Finding out if dark mode is supported by the browser</a></li><li class=toc__listitem><a href=\"#learning-about-a-user's-preferences-at-request-time\" class=toc__anchor>Learning about a user's preferences at request time</a></li><li class=toc__listitem><a href=#dark-mode-in-practice class=toc__anchor>Dark mode in practice</a></li><li class=toc__listitem><a href=#loading-strategy class=toc__anchor>Loading strategy</a></li><li class=toc__listitem><a href=#stylesheet-architecture class=toc__anchor>Stylesheet architecture</a></li><li class=toc__listitem><a href=#full-example class=toc__anchor>Full example</a></li><li class=toc__listitem><a href=#loading-impact class=toc__anchor>Loading impact</a></li><li class=toc__listitem><a href=#reacting-on-dark-mode-changes class=toc__anchor>Reacting on dark mode changes</a></li></ul></li><li class=toc__listitem><a href=#debugging-and-testing-dark-mode class=toc__anchor>Debugging and testing dark mode</a><ul class=toc__list><li class=toc__listitem><a href=#emulating-prefers-color-scheme-in-devtools class=toc__anchor>Emulating prefers-color-scheme in DevTools</a></li><li class=toc__listitem><a href=#screenshotting-prefers-color-scheme-with-puppeteer class=toc__anchor>Screenshotting prefers-color-scheme with Puppeteer</a></li></ul></li><li class=toc__listitem><a href=#dark-mode-best-practices class=toc__anchor>Dark mode best practices</a><ul class=toc__list><li class=toc__listitem><a href=#avoid-pure-white class=toc__anchor>Avoid pure white</a></li><li class=toc__listitem><a href=#re-colorize-and-darken-photographic-images class=toc__anchor>Re-colorize and darken photographic images</a></li><li class=toc__listitem><a href=#invert-vector-graphics-and-icons class=toc__anchor>Invert vector graphics and icons</a></li><li class=toc__listitem><a href=#use-currentcolor-for-inline-svgs class=toc__anchor>Use currentColor for inline SVGs</a></li><li class=toc__listitem><a href=#smooth-transitions-between-modes class=toc__anchor>Smooth transitions between modes</a></li><li class=toc__listitem><a href=#art-direction-with-dark-mode class=toc__anchor>Art direction with dark mode</a></li><li class=toc__listitem><a href=#dark-mode-but-add-an-opt-out class=toc__anchor>Dark mode, but add an opt-out</a></li></ul></li><li class=toc__listitem><a href=#conclusions class=toc__anchor>Conclusions</a></li><li class=toc__listitem><a href=#related-links class=toc__anchor>Related links</a></li><li class=toc__listitem><a href=#acknowledgements class=toc__anchor>Acknowledgements</a></li></ul></div></web-scroll-spy></nav><article class=\"legacy-rollout prose\"><header class=\"flow gap-bottom-size-3\"><nav aria-label=breadcrumbs class=breadcrumbs><ul class=breadcrumbs__list role=list><li><a href=/ class=gc-analytics-event data-category=web.dev data-label=\"post, home breadcrumb\" data-action=click>Home</a></li><li><a href=/blog class=gc-analytics-event data-category=web.dev data-label=\"post, path breadcrumb\" data-action=click>All articles</a></li></ul></nav><h1 id=prefers-color-scheme:-hello-darkness-my-old-friend>prefers-color-scheme: Hello darkness, my old friend</h1><p class=\"color-mid-text flow-space-base\">Overhyped or necessity? Learn everything about dark mode and how to support it to the benefit of your users!</p><div class=\"color-mid-text text-size-0 flow-space-size-1\"><time>Jun 27, 2019</time> — Updated <time>Aug 2, 2020</time></div><div class=flow><span class=w-post-signpost__title>Available in: <a href=/i18n/es/prefers-color-scheme/ class=w-post-signpost__link lang=es translate=no>Español</a>, <a href=/i18n/ja/prefers-color-scheme/ class=w-post-signpost__link lang=ja translate=no>日本語</a>, <a href=/i18n/ko/prefers-color-scheme/ class=w-post-signpost__link lang=ko translate=no>한국어</a>, <a href=/i18n/ru/prefers-color-scheme/ class=w-post-signpost__link lang=ru translate=no>Русский</a>, <a href=/i18n/en/prefers-color-scheme/ class=w-post-signpost__link lang=en translate=no>English</a></span></div><div class=\"cluster flow-space-size-2\"><div class=author><a href=/authors/thomassteiner/ class=avatar><img alt=\"Thomas Steiner\" height=64 src=\"https://web-dev.imgix.net/image/admin/8PLpVmFef6mj72MVWeiN.jpg?auto=format&fit=crop&h=64&w=64\" width=64 loading=lazy decoding=async sizes=\"(min-width: 64px) 64px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/8PLpVmFef6mj72MVWeiN.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75, https://web-dev.imgix.net/image/admin/8PLpVmFef6mj72MVWeiN.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x, https://web-dev.imgix.net/image/admin/8PLpVmFef6mj72MVWeiN.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x, https://web-dev.imgix.net/image/admin/8PLpVmFef6mj72MVWeiN.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x, https://web-dev.imgix.net/image/admin/8PLpVmFef6mj72MVWeiN.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x\"></a><div class=flow><cite class=author__name><a href=/authors/thomassteiner/ >Thomas Steiner</a></cite><div class=\"cluster author__links\"><a href=https://twitter.com/tomayac>Twitter</a> <a href=https://github.com/tomayac>GitHub</a> <a href=https://glitch.com/@tomayac>Glitch</a> <a href=https://blog.tomayac.com/ >Homepage</a></div></div></div></div></header><div class=\"xl:hidden-yes flow-space-size-1\"><details aria-label=\"On this page\" data-type=inner role=navigation><summary>On this page</summary><div class=toc><ul class=toc__list><li class=toc__listitem><a href=#introduction class=toc__anchor>Introduction</a><ul class=toc__list><li class=toc__listitem><a href=#dark-mode-before-dark-mode class=toc__anchor>Dark mode before Dark Mode</a></li><li class=toc__listitem><a href=#why-dark-mode class=toc__anchor>Why dark mode</a></li></ul></li><li class=toc__listitem><a href=#activating-dark-mode-in-the-operating-system class=toc__anchor>Activating dark mode in the operating system</a></li><li class=toc__listitem><a href=#the-prefers-color-scheme-media-query class=toc__anchor>The prefers-color-scheme media query</a></li><li class=toc__listitem><a href=#supporting-dark-mode class=toc__anchor>Supporting dark mode</a><ul class=toc__list><li class=toc__listitem><a href=#finding-out-if-dark-mode-is-supported-by-the-browser class=toc__anchor>Finding out if dark mode is supported by the browser</a></li><li class=toc__listitem><a href=\"#learning-about-a-user's-preferences-at-request-time\" class=toc__anchor>Learning about a user's preferences at request time</a></li><li class=toc__listitem><a href=#dark-mode-in-practice class=toc__anchor>Dark mode in practice</a></li><li class=toc__listitem><a href=#loading-strategy class=toc__anchor>Loading strategy</a></li><li class=toc__listitem><a href=#stylesheet-architecture class=toc__anchor>Stylesheet architecture</a></li><li class=toc__listitem><a href=#full-example class=toc__anchor>Full example</a></li><li class=toc__listitem><a href=#loading-impact class=toc__anchor>Loading impact</a></li><li class=toc__listitem><a href=#reacting-on-dark-mode-changes class=toc__anchor>Reacting on dark mode changes</a></li></ul></li><li class=toc__listitem><a href=#debugging-and-testing-dark-mode class=toc__anchor>Debugging and testing dark mode</a><ul class=toc__list><li class=toc__listitem><a href=#emulating-prefers-color-scheme-in-devtools class=toc__anchor>Emulating prefers-color-scheme in DevTools</a></li><li class=toc__listitem><a href=#screenshotting-prefers-color-scheme-with-puppeteer class=toc__anchor>Screenshotting prefers-color-scheme with Puppeteer</a></li></ul></li><li class=toc__listitem><a href=#dark-mode-best-practices class=toc__anchor>Dark mode best practices</a><ul class=toc__list><li class=toc__listitem><a href=#avoid-pure-white class=toc__anchor>Avoid pure white</a></li><li class=toc__listitem><a href=#re-colorize-and-darken-photographic-images class=toc__anchor>Re-colorize and darken photographic images</a></li><li class=toc__listitem><a href=#invert-vector-graphics-and-icons class=toc__anchor>Invert vector graphics and icons</a></li><li class=toc__listitem><a href=#use-currentcolor-for-inline-svgs class=toc__anchor>Use currentColor for inline SVGs</a></li><li class=toc__listitem><a href=#smooth-transitions-between-modes class=toc__anchor>Smooth transitions between modes</a></li><li class=toc__listitem><a href=#art-direction-with-dark-mode class=toc__anchor>Art direction with dark mode</a></li><li class=toc__listitem><a href=#dark-mode-but-add-an-opt-out class=toc__anchor>Dark mode, but add an opt-out</a></li></ul></li><li class=toc__listitem><a href=#conclusions class=toc__anchor>Conclusions</a></li><li class=toc__listitem><a href=#related-links class=toc__anchor>Related links</a></li><li class=toc__listitem><a href=#acknowledgements class=toc__anchor>Acknowledgements</a></li></ul></div></details></div><h2 id=introduction>Introduction <a href=#introduction class=w-headline-link>#</a></h2><aside class=\"flow aside bg-state-info-bg color-state-info-text\"><div class=flow><p>I have done a lot of background research on the history and theory of dark mode, if you are only interested in working with dark mode, feel free to <a href=#activating-dark-mode-in-the-operating-system>skip the introduction</a>.</p></div></aside><h3 id=dark-mode-before-dark-mode>Dark mode before <em>Dark Mode</em> <a href=#dark-mode-before-dark-mode class=w-headline-link>#</a></h3><figure data-float=right><img alt=\"Green screen computer monitor\" height=175 src=\"https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format\" width=233 loading=lazy decoding=async sizes=\"(min-width: 233px) 233px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format&w=200 200w, https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format&w=228 228w, https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format&w=260 260w, https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format&w=296 296w, https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format&w=338 338w, https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format&w=385 385w, https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format&w=439 439w, https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format&w=466 466w\"><figcaption>Green screen (<a href=https://commons.wikimedia.org/wiki/File:Compaq_Portable_and_Wordperfect.JPG>Source</a>)</figcaption></figure><p>We have gone full circle with dark mode. In the dawn of personal computing, dark mode wasn't a matter of choice, but a matter of fact: Monochrome <abbr title=\"Cathode-Ray Tube\">CRT</abbr> computer monitors worked by firing electron beams on a phosphorescent screen and the phosphor used in early CRTs was green. Because text was displayed in green and the rest of the screen was black, these models were often referred to as <a href=https://commons.wikimedia.org/wiki/File:Schneider_CPC6128_with_green_monitor_GT65,_start_screen.jpg rel=noopener>green screens</a>.</p><figure data-float=left><img alt=\"Dark-on-white word processing\" height=175 src=\"https://web-dev.imgix.net/image/admin/l9oDlIO59oyJiXVegxIV.jpg?auto=format\" width=222 loading=lazy decoding=async sizes=\"(min-width: 222px) 222px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/l9oDlIO59oyJiXVegxIV.jpg?auto=format&w=200 200w, https://web-dev.imgix.net/image/admin/l9oDlIO59oyJiXVegxIV.jpg?auto=format&w=228 228w, https://web-dev.imgix.net/image/admin/l9oDlIO59oyJiXVegxIV.jpg?auto=format&w=260 260w, https://web-dev.imgix.net/image/admin/l9oDlIO59oyJiXVegxIV.jpg?auto=format&w=296 296w, https://web-dev.imgix.net/image/admin/l9oDlIO59oyJiXVegxIV.jpg?auto=format&w=338 338w, https://web-dev.imgix.net/image/admin/l9oDlIO59oyJiXVegxIV.jpg?auto=format&w=385 385w, https://web-dev.imgix.net/image/admin/l9oDlIO59oyJiXVegxIV.jpg?auto=format&w=439 439w, https://web-dev.imgix.net/image/admin/l9oDlIO59oyJiXVegxIV.jpg?auto=format&w=444 444w\"><figcaption>Dark-on-white (<a href=\"https://www.youtube.com/watch?v=qKkABzt0Zqg\">Source</a>)</figcaption></figure><p>The subsequently introduced Color CRTs displayed multiple colors through the use of red, green, and blue phosphors. They created white by activating all three phosphors simultaneously. With the advent of more sophisticated <abbr title=\"What You See Is What You Get\">WYSIWYG</abbr> <a href=https://en.wikipedia.org/wiki/Desktop_publishing rel=noopener>desktop publishing</a>, the idea of making the virtual document resemble a physical sheet of paper became popular.</p><figure data-float=right><img alt=\"Dark-on-white webpage in the WorldWideWeb browser\" height=175 src=\"https://web-dev.imgix.net/image/admin/lnuLLcQzIF7r08lt479k.png?auto=format\" width=233 loading=lazy decoding=async sizes=\"(min-width: 233px) 233px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/lnuLLcQzIF7r08lt479k.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/admin/lnuLLcQzIF7r08lt479k.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/admin/lnuLLcQzIF7r08lt479k.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/admin/lnuLLcQzIF7r08lt479k.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/admin/lnuLLcQzIF7r08lt479k.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/admin/lnuLLcQzIF7r08lt479k.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/admin/lnuLLcQzIF7r08lt479k.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/admin/lnuLLcQzIF7r08lt479k.png?auto=format&w=466 466w\"><figcaption>The WorldWideWeb browser (<a href=https://commons.wikimedia.org/wiki/File:WorldWideWeb_FSF_GNU.png>Source</a>)</figcaption></figure><p>This is where <em>dark-on-white</em> as a design trend started, and this trend was carried over to the <a href=http://info.cern.ch/hypertext/WWW/TheProject.html rel=noopener>early document-based web</a>. The first ever browser, <a href=https://en.wikipedia.org/wiki/WorldWideWeb rel=noopener>WorldWideWeb</a> (remember, <a href=https://en.wikipedia.org/wiki/Cascading_Style_Sheets#History rel=noopener>CSS wasn't even invented</a> yet), <a href=https://commons.wikimedia.org/wiki/File:WorldWideWeb_FSF_GNU.png rel=noopener>displayed webpages</a> this way. Fun fact: the second ever browser, <a href=https://en.wikipedia.org/wiki/Line_Mode_Browser rel=noopener>Line Mode Browser</a>—a terminal-based browser—was green on dark. These days, web pages and web apps are typically designed with dark text on a light background, a baseline assumption that is also hard-coded in user agent stylesheets, including <a href=https://chromium.googlesource.com/chromium/blink/+/master/Source/core/css/html.css rel=noopener>Chrome's</a>.</p><figure data-float=left><img alt=\"Smartphone used while lying in bed\" height=175 src=\"https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format\" width=262 loading=lazy decoding=async sizes=\"(min-width: 262px) 262px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format&w=200 200w, https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format&w=228 228w, https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format&w=260 260w, https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format&w=296 296w, https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format&w=338 338w, https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format&w=385 385w, https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format&w=439 439w, https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format&w=500 500w, https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format&w=524 524w\"><figcaption>Smartphone used in bed (Source: Unsplash)</figcaption></figure><p>The days of CRTs are long over. Content consumption and creation has shifted to mobile devices that use backlit <abbr title=\"Liquid Crystal Display\">LCD</abbr> or energy-saving <abbr title=\"Active-Matrix Organic Light-Emitting Diode\">AMOLED</abbr> screens. Smaller and more transportable computers, tablets, and smartphones led to new usage patterns. Leisure tasks like web browsing, coding for fun, and high-end gaming frequently happen after-hours in dim environments. People even enjoy their devices in their beds at night-time. The more people use their devices in the dark, the more the idea of going back to the roots of <em>light-on-dark</em> becomes popular.</p><h3 id=why-dark-mode>Why dark mode <a href=#why-dark-mode class=w-headline-link>#</a></h3><h4 id=dark-mode-for-aesthetic-reasons>Dark mode for aesthetic reasons <a href=#dark-mode-for-aesthetic-reasons class=w-headline-link>#</a></h4><p>When people get asked <a href=https://medium.com/dev-channel/let-there-be-darkness-maybe-9facd9c3023d rel=noopener>why they like or want dark mode</a>, the most popular response is that <em>\"it's easier on the eyes,\"</em> followed by <em>\"it's elegant and beautiful.\"</em> Apple in their <a href=https://developer.apple.com/documentation/appkit/supporting_dark_mode_in_your_interface rel=noopener>Dark Mode developer documentation</a> explicitly writes: <em>\"The choice of whether to enable a light or dark appearance is an aesthetic one for most users, and might not relate to ambient lighting conditions.\"</em></p><aside class=\"flow aside bg-state-info-bg color-state-info-text\"><div class=flow><p>Read up more on <a href=https://medium.com/dev-channel/let-there-be-darkness-maybe-9facd9c3023d rel=noopener>user research regarding why people want dark mode and how they use it</a>.</p></div></aside><figure data-float=right><img alt='CloseView in Mac OS System 7 with \"White on Black\" mode' height=225 src=\"https://web-dev.imgix.net/image/admin/WZ9I5g1YGG6S1TjygEIq.png?auto=format\" width=193 loading=lazy decoding=async sizes=\"(min-width: 193px) 193px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/WZ9I5g1YGG6S1TjygEIq.png?auto=format&w=193 193w, https://web-dev.imgix.net/image/admin/WZ9I5g1YGG6S1TjygEIq.png?auto=format&w=220 220w, https://web-dev.imgix.net/image/admin/WZ9I5g1YGG6S1TjygEIq.png?auto=format&w=251 251w, https://web-dev.imgix.net/image/admin/WZ9I5g1YGG6S1TjygEIq.png?auto=format&w=286 286w, https://web-dev.imgix.net/image/admin/WZ9I5g1YGG6S1TjygEIq.png?auto=format&w=326 326w, https://web-dev.imgix.net/image/admin/WZ9I5g1YGG6S1TjygEIq.png?auto=format&w=372 372w, https://web-dev.imgix.net/image/admin/WZ9I5g1YGG6S1TjygEIq.png?auto=format&w=386 386w\"><figcaption>System 7 CloseView (<a href=https://archive.org/details/mac_Macintosh_System_7_at_your_Fingertips_1992>Source</a>)</figcaption></figure><h4 id=dark-mode-as-an-accessibility-tool>Dark mode as an accessibility tool <a href=#dark-mode-as-an-accessibility-tool class=w-headline-link>#</a></h4><p>There are also people who actually <em>need</em> dark mode and use it as another accessibility tool, for example, users with low vision. The earliest occurrence of such an accessibility tool I could find is <a href=https://en.wikipedia.org/wiki/System_7 rel=noopener>System 7</a>'s <em>CloseView</em> feature, which had a toggle for <em>Black on White</em> and <em>White on Black</em>. While System 7 supported color, the default user interface was still black-and-white.</p><p>These inversion-based implementations demonstrated their weaknesses once color was introduced. User research by Szpiro <em>et al.</em> on <a href=\"https://dl.acm.org/citation.cfm?id=2982168\" rel=noopener>how people with low vision access computing devices</a> showed that all interviewed users disliked inverted images, but that many preferred light text on a dark background. Apple accommodates for this user preference with a feature called <a href=https://www.apple.com//accessibility/iphone/vision/ rel=noopener>Smart Invert</a>, which reverses the colors on the display, except for images, media, and some apps that use dark color styles.</p><p>A special form of low vision is Computer Vision Syndrome, also known as Digital Eye Strain, which is <a href=https://onlinelibrary.wiley.com/doi/full/10.1111/j.1475-1313.2011.00834.x rel=noopener>defined</a> as <em>\"the combination of eye and vision problems associated with the use of computers (including desktop, laptop, and tablets) and other electronic displays (e.g. smartphones and electronic reading devices).\"</em> It has been <a href=https://bmjopen.bmj.com/content/5/1/e006748 rel=noopener>proposed</a> that the use of electronic devices by adolescents, particularly at night time, leads to an increased risk of shorter sleep duration, longer sleep-onset latency, and increased sleep deficiency. Additionally, exposure to blue light has been widely <a href=https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4254760/ rel=noopener>reported</a> to be involved in the regulation of <a href=https://en.wikipedia.org/wiki/Circadian_rhythm rel=noopener>circadian rhythm</a> and the sleep cycle, and irregular light environments may lead to sleep deprivation, possibly affecting mood and task performance, according to <a href=https://www.college-optometrists.org/oip-resource/computer-vision-syndrome--a-k-a--digital-eye-strain.html rel=noopener>research by Rosenfield</a>. To limit these negative effects, reducing blue light by adjusting the display color temperature through features like iOS' <a href=https://support.apple.com/en-us/HT207570 rel=noopener>Night Shift</a> or Android's <a href=https://support.google.com/pixelphone/answer/7169926? rel=noopener>Night Light</a> can help, as well as avoiding bright lights or irregular lights in general through dark themes or dark modes.</p><h4 id=dark-mode-power-savings-on-amoled-screens>Dark mode power savings on AMOLED screens <a href=#dark-mode-power-savings-on-amoled-screens class=w-headline-link>#</a></h4><p>Finally, dark mode is known to save a <em>lot</em> of energy on <abbr title=\"Active-Matrix Organic Light-Emitting Diode\">AMOLED</abbr> screens. Android case studies that focused on popular Google apps like YouTube have shown that the power savings can be up to 60%. The video below has more details on these case studies and the power savings per app.</p><figure data-size=full><div class=youtube><lite-youtube videoid=N_6sPd0Jd3g videostartat=305></lite-youtube></div></figure><h2 id=activating-dark-mode-in-the-operating-system>Activating dark mode in the operating system <a href=#activating-dark-mode-in-the-operating-system class=w-headline-link>#</a></h2><p>Now that I have covered the background of why dark mode is such a big deal for many users, let's review how you can support it.</p><figure data-float=left><img alt=\"Android Q dark mode settings\" height=250 src=\"https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format\" width=218 loading=lazy decoding=async sizes=\"(min-width: 218px) 218px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format&w=436 436w\"><figcaption>Android Q dark theme settings</figcaption></figure><p>Operating systems that support a dark mode or dark theme typically have an option to activate it somewhere in the settings. On macOS X, it's in the system preference's <em>General</em> section and called <em>Appearance</em> (<a href=\"https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/lUAnDhiGiZxigDbCqfn1.png?auto=format\">screenshot</a>), and on Windows 10, it's in the <em>Colors</em> section and called <em>Choose your color</em> (<a href=\"https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Ahr8nkFttRPCe4RH8IEk.png?auto=format\">screenshot</a>). For Android Q, you can find it under <em>Display</em> as a <em>Dark Theme</em> toggle switch (<a href=\"https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format\">screenshot</a>), and on iOS 13, you can change the <em>Appearance</em> in the <em>Display & Brightness</em> section of the settings (<a href=\"https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/K0QTu4Elw1ETabtoJjZ1.jpg?auto=format\">screenshot</a>).</p><h2 id=the-prefers-color-scheme-media-query>The <code>prefers-color-scheme</code> media query <a href=#the-prefers-color-scheme-media-query class=w-headline-link>#</a></h2><p>One last bit of theory before I get going. <a href=https://developer.mozilla.org/docs/Web/CSS/Media_Queries/Using_media_queries rel=noopener>Media queries</a> allow authors to test and query values or features of the user agent or display device, independent of the document being rendered. They are used in the CSS <code>@media</code> rule to conditionally apply styles to a document, and in various other contexts and languages, such as HTML and JavaScript. <a href=https://drafts.csswg.org/mediaqueries-5/ rel=noopener>Media Queries Level 5</a> introduces so-called user preference media features, that is, a way for sites to detect the user's preferred way to display content.</p><aside class=\"flow aside bg-state-info-bg color-state-info-text\"><div class=flow><p>☝️ An established user preference media feature is <code>prefers-reduced-motion</code> that lets you detect the desire for less motion on a page. I have <a href=https://developers.google.com/web/updates/2019/03/prefers-reduced-motion rel=noopener>written about <code>prefers-reduced-motion</code></a> before.</p></div></aside><p>The <a href=https://drafts.csswg.org/mediaqueries-5/#prefers-color-scheme rel=noopener><code>prefers-color-scheme</code></a> media feature is used to detect if the user has requested the page to use a light or dark color theme. It works with the following values:</p><ul><li><code>light</code>: Indicates that the user has notified the system that they prefer a page that has a light theme (dark text on light background).</li><li><code>dark</code>: Indicates that the user has notified the system that they prefer a page that has a dark theme (light text on dark background).</li></ul><aside class=\"flow aside bg-state-info-bg color-state-info-text\"><div class=flow><p>An earlier version of the spec included a third value, <code>no-preference</code>. It was meant to indicate that the user has made no preference known to the system. Since no browser ever implemented it, the value was <a href=https://github.com/w3c/csswg-drafts/issues/3857#issuecomment-634779976 rel=noopener>removed</a> from the spec.</p></div></aside><h2 id=supporting-dark-mode>Supporting dark mode <a href=#supporting-dark-mode class=w-headline-link>#</a></h2><h3 id=finding-out-if-dark-mode-is-supported-by-the-browser>Finding out if dark mode is supported by the browser <a href=#finding-out-if-dark-mode-is-supported-by-the-browser class=w-headline-link>#</a></h3><p>As dark mode is reported through a media query, you can easily check if the current browser supports dark mode by checking if the media query <code>prefers-color-scheme</code> matches at all. Note how I don't include any value, but purely check if the media query alone matches.</p><web-copy-code><pre class=language-js><code class=language-js><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span><span class=\"token function\">matchMedia</span><span class=\"token punctuation\">(</span><span class=\"token string\">'(prefers-color-scheme)'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>media <span class=\"token operator\">!==</span> <span class=\"token string\">'not all'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'🎉 Dark mode is supported'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre></web-copy-code><p>At the time of writing, <code>prefers-color-scheme</code> is supported on both desktop and mobile (where available) by Chrome and Edge as of version 76, Firefox as of version 67, and Safari as of version 12.1 on macOS and as of version 13 on iOS. For all other browsers, you can check the <a href=\"https://caniuse.com/#feat=prefers-color-scheme\" rel=noopener>Can I use support tables</a>.</p><aside class=\"flow aside bg-state-info-bg color-state-info-text\"><div class=flow><p>There is a custom element <a href=https://github.com/GoogleChromeLabs/dark-mode-toggle rel=noopener><code>&lt;dark-mode-toggle></code></a> available that adds dark mode support to older browsers. I write about it <a href=#the-lessdark-mode-togglegreater-custom-element>further down in this article</a>.</p></div></aside><h3 id=\"learning-about-a-user's-preferences-at-request-time\">Learning about a user's preferences at request time <a href=\"#learning-about-a-user's-preferences-at-request-time\" class=w-headline-link>#</a></h3><p>The <a href=/user-preference-media-features-headers/ ><code>Sec-CH-Prefers-Color-Scheme</code></a> client hint header allows sites to obtain the user's color scheme preferences optionally at request time, allowing servers to inline the right CSS and therefore avoid a flash of incorrect color theme.</p><h3 id=dark-mode-in-practice>Dark mode in practice <a href=#dark-mode-in-practice class=w-headline-link>#</a></h3><p>Let's finally see how supporting dark mode looks like in practice. Just like with the <a href=https://en.wikipedia.org/wiki/Highlander_(film) rel=noopener>Highlander</a>, with dark mode <em>there can be only one</em>: dark or light, but never both! Why do I mention this? Because this fact should have an impact on the loading strategy. <strong>Please don't force users to download CSS in the critical rendering path that is for a mode they don't currently use.</strong> To optimize load speed, I have therefore split my CSS for the example app that shows the following recommendations in practice into three parts in order to <a href=/defer-non-critical-css/ >defer non-critical CSS</a>:</p><ul><li><code>style.css</code> that contains generic rules that are used universally on the site.</li><li><code>dark.css</code> that contains only the rules needed for dark mode.</li><li><code>light.css</code> that contains only the rules needed for light mode.</li></ul><h3 id=loading-strategy>Loading strategy <a href=#loading-strategy class=w-headline-link>#</a></h3><p>The two latter ones, <code>light.css</code> and <code>dark.css</code>, are loaded conditionally with a <code>&lt;link media></code> query. Initially, <a href=\"https://caniuse.com/#feat=prefers-color-scheme\" rel=noopener>not all browsers will support <code>prefers-color-scheme</code></a> (detectable using the <a href=#finding-out-if-dark-mode-is-supported-by-the-browser>pattern above</a>), which I deal with dynamically by loading the default <code>light.css</code> file via a conditionally inserted <code>&lt;link rel=\"stylesheet\"></code> element in a minuscule inline script (light is an arbitrary choice, I could also have made dark the default fallback experience). To avoid a <a href=https://en.wikipedia.org/wiki/Flash_of_unstyled_content rel=noopener>flash of unstyled content</a>, I hide the content of the page until <code>light.css</code> has loaded.</p><web-copy-code><pre class=language-html><code class=language-html><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\"><br>  <span class=\"token comment\">// If `prefers-color-scheme` is not supported, fall back to light mode.</span><br>  <span class=\"token comment\">// In this case, light.css will be downloaded with `highest` priority.</span><br>  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span><span class=\"token function\">matchMedia</span><span class=\"token punctuation\">(</span><span class=\"token string\">'(prefers-color-scheme: dark)'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>media <span class=\"token operator\">===</span> <span class=\"token string\">'not all'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><br>    document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">;</span><br>    document<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">.</span><span class=\"token function\">insertAdjacentHTML</span><span class=\"token punctuation\">(</span><br>      <span class=\"token string\">'beforeend'</span><span class=\"token punctuation\">,</span><br>      <span class=\"token string\">'&lt;link rel=\"stylesheet\" href=\"/light.css\" onload=\"document.documentElement.style.display = \\'\\'\">'</span><span class=\"token punctuation\">,</span><br>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token punctuation\">}</span><br></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span><br><span class=\"token comment\">&lt;!--<br>  Conditionally either load the light or the dark stylesheet. The matching file<br>  will be downloaded with `highest`, the non-matching file with `lowest`<br>  priority. If the browser doesn't support `prefers-color-scheme`, the media<br>  query is unknown and the files are downloaded with `lowest` priority (but<br>  above I already force `highest` priority for my default light experience).<br>--></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/dark.css<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">media</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>(prefers-color-scheme: dark)<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span><br>  <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span><br>  <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/light.css<span class=\"token punctuation\">\"</span></span><br>  <span class=\"token attr-name\">media</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>(prefers-color-scheme: light)<span class=\"token punctuation\">\"</span></span><br><span class=\"token punctuation\">/></span></span><br><span class=\"token comment\">&lt;!-- The main stylesheet --></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/style.css<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></web-copy-code><h3 id=stylesheet-architecture>Stylesheet architecture <a href=#stylesheet-architecture class=w-headline-link>#</a></h3><p>I make maximum use of <a href=https://developer.mozilla.org/docs/Web/CSS/var rel=noopener>CSS variables</a>, this allows my generic <code>style.css</code> to be, well, generic, and all the light or dark mode customization happens in the two other files <code>dark.css</code> and <code>light.css</code>. Below you can see an excerpt of the actual styles, but it should suffice to convey the overall idea. I declare two variables, <code>-⁠-⁠color</code> and <code>-⁠-⁠background-color</code> that essentially create a <em>dark-on-light</em> and a <em>light-on-dark</em> baseline theme.</p><web-copy-code><pre class=language-css><code class=language-css><span class=\"token comment\">/* light.css: 👉 dark-on-light */</span><br><span class=\"token selector\">:root</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token property\">--color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>5<span class=\"token punctuation\">,</span> 5<span class=\"token punctuation\">,</span> 5<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token property\">--background-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>250<span class=\"token punctuation\">,</span> 250<span class=\"token punctuation\">,</span> 250<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre></web-copy-code><web-copy-code><pre class=language-css><code class=language-css><span class=\"token comment\">/* dark.css: 👉 light-on-dark */</span><br><span class=\"token selector\">:root</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token property\">--color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>250<span class=\"token punctuation\">,</span> 250<span class=\"token punctuation\">,</span> 250<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token property\">--background-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>5<span class=\"token punctuation\">,</span> 5<span class=\"token punctuation\">,</span> 5<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre></web-copy-code><p>In my <code>style.css</code>, I then use these variables in the <code>body { … }</code> rule. As they are defined on the <a href=https://developer.mozilla.org/docs/Web/CSS/:root rel=noopener><code>:root</code> CSS pseudo-class</a>—a selector that in HTML represents the <code>&lt;html></code> element and is identical to the selector <code>html</code>, except that its specificity is higher—they cascade down, which serves me for declaring global CSS variables.</p><web-copy-code><pre class=language-css><code class=language-css><span class=\"token comment\">/* style.css */</span><br><span class=\"token selector\">:root</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token property\">color-scheme</span><span class=\"token punctuation\">:</span> light dark<span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span><br><br><span class=\"token selector\">body</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--background-color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre></web-copy-code><p>In the code sample above, you will probably have noticed a property <a href=https://drafts.csswg.org/css-color-adjust-1/#propdef-color-scheme rel=noopener><code>color-scheme</code></a> with the space-separated value <code>light dark</code>.</p><p>This tells the browser which color themes my app supports and allows it to activate special variants of the user agent stylesheet, which is useful to, for example, let the browser render form fields with a dark background and light text, adjust the scroll bars, or to enable a theme-aware highlight color. The exact details of <code>color-scheme</code> are specified in <a href=https://drafts.csswg.org/css-color-adjust-1/ rel=noopener>CSS Color Adjustment Module Level 1</a>.</p><aside class=\"flow aside bg-state-info-bg color-state-info-text\"><div class=flow><p>🌒 Read up more on <a href=/color-scheme/ >what <code>color-scheme</code> actually does</a>.</p></div></aside><p>Everything else is then just a matter of defining CSS variables for things that matter on my site. Semantically organizing styles helps a lot when working with dark mode. For example, rather than <code>-⁠-⁠highlight-yellow</code>, consider calling the variable <code>-⁠-⁠accent-color</code>, as \"yellow\" may actually not be yellow in dark mode or vice versa. Below is an example of some more variables that I use in my example.</p><web-copy-code><pre class=language-css><code class=language-css><span class=\"token comment\">/* dark.css */</span><br><span class=\"token selector\">:root</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token property\">--color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>250<span class=\"token punctuation\">,</span> 250<span class=\"token punctuation\">,</span> 250<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token property\">--background-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>5<span class=\"token punctuation\">,</span> 5<span class=\"token punctuation\">,</span> 5<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token property\">--link-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> 188<span class=\"token punctuation\">,</span> 212<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token property\">--main-headline-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>233<span class=\"token punctuation\">,</span> 30<span class=\"token punctuation\">,</span> 99<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token property\">--accent-background-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> 188<span class=\"token punctuation\">,</span> 212<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token property\">--accent-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>5<span class=\"token punctuation\">,</span> 5<span class=\"token punctuation\">,</span> 5<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre></web-copy-code><web-copy-code><pre class=language-css><code class=language-css><span class=\"token comment\">/* light.css */</span><br><span class=\"token selector\">:root</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token property\">--color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>5<span class=\"token punctuation\">,</span> 5<span class=\"token punctuation\">,</span> 5<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token property\">--background-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>250<span class=\"token punctuation\">,</span> 250<span class=\"token punctuation\">,</span> 250<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token property\">--link-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> 0<span class=\"token punctuation\">,</span> 238<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token property\">--main-headline-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> 0<span class=\"token punctuation\">,</span> 192<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token property\">--accent-background-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> 0<span class=\"token punctuation\">,</span> 238<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token property\">--accent-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>250<span class=\"token punctuation\">,</span> 250<span class=\"token punctuation\">,</span> 250<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre></web-copy-code><h3 id=full-example>Full example <a href=#full-example class=w-headline-link>#</a></h3><p>In the following <a href=https://dark-mode-baseline.glitch.me/ rel=noopener>Glitch</a> embed, you can see the complete example that puts the concepts from above into practice. Try toggling dark mode in your particular <a href=#activating-dark-mode-in-the-operating-system>operating system's settings</a> and see how the page reacts.</p><div style=\"height: 900px; width: 100%;\"><iframe allow=\"geolocation; microphone; camera; midi; vr; encrypted-media\" loading=lazy src=\"https://glitch.com/embed/#!/embed/dark-mode-baseline?path=style.css&previewSize=100&attributionHidden=true\" style=\"height: 100%; width: 100%; border: 0;\" title=\"IFrame content\"></iframe></div><h3 id=loading-impact>Loading impact <a href=#loading-impact class=w-headline-link>#</a></h3><p>When you play with this example, you can see why I load my <code>dark.css</code> and <code>light.css</code> via media queries. Try toggling dark mode and reload the page: the particular currently non-matching stylesheets are still loaded, but with the lowest priority, so that they never compete with resources that are needed by the site right now.</p><aside class=\"flow aside bg-state-info-bg color-state-info-text\"><div class=flow><p>😲 Read up more on <a href=https://blog.tomayac.com/2018/11/08/why-browsers-download-stylesheets-with-non-matching-media-queries-180513 rel=noopener>why browsers download stylesheets with non-matching media queries</a>.</p></div></aside><figure><img alt=\"Network loading diagram showing how in light mode the dark mode CSS gets loaded with lowest priority\" height=417 src=\"https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format\" width=800 loading=lazy decoding=async sizes=\"(min-width: 800px) 800px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&w=1600 1600w\"><figcaption>Site in light mode loads the dark mode CSS with lowest priority.</figcaption></figure><figure><img alt=\"Network loading diagram showing how in dark mode the light mode CSS gets loaded with lowest priority\" height=417 src=\"https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format\" width=800 loading=lazy decoding=async sizes=\"(min-width: 800px) 800px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&w=1600 1600w\"><figcaption>Site in dark mode loads the light mode CSS with lowest priority.</figcaption></figure><figure><img alt=\"Network loading diagram showing how in default light mode the dark mode CSS gets loaded with lowest priority\" height=417 src=\"https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format\" width=800 loading=lazy decoding=async sizes=\"(min-width: 800px) 800px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&w=1600 1600w\"><figcaption>Site in default light mode on a browser that doesn't support <code>prefers-color-scheme</code> loads the dark mode CSS with lowest priority.</figcaption></figure><h3 id=reacting-on-dark-mode-changes>Reacting on dark mode changes <a href=#reacting-on-dark-mode-changes class=w-headline-link>#</a></h3><p>Like any other media query change, dark mode changes can be subscribed to via JavaScript. You can use this to, for example, dynamically change the <a href=https://developers.google.com/web/fundamentals/design-and-ux/browser-customization/#provide_great_icons_tiles rel=noopener>favicon</a> of a page or change the <a href=https://developers.google.com/web/fundamentals/design-and-ux/browser-customization/#meta_theme_color_for_chrome_and_opera rel=noopener><code>&lt;meta name=\"theme-color\"></code></a> that determines the color of the URL bar in Chrome. The <a href=#full-example>full example</a> above shows this in action, in order to see the theme color and favicon changes, open the <a href=https://dark-mode-baseline.glitch.me/ rel=noopener>demo in a separate tab</a>.</p><web-copy-code><pre class=language-js><code class=language-js><span class=\"token keyword\">const</span> darkModeMediaQuery <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">matchMedia</span><span class=\"token punctuation\">(</span><span class=\"token string\">'(prefers-color-scheme: dark)'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>darkModeMediaQuery<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><br>  <span class=\"token keyword\">const</span> darkModeOn <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>matches<span class=\"token punctuation\">;</span><br>  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string template-punctuation\">`</span><span class=\"token string\">Dark mode is </span><span class=\"token interpolation\"><span class=\"token punctuation interpolation-punctuation\">${</span>darkModeOn <span class=\"token operator\">?</span> <span class=\"token string\">'🌒 on'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'☀️ off'</span><span class=\"token punctuation interpolation-punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token string template-punctuation\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></web-copy-code><p>As of Chromium 93 and Safari 15, you can adjust the color based on a media query with the <code>media</code> attribute of the <code>meta</code> theme color element. The first one that matches will be picked. For example, you could have one color for light mode and another one for dark mode. At the time of writing, you can't define those in your manifest. See <a href=https://github.com/w3c/manifest/issues/975 rel=noopener>w3c/manifest#975 GitHub issue</a>.</p><web-copy-code><pre class=language-html><code class=language-html><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span><br>  <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>theme-color<span class=\"token punctuation\">\"</span></span><br>  <span class=\"token attr-name\">media</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>(prefers-color-scheme: light)<span class=\"token punctuation\">\"</span></span><br>  <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>white<span class=\"token punctuation\">\"</span></span><br><span class=\"token punctuation\">/></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>theme-color<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">media</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>(prefers-color-scheme: dark)<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>black<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></web-copy-code><h2 id=debugging-and-testing-dark-mode>Debugging and testing dark mode <a href=#debugging-and-testing-dark-mode class=w-headline-link>#</a></h2><h3 id=emulating-prefers-color-scheme-in-devtools>Emulating <code>prefers-color-scheme</code> in DevTools <a href=#emulating-prefers-color-scheme-in-devtools class=w-headline-link>#</a></h3><p>Switching the entire operating system's color scheme can get annoying real quick, so Chrome DevTools now allows you to emulate the user's preferred color scheme in a way that only affects the currently visible tab. Open the <a href=https://developers.google.com/web/tools/chrome-devtools/command-menu rel=noopener>Command Menu</a>, start typing <code>Rendering</code>, run the <code>Show Rendering</code> command, and then change the <strong>Emulate CSS media feature prefers-color-scheme</strong> option.</p><figure><img alt=\"A screenshot of the 'Emulate CSS media feature prefers-color-scheme' option that is located in the Rendering tab of Chrome DevTools\" height=552 src=\"https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format\" width=800 loading=lazy decoding=async sizes=\"(min-width: 800px) 800px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&w=1600 1600w\"></figure><h3 id=screenshotting-prefers-color-scheme-with-puppeteer>Screenshotting <code>prefers-color-scheme</code> with Puppeteer <a href=#screenshotting-prefers-color-scheme-with-puppeteer class=w-headline-link>#</a></h3><p><a href=https://github.com/GoogleChrome/puppeteer/ rel=noopener>Puppeteer</a> is a Node.js library that provides a high-level API to control Chrome or Chromium over the <a href=https://chromedevtools.github.io/devtools-protocol/ rel=noopener>DevTools Protocol</a>. With <a href=https://www.npmjs.com/package/dark-mode-screenshot rel=noopener><code>dark-mode-screenshot</code></a>, we provide a Puppeteer script that lets you create screenshots of your pages in both dark and light mode. You can run this script as a one-off, or alternatively make it part of your Continuous Integration (CI) test suite.</p><web-copy-code><pre class=language-bash><code class=language-bash>npx dark-mode-screenshot --url https://googlechromelabs.github.io/dark-mode-toggle/demo/ --output screenshot --fullPage --pause <span class=\"token number\">750</span></code></pre></web-copy-code><h2 id=dark-mode-best-practices>Dark mode best practices <a href=#dark-mode-best-practices class=w-headline-link>#</a></h2><h3 id=avoid-pure-white>Avoid pure white <a href=#avoid-pure-white class=w-headline-link>#</a></h3><p>A small detail you may have noticed is that I don't use pure white. Instead, to prevent glowing and bleeding against the surrounding dark content, I choose a slightly darker white. Something like <code>rgb(250, 250, 250)</code> works well.</p><h3 id=re-colorize-and-darken-photographic-images>Re-colorize and darken photographic images <a href=#re-colorize-and-darken-photographic-images class=w-headline-link>#</a></h3><p>If you compare the two screenshots below, you will notice that not only the core theme has changed from <em>dark-on-light</em> to <em>light-on-dark</em>, but that also the hero image looks slightly different. My <a href=https://medium.com/dev-channel/re-colorization-for-dark-mode-19e2e17b584b rel=noopener>user research</a> has shown that the majority of the surveyed people prefer slightly less vibrant and brilliant images when dark mode is active. I refer to this as <em>re-colorization</em>.</p><div class=switcher><figure><img alt=\"Hero image slightly darkened in dark mode.\" height=618 src=\"https://web-dev.imgix.net/image/admin/qzzYCKNSwoJr9BBEQlR7.png?auto=format\" width=800 loading=lazy decoding=async sizes=\"(min-width: 800px) 800px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/qzzYCKNSwoJr9BBEQlR7.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/admin/qzzYCKNSwoJr9BBEQlR7.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/admin/qzzYCKNSwoJr9BBEQlR7.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/admin/qzzYCKNSwoJr9BBEQlR7.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/admin/qzzYCKNSwoJr9BBEQlR7.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/admin/qzzYCKNSwoJr9BBEQlR7.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/admin/qzzYCKNSwoJr9BBEQlR7.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/admin/qzzYCKNSwoJr9BBEQlR7.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/admin/qzzYCKNSwoJr9BBEQlR7.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/admin/qzzYCKNSwoJr9BBEQlR7.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/admin/qzzYCKNSwoJr9BBEQlR7.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/admin/qzzYCKNSwoJr9BBEQlR7.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/admin/qzzYCKNSwoJr9BBEQlR7.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/admin/qzzYCKNSwoJr9BBEQlR7.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/admin/qzzYCKNSwoJr9BBEQlR7.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/admin/qzzYCKNSwoJr9BBEQlR7.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/admin/qzzYCKNSwoJr9BBEQlR7.png?auto=format&w=1600 1600w\"><figcaption>Hero image slightly darkened in dark mode.</figcaption></figure><figure><img alt=\"Regular hero image in light mode.\" height=618 src=\"https://web-dev.imgix.net/image/admin/41RbLRZ5wzkoVnIRJkNl.png?auto=format\" width=800 loading=lazy decoding=async sizes=\"(min-width: 800px) 800px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/41RbLRZ5wzkoVnIRJkNl.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/admin/41RbLRZ5wzkoVnIRJkNl.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/admin/41RbLRZ5wzkoVnIRJkNl.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/admin/41RbLRZ5wzkoVnIRJkNl.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/admin/41RbLRZ5wzkoVnIRJkNl.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/admin/41RbLRZ5wzkoVnIRJkNl.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/admin/41RbLRZ5wzkoVnIRJkNl.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/admin/41RbLRZ5wzkoVnIRJkNl.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/admin/41RbLRZ5wzkoVnIRJkNl.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/admin/41RbLRZ5wzkoVnIRJkNl.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/admin/41RbLRZ5wzkoVnIRJkNl.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/admin/41RbLRZ5wzkoVnIRJkNl.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/admin/41RbLRZ5wzkoVnIRJkNl.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/admin/41RbLRZ5wzkoVnIRJkNl.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/admin/41RbLRZ5wzkoVnIRJkNl.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/admin/41RbLRZ5wzkoVnIRJkNl.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/admin/41RbLRZ5wzkoVnIRJkNl.png?auto=format&w=1600 1600w\"><figcaption>Regular hero image in light mode.</figcaption></figure></div><p>Re-colorization can be achieved through a CSS filter on my images. I use a CSS selector that matches all images that don't have <code>.svg</code> in their URL, the idea being that I can give vector graphics (icons) a different re-colorization treatment than my images (photos), more about this in the <a href=#vector-graphics-and-icons>next paragraph</a>. Note how I again use a <a href=https://developer.mozilla.org/docs/Web/CSS/var rel=noopener>CSS variable</a>, so I can later on flexibly change my filter.</p><aside class=\"flow aside bg-state-info-bg color-state-info-text\"><div class=flow><p>🎨 Read up more on <a href=https://medium.com/dev-channel/re-colorization-for-dark-mode-19e2e17b584b rel=noopener>user research regarding re-colorization preferences with dark mode</a>.</p></div></aside><p>As re-colorization is only needed in dark mode, that is, when <code>dark.css</code> is active, there are no corresponding rules in <code>light.css</code>.</p><web-copy-code><pre class=language-css><code class=language-css><span class=\"token comment\">/* dark.css */</span><br><span class=\"token property\">--image-filter</span><span class=\"token punctuation\">:</span> <span class=\"token function\">grayscale</span><span class=\"token punctuation\">(</span>50%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><br><span class=\"token selector\">img:not([src*='.svg'])</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token property\">filter</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--image-filter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre></web-copy-code><h4 id=customizing-dark-mode-re-colorization-intensities-with-javascript>Customizing dark mode re-colorization intensities with JavaScript <a href=#customizing-dark-mode-re-colorization-intensities-with-javascript class=w-headline-link>#</a></h4><p>Not everyone is the same and people have different dark mode needs. By sticking to the re-colorization method described above, I can easily make the grayscale intensity a user preference that I can <a href=https://developer.mozilla.org/docs/Web/CSS/Using_CSS_custom_properties#Values_in_JavaScript rel=noopener>change via JavaScript</a>, and by setting a value of <code>0%</code>, I can also disable re-colorization completely. Note that <a href=https://developer.mozilla.org/docs/Web/API/Document/documentElement rel=noopener><code>document.documentElement</code></a> provides a reference to the root element of the document, that is, the same element I can reference with the <a href=https://developer.mozilla.org/docs/Web/CSS/:root rel=noopener><code>:root</code> CSS pseudo-class</a>.</p><web-copy-code><pre class=language-js><code class=language-js><span class=\"token keyword\">const</span> filter <span class=\"token operator\">=</span> <span class=\"token string\">'grayscale(70%)'</span><span class=\"token punctuation\">;</span><br>document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span><span class=\"token function\">setProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">'--image-filter'</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></web-copy-code><h3 id=invert-vector-graphics-and-icons>Invert vector graphics and icons <a href=#invert-vector-graphics-and-icons class=w-headline-link>#</a></h3><p>For vector graphics—that in my case are used as icons that I reference via <code>&lt;img></code> elements—I use a different re-colorization method. While <a href=\"https://dl.acm.org/citation.cfm?id=2982168\" rel=noopener>research</a> has shown that people don't like inversion for photos, it does work very well for most icons. Again I use CSS variables to determine the inversion amount in the regular and in the <a href=https://developer.mozilla.org/docs/Web/CSS/:hover rel=noopener><code>:hover</code></a> state.</p><div class=switcher><figure><img alt=\"Icons are inverted in dark mode.\" height=48 src=\"https://web-dev.imgix.net/image/admin/JGYFpAPi4233HrEKTQZp.png?auto=format\" width=744 loading=lazy decoding=async sizes=\"(min-width: 744px) 744px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/JGYFpAPi4233HrEKTQZp.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/admin/JGYFpAPi4233HrEKTQZp.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/admin/JGYFpAPi4233HrEKTQZp.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/admin/JGYFpAPi4233HrEKTQZp.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/admin/JGYFpAPi4233HrEKTQZp.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/admin/JGYFpAPi4233HrEKTQZp.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/admin/JGYFpAPi4233HrEKTQZp.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/admin/JGYFpAPi4233HrEKTQZp.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/admin/JGYFpAPi4233HrEKTQZp.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/admin/JGYFpAPi4233HrEKTQZp.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/admin/JGYFpAPi4233HrEKTQZp.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/admin/JGYFpAPi4233HrEKTQZp.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/admin/JGYFpAPi4233HrEKTQZp.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/admin/JGYFpAPi4233HrEKTQZp.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/admin/JGYFpAPi4233HrEKTQZp.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/admin/JGYFpAPi4233HrEKTQZp.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/admin/JGYFpAPi4233HrEKTQZp.png?auto=format&w=1488 1488w\"><figcaption>Icons are inverted in dark mode.</figcaption></figure><figure><img alt=\"Regular icons in light mode.\" height=48 src=\"https://web-dev.imgix.net/image/admin/W8AWbuqWthI6CfFsYunk.png?auto=format\" width=744 loading=lazy decoding=async sizes=\"(min-width: 744px) 744px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/W8AWbuqWthI6CfFsYunk.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/admin/W8AWbuqWthI6CfFsYunk.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/admin/W8AWbuqWthI6CfFsYunk.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/admin/W8AWbuqWthI6CfFsYunk.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/admin/W8AWbuqWthI6CfFsYunk.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/admin/W8AWbuqWthI6CfFsYunk.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/admin/W8AWbuqWthI6CfFsYunk.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/admin/W8AWbuqWthI6CfFsYunk.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/admin/W8AWbuqWthI6CfFsYunk.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/admin/W8AWbuqWthI6CfFsYunk.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/admin/W8AWbuqWthI6CfFsYunk.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/admin/W8AWbuqWthI6CfFsYunk.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/admin/W8AWbuqWthI6CfFsYunk.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/admin/W8AWbuqWthI6CfFsYunk.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/admin/W8AWbuqWthI6CfFsYunk.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/admin/W8AWbuqWthI6CfFsYunk.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/admin/W8AWbuqWthI6CfFsYunk.png?auto=format&w=1488 1488w\"><figcaption>Regular icons in light mode.</figcaption></figure></div><p>Note how again I only invert icons in <code>dark.css</code> but not in <code>light.css</code>, and how <code>:hover</code> gets a different inversion intensity in the two cases to make the icon appear slightly darker or slightly brighter, dependent on the mode the user has selected.</p><web-copy-code><pre class=language-css><code class=language-css><span class=\"token comment\">/* dark.css */</span><br><span class=\"token property\">--icon-filter</span><span class=\"token punctuation\">:</span> <span class=\"token function\">invert</span><span class=\"token punctuation\">(</span>100%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token property\">--icon-filter_hover</span><span class=\"token punctuation\">:</span> <span class=\"token function\">invert</span><span class=\"token punctuation\">(</span>40%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><br><span class=\"token selector\">img[src*='.svg']</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token property\">filter</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--icon-filter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre></web-copy-code><web-copy-code><pre class=language-css><code class=language-css><span class=\"token comment\">/* light.css */</span><br><span class=\"token property\">--icon-filter_hover</span><span class=\"token punctuation\">:</span> <span class=\"token function\">invert</span><span class=\"token punctuation\">(</span>60%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></web-copy-code><web-copy-code><pre class=language-css><code class=language-css><span class=\"token comment\">/* style.css */</span><br><span class=\"token selector\">img[src*='.svg']:hover</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token property\">filter</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--icon-filter_hover<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre></web-copy-code><h3 id=use-currentcolor-for-inline-svgs>Use <code>currentColor</code> for inline SVGs <a href=#use-currentcolor-for-inline-svgs class=w-headline-link>#</a></h3><p>For <em>inline</em> SVG images, instead of <a href=#invert-vector-graphics-and-icons>using inversion filters</a>, you can leverage the <a href=https://developer.mozilla.org/docs/Web/CSS/color_value#currentColor_keyword rel=noopener><code>currentColor</code></a> CSS keyword that represents the value of an element's <code>color</code> property. This lets you use the <code>color</code> value on properties that do not receive it by default. Conveniently, if <code>currentColor</code> is used as the value of the SVG <a href=https://developer.mozilla.org/docs/Web/SVG/Tutorial/Fills_and_Strokes#Fill_and_Stroke_Attributes rel=noopener><code>fill</code> or <code>stroke</code> attributes</a>, it instead takes its value from the inherited value of the color property. Even better: this also works for <a href=https://developer.mozilla.org/docs/Web/SVG/Element/use rel=noopener><code>&lt;svg>&lt;use href=\"…\">&lt;/svg></code></a>, so you can have separate resources and <code>currentColor</code> will still be applied in context. Please note that this only works for <em>inline</em> or <code>&lt;use href=\"…\"></code> SVGs, but not SVGs that are referenced as the <code>src</code> of an image or somehow via CSS. You can see this applied in the demo below.</p><web-copy-code><pre class=language-html><code class=language-html><span class=highlight-line><span class=\"token comment\">&lt;!-- Some inline SVG --></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>svg</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2000/svg<span class=\"token punctuation\">\"</span></span><br><mark class=\"highlight-line highlight-line-active\">    <span class=\"token attr-name\">stroke</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>currentColor<span class=\"token punctuation\">\"</span></span></mark><br><span class=\"token punctuation\">></span></span><br><span class=highlight-line>  […]</span><br><span class=highlight-line><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>svg</span><span class=\"token punctuation\">></span></span></span></code></pre></web-copy-code><div style=\"height: 950px; width: 100%;\"><iframe allow=\"geolocation; microphone; camera; midi; vr; encrypted-media\" loading=lazy src=\"https://glitch.com/embed/#!/embed/dark-mode-currentcolor?path=light.css&previewSize=100\" style=\"height: 100%; width: 100%; border: 0;\" title=\"dark-mode-currentcolor on Glitch\"></iframe></div><h3 id=smooth-transitions-between-modes>Smooth transitions between modes <a href=#smooth-transitions-between-modes class=w-headline-link>#</a></h3><p>Switching from dark mode to light mode or vice versa can be smoothed thanks to the fact that both <code>color</code> and <code>background-color</code> are <a href=https://www.quackit.com/css/css3/animations/animatable_properties/ rel=noopener>animatable CSS properties</a>. Creating the animation is as easy as declaring two <code>transition</code>s for the two properties. The example below illustrates the overall idea, you can experience it live in the <a href=https://dark-mode-baseline.glitch.me/ rel=noopener>demo</a>.</p><web-copy-code><pre class=language-css><code class=language-css><span class=\"token selector\">body</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token property\">--duration</span><span class=\"token punctuation\">:</span> 0.5s<span class=\"token punctuation\">;</span><br>  <span class=\"token property\">--timing</span><span class=\"token punctuation\">:</span> ease<span class=\"token punctuation\">;</span><br><br>  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br>  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--background-color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><br>  <span class=\"token property\">transition</span><span class=\"token punctuation\">:</span> color <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--duration<span class=\"token punctuation\">)</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--timing<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> background-color <span class=\"token function\">var</span><span class=\"token punctuation\">(</span><br>        --duration<br>      <span class=\"token punctuation\">)</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--timing<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><br><span class=\"token punctuation\">}</span></code></pre></web-copy-code><h3 id=art-direction-with-dark-mode>Art direction with dark mode <a href=#art-direction-with-dark-mode class=w-headline-link>#</a></h3><p>While for loading performance reasons in general I recommend to exclusively work with <code>prefers-color-scheme</code> in the <code>media</code> attribute of <code>&lt;link></code> elements (rather than inline in stylesheets), there are situations where you actually may want to work with <code>prefers-color-scheme</code> directly inline in your HTML code. Art direction is such a situation. On the web, art direction deals with the overall visual appearance of a page and how it communicates visually, stimulates moods, contrasts features, and psychologically appeals to a target audience.</p><p>With dark mode, it's up to the judgment of the designer to decide what is the best image at a particular mode and whether <a href=#photographic-images>re-colorization of images</a> is maybe <em>not</em> good enough. If used with the <code>&lt;picture></code> element, the <code>&lt;source></code> of the image to be shown can be made dependent on the <code>media</code> attribute. In the example below, I show the Western hemisphere for dark mode, and the Eastern hemisphere for light mode or when no preference is given, defaulting to the Eastern hemisphere in all other cases. This is of course purely for illustrative purposes. Toggle dark mode on your device to see the difference.</p><web-copy-code><pre class=language-html><code class=language-html><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>picture</span><span class=\"token punctuation\">></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span> <span class=\"token attr-name\">srcset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>western.webp<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">media</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>(prefers-color-scheme: dark)<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span> <span class=\"token attr-name\">srcset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>eastern.webp<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">media</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>(prefers-color-scheme: light)<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><br>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>eastern.webp<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><br><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>picture</span><span class=\"token punctuation\">></span></span></code></pre></web-copy-code><div style=\"height: 600px; width: 100%;\"><iframe allow=\"geolocation; microphone; camera; midi; vr; encrypted-media\" loading=lazy src=\"https://glitch.com/embed/#!/embed/dark-mode-picture?path=index.html&previewSize=100\" style=\"height: 100%; width: 100%; border: 0;\" title=\"dark-mode-picture on Glitch\"></iframe></div><h3 id=dark-mode-but-add-an-opt-out>Dark mode, but add an opt-out <a href=#dark-mode-but-add-an-opt-out class=w-headline-link>#</a></h3><p>As mentioned in the <a href=#why-dark-mode>why dark mode</a> section above, dark mode is an aesthetic choice for most users. In consequence, some users may actually like to have their operating system UI in dark, but still prefer to see their webpages the way they are used to seeing them. A great pattern is to initially adhere to the signal the browser sends through <code>prefers-color-scheme</code>, but to then optionally allow users to override their system-level setting.</p><h4 id=the-lessdark-mode-togglegreater-custom-element>The <code>&lt;dark-mode-toggle></code> custom element <a href=#the-lessdark-mode-togglegreater-custom-element class=w-headline-link>#</a></h4><p>You can of course create the code for this yourself, but you can also just use a ready-made custom element (web component) that I have created right for this purpose. It's called <a href=https://github.com/GoogleChromeLabs/dark-mode-toggle rel=noopener><code>&lt;dark-mode-toggle></code></a> and it adds a toggle (dark mode: on/off) or a theme switcher (theme: light/dark) to your page that you can fully customize. The demo below shows the element in action (oh, and I have also 🤫 silently snuck it in all of the <a href=https://dark-mode-baseline.glitch.me/ rel=noopener>other</a> <a href=https://dark-mode-currentcolor.glitch.me/ rel=noopener>examples</a> <a href=https://dark-mode-picture.glitch.me/ rel=noopener>above</a>).</p><web-copy-code><pre class=language-html><code class=language-html><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dark-mode-toggle</span><br>  <span class=\"token attr-name\">legend</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Theme Switcher<span class=\"token punctuation\">\"</span></span><br>  <span class=\"token attr-name\">appearance</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>switch<span class=\"token punctuation\">\"</span></span><br>  <span class=\"token attr-name\">dark</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Dark<span class=\"token punctuation\">\"</span></span><br>  <span class=\"token attr-name\">light</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Light<span class=\"token punctuation\">\"</span></span><br>  <span class=\"token attr-name\">remember</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Remember this<span class=\"token punctuation\">\"</span></span><br><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dark-mode-toggle</span><span class=\"token punctuation\">></span></span></code></pre></web-copy-code><div class=switcher><figure><img alt=\"<dark-mode-toggle> in light mode.\" height=76 src=\"https://web-dev.imgix.net/image/admin/Xy3uus69HnrkRPO4EuRu.png?auto=format\" width=140 loading=lazy decoding=async sizes=\"(min-width: 140px) 140px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/Xy3uus69HnrkRPO4EuRu.png?auto=format&w=140 140w, https://web-dev.imgix.net/image/admin/Xy3uus69HnrkRPO4EuRu.png?auto=format&w=160 160w, https://web-dev.imgix.net/image/admin/Xy3uus69HnrkRPO4EuRu.png?auto=format&w=182 182w, https://web-dev.imgix.net/image/admin/Xy3uus69HnrkRPO4EuRu.png?auto=format&w=207 207w, https://web-dev.imgix.net/image/admin/Xy3uus69HnrkRPO4EuRu.png?auto=format&w=236 236w, https://web-dev.imgix.net/image/admin/Xy3uus69HnrkRPO4EuRu.png?auto=format&w=270 270w, https://web-dev.imgix.net/image/admin/Xy3uus69HnrkRPO4EuRu.png?auto=format&w=280 280w\"><figcaption><code>&lt;dark-mode-toggle></code> in light mode.</figcaption></figure><figure><img alt=\"<dark-mode-toggle> in light mode.\" height=76 src=\"https://web-dev.imgix.net/image/admin/glRVRJpQ9hMip6MbqY9N.png?auto=format\" width=140 loading=lazy decoding=async sizes=\"(min-width: 140px) 140px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/glRVRJpQ9hMip6MbqY9N.png?auto=format&w=140 140w, https://web-dev.imgix.net/image/admin/glRVRJpQ9hMip6MbqY9N.png?auto=format&w=160 160w, https://web-dev.imgix.net/image/admin/glRVRJpQ9hMip6MbqY9N.png?auto=format&w=182 182w, https://web-dev.imgix.net/image/admin/glRVRJpQ9hMip6MbqY9N.png?auto=format&w=207 207w, https://web-dev.imgix.net/image/admin/glRVRJpQ9hMip6MbqY9N.png?auto=format&w=236 236w, https://web-dev.imgix.net/image/admin/glRVRJpQ9hMip6MbqY9N.png?auto=format&w=270 270w, https://web-dev.imgix.net/image/admin/glRVRJpQ9hMip6MbqY9N.png?auto=format&w=280 280w\"><figcaption><code>&lt;dark-mode-toggle></code> in dark mode.</figcaption></figure></div><p>Try clicking or tapping the dark mode controls in the upper right corner in the demo below. If you check the checkbox in the third and the fourth control, see how your mode selection is remembered even when you reload the page. This allows your visitors to keep their operating system in dark mode, but enjoy your site in light mode or vice versa.</p><div style=\"height: 800px; width: 100%;\"><iframe allow=\"geolocation; microphone; camera; midi; vr; encrypted-media\" loading=lazy src=https://googlechromelabs.github.io/dark-mode-toggle/demo/index.html style=\"height: 100%; width: 100%; border: 0;\" title=\"IFrame content\"></iframe></div><h2 id=conclusions>Conclusions <a href=#conclusions class=w-headline-link>#</a></h2><p>Working with and supporting dark mode is fun and opens up new design avenues. For some of your visitors it can be the difference between not being able to handle your site and being a happy user. There are some pitfalls and careful testing is definitely required, but dark mode is definitely a great opportunity for you to show that you care about all of your users. The best practices mentioned in this post and helpers like the <a href=https://github.com/GoogleChromeLabs/dark-mode-toggle rel=noopener><code>&lt;dark-mode-toggle></code></a> custom element should make you confident in your ability to create an amazing dark mode experience. <a href=https://twitter.com/tomayac rel=noopener>Let me know on Twitter</a> what you create and if this post was useful or also suggestions for improving it. Thanks for reading! 🌒</p><h2 id=related-links>Related links <a href=#related-links class=w-headline-link>#</a></h2><p>Resources for the <code>prefers-color-scheme</code> media query:</p><ul><li><a href=https://chromestatus.com/feature/5109758977638400 rel=noopener>Chrome Platform Status page</a></li><li><a href=https://crbug.com/889087 rel=noopener>Chromium bug</a></li><li><a href=https://drafts.csswg.org/mediaqueries-5/#prefers-color-scheme rel=noopener>Media Queries Level 5 spec</a></li></ul><p>Resources for the <code>color-scheme</code> meta tag and CSS property:</p><ul><li><a href=/color-scheme/ >The <code>color-scheme</code> CSS property and meta tag</a></li><li><a href=https://chromestatus.com/feature/5330651267989504 rel=noopener>Chrome Platform Status page</a></li><li><a href=http://crbug.com/925935 rel=noopener>Chromium bug</a></li><li><a href=https://drafts.csswg.org/css-color-adjust-1/ rel=noopener>CSS Color Adjustment Module Level 1 spec</a></li><li><a href=https://github.com/w3c/csswg-drafts/issues/3299 rel=noopener>CSS WG GitHub Issue for the meta tag and the CSS property</a></li><li><a href=https://github.com/whatwg/html/issues/4504 rel=noopener>HTML WHATWG GitHub Issue for the meta tag</a></li></ul><p>General dark mode links:</p><ul><li><a href=https://material.io/design/color/dark-theme.html rel=noopener>Material Design—Dark Theme</a></li><li><a href=https://webkit.org/blog/8892/dark-mode-in-web-inspector/ rel=noopener>Dark Mode in Web Inspector</a></li><li><a href=https://webkit.org/blog/8840/dark-mode-support-in-webkit/ rel=noopener>Dark Mode Support in WebKit</a></li><li><a href=https://developer.apple.com/design/human-interface-guidelines/macos/visual-design/dark-mode/ rel=noopener>Apple Human Interface Guidelines—Dark Mode</a></li></ul><p>Background research articles for this post:</p><ul><li><a href=https://medium.com/dev-channel/what-does-dark-modes-supported-color-schemes-actually-do-69c2eacdfa1d rel=noopener>What Does Dark Mode's \"supported-color-schemes\" Actually Do? 🤔</a></li><li><a href=https://medium.com/dev-channel/let-there-be-darkness-maybe-9facd9c3023d rel=noopener>Let there be darkness! 🌚 Maybe…</a></li><li><a href=https://medium.com/dev-channel/re-colorization-for-dark-mode-19e2e17b584b rel=noopener>Re-Colorization for Dark Mode</a></li></ul><h2 id=acknowledgements>Acknowledgements <a href=#acknowledgements class=w-headline-link>#</a></h2><p>The <code>prefers-color-scheme</code> media feature, the <code>color-scheme</code> CSS property, and the related meta tag are the implementation work of 👏 <a href=https://twitter.com/runeli rel=noopener>Rune Lillesveen</a>. Rune is also a co-editor of the <a href=https://drafts.csswg.org/css-color-adjust-1/ rel=noopener>CSS Color Adjustment Module Level 1</a> spec. I would like to 🙏 thank <a href=https://www.linkedin.com/in/lukasz-zbylut/ rel=noopener>Lukasz Zbylut</a>, <a href=https://twitter.com/rowan_m rel=noopener>Rowan Merewood</a>, <a href=https://www.linkedin.com/in/chiragd/ rel=noopener>Chirag Desai</a>, and <a href=https://twitter.com/rob_dodson rel=noopener>Rob Dodson</a> for their thorough reviews of this article. The <a href=#loading-strategy>loading strategy</a> is the brainchild of <a href=https://twitter.com/jaffathecake rel=noopener>Jake Archibald</a>. <a href=https://twitter.com/ecbos_ rel=noopener>Emilio Cobos Álvarez</a> has pointed me to the correct <code>prefers-color-scheme</code> detection method. The tip with referenced SVGs and <code>currentColor</code> came from <a href=https://twitter.com/xeenon rel=noopener>Timothy Hatcher</a>. Finally, I am thankful to the many anonymous participants of the various user studies that have helped shape the recommendations in this article. Hero image by <a href=https://unsplash.com/photos/kujXUuh1X0o rel=noopener>Nathan Anderson</a>.</p><div class=\"cluster flow-space-size-2 gutter-base\" aria-label=tags role=list><a href=/tags/css/ class=pill>CSS</a></div><div class=\"color-mid-text text-size-0\"><span>Last updated: <time>Aug 2, 2020</time> </span>— <a href=https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/blog/prefers-color-scheme/index.md>Improve article</a></div><div class=flow-space-size-2><a href=/blog class=button data-type=secondary><svg height=24 viewBox=\"0 0 24 24\" width=24 xmlns=http://www.w3.org/2000/svg><path d=\"M0 0h24v24H0z\" fill=none /><path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"/></svg> <span>Return to all articles</span></a></div><div class=\"flow docked-actions flow-space-base\"><div><share-action authors=@tomayac class=\"gc-analytics-event fab\" data-action=click data-category=web.dev data-icon=share data-label=share data-type=primary role=button tabindex=0><svg height=24 viewBox=\"0 0 24 24\" width=24 xmlns=http://www.w3.org/2000/svg><path d=\"M0 0h24v24H0V0z\" fill=none /><path d=\"M18 16.1c-.8 0-1.4.3-2 .8l-7.1-4.2c.1-.2.1-.5.1-.7s0-.5-.1-.7L16 7.2c.5.5 1.2.8 2 .8 1.7 0 3-1.3 3-3s-1.3-3-3-3-3 1.3-3 3c0 .2 0 .5.1.7L8 9.8C7.5 9.3 6.8 9 6 9c-1.7 0-3 1.3-3 3s1.3 3 3 3c.8 0 1.5-.3 2-.8l7.1 4.2c-.1.2-.1.4-.1.6 0 1.6 1.3 2.9 2.9 2.9s2.9-1.3 2.9-2.9-1.2-2.9-2.8-2.9z\" fill=currentColor /></svg> <span class=fab__label>Share</span></share-action></div><div><a href=/newsletter/ class=\"gc-analytics-event fab\" data-category=web.dev data-label=view-subscribe data-action=click data-type=primary><svg height=24 viewbox=\"0 0 24 24\" width=24 xmlns=http://www.w3.org/2000/svg aria-label=\"An envelope with plus icon\" role=img><path d=\"M13 20H4c-1.1 0-2-.9-2-2l.01-12c0-1.1.89-2 1.99-2h16c1.1 0 2 .9 2 2v7h-2V8l-8 5-8-5v10h9v2zm-1-9l8-5H4l8 5zm8 7h3v2h-3v3h-2v-3h-3v-2h3v-3h2v3z\" fill=currentColor fill-rule=nonzero /></svg> <span class=fab__label>subscribe</span></a></div></div></article></div></div></main><footer class=site-footer role=contentinfo><nav aria-label=\"footer navigation\" class=\"auto-grid site-footer__primary-nav\"><div><h3 class=\"color-mid-text text-size-2\">Contribute</h3><ul class=w-footer__linkbox-list role=list><li><a href=\"https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title=\" data-category=\"Site-Wide Custom Events\" data-label=\"Footer Link (index 1)\">File a bug</a></li><li><a href=https://github.com/googlechrome/web.dev data-category=\"Site-Wide Custom Events\" data-label=\"Footer Link (index 2)\">View source</a></li></ul></div><div><h3 class=\"color-mid-text text-size-2\">Related content</h3><ul class=w-footer__linkbox-list role=list><li><a href=https://developer.chrome.com/ data-category=\"Site-Wide Custom Events\" data-label=\"Footer Link (index 1)\">developer.chrome.com</a></li><li><a href=https://blog.chromium.org/ data-category=\"Site-Wide Custom Events\" data-label=\"Footer Link (index 1)\">Chrome updates</a></li><li><a href=https://developers.google.com/web/fundamentals data-category=\"Site-Wide Custom Events\" data-label=\"Footer Link (index 2)\">Web Fundamentals</a></li><li><a href=/tags/case-study/ data-category=\"Site-Wide Custom Events\" data-label=\"Footer Link (index 3)\">Case studies</a></li><li><a href=/podcasts/ data-category=Podcasts data-label=\"Footer Link (index 5)\">Podcasts</a></li><li><a href=/shows/ data-category=Shows data-label=\"Footer Link (index 6)\">Shows</a></li></ul></div><div><h3 class=\"color-mid-text text-size-2\">Connect</h3><ul class=w-footer__linkbox-list role=list><li><a href=https://www.twitter.com/ChromiumDev data-category=\"Site-Wide Custom Events\" data-label=\"Footer Link (index 1)\">Twitter</a></li><li><a href=https://www.youtube.com/user/ChromeDevelopers data-category=\"Site-Wide Custom Events\" data-label=\"Footer Link (index 2)\">YouTube</a></li></ul></div></nav><nav aria-label=\"Google developers\" class=\"repel site-footer__brand-nav\"><ul class=cluster role=list><li><a href=https://developers.google.com/ data-category=\"Site-Wide Custom Events\" data-label=\"Footer Google Developers Link\"><img alt=\"Google Developers\" height=33 src=/images/lockup-color.png width=185 loading=lazy class=w-footer__utility-logo></a></li><li><a href=https://developer.chrome.com/ data-category=\"Site-Wide Custom Events\" data-label=\"Footer Chrome Link\">Chrome</a></li><li><a href=https://firebase.google.com/ data-category=\"Site-Wide Custom Events\" data-label=\"Footer Firebase Link\">Firebase</a></li><li><a href=https://cloud.google.com/ data-category=\"Site-Wide Custom Events\" data-label=\"Footer Google Cloud Platform Link\">Google Cloud Platform</a></li><li><a href=https://developers.google.com/products data-category=\"Site-Wide Custom Events\" data-label=\"Footer All products Link\">All products</a></li></ul><div class=cluster><theme-toggle><label class=toggle-switch for=theme-toggle><span class=toggle-switch__label>Dark theme</span> <input class=toggle-switch__input id=theme-toggle role=switch type=checkbox><div class=\"focus-ring toggle-switch__decor\" aria-hidden=true><div class=toggle-switch__thumb></div></div></label></theme-toggle><web-language-select current=en></web-language-select></div></nav><nav aria-label=\"terms and policies\" class=site-footer__misc-links><ul class=cluster role=list><li><a href=https://policies.google.com/ data-category=\"Site-Wide Custom Events\" data-label=\"Footer Terms and Privacy link\">Terms & Privacy</a></li><li><a href=/community-guidelines/ data-category=\"Site-Wide Custom Events\" data-label=\"Footer Community Guidelines link\">Community Guidelines</a></li></ul></nav><p class=\"text-size-0 gap-top-size-2\">Except as otherwise noted, the content of this page is licensed under the <a href=https://creativecommons.org/licenses/by/4.0/ >Creative Commons Attribution 4.0 License</a>, and code samples are licensed under the <a href=https://www.apache.org/licenses/LICENSE-2.0>Apache 2.0 License</a>. For details, see the <a href=https://developers.google.com/terms/site-policies>Google Developers Site Policies</a>.</p></footer></body></html>","oembed":false,"readabilityObject":{"title":"prefers-color-scheme: Hello darkness, my old friend","content":"<div id=\"readability-page-1\" class=\"page\"><article><header><nav aria-label=\"breadcrumbs\"><ul role=\"list\"><li><a href=\"/\" data-category=\"web.dev\" data-label=\"post, home breadcrumb\" data-action=\"click\">Home</a></li><li><a href=\"/blog\" data-category=\"web.dev\" data-label=\"post, path breadcrumb\" data-action=\"click\">All articles</a></li></ul></nav><p>Overhyped or necessity? Learn everything about dark mode and how to support it to the benefit of your users!</p><p><time>Jun 27, 2019</time> — Updated <time>Aug 2, 2020</time></p></header><h2 id=\"introduction\">Introduction <a href=\"#introduction\">#</a></h2><h3 id=\"dark-mode-before-dark-mode\">Dark mode before <em>Dark Mode</em> <a href=\"#dark-mode-before-dark-mode\">#</a></h3><figure data-float=\"right\"><img alt=\"Green screen computer monitor\" height=\"175\" src=\"https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format\" width=\"233\" loading=\"lazy\" decoding=\"async\" sizes=\"(min-width: 233px) 233px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/admin/fmdRPm6K5SXiIRLgyz4y.jpg?auto=format&amp;w=466 466w\"><figcaption>Green screen (<a href=\"https://commons.wikimedia.org/wiki/File:Compaq_Portable_and_Wordperfect.JPG\">Source</a>)</figcaption></figure><p>We have gone full circle with dark mode. In the dawn of personal computing, dark mode wasn't a matter of choice, but a matter of fact: Monochrome <abbr title=\"Cathode-Ray Tube\">CRT</abbr> computer monitors worked by firing electron beams on a phosphorescent screen and the phosphor used in early CRTs was green. Because text was displayed in green and the rest of the screen was black, these models were often referred to as <a href=\"https://commons.wikimedia.org/wiki/File:Schneider_CPC6128_with_green_monitor_GT65,_start_screen.jpg\" rel=\"noopener\">green screens</a>.</p><figure data-float=\"left\"><img alt=\"Dark-on-white word processing\" height=\"175\" src=\"https://web-dev.imgix.net/image/admin/l9oDlIO59oyJiXVegxIV.jpg?auto=format\" width=\"222\" loading=\"lazy\" decoding=\"async\" sizes=\"(min-width: 222px) 222px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/l9oDlIO59oyJiXVegxIV.jpg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/admin/l9oDlIO59oyJiXVegxIV.jpg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/admin/l9oDlIO59oyJiXVegxIV.jpg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/admin/l9oDlIO59oyJiXVegxIV.jpg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/admin/l9oDlIO59oyJiXVegxIV.jpg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/admin/l9oDlIO59oyJiXVegxIV.jpg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/admin/l9oDlIO59oyJiXVegxIV.jpg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/admin/l9oDlIO59oyJiXVegxIV.jpg?auto=format&amp;w=444 444w\"><figcaption>Dark-on-white (<a href=\"https://www.youtube.com/watch?v=qKkABzt0Zqg\">Source</a>)</figcaption></figure><p>The subsequently introduced Color CRTs displayed multiple colors through the use of red, green, and blue phosphors. They created white by activating all three phosphors simultaneously. With the advent of more sophisticated <abbr title=\"What You See Is What You Get\">WYSIWYG</abbr> <a href=\"https://en.wikipedia.org/wiki/Desktop_publishing\" rel=\"noopener\">desktop publishing</a>, the idea of making the virtual document resemble a physical sheet of paper became popular.</p><figure data-float=\"right\"><img alt=\"Dark-on-white webpage in the WorldWideWeb browser\" height=\"175\" src=\"https://web-dev.imgix.net/image/admin/lnuLLcQzIF7r08lt479k.png?auto=format\" width=\"233\" loading=\"lazy\" decoding=\"async\" sizes=\"(min-width: 233px) 233px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/lnuLLcQzIF7r08lt479k.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/admin/lnuLLcQzIF7r08lt479k.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/admin/lnuLLcQzIF7r08lt479k.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/admin/lnuLLcQzIF7r08lt479k.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/admin/lnuLLcQzIF7r08lt479k.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/admin/lnuLLcQzIF7r08lt479k.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/admin/lnuLLcQzIF7r08lt479k.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/admin/lnuLLcQzIF7r08lt479k.png?auto=format&amp;w=466 466w\"><figcaption>The WorldWideWeb browser (<a href=\"https://commons.wikimedia.org/wiki/File:WorldWideWeb_FSF_GNU.png\">Source</a>)</figcaption></figure><p>This is where <em>dark-on-white</em> as a design trend started, and this trend was carried over to the <a href=\"http://info.cern.ch/hypertext/WWW/TheProject.html\" rel=\"noopener\">early document-based web</a>. The first ever browser, <a href=\"https://en.wikipedia.org/wiki/WorldWideWeb\" rel=\"noopener\">WorldWideWeb</a> (remember, <a href=\"https://en.wikipedia.org/wiki/Cascading_Style_Sheets#History\" rel=\"noopener\">CSS wasn't even invented</a> yet), <a href=\"https://commons.wikimedia.org/wiki/File:WorldWideWeb_FSF_GNU.png\" rel=\"noopener\">displayed webpages</a> this way. Fun fact: the second ever browser, <a href=\"https://en.wikipedia.org/wiki/Line_Mode_Browser\" rel=\"noopener\">Line Mode Browser</a>—a terminal-based browser—was green on dark. These days, web pages and web apps are typically designed with dark text on a light background, a baseline assumption that is also hard-coded in user agent stylesheets, including <a href=\"https://chromium.googlesource.com/chromium/blink/+/master/Source/core/css/html.css\" rel=\"noopener\">Chrome's</a>.</p><figure data-float=\"left\"><img alt=\"Smartphone used while lying in bed\" height=\"175\" src=\"https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format\" width=\"262\" loading=\"lazy\" decoding=\"async\" sizes=\"(min-width: 262px) 262px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/admin/zCdyRdnAnbrB7aAB0TQi.jpg?auto=format&amp;w=524 524w\"><figcaption>Smartphone used in bed (Source: Unsplash)</figcaption></figure><p>The days of CRTs are long over. Content consumption and creation has shifted to mobile devices that use backlit <abbr title=\"Liquid Crystal Display\">LCD</abbr> or energy-saving <abbr title=\"Active-Matrix Organic Light-Emitting Diode\">AMOLED</abbr> screens. Smaller and more transportable computers, tablets, and smartphones led to new usage patterns. Leisure tasks like web browsing, coding for fun, and high-end gaming frequently happen after-hours in dim environments. People even enjoy their devices in their beds at night-time. The more people use their devices in the dark, the more the idea of going back to the roots of <em>light-on-dark</em> becomes popular.</p><h3 id=\"why-dark-mode\">Why dark mode <a href=\"#why-dark-mode\">#</a></h3><h4 id=\"dark-mode-for-aesthetic-reasons\">Dark mode for aesthetic reasons <a href=\"#dark-mode-for-aesthetic-reasons\">#</a></h4><p>When people get asked <a href=\"https://medium.com/dev-channel/let-there-be-darkness-maybe-9facd9c3023d\" rel=\"noopener\">why they like or want dark mode</a>, the most popular response is that <em>\"it's easier on the eyes,\"</em> followed by <em>\"it's elegant and beautiful.\"</em> Apple in their <a href=\"https://developer.apple.com/documentation/appkit/supporting_dark_mode_in_your_interface\" rel=\"noopener\">Dark Mode developer documentation</a> explicitly writes: <em>\"The choice of whether to enable a light or dark appearance is an aesthetic one for most users, and might not relate to ambient lighting conditions.\"</em></p><figure data-float=\"right\"><img alt=\"CloseView in Mac OS System 7 with &quot;White on Black&quot; mode\" height=\"225\" src=\"https://web-dev.imgix.net/image/admin/WZ9I5g1YGG6S1TjygEIq.png?auto=format\" width=\"193\" loading=\"lazy\" decoding=\"async\" sizes=\"(min-width: 193px) 193px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/WZ9I5g1YGG6S1TjygEIq.png?auto=format&amp;w=193 193w, https://web-dev.imgix.net/image/admin/WZ9I5g1YGG6S1TjygEIq.png?auto=format&amp;w=220 220w, https://web-dev.imgix.net/image/admin/WZ9I5g1YGG6S1TjygEIq.png?auto=format&amp;w=251 251w, https://web-dev.imgix.net/image/admin/WZ9I5g1YGG6S1TjygEIq.png?auto=format&amp;w=286 286w, https://web-dev.imgix.net/image/admin/WZ9I5g1YGG6S1TjygEIq.png?auto=format&amp;w=326 326w, https://web-dev.imgix.net/image/admin/WZ9I5g1YGG6S1TjygEIq.png?auto=format&amp;w=372 372w, https://web-dev.imgix.net/image/admin/WZ9I5g1YGG6S1TjygEIq.png?auto=format&amp;w=386 386w\"><figcaption>System&nbsp;7 CloseView (<a href=\"https://archive.org/details/mac_Macintosh_System_7_at_your_Fingertips_1992\">Source</a>)</figcaption></figure><h4 id=\"dark-mode-as-an-accessibility-tool\">Dark mode as an accessibility tool <a href=\"#dark-mode-as-an-accessibility-tool\">#</a></h4><p>There are also people who actually <em>need</em> dark mode and use it as another accessibility tool, for example, users with low vision. The earliest occurrence of such an accessibility tool I could find is <a href=\"https://en.wikipedia.org/wiki/System_7\" rel=\"noopener\">System&nbsp;7</a>'s <em>CloseView</em> feature, which had a toggle for <em>Black on White</em> and <em>White on Black</em>. While System&nbsp;7 supported color, the default user interface was still black-and-white.</p><p>These inversion-based implementations demonstrated their weaknesses once color was introduced. User research by Szpiro <em>et al.</em> on <a href=\"https://dl.acm.org/citation.cfm?id=2982168\" rel=\"noopener\">how people with low vision access computing devices</a> showed that all interviewed users disliked inverted images, but that many preferred light text on a dark background. Apple accommodates for this user preference with a feature called <a href=\"https://www.apple.com//accessibility/iphone/vision/\" rel=\"noopener\">Smart Invert</a>, which reverses the colors on the display, except for images, media, and some apps that use dark color styles.</p><p>A special form of low vision is Computer Vision Syndrome, also known as Digital Eye Strain, which is <a href=\"https://onlinelibrary.wiley.com/doi/full/10.1111/j.1475-1313.2011.00834.x\" rel=\"noopener\">defined</a> as <em>\"the combination of eye and vision problems associated with the use of computers (including desktop, laptop, and tablets) and other electronic displays (e.g. smartphones and electronic reading devices).\"</em> It has been <a href=\"https://bmjopen.bmj.com/content/5/1/e006748\" rel=\"noopener\">proposed</a> that the use of electronic devices by adolescents, particularly at night time, leads to an increased risk of shorter sleep duration, longer sleep-onset latency, and increased sleep deficiency. Additionally, exposure to blue light has been widely <a href=\"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4254760/\" rel=\"noopener\">reported</a> to be involved in the regulation of <a href=\"https://en.wikipedia.org/wiki/Circadian_rhythm\" rel=\"noopener\">circadian rhythm</a> and the sleep cycle, and irregular light environments may lead to sleep deprivation, possibly affecting mood and task performance, according to <a href=\"https://www.college-optometrists.org/oip-resource/computer-vision-syndrome--a-k-a--digital-eye-strain.html\" rel=\"noopener\">research by Rosenfield</a>. To limit these negative effects, reducing blue light by adjusting the display color temperature through features like iOS' <a href=\"https://support.apple.com/en-us/HT207570\" rel=\"noopener\">Night Shift</a> or Android's <a href=\"https://support.google.com/pixelphone/answer/7169926?\" rel=\"noopener\">Night Light</a> can help, as well as avoiding bright lights or irregular lights in general through dark themes or dark modes.</p><h4 id=\"dark-mode-power-savings-on-amoled-screens\">Dark mode power savings on AMOLED screens <a href=\"#dark-mode-power-savings-on-amoled-screens\">#</a></h4><p>Finally, dark mode is known to save a <em>lot</em> of energy on <abbr title=\"Active-Matrix Organic Light-Emitting Diode\">AMOLED</abbr> screens. Android case studies that focused on popular Google apps like YouTube have shown that the power savings can be up to 60%. The video below has more details on these case studies and the power savings per app.</p><figure data-size=\"full\"></figure><h2 id=\"activating-dark-mode-in-the-operating-system\">Activating dark mode in the operating system <a href=\"#activating-dark-mode-in-the-operating-system\">#</a></h2><p>Now that I have covered the background of why dark mode is such a big deal for many users, let's review how you can support it.</p><figure data-float=\"left\"><img alt=\"Android Q dark mode settings\" height=\"250\" src=\"https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format\" width=\"218\" loading=\"lazy\" decoding=\"async\" sizes=\"(min-width: 218px) 218px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format&amp;w=436 436w\"><figcaption>Android&nbsp;Q dark theme settings</figcaption></figure><p>Operating systems that support a dark mode or dark theme typically have an option to activate it somewhere in the settings. On macOS&nbsp;X, it's in the system preference's <em>General</em> section and called <em>Appearance</em> (<a href=\"https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/lUAnDhiGiZxigDbCqfn1.png?auto=format\">screenshot</a>), and on Windows&nbsp;10, it's in the <em>Colors</em> section and called <em>Choose your color</em> (<a href=\"https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/Ahr8nkFttRPCe4RH8IEk.png?auto=format\">screenshot</a>). For Android&nbsp;Q, you can find it under <em>Display</em> as a <em>Dark Theme</em> toggle switch (<a href=\"https://web-dev.imgix.net/image/admin/Yh6SEoWDK1SbqcGjlL6d.png?auto=format\">screenshot</a>), and on iOS&nbsp;13, you can change the <em>Appearance</em> in the <em>Display &amp; Brightness</em> section of the settings (<a href=\"https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/K0QTu4Elw1ETabtoJjZ1.jpg?auto=format\">screenshot</a>).</p><p>One last bit of theory before I get going. <a href=\"https://developer.mozilla.org/docs/Web/CSS/Media_Queries/Using_media_queries\" rel=\"noopener\">Media queries</a> allow authors to test and query values or features of the user agent or display device, independent of the document being rendered. They are used in the CSS <code>@media</code> rule to conditionally apply styles to a document, and in various other contexts and languages, such as HTML and JavaScript. <a href=\"https://drafts.csswg.org/mediaqueries-5/\" rel=\"noopener\">Media Queries Level&nbsp;5</a> introduces so-called user preference media features, that is, a way for sites to detect the user's preferred way to display content.</p><p>The <a href=\"https://drafts.csswg.org/mediaqueries-5/#prefers-color-scheme\" rel=\"noopener\"><code>prefers-color-scheme</code></a> media feature is used to detect if the user has requested the page to use a light or dark color theme. It works with the following values:</p><ul><li><code>light</code>: Indicates that the user has notified the system that they prefer a page that has a light theme (dark text on light background).</li><li><code>dark</code>: Indicates that the user has notified the system that they prefer a page that has a dark theme (light text on dark background).</li></ul><h2 id=\"supporting-dark-mode\">Supporting dark mode <a href=\"#supporting-dark-mode\">#</a></h2><h3 id=\"finding-out-if-dark-mode-is-supported-by-the-browser\">Finding out if dark mode is supported by the browser <a href=\"#finding-out-if-dark-mode-is-supported-by-the-browser\">#</a></h3><p>As dark mode is reported through a media query, you can easily check if the current browser supports dark mode by checking if the media query <code>prefers-color-scheme</code> matches at all. Note how I don't include any value, but purely check if the media query alone matches.</p><web-copy-code><pre><code><span>if</span> <span>(</span>window<span>.</span><span>matchMedia</span><span>(</span><span>'(prefers-color-scheme)'</span><span>)</span><span>.</span>media <span>!==</span> <span>'not all'</span><span>)</span> <span>{</span><br>  console<span>.</span><span>log</span><span>(</span><span>'🎉 Dark mode is supported'</span><span>)</span><span>;</span><br><span>}</span></code></pre></web-copy-code><p>At the time of writing, <code>prefers-color-scheme</code> is supported on both desktop and mobile (where available) by Chrome and Edge as of version 76, Firefox as of version 67, and Safari as of version 12.1 on macOS and as of version 13 on iOS. For all other browsers, you can check the <a href=\"https://caniuse.com/#feat=prefers-color-scheme\" rel=\"noopener\">Can I use support tables</a>.</p><h3 id=\"learning-about-a-user's-preferences-at-request-time\">Learning about a user's preferences at request time <a href=\"#learning-about-a-user's-preferences-at-request-time\">#</a></h3><p>The <a href=\"/user-preference-media-features-headers/\"><code>Sec-CH-Prefers-Color-Scheme</code></a> client hint header allows sites to obtain the user's color scheme preferences optionally at request time, allowing servers to inline the right CSS and therefore avoid a flash of incorrect color theme.</p><h3 id=\"dark-mode-in-practice\">Dark mode in practice <a href=\"#dark-mode-in-practice\">#</a></h3><p>Let's finally see how supporting dark mode looks like in practice. Just like with the <a href=\"https://en.wikipedia.org/wiki/Highlander_(film)\" rel=\"noopener\">Highlander</a>, with dark mode <em>there can be only one</em>: dark or light, but never both! Why do I mention this? Because this fact should have an impact on the loading strategy. <strong>Please don't force users to download CSS in the critical rendering path that is for a mode they don't currently use.</strong> To optimize load speed, I have therefore split my CSS for the example app that shows the following recommendations in practice into three parts in order to <a href=\"/defer-non-critical-css/\">defer non-critical CSS</a>:</p><ul><li><code>style.css</code> that contains generic rules that are used universally on the site.</li><li><code>dark.css</code> that contains only the rules needed for dark mode.</li><li><code>light.css</code> that contains only the rules needed for light mode.</li></ul><h3 id=\"loading-strategy\">Loading strategy <a href=\"#loading-strategy\">#</a></h3><p>The two latter ones, <code>light.css</code> and <code>dark.css</code>, are loaded conditionally with a <code>&lt;link media&gt;</code> query. Initially, <a href=\"https://caniuse.com/#feat=prefers-color-scheme\" rel=\"noopener\">not all browsers will support <code>prefers-color-scheme</code></a> (detectable using the <a href=\"#finding-out-if-dark-mode-is-supported-by-the-browser\">pattern above</a>), which I deal with dynamically by loading the default <code>light.css</code> file via a conditionally inserted <code>&lt;link rel=\"stylesheet\"&gt;</code> element in a minuscule inline script (light is an arbitrary choice, I could also have made dark the default fallback experience). To avoid a <a href=\"https://en.wikipedia.org/wiki/Flash_of_unstyled_content\" rel=\"noopener\">flash of unstyled content</a>, I hide the content of the page until <code>light.css</code> has loaded.</p><web-copy-code><pre><code><span><span><span>&lt;</span>script</span><span>&gt;</span></span><span><span><br>  <span>// If `prefers-color-scheme` is not supported, fall back to light mode.</span><br>  <span>// In this case, light.css will be downloaded with `highest` priority.</span><br>  <span>if</span> <span>(</span>window<span>.</span><span>matchMedia</span><span>(</span><span>'(prefers-color-scheme: dark)'</span><span>)</span><span>.</span>media <span>===</span> <span>'not all'</span><span>)</span> <span>{</span><br>    document<span>.</span>documentElement<span>.</span>style<span>.</span>display <span>=</span> <span>'none'</span><span>;</span><br>    document<span>.</span>head<span>.</span><span>insertAdjacentHTML</span><span>(</span><br>      <span>'beforeend'</span><span>,</span><br>      <span>'&lt;link rel=\"stylesheet\" href=\"/light.css\" onload=\"document.documentElement.style.display = \\'\\'\"&gt;'</span><span>,</span><br>    <span>)</span><span>;</span><br>  <span>}</span><br></span></span><span><span><span>&lt;/</span>script</span><span>&gt;</span></span><br><span>&lt;!--<br>  Conditionally either load the light or the dark stylesheet. The matching file<br>  will be downloaded with `highest`, the non-matching file with `lowest`<br>  priority. If the browser doesn't support `prefers-color-scheme`, the media<br>  query is unknown and the files are downloaded with `lowest` priority (but<br>  above I already force `highest` priority for my default light experience).<br>--&gt;</span><br><span><span><span>&lt;</span>link</span> <span>rel</span><span><span>=</span><span>\"</span>stylesheet<span>\"</span></span> <span>href</span><span><span>=</span><span>\"</span>/dark.css<span>\"</span></span> <span>media</span><span><span>=</span><span>\"</span>(prefers-color-scheme: dark)<span>\"</span></span> <span>/&gt;</span></span><br><span><span><span>&lt;</span>link</span><br>  <span>rel</span><span><span>=</span><span>\"</span>stylesheet<span>\"</span></span><br>  <span>href</span><span><span>=</span><span>\"</span>/light.css<span>\"</span></span><br>  <span>media</span><span><span>=</span><span>\"</span>(prefers-color-scheme: light)<span>\"</span></span><br><span>/&gt;</span></span><br><span>&lt;!-- The main stylesheet --&gt;</span><br><span><span><span>&lt;</span>link</span> <span>rel</span><span><span>=</span><span>\"</span>stylesheet<span>\"</span></span> <span>href</span><span><span>=</span><span>\"</span>/style.css<span>\"</span></span> <span>/&gt;</span></span></code></pre></web-copy-code><h3 id=\"stylesheet-architecture\">Stylesheet architecture <a href=\"#stylesheet-architecture\">#</a></h3><p>I make maximum use of <a href=\"https://developer.mozilla.org/docs/Web/CSS/var\" rel=\"noopener\">CSS variables</a>, this allows my generic <code>style.css</code> to be, well, generic, and all the light or dark mode customization happens in the two other files <code>dark.css</code> and <code>light.css</code>. Below you can see an excerpt of the actual styles, but it should suffice to convey the overall idea. I declare two variables, <code>-⁠-⁠color</code> and <code>-⁠-⁠background-color</code> that essentially create a <em>dark-on-light</em> and a <em>light-on-dark</em> baseline theme.</p><web-copy-code><pre><code><span>/* light.css: 👉 dark-on-light */</span><br><span>:root</span> <span>{</span><br>  <span>--color</span><span>:</span> <span>rgb</span><span>(</span>5<span>,</span> 5<span>,</span> 5<span>)</span><span>;</span><br>  <span>--background-color</span><span>:</span> <span>rgb</span><span>(</span>250<span>,</span> 250<span>,</span> 250<span>)</span><span>;</span><br><span>}</span></code></pre></web-copy-code><web-copy-code><pre><code><span>/* dark.css: 👉 light-on-dark */</span><br><span>:root</span> <span>{</span><br>  <span>--color</span><span>:</span> <span>rgb</span><span>(</span>250<span>,</span> 250<span>,</span> 250<span>)</span><span>;</span><br>  <span>--background-color</span><span>:</span> <span>rgb</span><span>(</span>5<span>,</span> 5<span>,</span> 5<span>)</span><span>;</span><br><span>}</span></code></pre></web-copy-code><p>In my <code>style.css</code>, I then use these variables in the <code>body { … }</code> rule. As they are defined on the <a href=\"https://developer.mozilla.org/docs/Web/CSS/:root\" rel=\"noopener\"><code>:root</code> CSS pseudo-class</a>—a selector that in HTML represents the <code>&lt;html&gt;</code> element and is identical to the selector <code>html</code>, except that its specificity is higher—they cascade down, which serves me for declaring global CSS variables.</p><web-copy-code><pre><code><span>/* style.css */</span><br><span>:root</span> <span>{</span><br>  <span>color-scheme</span><span>:</span> light dark<span>;</span><br><span>}</span><p><span>body</span> <span>{</span><br>  <span>color</span><span>:</span> <span>var</span><span>(</span>--color<span>)</span><span>;</span><br>  <span>background-color</span><span>:</span> <span>var</span><span>(</span>--background-color<span>)</span><span>;</span><br><span>}</span></p></code></pre></web-copy-code><p>In the code sample above, you will probably have noticed a property <a href=\"https://drafts.csswg.org/css-color-adjust-1/#propdef-color-scheme\" rel=\"noopener\"><code>color-scheme</code></a> with the space-separated value <code>light dark</code>.</p><p>This tells the browser which color themes my app supports and allows it to activate special variants of the user agent stylesheet, which is useful to, for example, let the browser render form fields with a dark background and light text, adjust the scroll bars, or to enable a theme-aware highlight color. The exact details of <code>color-scheme</code> are specified in <a href=\"https://drafts.csswg.org/css-color-adjust-1/\" rel=\"noopener\">CSS Color Adjustment Module Level&nbsp;1</a>.</p><p>Everything else is then just a matter of defining CSS variables for things that matter on my site. Semantically organizing styles helps a lot when working with dark mode. For example, rather than <code>-⁠-⁠highlight-yellow</code>, consider calling the variable <code>-⁠-⁠accent-color</code>, as \"yellow\" may actually not be yellow in dark mode or vice versa. Below is an example of some more variables that I use in my example.</p><web-copy-code><pre><code><span>/* dark.css */</span><br><span>:root</span> <span>{</span><br>  <span>--color</span><span>:</span> <span>rgb</span><span>(</span>250<span>,</span> 250<span>,</span> 250<span>)</span><span>;</span><br>  <span>--background-color</span><span>:</span> <span>rgb</span><span>(</span>5<span>,</span> 5<span>,</span> 5<span>)</span><span>;</span><br>  <span>--link-color</span><span>:</span> <span>rgb</span><span>(</span>0<span>,</span> 188<span>,</span> 212<span>)</span><span>;</span><br>  <span>--main-headline-color</span><span>:</span> <span>rgb</span><span>(</span>233<span>,</span> 30<span>,</span> 99<span>)</span><span>;</span><br>  <span>--accent-background-color</span><span>:</span> <span>rgb</span><span>(</span>0<span>,</span> 188<span>,</span> 212<span>)</span><span>;</span><br>  <span>--accent-color</span><span>:</span> <span>rgb</span><span>(</span>5<span>,</span> 5<span>,</span> 5<span>)</span><span>;</span><br><span>}</span></code></pre></web-copy-code><web-copy-code><pre><code><span>/* light.css */</span><br><span>:root</span> <span>{</span><br>  <span>--color</span><span>:</span> <span>rgb</span><span>(</span>5<span>,</span> 5<span>,</span> 5<span>)</span><span>;</span><br>  <span>--background-color</span><span>:</span> <span>rgb</span><span>(</span>250<span>,</span> 250<span>,</span> 250<span>)</span><span>;</span><br>  <span>--link-color</span><span>:</span> <span>rgb</span><span>(</span>0<span>,</span> 0<span>,</span> 238<span>)</span><span>;</span><br>  <span>--main-headline-color</span><span>:</span> <span>rgb</span><span>(</span>0<span>,</span> 0<span>,</span> 192<span>)</span><span>;</span><br>  <span>--accent-background-color</span><span>:</span> <span>rgb</span><span>(</span>0<span>,</span> 0<span>,</span> 238<span>)</span><span>;</span><br>  <span>--accent-color</span><span>:</span> <span>rgb</span><span>(</span>250<span>,</span> 250<span>,</span> 250<span>)</span><span>;</span><br><span>}</span></code></pre></web-copy-code><h3 id=\"full-example\">Full example <a href=\"#full-example\">#</a></h3><p>In the following <a href=\"https://dark-mode-baseline.glitch.me/\" rel=\"noopener\">Glitch</a> embed, you can see the complete example that puts the concepts from above into practice. Try toggling dark mode in your particular <a href=\"#activating-dark-mode-in-the-operating-system\">operating system's settings</a> and see how the page reacts.</p><h3 id=\"loading-impact\">Loading impact <a href=\"#loading-impact\">#</a></h3><p>When you play with this example, you can see why I load my <code>dark.css</code> and <code>light.css</code> via media queries. Try toggling dark mode and reload the page: the particular currently non-matching stylesheets are still loaded, but with the lowest priority, so that they never compete with resources that are needed by the site right now.</p><figure><img alt=\"Network loading diagram showing how in light mode the dark mode CSS gets loaded with lowest priority\" height=\"417\" src=\"https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format\" width=\"800\" loading=\"lazy\" decoding=\"async\" sizes=\"(min-width: 800px) 800px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/admin/flTdLliru6GmqqlOKjNx.png?auto=format&amp;w=1600 1600w\"><figcaption>Site in light mode loads the dark mode CSS with lowest priority.</figcaption></figure><figure><img alt=\"Network loading diagram showing how in dark mode the light mode CSS gets loaded with lowest priority\" height=\"417\" src=\"https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format\" width=\"800\" loading=\"lazy\" decoding=\"async\" sizes=\"(min-width: 800px) 800px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/admin/IDs6Le0VBhHu9QEDdxL6.png?auto=format&amp;w=1600 1600w\"><figcaption>Site in dark mode loads the light mode CSS with lowest priority.</figcaption></figure><figure><img alt=\"Network loading diagram showing how in default light mode the dark mode CSS gets loaded with lowest priority\" height=\"417\" src=\"https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format\" width=\"800\" loading=\"lazy\" decoding=\"async\" sizes=\"(min-width: 800px) 800px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/admin/zJqu5k3TIgcZf1OHWWIq.png?auto=format&amp;w=1600 1600w\"><figcaption>Site in default light mode on a browser that doesn't support <code>prefers-color-scheme</code> loads the dark mode CSS with lowest priority.</figcaption></figure><h3 id=\"reacting-on-dark-mode-changes\">Reacting on dark mode changes <a href=\"#reacting-on-dark-mode-changes\">#</a></h3><p>Like any other media query change, dark mode changes can be subscribed to via JavaScript. You can use this to, for example, dynamically change the <a href=\"https://developers.google.com/web/fundamentals/design-and-ux/browser-customization/#provide_great_icons_tiles\" rel=\"noopener\">favicon</a> of a page or change the <a href=\"https://developers.google.com/web/fundamentals/design-and-ux/browser-customization/#meta_theme_color_for_chrome_and_opera\" rel=\"noopener\"><code>&lt;meta name=\"theme-color\"&gt;</code></a> that determines the color of the URL bar in Chrome. The <a href=\"#full-example\">full example</a> above shows this in action, in order to see the theme color and favicon changes, open the <a href=\"https://dark-mode-baseline.glitch.me/\" rel=\"noopener\">demo in a separate tab</a>.</p><web-copy-code><pre><code><span>const</span> darkModeMediaQuery <span>=</span> window<span>.</span><span>matchMedia</span><span>(</span><span>'(prefers-color-scheme: dark)'</span><span>)</span><span>;</span><br>darkModeMediaQuery<span>.</span><span>addListener</span><span>(</span><span>(</span><span>e</span><span>)</span> <span>=&gt;</span> <span>{</span><br>  <span>const</span> darkModeOn <span>=</span> e<span>.</span>matches<span>;</span><br>  console<span>.</span><span>log</span><span>(</span><span><span>`</span><span>Dark mode is </span><span><span>${</span>darkModeOn <span>?</span> <span>'🌒 on'</span> <span>:</span> <span>'☀️ off'</span><span>}</span></span><span>.</span><span>`</span></span><span>)</span><span>;</span><br><span>}</span><span>)</span><span>;</span></code></pre></web-copy-code><p>As of Chromium&nbsp;93 and Safari&nbsp;15, you can adjust the color based on a media query with the <code>media</code> attribute of the <code>meta</code> theme color element. The first one that matches will be picked. For example, you could have one color for light mode and another one for dark mode. At the time of writing, you can't define those in your manifest. See <a href=\"https://github.com/w3c/manifest/issues/975\" rel=\"noopener\">w3c/manifest#975 GitHub issue</a>.</p><web-copy-code><pre><code><span><span><span>&lt;</span>meta</span><br>  <span>name</span><span><span>=</span><span>\"</span>theme-color<span>\"</span></span><br>  <span>media</span><span><span>=</span><span>\"</span>(prefers-color-scheme: light)<span>\"</span></span><br>  <span>content</span><span><span>=</span><span>\"</span>white<span>\"</span></span><br><span>/&gt;</span></span><br><span><span><span>&lt;</span>meta</span> <span>name</span><span><span>=</span><span>\"</span>theme-color<span>\"</span></span> <span>media</span><span><span>=</span><span>\"</span>(prefers-color-scheme: dark)<span>\"</span></span> <span>content</span><span><span>=</span><span>\"</span>black<span>\"</span></span> <span>/&gt;</span></span></code></pre></web-copy-code><h2 id=\"debugging-and-testing-dark-mode\">Debugging and testing dark mode <a href=\"#debugging-and-testing-dark-mode\">#</a></h2><h3 id=\"emulating-prefers-color-scheme-in-devtools\">Emulating <code>prefers-color-scheme</code> in DevTools <a href=\"#emulating-prefers-color-scheme-in-devtools\">#</a></h3><p>Switching the entire operating system's color scheme can get annoying real quick, so Chrome DevTools now allows you to emulate the user's preferred color scheme in a way that only affects the currently visible tab. Open the <a href=\"https://developers.google.com/web/tools/chrome-devtools/command-menu\" rel=\"noopener\">Command Menu</a>, start typing <code>Rendering</code>, run the <code>Show Rendering</code> command, and then change the <strong>Emulate CSS media feature prefers-color-scheme</strong> option.</p><figure><img alt=\"A screenshot of the 'Emulate CSS media feature prefers-color-scheme' option that is located in the Rendering tab of Chrome DevTools\" height=\"552\" src=\"https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format\" width=\"800\" loading=\"lazy\" decoding=\"async\" sizes=\"(min-width: 800px) 800px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&amp;w=200 200w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&amp;w=228 228w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&amp;w=260 260w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&amp;w=296 296w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&amp;w=338 338w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&amp;w=385 385w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&amp;w=439 439w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&amp;w=500 500w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&amp;w=571 571w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&amp;w=650 650w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&amp;w=741 741w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&amp;w=845 845w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&amp;w=964 964w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&amp;w=1098 1098w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&amp;w=1252 1252w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&amp;w=1428 1428w, https://web-dev.imgix.net/image/admin/RIq2z6Ja1zSzfNTHic5z.png?auto=format&amp;w=1600 1600w\"></figure><h3 id=\"screenshotting-prefers-color-scheme-with-puppeteer\">Screenshotting <code>prefers-color-scheme</code> with Puppeteer <a href=\"#screenshotting-prefers-color-scheme-with-puppeteer\">#</a></h3><p><a href=\"https://github.com/GoogleChrome/puppeteer/\" rel=\"noopener\">Puppeteer</a> is a Node.js library that provides a high-level API to control Chrome or Chromium over the <a href=\"https://chromedevtools.github.io/devtools-protocol/\" rel=\"noopener\">DevTools Protocol</a>. With <a href=\"https://www.npmjs.com/package/dark-mode-screenshot\" rel=\"noopener\"><code>dark-mode-screenshot</code></a>, we provide a Puppeteer script that lets you create screenshots of your pages in both dark and light mode. You can run this script as a one-off, or alternatively make it part of your Continuous Integration (CI) test suite.</p><web-copy-code><pre><code>npx dark-mode-screenshot --url https://googlechromelabs.github.io/dark-mode-toggle/demo/ --output screenshot --fullPage --pause <span>750</span></code></pre></web-copy-code><h2 id=\"dark-mode-best-practices\">Dark mode best practices <a href=\"#dark-mode-best-practices\">#</a></h2><h3 id=\"avoid-pure-white\">Avoid pure white <a href=\"#avoid-pure-white\">#</a></h3><p>A small detail you may have noticed is that I don't use pure white. Instead, to prevent glowing and bleeding against the surrounding dark content, I choose a slightly darker white. Something like <code>rgb(250, 250, 250)</code> works well.</p><h3 id=\"re-colorize-and-darken-photographic-images\">Re-colorize and darken photographic images <a href=\"#re-colorize-and-darken-photographic-images\">#</a></h3><p>If you compare the two screenshots below, you will notice that not only the core theme has changed from <em>dark-on-light</em> to <em>light-on-dark</em>, but that also the hero image looks slightly different. My <a href=\"https://medium.com/dev-channel/re-colorization-for-dark-mode-19e2e17b584b\" rel=\"noopener\">user research</a> has shown that the majority of the surveyed people prefer slightly less vibrant and brilliant images when dark mode is active. I refer to this as <em>re-colorization</em>.</p><p>Re-colorization can be achieved through a CSS filter on my images. I use a CSS selector that matches all images that don't have <code>.svg</code> in their URL, the idea being that I can give vector graphics (icons) a different re-colorization treatment than my images (photos), more about this in the <a href=\"#vector-graphics-and-icons\">next paragraph</a>. Note how I again use a <a href=\"https://developer.mozilla.org/docs/Web/CSS/var\" rel=\"noopener\">CSS variable</a>, so I can later on flexibly change my filter.</p><p>As re-colorization is only needed in dark mode, that is, when <code>dark.css</code> is active, there are no corresponding rules in <code>light.css</code>.</p><web-copy-code><pre><code><span>/* dark.css */</span><br><span>--image-filter</span><span>:</span> <span>grayscale</span><span>(</span>50%<span>)</span><span>;</span><p><span>img:not([src*='.svg'])</span> <span>{</span><br>  <span>filter</span><span>:</span> <span>var</span><span>(</span>--image-filter<span>)</span><span>;</span><br><span>}</span></p></code></pre></web-copy-code><h4 id=\"customizing-dark-mode-re-colorization-intensities-with-javascript\">Customizing dark mode re-colorization intensities with JavaScript <a href=\"#customizing-dark-mode-re-colorization-intensities-with-javascript\">#</a></h4><p>Not everyone is the same and people have different dark mode needs. By sticking to the re-colorization method described above, I can easily make the grayscale intensity a user preference that I can <a href=\"https://developer.mozilla.org/docs/Web/CSS/Using_CSS_custom_properties#Values_in_JavaScript\" rel=\"noopener\">change via JavaScript</a>, and by setting a value of <code>0%</code>, I can also disable re-colorization completely. Note that <a href=\"https://developer.mozilla.org/docs/Web/API/Document/documentElement\" rel=\"noopener\"><code>document.documentElement</code></a> provides a reference to the root element of the document, that is, the same element I can reference with the <a href=\"https://developer.mozilla.org/docs/Web/CSS/:root\" rel=\"noopener\"><code>:root</code> CSS pseudo-class</a>.</p><web-copy-code><pre><code><span>const</span> filter <span>=</span> <span>'grayscale(70%)'</span><span>;</span><br>document<span>.</span>documentElement<span>.</span>style<span>.</span><span>setProperty</span><span>(</span><span>'--image-filter'</span><span>,</span> value<span>)</span><span>;</span></code></pre></web-copy-code><h3 id=\"invert-vector-graphics-and-icons\">Invert vector graphics and icons <a href=\"#invert-vector-graphics-and-icons\">#</a></h3><p>For vector graphics—that in my case are used as icons that I reference via <code>&lt;img&gt;</code> elements—I use a different re-colorization method. While <a href=\"https://dl.acm.org/citation.cfm?id=2982168\" rel=\"noopener\">research</a> has shown that people don't like inversion for photos, it does work very well for most icons. Again I use CSS variables to determine the inversion amount in the regular and in the <a href=\"https://developer.mozilla.org/docs/Web/CSS/:hover\" rel=\"noopener\"><code>:hover</code></a> state.</p><p>Note how again I only invert icons in <code>dark.css</code> but not in <code>light.css</code>, and how <code>:hover</code> gets a different inversion intensity in the two cases to make the icon appear slightly darker or slightly brighter, dependent on the mode the user has selected.</p><web-copy-code><pre><code><span>/* dark.css */</span><br><span>--icon-filter</span><span>:</span> <span>invert</span><span>(</span>100%<span>)</span><span>;</span><br><span>--icon-filter_hover</span><span>:</span> <span>invert</span><span>(</span>40%<span>)</span><span>;</span><p><span>img[src*='.svg']</span> <span>{</span><br>  <span>filter</span><span>:</span> <span>var</span><span>(</span>--icon-filter<span>)</span><span>;</span><br><span>}</span></p></code></pre></web-copy-code><web-copy-code><pre><code><span>/* light.css */</span><br><span>--icon-filter_hover</span><span>:</span> <span>invert</span><span>(</span>60%<span>)</span><span>;</span></code></pre></web-copy-code><web-copy-code><pre><code><span>/* style.css */</span><br><span>img[src*='.svg']:hover</span> <span>{</span><br>  <span>filter</span><span>:</span> <span>var</span><span>(</span>--icon-filter_hover<span>)</span><span>;</span><br><span>}</span></code></pre></web-copy-code><h3 id=\"use-currentcolor-for-inline-svgs\">Use <code>currentColor</code> for inline SVGs <a href=\"#use-currentcolor-for-inline-svgs\">#</a></h3><p>For <em>inline</em> SVG images, instead of <a href=\"#invert-vector-graphics-and-icons\">using inversion filters</a>, you can leverage the <a href=\"https://developer.mozilla.org/docs/Web/CSS/color_value#currentColor_keyword\" rel=\"noopener\"><code>currentColor</code></a> CSS keyword that represents the value of an element's <code>color</code> property. This lets you use the <code>color</code> value on properties that do not receive it by default. Conveniently, if <code>currentColor</code> is used as the value of the SVG <a href=\"https://developer.mozilla.org/docs/Web/SVG/Tutorial/Fills_and_Strokes#Fill_and_Stroke_Attributes\" rel=\"noopener\"><code>fill</code> or <code>stroke</code> attributes</a>, it instead takes its value from the inherited value of the color property. Even better: this also works for <a href=\"https://developer.mozilla.org/docs/Web/SVG/Element/use\" rel=\"noopener\"><code>&lt;svg&gt;&lt;use href=\"…\"&gt;&lt;/svg&gt;</code></a>, so you can have separate resources and <code>currentColor</code> will still be applied in context. Please note that this only works for <em>inline</em> or <code>&lt;use href=\"…\"&gt;</code> SVGs, but not SVGs that are referenced as the <code>src</code> of an image or somehow via CSS. You can see this applied in the demo below.</p><web-copy-code><pre><code><span><span>&lt;!-- Some inline SVG --&gt;</span></span><br><span><span><span>&lt;</span>svg</span> <span>xmlns</span><span><span>=</span><span>\"</span>http://www.w3.org/2000/svg<span>\"</span></span><br><mark>    <span>stroke</span><span><span>=</span><span>\"</span>currentColor<span>\"</span></span></mark><br><span>&gt;</span></span><br><span>  […]</span><br><span><span><span><span>&lt;/</span>svg</span><span>&gt;</span></span></span></code></pre></web-copy-code><h3 id=\"smooth-transitions-between-modes\">Smooth transitions between modes <a href=\"#smooth-transitions-between-modes\">#</a></h3><p>Switching from dark mode to light mode or vice versa can be smoothed thanks to the fact that both <code>color</code> and <code>background-color</code> are <a href=\"https://www.quackit.com/css/css3/animations/animatable_properties/\" rel=\"noopener\">animatable CSS properties</a>. Creating the animation is as easy as declaring two <code>transition</code>s for the two properties. The example below illustrates the overall idea, you can experience it live in the <a href=\"https://dark-mode-baseline.glitch.me/\" rel=\"noopener\">demo</a>.</p><web-copy-code><pre><code><span>body</span> <span>{</span><br>  <span>--duration</span><span>:</span> 0.5s<span>;</span><br>  <span>--timing</span><span>:</span> ease<span>;</span><p>  <span>color</span><span>:</span> <span>var</span><span>(</span>--color<span>)</span><span>;</span><br>  <span>background-color</span><span>:</span> <span>var</span><span>(</span>--background-color<span>)</span><span>;</span></p><p>  <span>transition</span><span>:</span> color <span>var</span><span>(</span>--duration<span>)</span> <span>var</span><span>(</span>--timing<span>)</span><span>,</span> background-color <span>var</span><span>(</span><br>        --duration<br>      <span>)</span> <span>var</span><span>(</span>--timing<span>)</span><span>;</span><br><span>}</span></p></code></pre></web-copy-code><h3 id=\"art-direction-with-dark-mode\">Art direction with dark mode <a href=\"#art-direction-with-dark-mode\">#</a></h3><p>While for loading performance reasons in general I recommend to exclusively work with <code>prefers-color-scheme</code> in the <code>media</code> attribute of <code>&lt;link&gt;</code> elements (rather than inline in stylesheets), there are situations where you actually may want to work with <code>prefers-color-scheme</code> directly inline in your HTML code. Art direction is such a situation. On the web, art direction deals with the overall visual appearance of a page and how it communicates visually, stimulates moods, contrasts features, and psychologically appeals to a target audience.</p><p>With dark mode, it's up to the judgment of the designer to decide what is the best image at a particular mode and whether <a href=\"#photographic-images\">re-colorization of images</a> is maybe <em>not</em> good enough. If used with the <code>&lt;picture&gt;</code> element, the <code>&lt;source&gt;</code> of the image to be shown can be made dependent on the <code>media</code> attribute. In the example below, I show the Western hemisphere for dark mode, and the Eastern hemisphere for light mode or when no preference is given, defaulting to the Eastern hemisphere in all other cases. This is of course purely for illustrative purposes. Toggle dark mode on your device to see the difference.</p><web-copy-code><pre><code><span><span><span>&lt;</span>picture</span><span>&gt;</span></span><br>  <span><span><span>&lt;</span>source</span> <span>srcset</span><span><span>=</span><span>\"</span>western.webp<span>\"</span></span> <span>media</span><span><span>=</span><span>\"</span>(prefers-color-scheme: dark)<span>\"</span></span> <span>/&gt;</span></span><br>  <span><span><span>&lt;</span>source</span> <span>srcset</span><span><span>=</span><span>\"</span>eastern.webp<span>\"</span></span> <span>media</span><span><span>=</span><span>\"</span>(prefers-color-scheme: light)<span>\"</span></span> <span>/&gt;</span></span><br>  <span><span><span>&lt;</span>img</span> <span>src</span><span><span>=</span><span>\"</span>eastern.webp<span>\"</span></span> <span>/&gt;</span></span><br><span><span><span>&lt;/</span>picture</span><span>&gt;</span></span></code></pre></web-copy-code><h3 id=\"dark-mode-but-add-an-opt-out\">Dark mode, but add an opt-out <a href=\"#dark-mode-but-add-an-opt-out\">#</a></h3><p>As mentioned in the <a href=\"#why-dark-mode\">why dark mode</a> section above, dark mode is an aesthetic choice for most users. In consequence, some users may actually like to have their operating system UI in dark, but still prefer to see their webpages the way they are used to seeing them. A great pattern is to initially adhere to the signal the browser sends through <code>prefers-color-scheme</code>, but to then optionally allow users to override their system-level setting.</p><h4 id=\"the-lessdark-mode-togglegreater-custom-element\">The <code>&lt;dark-mode-toggle&gt;</code> custom element <a href=\"#the-lessdark-mode-togglegreater-custom-element\">#</a></h4><p>You can of course create the code for this yourself, but you can also just use a ready-made custom element (web component) that I have created right for this purpose. It's called <a href=\"https://github.com/GoogleChromeLabs/dark-mode-toggle\" rel=\"noopener\"><code>&lt;dark-mode-toggle&gt;</code></a> and it adds a toggle (dark mode: on/off) or a theme switcher (theme: light/dark) to your page that you can fully customize. The demo below shows the element in action (oh, and I have also 🤫 silently snuck it in all of the <a href=\"https://dark-mode-baseline.glitch.me/\" rel=\"noopener\">other</a> <a href=\"https://dark-mode-currentcolor.glitch.me/\" rel=\"noopener\">examples</a> <a href=\"https://dark-mode-picture.glitch.me/\" rel=\"noopener\">above</a>).</p><web-copy-code><pre><code><span><span><span>&lt;</span>dark-mode-toggle</span><br>  <span>legend</span><span><span>=</span><span>\"</span>Theme Switcher<span>\"</span></span><br>  <span>appearance</span><span><span>=</span><span>\"</span>switch<span>\"</span></span><br>  <span>dark</span><span><span>=</span><span>\"</span>Dark<span>\"</span></span><br>  <span>light</span><span><span>=</span><span>\"</span>Light<span>\"</span></span><br>  <span>remember</span><span><span>=</span><span>\"</span>Remember this<span>\"</span></span><br><span>&gt;</span></span><span><span><span>&lt;/</span>dark-mode-toggle</span><span>&gt;</span></span></code></pre></web-copy-code><p>Try clicking or tapping the dark mode controls in the upper right corner in the demo below. If you check the checkbox in the third and the fourth control, see how your mode selection is remembered even when you reload the page. This allows your visitors to keep their operating system in dark mode, but enjoy your site in light mode or vice versa.</p><h2 id=\"conclusions\">Conclusions <a href=\"#conclusions\">#</a></h2><p>Working with and supporting dark mode is fun and opens up new design avenues. For some of your visitors it can be the difference between not being able to handle your site and being a happy user. There are some pitfalls and careful testing is definitely required, but dark mode is definitely a great opportunity for you to show that you care about all of your users. The best practices mentioned in this post and helpers like the <a href=\"https://github.com/GoogleChromeLabs/dark-mode-toggle\" rel=\"noopener\"><code>&lt;dark-mode-toggle&gt;</code></a> custom element should make you confident in your ability to create an amazing dark mode experience. <a href=\"https://twitter.com/tomayac\" rel=\"noopener\">Let me know on Twitter</a> what you create and if this post was useful or also suggestions for improving it. Thanks for reading! 🌒</p><p>Resources for the <code>prefers-color-scheme</code> media query:</p><ul><li><a href=\"https://chromestatus.com/feature/5109758977638400\" rel=\"noopener\">Chrome Platform Status page</a></li><li><a href=\"https://crbug.com/889087\" rel=\"noopener\">Chromium bug</a></li><li><a href=\"https://drafts.csswg.org/mediaqueries-5/#prefers-color-scheme\" rel=\"noopener\">Media Queries Level&nbsp;5 spec</a></li></ul><p>Resources for the <code>color-scheme</code> meta tag and CSS property:</p><ul><li><a href=\"/color-scheme/\">The <code>color-scheme</code> CSS property and meta tag</a></li><li><a href=\"https://chromestatus.com/feature/5330651267989504\" rel=\"noopener\">Chrome Platform Status page</a></li><li><a href=\"http://crbug.com/925935\" rel=\"noopener\">Chromium bug</a></li><li><a href=\"https://drafts.csswg.org/css-color-adjust-1/\" rel=\"noopener\">CSS Color Adjustment Module Level&nbsp;1 spec</a></li><li><a href=\"https://github.com/w3c/csswg-drafts/issues/3299\" rel=\"noopener\">CSS WG GitHub Issue for the meta tag and the CSS property</a></li><li><a href=\"https://github.com/whatwg/html/issues/4504\" rel=\"noopener\">HTML WHATWG GitHub Issue for the meta tag</a></li></ul><p>General dark mode links:</p><ul><li><a href=\"https://material.io/design/color/dark-theme.html\" rel=\"noopener\">Material Design—Dark Theme</a></li><li><a href=\"https://webkit.org/blog/8892/dark-mode-in-web-inspector/\" rel=\"noopener\">Dark Mode in Web Inspector</a></li><li><a href=\"https://webkit.org/blog/8840/dark-mode-support-in-webkit/\" rel=\"noopener\">Dark Mode Support in WebKit</a></li><li><a href=\"https://developer.apple.com/design/human-interface-guidelines/macos/visual-design/dark-mode/\" rel=\"noopener\">Apple Human Interface Guidelines—Dark Mode</a></li></ul><p>Background research articles for this post:</p><ul><li><a href=\"https://medium.com/dev-channel/what-does-dark-modes-supported-color-schemes-actually-do-69c2eacdfa1d\" rel=\"noopener\">What Does Dark Mode's \"supported-color-schemes\" Actually Do? 🤔</a></li><li><a href=\"https://medium.com/dev-channel/let-there-be-darkness-maybe-9facd9c3023d\" rel=\"noopener\">Let there be darkness! 🌚 Maybe…</a></li><li><a href=\"https://medium.com/dev-channel/re-colorization-for-dark-mode-19e2e17b584b\" rel=\"noopener\">Re-Colorization for Dark Mode</a></li></ul><h2 id=\"acknowledgements\">Acknowledgements <a href=\"#acknowledgements\">#</a></h2><p>The <code>prefers-color-scheme</code> media feature, the <code>color-scheme</code> CSS property, and the related meta tag are the implementation work of 👏 <a href=\"https://twitter.com/runeli\" rel=\"noopener\">Rune Lillesveen</a>. Rune is also a co-editor of the <a href=\"https://drafts.csswg.org/css-color-adjust-1/\" rel=\"noopener\">CSS Color Adjustment Module Level&nbsp;1</a> spec. I would like to 🙏 thank <a href=\"https://www.linkedin.com/in/lukasz-zbylut/\" rel=\"noopener\">Lukasz Zbylut</a>, <a href=\"https://twitter.com/rowan_m\" rel=\"noopener\">Rowan Merewood</a>, <a href=\"https://www.linkedin.com/in/chiragd/\" rel=\"noopener\">Chirag Desai</a>, and <a href=\"https://twitter.com/rob_dodson\" rel=\"noopener\">Rob Dodson</a> for their thorough reviews of this article. The <a href=\"#loading-strategy\">loading strategy</a> is the brainchild of <a href=\"https://twitter.com/jaffathecake\" rel=\"noopener\">Jake Archibald</a>. <a href=\"https://twitter.com/ecbos_\" rel=\"noopener\">Emilio Cobos Álvarez</a> has pointed me to the correct <code>prefers-color-scheme</code> detection method. The tip with referenced SVGs and <code>currentColor</code> came from <a href=\"https://twitter.com/xeenon\" rel=\"noopener\">Timothy Hatcher</a>. Finally, I am thankful to the many anonymous participants of the various user studies that have helped shape the recommendations in this article. Hero image by <a href=\"https://unsplash.com/photos/kujXUuh1X0o\" rel=\"noopener\">Nathan Anderson</a>.</p><div><p><span>Last updated: <time>Aug 2, 2020</time> </span>— <a href=\"https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/blog/prefers-color-scheme/index.md\">Improve article</a></p></div><p><a href=\"/blog\" data-type=\"secondary\"><svg height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"></path></svg> <span>Return to all articles</span></a></p></article></div>","textContent":"HomeAll articlesOverhyped or necessity? Learn everything about dark mode and how to support it to the benefit of your users!Jun 27, 2019 — Updated Aug 2, 2020Introduction #Dark mode before Dark Mode #Green screen (Source)We have gone full circle with dark mode. In the dawn of personal computing, dark mode wasn't a matter of choice, but a matter of fact: Monochrome CRT computer monitors worked by firing electron beams on a phosphorescent screen and the phosphor used in early CRTs was green. Because text was displayed in green and the rest of the screen was black, these models were often referred to as green screens.Dark-on-white (Source)The subsequently introduced Color CRTs displayed multiple colors through the use of red, green, and blue phosphors. They created white by activating all three phosphors simultaneously. With the advent of more sophisticated WYSIWYG desktop publishing, the idea of making the virtual document resemble a physical sheet of paper became popular.The WorldWideWeb browser (Source)This is where dark-on-white as a design trend started, and this trend was carried over to the early document-based web. The first ever browser, WorldWideWeb (remember, CSS wasn't even invented yet), displayed webpages this way. Fun fact: the second ever browser, Line Mode Browser—a terminal-based browser—was green on dark. These days, web pages and web apps are typically designed with dark text on a light background, a baseline assumption that is also hard-coded in user agent stylesheets, including Chrome's.Smartphone used in bed (Source: Unsplash)The days of CRTs are long over. Content consumption and creation has shifted to mobile devices that use backlit LCD or energy-saving AMOLED screens. Smaller and more transportable computers, tablets, and smartphones led to new usage patterns. Leisure tasks like web browsing, coding for fun, and high-end gaming frequently happen after-hours in dim environments. People even enjoy their devices in their beds at night-time. The more people use their devices in the dark, the more the idea of going back to the roots of light-on-dark becomes popular.Why dark mode #Dark mode for aesthetic reasons #When people get asked why they like or want dark mode, the most popular response is that \"it's easier on the eyes,\" followed by \"it's elegant and beautiful.\" Apple in their Dark Mode developer documentation explicitly writes: \"The choice of whether to enable a light or dark appearance is an aesthetic one for most users, and might not relate to ambient lighting conditions.\"System 7 CloseView (Source)Dark mode as an accessibility tool #There are also people who actually need dark mode and use it as another accessibility tool, for example, users with low vision. The earliest occurrence of such an accessibility tool I could find is System 7's CloseView feature, which had a toggle for Black on White and White on Black. While System 7 supported color, the default user interface was still black-and-white.These inversion-based implementations demonstrated their weaknesses once color was introduced. User research by Szpiro et al. on how people with low vision access computing devices showed that all interviewed users disliked inverted images, but that many preferred light text on a dark background. Apple accommodates for this user preference with a feature called Smart Invert, which reverses the colors on the display, except for images, media, and some apps that use dark color styles.A special form of low vision is Computer Vision Syndrome, also known as Digital Eye Strain, which is defined as \"the combination of eye and vision problems associated with the use of computers (including desktop, laptop, and tablets) and other electronic displays (e.g. smartphones and electronic reading devices).\" It has been proposed that the use of electronic devices by adolescents, particularly at night time, leads to an increased risk of shorter sleep duration, longer sleep-onset latency, and increased sleep deficiency. Additionally, exposure to blue light has been widely reported to be involved in the regulation of circadian rhythm and the sleep cycle, and irregular light environments may lead to sleep deprivation, possibly affecting mood and task performance, according to research by Rosenfield. To limit these negative effects, reducing blue light by adjusting the display color temperature through features like iOS' Night Shift or Android's Night Light can help, as well as avoiding bright lights or irregular lights in general through dark themes or dark modes.Dark mode power savings on AMOLED screens #Finally, dark mode is known to save a lot of energy on AMOLED screens. Android case studies that focused on popular Google apps like YouTube have shown that the power savings can be up to 60%. The video below has more details on these case studies and the power savings per app.Activating dark mode in the operating system #Now that I have covered the background of why dark mode is such a big deal for many users, let's review how you can support it.Android Q dark theme settingsOperating systems that support a dark mode or dark theme typically have an option to activate it somewhere in the settings. On macOS X, it's in the system preference's General section and called Appearance (screenshot), and on Windows 10, it's in the Colors section and called Choose your color (screenshot). For Android Q, you can find it under Display as a Dark Theme toggle switch (screenshot), and on iOS 13, you can change the Appearance in the Display & Brightness section of the settings (screenshot).One last bit of theory before I get going. Media queries allow authors to test and query values or features of the user agent or display device, independent of the document being rendered. They are used in the CSS @media rule to conditionally apply styles to a document, and in various other contexts and languages, such as HTML and JavaScript. Media Queries Level 5 introduces so-called user preference media features, that is, a way for sites to detect the user's preferred way to display content.The prefers-color-scheme media feature is used to detect if the user has requested the page to use a light or dark color theme. It works with the following values:light: Indicates that the user has notified the system that they prefer a page that has a light theme (dark text on light background).dark: Indicates that the user has notified the system that they prefer a page that has a dark theme (light text on dark background).Supporting dark mode #Finding out if dark mode is supported by the browser #As dark mode is reported through a media query, you can easily check if the current browser supports dark mode by checking if the media query prefers-color-scheme matches at all. Note how I don't include any value, but purely check if the media query alone matches.if (window.matchMedia('(prefers-color-scheme)').media !== 'not all') {  console.log('🎉 Dark mode is supported');}At the time of writing, prefers-color-scheme is supported on both desktop and mobile (where available) by Chrome and Edge as of version 76, Firefox as of version 67, and Safari as of version 12.1 on macOS and as of version 13 on iOS. For all other browsers, you can check the Can I use support tables.Learning about a user's preferences at request time #The Sec-CH-Prefers-Color-Scheme client hint header allows sites to obtain the user's color scheme preferences optionally at request time, allowing servers to inline the right CSS and therefore avoid a flash of incorrect color theme.Dark mode in practice #Let's finally see how supporting dark mode looks like in practice. Just like with the Highlander, with dark mode there can be only one: dark or light, but never both! Why do I mention this? Because this fact should have an impact on the loading strategy. Please don't force users to download CSS in the critical rendering path that is for a mode they don't currently use. To optimize load speed, I have therefore split my CSS for the example app that shows the following recommendations in practice into three parts in order to defer non-critical CSS:style.css that contains generic rules that are used universally on the site.dark.css that contains only the rules needed for dark mode.light.css that contains only the rules needed for light mode.Loading strategy #The two latter ones, light.css and dark.css, are loaded conditionally with a <link media> query. Initially, not all browsers will support prefers-color-scheme (detectable using the pattern above), which I deal with dynamically by loading the default light.css file via a conditionally inserted <link rel=\"stylesheet\"> element in a minuscule inline script (light is an arbitrary choice, I could also have made dark the default fallback experience). To avoid a flash of unstyled content, I hide the content of the page until light.css has loaded.<script>  // If `prefers-color-scheme` is not supported, fall back to light mode.  // In this case, light.css will be downloaded with `highest` priority.  if (window.matchMedia('(prefers-color-scheme: dark)').media === 'not all') {    document.documentElement.style.display = 'none';    document.head.insertAdjacentHTML(      'beforeend',      '<link rel=\"stylesheet\" href=\"/light.css\" onload=\"document.documentElement.style.display = \\'\\'\">',    );  }</script><!--  Conditionally either load the light or the dark stylesheet. The matching file  will be downloaded with `highest`, the non-matching file with `lowest`  priority. If the browser doesn't support `prefers-color-scheme`, the media  query is unknown and the files are downloaded with `lowest` priority (but  above I already force `highest` priority for my default light experience).--><link rel=\"stylesheet\" href=\"/dark.css\" media=\"(prefers-color-scheme: dark)\" /><link  rel=\"stylesheet\"  href=\"/light.css\"  media=\"(prefers-color-scheme: light)\"/><!-- The main stylesheet --><link rel=\"stylesheet\" href=\"/style.css\" />Stylesheet architecture #I make maximum use of CSS variables, this allows my generic style.css to be, well, generic, and all the light or dark mode customization happens in the two other files dark.css and light.css. Below you can see an excerpt of the actual styles, but it should suffice to convey the overall idea. I declare two variables, -⁠-⁠color and -⁠-⁠background-color that essentially create a dark-on-light and a light-on-dark baseline theme./* light.css: 👉 dark-on-light */:root {  --color: rgb(5, 5, 5);  --background-color: rgb(250, 250, 250);}/* dark.css: 👉 light-on-dark */:root {  --color: rgb(250, 250, 250);  --background-color: rgb(5, 5, 5);}In my style.css, I then use these variables in the body { … } rule. As they are defined on the :root CSS pseudo-class—a selector that in HTML represents the <html> element and is identical to the selector html, except that its specificity is higher—they cascade down, which serves me for declaring global CSS variables./* style.css */:root {  color-scheme: light dark;}body {  color: var(--color);  background-color: var(--background-color);}In the code sample above, you will probably have noticed a property color-scheme with the space-separated value light dark.This tells the browser which color themes my app supports and allows it to activate special variants of the user agent stylesheet, which is useful to, for example, let the browser render form fields with a dark background and light text, adjust the scroll bars, or to enable a theme-aware highlight color. The exact details of color-scheme are specified in CSS Color Adjustment Module Level 1.Everything else is then just a matter of defining CSS variables for things that matter on my site. Semantically organizing styles helps a lot when working with dark mode. For example, rather than -⁠-⁠highlight-yellow, consider calling the variable -⁠-⁠accent-color, as \"yellow\" may actually not be yellow in dark mode or vice versa. Below is an example of some more variables that I use in my example./* dark.css */:root {  --color: rgb(250, 250, 250);  --background-color: rgb(5, 5, 5);  --link-color: rgb(0, 188, 212);  --main-headline-color: rgb(233, 30, 99);  --accent-background-color: rgb(0, 188, 212);  --accent-color: rgb(5, 5, 5);}/* light.css */:root {  --color: rgb(5, 5, 5);  --background-color: rgb(250, 250, 250);  --link-color: rgb(0, 0, 238);  --main-headline-color: rgb(0, 0, 192);  --accent-background-color: rgb(0, 0, 238);  --accent-color: rgb(250, 250, 250);}Full example #In the following Glitch embed, you can see the complete example that puts the concepts from above into practice. Try toggling dark mode in your particular operating system's settings and see how the page reacts.Loading impact #When you play with this example, you can see why I load my dark.css and light.css via media queries. Try toggling dark mode and reload the page: the particular currently non-matching stylesheets are still loaded, but with the lowest priority, so that they never compete with resources that are needed by the site right now.Site in light mode loads the dark mode CSS with lowest priority.Site in dark mode loads the light mode CSS with lowest priority.Site in default light mode on a browser that doesn't support prefers-color-scheme loads the dark mode CSS with lowest priority.Reacting on dark mode changes #Like any other media query change, dark mode changes can be subscribed to via JavaScript. You can use this to, for example, dynamically change the favicon of a page or change the <meta name=\"theme-color\"> that determines the color of the URL bar in Chrome. The full example above shows this in action, in order to see the theme color and favicon changes, open the demo in a separate tab.const darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');darkModeMediaQuery.addListener((e) => {  const darkModeOn = e.matches;  console.log(`Dark mode is ${darkModeOn ? '🌒 on' : '☀️ off'}.`);});As of Chromium 93 and Safari 15, you can adjust the color based on a media query with the media attribute of the meta theme color element. The first one that matches will be picked. For example, you could have one color for light mode and another one for dark mode. At the time of writing, you can't define those in your manifest. See w3c/manifest#975 GitHub issue.<meta  name=\"theme-color\"  media=\"(prefers-color-scheme: light)\"  content=\"white\"/><meta name=\"theme-color\" media=\"(prefers-color-scheme: dark)\" content=\"black\" />Debugging and testing dark mode #Emulating prefers-color-scheme in DevTools #Switching the entire operating system's color scheme can get annoying real quick, so Chrome DevTools now allows you to emulate the user's preferred color scheme in a way that only affects the currently visible tab. Open the Command Menu, start typing Rendering, run the Show Rendering command, and then change the Emulate CSS media feature prefers-color-scheme option.Screenshotting prefers-color-scheme with Puppeteer #Puppeteer is a Node.js library that provides a high-level API to control Chrome or Chromium over the DevTools Protocol. With dark-mode-screenshot, we provide a Puppeteer script that lets you create screenshots of your pages in both dark and light mode. You can run this script as a one-off, or alternatively make it part of your Continuous Integration (CI) test suite.npx dark-mode-screenshot --url https://googlechromelabs.github.io/dark-mode-toggle/demo/ --output screenshot --fullPage --pause 750Dark mode best practices #Avoid pure white #A small detail you may have noticed is that I don't use pure white. Instead, to prevent glowing and bleeding against the surrounding dark content, I choose a slightly darker white. Something like rgb(250, 250, 250) works well.Re-colorize and darken photographic images #If you compare the two screenshots below, you will notice that not only the core theme has changed from dark-on-light to light-on-dark, but that also the hero image looks slightly different. My user research has shown that the majority of the surveyed people prefer slightly less vibrant and brilliant images when dark mode is active. I refer to this as re-colorization.Re-colorization can be achieved through a CSS filter on my images. I use a CSS selector that matches all images that don't have .svg in their URL, the idea being that I can give vector graphics (icons) a different re-colorization treatment than my images (photos), more about this in the next paragraph. Note how I again use a CSS variable, so I can later on flexibly change my filter.As re-colorization is only needed in dark mode, that is, when dark.css is active, there are no corresponding rules in light.css./* dark.css */--image-filter: grayscale(50%);img:not([src*='.svg']) {  filter: var(--image-filter);}Customizing dark mode re-colorization intensities with JavaScript #Not everyone is the same and people have different dark mode needs. By sticking to the re-colorization method described above, I can easily make the grayscale intensity a user preference that I can change via JavaScript, and by setting a value of 0%, I can also disable re-colorization completely. Note that document.documentElement provides a reference to the root element of the document, that is, the same element I can reference with the :root CSS pseudo-class.const filter = 'grayscale(70%)';document.documentElement.style.setProperty('--image-filter', value);Invert vector graphics and icons #For vector graphics—that in my case are used as icons that I reference via <img> elements—I use a different re-colorization method. While research has shown that people don't like inversion for photos, it does work very well for most icons. Again I use CSS variables to determine the inversion amount in the regular and in the :hover state.Note how again I only invert icons in dark.css but not in light.css, and how :hover gets a different inversion intensity in the two cases to make the icon appear slightly darker or slightly brighter, dependent on the mode the user has selected./* dark.css */--icon-filter: invert(100%);--icon-filter_hover: invert(40%);img[src*='.svg'] {  filter: var(--icon-filter);}/* light.css */--icon-filter_hover: invert(60%);/* style.css */img[src*='.svg']:hover {  filter: var(--icon-filter_hover);}Use currentColor for inline SVGs #For inline SVG images, instead of using inversion filters, you can leverage the currentColor CSS keyword that represents the value of an element's color property. This lets you use the color value on properties that do not receive it by default. Conveniently, if currentColor is used as the value of the SVG fill or stroke attributes, it instead takes its value from the inherited value of the color property. Even better: this also works for <svg><use href=\"…\"></svg>, so you can have separate resources and currentColor will still be applied in context. Please note that this only works for inline or <use href=\"…\"> SVGs, but not SVGs that are referenced as the src of an image or somehow via CSS. You can see this applied in the demo below.<!-- Some inline SVG --><svg xmlns=\"http://www.w3.org/2000/svg\"    stroke=\"currentColor\">  […]</svg>Smooth transitions between modes #Switching from dark mode to light mode or vice versa can be smoothed thanks to the fact that both color and background-color are animatable CSS properties. Creating the animation is as easy as declaring two transitions for the two properties. The example below illustrates the overall idea, you can experience it live in the demo.body {  --duration: 0.5s;  --timing: ease;  color: var(--color);  background-color: var(--background-color);  transition: color var(--duration) var(--timing), background-color var(        --duration      ) var(--timing);}Art direction with dark mode #While for loading performance reasons in general I recommend to exclusively work with prefers-color-scheme in the media attribute of <link> elements (rather than inline in stylesheets), there are situations where you actually may want to work with prefers-color-scheme directly inline in your HTML code. Art direction is such a situation. On the web, art direction deals with the overall visual appearance of a page and how it communicates visually, stimulates moods, contrasts features, and psychologically appeals to a target audience.With dark mode, it's up to the judgment of the designer to decide what is the best image at a particular mode and whether re-colorization of images is maybe not good enough. If used with the <picture> element, the <source> of the image to be shown can be made dependent on the media attribute. In the example below, I show the Western hemisphere for dark mode, and the Eastern hemisphere for light mode or when no preference is given, defaulting to the Eastern hemisphere in all other cases. This is of course purely for illustrative purposes. Toggle dark mode on your device to see the difference.<picture>  <source srcset=\"western.webp\" media=\"(prefers-color-scheme: dark)\" />  <source srcset=\"eastern.webp\" media=\"(prefers-color-scheme: light)\" />  <img src=\"eastern.webp\" /></picture>Dark mode, but add an opt-out #As mentioned in the why dark mode section above, dark mode is an aesthetic choice for most users. In consequence, some users may actually like to have their operating system UI in dark, but still prefer to see their webpages the way they are used to seeing them. A great pattern is to initially adhere to the signal the browser sends through prefers-color-scheme, but to then optionally allow users to override their system-level setting.The <dark-mode-toggle> custom element #You can of course create the code for this yourself, but you can also just use a ready-made custom element (web component) that I have created right for this purpose. It's called <dark-mode-toggle> and it adds a toggle (dark mode: on/off) or a theme switcher (theme: light/dark) to your page that you can fully customize. The demo below shows the element in action (oh, and I have also 🤫 silently snuck it in all of the other examples above).<dark-mode-toggle  legend=\"Theme Switcher\"  appearance=\"switch\"  dark=\"Dark\"  light=\"Light\"  remember=\"Remember this\"></dark-mode-toggle>Try clicking or tapping the dark mode controls in the upper right corner in the demo below. If you check the checkbox in the third and the fourth control, see how your mode selection is remembered even when you reload the page. This allows your visitors to keep their operating system in dark mode, but enjoy your site in light mode or vice versa.Conclusions #Working with and supporting dark mode is fun and opens up new design avenues. For some of your visitors it can be the difference between not being able to handle your site and being a happy user. There are some pitfalls and careful testing is definitely required, but dark mode is definitely a great opportunity for you to show that you care about all of your users. The best practices mentioned in this post and helpers like the <dark-mode-toggle> custom element should make you confident in your ability to create an amazing dark mode experience. Let me know on Twitter what you create and if this post was useful or also suggestions for improving it. Thanks for reading! 🌒Resources for the prefers-color-scheme media query:Chrome Platform Status pageChromium bugMedia Queries Level 5 specResources for the color-scheme meta tag and CSS property:The color-scheme CSS property and meta tagChrome Platform Status pageChromium bugCSS Color Adjustment Module Level 1 specCSS WG GitHub Issue for the meta tag and the CSS propertyHTML WHATWG GitHub Issue for the meta tagGeneral dark mode links:Material Design—Dark ThemeDark Mode in Web InspectorDark Mode Support in WebKitApple Human Interface Guidelines—Dark ModeBackground research articles for this post:What Does Dark Mode's \"supported-color-schemes\" Actually Do? 🤔Let there be darkness! 🌚 Maybe…Re-Colorization for Dark ModeAcknowledgements #The prefers-color-scheme media feature, the color-scheme CSS property, and the related meta tag are the implementation work of 👏 Rune Lillesveen. Rune is also a co-editor of the CSS Color Adjustment Module Level 1 spec. I would like to 🙏 thank Lukasz Zbylut, Rowan Merewood, Chirag Desai, and Rob Dodson for their thorough reviews of this article. The loading strategy is the brainchild of Jake Archibald. Emilio Cobos Álvarez has pointed me to the correct prefers-color-scheme detection method. The tip with referenced SVGs and currentColor came from Timothy Hatcher. Finally, I am thankful to the many anonymous participants of the various user studies that have helped shape the recommendations in this article. Hero image by Nathan Anderson.Last updated: Aug 2, 2020 — Improve article Return to all articles","length":24706,"excerpt":"Many devices now support an operating system wide dark mode or dark theme experience. This post explains how dark mode can be supported on web pages, lists best practices, and introduces a custom element named dark-mode-toggle that allows web developers to offer users a way to override their operating system level preference on specific web pages.","byline":"Thomas SteinerTwitter GitHub Glitch Homepage","dir":null,"siteName":"web.dev"},"finalizedMeta":{"title":"prefers-color-scheme: Hello darkness, my old friend","description":"Many devices now support an operating system wide dark mode or dark theme experience. This post explains how dark mode can be supported on web pages, lists best practices, and introduces a custom element named dark-mode-toggle that allows web developers to offer users a way to override their operating system level preference on specific web pages. ","author":false,"creator":"","publisher":false,"date":"2022-03-07T01:04:06.926Z","topics":[]},"jsonLd":{"@type":false,"headline":false,"description":false,"image":[],"mainEntityOfPage":{"@type":false,"@id":false},"datePublished":false,"dateModified":false,"isAccessibleForFree":false,"isPartOf":{"@type":[],"name":false,"productID":false},"discussionUrl":false,"license":false,"author":{"@type":false,"name":false,"description":false,"sameAs":false,"image":{"@type":false,"url":false},"givenName":false,"familyName":false,"alternateName":false,"publishingPrinciples":false},"publisher":{"@type":false,"name":false,"description":false,"sameAs":false,"logo":{"@type":false,"url":false},"publishingPrinciples":false},"editor":{"@type":false,"name":false,"description":false,"sameAs":false,"image":{"@type":false,"url":false},"givenName":false,"familyName":false,"alternateName":false,"publishingPrinciples":false}},"twitterObj":false,"status":200,"metadata":{"author":false,"title":"prefers-color-scheme: Hello darkness, my old friend","description":"Many devices now support an operating system wide dark mode or dark theme experience. This post explains how dark mode can be supported on web pages, lists best practices, and introduces a custom element named dark-mode-toggle that allows web developers to offer users a way to override their operating system level preference on specific web pages. ","canonical":"https://web.dev/prefers-color-scheme/","keywords":[],"image":"https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format","firstParagraph":"Overhyped or necessity? Learn everything about dark mode and how to support it to the benefit of your users!"},"dublinCore":{},"opengraph":{"title":"prefers-color-scheme: Hello darkness, my old friend","description":"Many devices now support an operating system wide dark mode or dark theme experience. This post explains how dark mode can be supported on web pages, lists best practices, and introduces a custom element named dark-mode-toggle that allows web developers to offer users a way to override their operating system level preference on specific web pages. ","url":"https://web.dev/prefers-color-scheme/","site_name":"web.dev","locale":"en_US","type":"article","typeObject":{"published_time":false,"modified_time":false,"author":false,"publisher":false,"section":false,"tag":[]},"image":"https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&fit=max&w=1200&fm=auto","image:alt":"Silhouette photo of a mountain during nighttime, photo by Nathan Anderson on Unsplash. "},"twitter":{"site":false,"description":"Many devices now support an operating system wide dark mode or dark theme experience. This post explains how dark mode can be supported on web pages, lists best practices, and introduces a custom element named dark-mode-toggle that allows web developers to offer users a way to override their operating system level preference on specific web pages. ","card":"summary_large_image","creator":false,"title":"prefers-color-scheme: Hello darkness, my old friend","image":"https://web-dev.imgix.net/image/admin/dgDcIJUyuWB5xNn9CODd.jpg?auto=format&fit=max&w=1200&fm=auto"},"archivedData":{"link":"https://web.archive.org/web/20220307010412/https://web.dev/prefers-color-scheme/","wayback":"https://web.archive.org/web/20220307010412/https://web.dev/prefers-color-scheme/"}}}