<!doctype html>
    <html lang="en-US" id="template-post" class="base">
        <head>
        
        <script defer data-domain="fightwithtools.dev" src="https://plausible.io/js/plausible.js"></script>
        <link rel="alternate" type="application/rss+xml" title="Fight With Tools: A Dev Blog RSS" href="https://fightwithtools.dev/rss/" />
    	<link rel="alternate" type="application/atom+xml" title="Fight With Tools: A Dev Blog Feed" href="https://fightwithtools.dev/feed/" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Day 16: Embeds and Archive Pages</title>
        
            <!-- Sub Template: post -->
        
        
            <link rel="preload" as="font">
            <link href="https://fightwithtools.dev/assets/prism-okaidia.css" rel="preload" as="style" />
            <link href="https://fightwithtools.dev/assets/prism-okaidia.css" rel="stylesheet" />
            <!-- <link rel="stylesheet" href="https://fightwithtools.dev/assets/css/style.css?v=3024442985" /> -->
            <link rel="stylesheet" href="https://fightwithtools.dev/assets/css/style.css?v=3024442985" id=""></link>

            
                <!-- <link rel="stylesheet" href="https://fightwithtools.dev/assets/css/template-post.css?v=3024442985" /> -->
                <link rel="stylesheet" href="https://fightwithtools.dev/assets/css/template-post.css?v=3024442985" id=""></link>

            
            <!-- Build Revision: 3024442985 & Sha: 3a30cf9d663689abf83e7a14a4d0d07ee17b2fad -->
            <script src="https://fightwithtools.dev/assets/js/scale.fix.js" async></script>
            <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
            <!--[if lt IE 9]>
                <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
            <![endif]-->
        
        
            <!-- The Author meta propagates the byline in a number of social networks -->
<meta name="author" content="Aram Zucker-Scharff" />

<meta property="og:title"
    content="Day 16: Embeds and Archive Pages">

<meta property="og:description"
    content="I want to get the data set up in an HTML block a user can style">


<meta property="og:url"
    content="https://fightwithtools.dev/posts/projects/context-pages/day-16/" />

<meta property="og:site_name" content="Fight With Tools: A Dev Blog" />

<meta property="og:locale" content="en_US" />

<meta name="twitter:site" content="@chronotope" />

<meta name="twitter:description" content="I want to get the data set up in an HTML block a user can style" />

<meta name="description" content="I want to get the data set up in an HTML block a user can style">

<!-- I prefer the summary_large_image Twitter card for posts. -->
<meta name="twitter:card" content="summary_large_image" />
<!-- You, you're the creator. -->
<meta name="twitter:creator" content="@chronotope" />
<!-- This property is for the article title, not site title. -->
<meta name="twitter:title" content="Day 16: Embeds and Archive Pages" />



<meta property="og:image" content="https://fightwithtools.dev/img/radial_crosshair.jpg" />
<meta name="twitter:image" content="https://fightwithtools.dev/img/radial_crosshair.jpg" />




    <!-- Article specific OG data -->
    <!-- The OG:Type dictates a number of other tags on posts. -->
    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="Tue, 22 Feb 2022 02:59:43 GMT" />

    <!-- page.modified isn't a natural Jekyll property, but it can be added. -->
    

    <!-- Here my author and publisher tags are the same (yay self-publishing) -->
    <meta property="article:author" content="http://facebook.com/aramzs" />
    <!-- But if your site has its own page, this is where to put it. -->
    <meta property="article:publisher" content="https://www.facebook.com/aramzs" />

    
    <!-- Article section isn't a required property, but it can be good to have -->
    <meta property="article:section" content="Context Pages" />
    

    
        <!-- I use the page.categories property for OG tags. -->
        
        <meta property="article:tag" content="posts" />
        
        <meta property="article:tag" content="projects" />
        
        <meta property="article:tag" content="Node" />
        
        <meta property="article:tag" content="WiP" />
        
        <meta property="article:tag" content="archiving" />
        
        <meta property="article:tag" content="embeds" />
        
        <meta property="article:tag" content="Twitter" />
        
        <meta name="keywords" content="posts, projects, Node, WiP, archiving, embeds, Twitter">
    



            <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "Blog",
        "url": "https://fightwithtools.dev/posts/projects/context-pages/day-16/",
        "headline": "Day 16: Embeds and Archive Pages",
        "about": "I want to get the data set up in an HTML block a user can style",
        "image": [
            "https://41.media.tumblr.com/709bb3c371b9924add351bfe3386e946/tumblr_nxdq8uFdx81qzocgko1_1280.jpg"
        ],
        "isAccessibleForFree": "True",
        "isPartOf": {
            "@type": ["CreativeWork", "Product"],
            "name": "Fight With Tools",
            "productID": "fightwithtools.dev"
        },
        "discussionUrl": "https://twitter.com/search?q=to%3AChronotope%20%23dev&src=typed_query&f=top",
        "author": {
    "@type": "Person",
    "name": {
        "@type": "PronounceableText",
        "inLanguage": "en-US",
        "textValue": "Aram Zucker-Scharff",
        "speechToTextMarkup": "IPA",
        "phoneticText": "/ˌæ.ɹəm ˈt͡sʊ.kɚ 'ʃɑɹf/"
    },
    "description": "Aram Zucker-Scharff is Lead Privacy Engineer at The Washington Post, lead dev for PressForward and a consultant. Tech solutions for journo problems.",
    "disambiguatingDescription": "A media-focused developer and strategist.",
    "sameAs": "http://aramzs.github.io/aramzs/",
    "image": {
        "@type": "ImageObject",
        "url": "https://raw.githubusercontent.com/AramZS/aramzs.github.io/master/_includes/Aram-Zucker-Scharff-square.jpg"
    },
    "givenName": "Aram",
    "familyName": "Zucker-Scharff",
    "alternateName": "AramZS",
    "publishingPrinciples": "http://aramzs.github.io/about/"
}, 
        "editor": {
    "@type": "Person",
    "name": {
        "@type": "PronounceableText",
        "inLanguage": "en-US",
        "textValue": "Aram Zucker-Scharff",
        "speechToTextMarkup": "IPA",
        "phoneticText": "/ˌæ.ɹəm ˈt͡sʊ.kɚ 'ʃɑɹf/"
    },
    "description": "Aram Zucker-Scharff is Lead Privacy Engineer at The Washington Post, lead dev for PressForward and a consultant. Tech solutions for journo problems.",
    "disambiguatingDescription": "A media-focused developer and strategist.",
    "sameAs": "http://aramzs.github.io/aramzs/",
    "image": {
        "@type": "ImageObject",
        "url": "https://raw.githubusercontent.com/AramZS/aramzs.github.io/master/_includes/Aram-Zucker-Scharff-square.jpg"
    },
    "givenName": "Aram",
    "familyName": "Zucker-Scharff",
    "alternateName": "AramZS",
    "publishingPrinciples": "http://aramzs.github.io/about/"
},
        "inLanguage": "en-US",
        "license": "http://creativecommons.org/licenses/by-sa/4.0/",
        "additionalType": "CreativeWork",
        "alternateName": "Fight With Tools Dev",
        "publisher": {
            "@type": "Organization",
            "name": "Fight With Tools",
            "description": "A site discussing how to imagine, build, analyze and use cool code and web tools. Better websites, better stories, better developers. Technology won't save the world, but you can.",
            "sameAs": "https://fightwithtools.dev/",
            "logo": {
                "@type": "ImageObject",
                "url": "https://41.media.tumblr.com/709bb3c371b9924add351bfe3386e946/tumblr_nxdq8uFdx81qzocgko1_1280.jpg"
            },
            "publishingPrinciples": "http://aramzs.github.io/about/"
        }
    }
</script>

        
        
        
<link rel="canonical" href="https://fightwithtools.dev/posts/projects/context-pages/day-16/" />

        </head>
        <body itemscope itemtype="https://schema.org/Blog">
            <div class="wrapper">
                <header>
                    
                        
                            <div id="site-name-subhead">
                                <a href="https://fightwithtools.dev">Fight With Tools: A Dev Blog</a>
                                
                                    > <a id="project-link" href="https://fightwithtools.dev/projects/context-pages">Context Pages</a>
                                
                            </div>
                        
                        
                            <!-- post mode -->
                            <time>Tue Feb 22 2022</time>
                            <!-- front matter dates made in format at https://yaml.org/type/timestamp.html -->
                        
                        
                            <!-- projects mode -->
                        
                        <h1 class="header">
                            Day 16: Embeds and Archive Pages
                        </h1>
                        
                        
                    
                    
    <h5 itemprop="author" itemscope itemtype="https://schema.org/Person">
    <link itemprop="sameAs" href="http://aramzs.github.io/aramzs/" />
    By <span itemprop="name">Aram Zucker-Scharff</span>
</h5>

                </header>
                <main>
                    
    <section id="precontent">
        <aside id="toc-container">
            <div id="toc-container__inner">
                <h2>Contents</h2>
                <nav class="toc">
        <ol><li><a href="#project-scope-and-todos">Project Scope and ToDos</a></li><li><a href="#day-16">Day 16</a></li></ol></nav>
            </div>
        </aside>
        <div id="post-description">I want to get the data set up in an HTML block a user can style</div>

        

    </section>

                    <section id="maincontent" class="maincontent">
                    
                        <h2 id="project-scope-and-todos" tabindex="-1">Project Scope and ToDos</h2>
<ol>
<li>Take a link and turn it into an oEmbed/Open Graph style share card</li>
<li>Take a link and archive it in the most reliable way</li>
<li>When the link is a tweet, display the tweet but also the whole tweet thread.</li>
<li>When the link is a tweet, archive the tweets, and display them if the live ones are not available.</li>
<li>Capture any embedded retweets in the thread. Capture their thread if one exists</li>
<li>Capture any links in the Tweet</li>
<li>Create the process as an abstract function that returns the data in a savable way</li>
</ol>
<ul class="task-list">
<li class="task-list-item"><input disabled="true" type="checkbox" checked="true" class="markdown-todo"></input> Archive links on <a href="http://Archive.org" target="_blank">Archive.org</a> and save the resulting archival links</li>
<li class="task-list-item"><input disabled="true" type="checkbox" checked="true" class="markdown-todo"></input> Create link IDs that can be used to cache related content</li>
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo"></input> Integrate it into the site to be able to make context pages here.</li>
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo"></input> Check if a link is still available at build time and rebuild the block with links to an archived link</li>
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo"></input> Use v1 Twitter API to get Gifs and videos</li>
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo"></input> Pull Twitter images into Eleventy archive.</li>
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo"></input> Add YouTube DL tool.</li>
<li class="task-list-item"><input disabled="true" type="checkbox" class="markdown-todo"></input> Use <a href="https://github.com/oduwsdl/archivenow" target="_blank">https://github.com/oduwsdl/archivenow</a>?</li>
</ul>
<h2 id="day-16" tabindex="-1">Day 16</h2>
<p>Ok, so I wasn't actively logging the last two days of work because a lot of it was random fiddles that I didn't think would take very long and a bunch of playing around with styling. But it all turned out to take a lot longer than I thought, and ended up more complicated.</p>
<p>First I decided to make a more complex take on the embed HTML based on some stuff I learned from work. Specifically, I decided I wanted to more strongly encapsulate the styles based on <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements" target="_blank">custom</a> <a href="https://developers.google.com/web/fundamentals/web-components/customelements" target="_blank">HTML elements</a> and the <a href="https://developers.google.com/web/fundamentals/web-components/shadowdom" target="_blank">shadow</a> <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM" target="_blank">DOM</a>.</p>
<p>I played around a bunch in Glitch with HTML and styles to form the embed design I want for non-oEmbed cards.</p>
<p>I've ended up with the HTML (here filled with sample data):</p>
<p class="skip-link-graf">
<a href="#code-skip-day-16-5" id="skip-to-code-skip-day-16-5" class="skip-link">Skip code block ▼</a></p>
<pre class="language-html"><code class="language-html">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contexter-box</span><br>      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>contexter-box<span class="token punctuation">"</span></span><br>      <span class="token attr-name">itemscope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><br>      <span class="token attr-name">itemtype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://schema.org/CreativeWork<span class="token punctuation">"</span></span><br>      <span class="token punctuation">></span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contexter-thumbnail</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>contexter-box__thumbnail<span class="token punctuation">"</span></span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>thumbnail<span class="token punctuation">"</span></span><br>        <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span><br>          <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://github.com/AramZS/aramzs.github.io/blob/master/_includes/beamdown.gif?raw=true<span class="token punctuation">"</span></span><br>          <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><br>          <span class="token attr-name">itemprop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contexter-thumbnail</span><br>      <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contexter-box-head</span><br>        <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span><br>        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>contexter-box__head<span class="token punctuation">"</span></span><br>        <span class="token attr-name">itemprop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>headline<span class="token punctuation">"</span></span><br>        <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contexter-box-head</span><br>          <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span><br>          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>contexter-box__head<span class="token punctuation">"</span></span><br>          <span class="token attr-name">itemprop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>headline<span class="token punctuation">"</span></span><br>          <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><br>            <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>contexter-link<span class="token punctuation">"</span></span><br>            <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://aramzs.github.io/jekyll/schema-dot-org/2018/04/27/how-to-make-your-jekyll-site-structured.html<span class="token punctuation">"</span></span><br>            <span class="token attr-name">itemprop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span><br>            <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><br>            <span class="token punctuation">></span></span>How to give your Jekyll Site Structured Data for Search with<br>            JSON-LD<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><br>          <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contexter-box-head</span><br>        <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contexter-box-head</span><br>      <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contexter-byline</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>contexter-box__byline<span class="token punctuation">"</span></span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>author<span class="token punctuation">"</span></span><br>        <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>p-name byline<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>author<span class="token punctuation">"</span></span> <span class="token attr-name">itemprop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>author<span class="token punctuation">"</span></span><br>          <span class="token punctuation">></span></span>Aram Zucker-Scharff<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><br>        <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contexter-byline</span><br>      <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>time</span><br>        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dt-published published<span class="token punctuation">"</span></span><br>        <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>time<span class="token punctuation">"</span></span><br>        <span class="token attr-name">itemprop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>datePublished<span class="token punctuation">"</span></span><br>        <span class="token attr-name">datetime</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2018-04-27T22:00:51.000Z<span class="token punctuation">"</span></span><br>        <span class="token punctuation">></span></span>3/27/2018<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>time</span><br>      <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contexter-summary</span><br>        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>p-summary entry-summary<span class="token punctuation">"</span></span><br>        <span class="token attr-name">itemprop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>abstract<span class="token punctuation">"</span></span><br>        <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>summary<span class="token punctuation">"</span></span><br>        <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><br>          Let's make your Jekyll site work with Schema.org structured data and<br>          JSON-LD.<br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contexter-summary</span><br>      <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>contexter-keywordset</span><br>        <span class="token attr-name">itemprop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>keywords<span class="token punctuation">"</span></span><br>        <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>keywords<span class="token punctuation">"</span></span><br>        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>contexter-box__keywordset<span class="token punctuation">"</span></span><br>        <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>category tag<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>p-category<span class="token punctuation">"</span></span> <span class="token attr-name">itemprop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>keywords<span class="token punctuation">"</span></span><br>          <span class="token punctuation">></span></span>jekyll<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><br>        <span class="token punctuation">></span></span>,<br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>category tag<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>p-category<span class="token punctuation">"</span></span> <span class="token attr-name">itemprop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>keywords<span class="token punctuation">"</span></span><br>          <span class="token punctuation">></span></span>schema-dot-org<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><br>        <span class="token punctuation">></span></span>,<br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>category tag<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>p-category<span class="token punctuation">"</span></span> <span class="token attr-name">itemprop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>keywords<span class="token punctuation">"</span></span><br>          <span class="token punctuation">></span></span>Code<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><br>        <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contexter-keywordset</span><br>      <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><br>          <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://web.archive.org/web/20220219224214/https://aramzs.github.io/jekyll/schema-dot-org/2018/04/27/how-to-make-your-jekyll-site-structured.html<span class="token punctuation">"</span></span><br>          <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>contexter-link<span class="token punctuation">"</span></span><br>          <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><br>          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>read-link archive-link<span class="token punctuation">"</span></span><br>          <span class="token attr-name">itemprop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>archivedAt<span class="token punctuation">"</span></span><br>             <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>archive-link<span class="token punctuation">"</span></span><br>          <span class="token punctuation">></span></span>Archived<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><br>        <span class="token punctuation">></span></span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span>|<span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><br>          <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>contexter-link<span class="token punctuation">"</span></span><br>          <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://aramzs.github.io/jekyll/schema-dot-org/2018/04/27/how-to-make-your-jekyll-site-structured.html<span class="token punctuation">"</span></span><br>          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>read-link main-link<span class="token punctuation">"</span></span><br>          <span class="token attr-name">itemprop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sameAs<span class="token punctuation">"</span></span><br>          <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><br>            <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>read-link<span class="token punctuation">"</span></span><br>          <span class="token punctuation">></span></span>Read<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><br>        <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>contexter-box</span><br>    <span class="token punctuation">></span></span></code></pre>
<p id="code-skip-day-16-5">And to make that work, I'll have to insert the following Javascript to make the functionality run with custom HTML elements and add the shadow DOM:</p>
<p class="skip-link-graf">
<a href="#code-skip-day-16-4" id="skip-to-code-skip-day-16-4" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">		window<span class="token punctuation">.</span>contexterSetup <span class="token operator">=</span> window<span class="token punctuation">.</span>contexterSetup <span class="token operator">?</span> window<span class="token punctuation">.</span><span class="token function-variable function">contexterSetup</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			window<span class="token punctuation">.</span>contexterSetupComplete <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>		<span class="token keyword">class</span> <span class="token class-name">ContexterLink</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLAnchorElement</span> <span class="token punctuation">{</span><br>		<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token comment">// Always call super first in constructor</span><br>			<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>			<span class="token comment">// Element functionality written in here</span><br>		<span class="token punctuation">}</span><br>		<span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"target"</span><span class="token punctuation">,</span> <span class="token string">"_blank"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>		<span class="token punctuation">}</span><br>		<span class="token punctuation">}</span><br>		<span class="token comment">// https://stackoverflow.com/questions/70716734/custom-web-component-that-acts-like-a-link-anchor-tag</span><br>		customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">"contexter-link"</span><span class="token punctuation">,</span> ContexterLink<span class="token punctuation">,</span> <span class="token punctuation">{</span><br>		<span class="token keyword">extends</span><span class="token operator">:</span> <span class="token string">"a"</span><span class="token punctuation">,</span><br>		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>		customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><br>		<span class="token string">"contexter-inner"</span><span class="token punctuation">,</span><br>		<span class="token keyword">class</span> <span class="token class-name">extends</span> HTMLElement <span class="token punctuation">{</span><br>			<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token comment">// Always call super first in constructor</span><br>			<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			<span class="token comment">// Element functionality written in here</span><br>			<span class="token punctuation">}</span><br>			<span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><br>			<span class="token punctuation">}</span><br>			<span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"contexter-box__inner"</span><span class="token punctuation">;</span><br>			<span class="token punctuation">}</span><br>		<span class="token punctuation">}</span><br>		<span class="token punctuation">)</span><span class="token punctuation">;</span><br>		customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><br>		<span class="token string">"contexter-thumbnail"</span><span class="token punctuation">,</span><br>		<span class="token keyword">class</span> <span class="token class-name">extends</span> HTMLElement <span class="token punctuation">{</span><br>			<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token comment">// Always call super first in constructor</span><br>			<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			<span class="token comment">// Element functionality written in here</span><br>			<span class="token punctuation">}</span><br>			<span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><br>			<span class="token punctuation">}</span><br>			<span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"contexter-box__thumbnail"</span><span class="token punctuation">;</span><br>			<span class="token punctuation">}</span><br>		<span class="token punctuation">}</span><br>		<span class="token punctuation">)</span><span class="token punctuation">;</span><br>		customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><br>		<span class="token string">"contexter-byline"</span><span class="token punctuation">,</span><br>		<span class="token keyword">class</span> <span class="token class-name">extends</span> HTMLElement <span class="token punctuation">{</span><br>			<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token comment">// Always call super first in constructor</span><br>			<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			<span class="token comment">// Element functionality written in here</span><br>			<span class="token punctuation">}</span><br>			<span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><br>			<span class="token punctuation">}</span><br>			<span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"contexter-box__byline"</span><span class="token punctuation">;</span><br>			<span class="token punctuation">}</span><br>		<span class="token punctuation">}</span><br>		<span class="token punctuation">)</span><span class="token punctuation">;</span><br>		customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><br>		<span class="token string">"contexter-keywordset"</span><span class="token punctuation">,</span><br>		<span class="token keyword">class</span> <span class="token class-name">extends</span> HTMLElement <span class="token punctuation">{</span><br>			<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token comment">// Always call super first in constructor</span><br>			<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			<span class="token comment">// Element functionality written in here</span><br>			<span class="token punctuation">}</span><br>			<span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><br>			<span class="token punctuation">}</span><br>			<span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"contexter-box__keywordset"</span><span class="token punctuation">;</span><br>			<span class="token punctuation">}</span><br>		<span class="token punctuation">}</span><br>		<span class="token punctuation">)</span><span class="token punctuation">;</span><br>		customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><br>		<span class="token string">"contexter-linkset"</span><span class="token punctuation">,</span><br>		<span class="token keyword">class</span> <span class="token class-name">extends</span> HTMLElement <span class="token punctuation">{</span><br>			<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token comment">// Always call super first in constructor</span><br>			<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			<span class="token comment">// Element functionality written in here</span><br>			<span class="token punctuation">}</span><br>			<span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><br>			<span class="token punctuation">}</span><br>			<span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"contexter-box__linkset"</span><span class="token punctuation">;</span><br>			<span class="token punctuation">}</span><br>		<span class="token punctuation">}</span><br>		<span class="token punctuation">)</span><span class="token punctuation">;</span><br>		customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><br>		<span class="token string">"contexter-meta"</span><span class="token punctuation">,</span><br>		<span class="token keyword">class</span> <span class="token class-name">extends</span> HTMLElement <span class="token punctuation">{</span><br>			<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token comment">// Always call super first in constructor</span><br>			<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			<span class="token comment">// Element functionality written in here</span><br>			<span class="token punctuation">}</span><br>			<span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><br>			<span class="token punctuation">}</span><br>			<span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"contexter-box__meta"</span><span class="token punctuation">;</span><br>			<span class="token punctuation">}</span><br>		<span class="token punctuation">}</span><br>		<span class="token punctuation">)</span><span class="token punctuation">;</span><br>		customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><br>		<span class="token string">"contexter-summary"</span><span class="token punctuation">,</span><br>		<span class="token keyword">class</span> <span class="token class-name">extends</span> HTMLElement <span class="token punctuation">{</span><br>			<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token comment">// Always call super first in constructor</span><br>			<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			<span class="token comment">// Element functionality written in here</span><br>			<span class="token punctuation">}</span><br>			<span class="token function">attributeChangedCallback</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span> newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><br>			<span class="token punctuation">}</span><br>			<span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"p-summary entry-summary"</span><span class="token punctuation">;</span><br>			<span class="token punctuation">}</span><br>		<span class="token punctuation">}</span><br>		<span class="token punctuation">)</span><span class="token punctuation">;</span><br>		customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><br>		<span class="token string">"contexter-box-head"</span><span class="token punctuation">,</span><br>		<span class="token keyword">class</span> <span class="token class-name">extends</span> HTMLElement <span class="token punctuation">{</span><br>			<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token comment">// Always call super first in constructor</span><br>			<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>			<span class="token comment">// Element functionality written in here</span><br>			<span class="token punctuation">}</span><br>			<span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"contexter-box__head"</span><span class="token punctuation">;</span><br>			<span class="token punctuation">}</span><br>		<span class="token punctuation">}</span><br>		<span class="token punctuation">)</span><span class="token punctuation">;</span><br>		customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><br>		<span class="token string">"contexter-box-inner"</span><span class="token punctuation">,</span><br>		<span class="token keyword">class</span> <span class="token class-name">extends</span> HTMLElement <span class="token punctuation">{</span><br>			<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token comment">// Always call super first in constructor</span><br>			<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>			<span class="token comment">// Element functionality written in here</span><br>			<span class="token punctuation">}</span><br>			<span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token punctuation">}</span><br>		<span class="token punctuation">}</span><br>		<span class="token punctuation">)</span><span class="token punctuation">;</span><br>		<span class="token comment">// https://developers.google.com/web/fundamentals/web-components/best-practices</span><br>		<span class="token keyword">class</span> <span class="token class-name">ContexterBox</span> <span class="token keyword">extends</span> <span class="token class-name">HTMLElement</span> <span class="token punctuation">{</span><br>		<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token comment">// Always call super first in constructor</span><br>			<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			<span class="token keyword">this</span><span class="token punctuation">.</span>first <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>			<span class="token keyword">this</span><span class="token punctuation">.</span>shadow <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">attachShadow</span><span class="token punctuation">(</span><span class="token punctuation">{</span> mode<span class="token operator">:</span> <span class="token string">"open"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>		<span class="token punctuation">}</span><br>		<span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>first<span class="token punctuation">)</span><span class="token punctuation">{</span><br>			<span class="token keyword">this</span><span class="token punctuation">.</span>first <span class="token operator">=</span> <span class="token boolean">false</span><br>			<span class="token keyword">var</span> style <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"style"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			style<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>					:host {<br>						--background: #f5f6f7;<br>						--border: darkblue;<br>						--blue: #0000ee;<br>						--font-color: black;<br>						--inner-border: black;<br>						font-family: Franklin,Arial,Helvetica,sans-serif;<br>						font-size: 14px;<br>						background: var(--background);<br>						width: 600px;<br>						color: var(--font-color);<br>						min-height: 90px;<br>						display: block;<br>						padding: 8px;<br>						border: 1px solid var(--border);<br>						cursor: pointer;<br>						box-sizing: border-box;<br>						margin: 6px;<br>						contain: content;<br>					}<br><br>					// can only select top-level nodes with slotted<br>					::slotted(*) {<br>						max-width: 100%;<br>						display:block;<br>					}<br>					::slotted([slot=thumbnail]) {<br>						max-width: 100%;<br>						display:block;<br>					}<br>					::slotted([slot=header]) {<br>						width: 100%;<br>						font-size: 1.25rem;<br>						font-weight: bold;<br>						display:block;<br>						margin-bottom: 6px;<br>					}<br>					::slotted([slot=author]) {<br>						max-width: 50%;<br>						font-size: 12px;<br>						display:inline-block;<br>						float: left;<br>					}<br>					::slotted([slot=time]) {<br>						max-width: 50%;<br>						font-size: 12px;<br>						display:inline-block;<br>						float: right;<br>					}<br>					::slotted([slot=summary]) {<br>						width: 100%;<br>						margin-top: 6px;<br>						padding: 10px 2px;<br>						border-top: 1px solid var(--inner-border);<br>						font-size: 15px;<br>						display:inline-block;<br>						margin-bottom: 6px;<br>					}<br>					contexter-meta {<br>						height: auto;<br>						margin-bottom: 4px;<br>						width: 100%;<br>						display: grid;<br>						position: relative;<br>						min-height: 16px;<br>						grid-template-columns: repeat(2, 1fr);<br>					}<br>					::slotted([slot=keywords]) {<br>						width: 80%;<br>						padding: 2px 4px;<br>						border-top: 1px solid var(--inner-border);<br>						font-size: 11px;<br>						display: block;<br>						float: right;<br>						font-style: italic;<br>						text-align: right;<br>						grid-column: 2/2;<br>						grid-row: 1;<br>						align-self: end;<br>						justify-self: end;<br>					}<br>					::slotted([slot=archive-link]) {<br>						font-size: 1em;<br>						display: inline;<br>					}<br>					::slotted([slot=archive-link])::after {<br>						content: "|";<br>						display: inline;<br>						color: var(--font-color);<br>						text-decoration: none;<br>						margin: 0 .5em;<br>					}<br>					::slotted([slot=read-link]) {<br>						font-size: 1em;<br>						display: inline;<br>					}<br>					contexter-linkset {<br>						width: 80%;<br>						padding: 2px 4px;<br>						font-size: 13px;<br>						float: left;<br>						font-weight: bold;<br>						grid-row: 1;<br>						grid-column: 1/2;<br>						align-self: end;<br>						justify-self: start;<br>					}<br>					/* Extra small devices (phones, 600px and down) */<br>					@media only screen and (max-width: 600px) {<br>						:host {<br>						width: 310px;<br>						}<br>					}<br>					/* Small devices (portrait tablets and large phones, 600px and up) */<br>					@media only screen and (min-width: 600px) {...}<br>					/* Medium devices (landscape tablets, 768px and up) */<br>					@media only screen and (min-width: 768px) {...}<br>					/* Large devices (laptops/desktops, 992px and up) */<br>					@media only screen and (min-width: 992px) {...}<br>					/* Extra large devices (large laptops and desktops, 1200px and up) */<br>					@media only screen and (min-width: 1200px) {...}<br>					@media (prefers-color-scheme: dark){<br>						:host {<br>						--background: #354150;<br>						--border: #1f2b37;<br>						--blue: #55b0ff;<br>						--font-color: #ffffff;<br>						--inner-border: #787a7c;<br>						background: var(--background);<br>						border: 1px solid var(--border)<br>						}<br>					}<br>				</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>			<span class="token keyword">var</span> lightDomStyle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"style"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			lightDomStyle<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>					contexter-box {<br>						contain: content;<br>					}<br>					contexter-box .read-link {<br>						font-weight: bold;<br>					}<br>					contexter-box a {<br>						color: #0000ee;<br>					}<br>					contexter-box img {<br>						width: 100%;<br>						border: 0;<br>						padding: 0;<br>						margin: 0;<br>					}<br>					/* Extra small devices (phones, 600px and down) */<br>					@media only screen and (max-width: 600px) {...}<br>					/* Small devices (portrait tablets and large phones, 600px and up) */<br>					@media only screen and (min-width: 600px) {...}<br>					/* Medium devices (landscape tablets, 768px and up) */<br>					@media only screen and (min-width: 768px) {...}<br>					/* Large devices (laptops/desktops, 992px and up) */<br>					@media only screen and (min-width: 992px) {...}<br>					/* Extra large devices (large laptops and desktops, 1200px and up) */<br>					@media only screen and (min-width: 1200px) {...}<br>					@media (prefers-color-scheme: dark){<br>						contexter-box a {<br>						color: #55b0ff;<br>						}<br>					}<br>			</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br>			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>lightDomStyle<span class="token punctuation">)</span><span class="token punctuation">;</span><br>			<span class="token comment">//https://stackoverflow.com/questions/49678342/css-how-to-target-slotted-siblings-in-shadow-dom-root</span><br>			<span class="token keyword">this</span><span class="token punctuation">.</span>shadow<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>style<span class="token punctuation">)</span><span class="token punctuation">;</span><br>			<span class="token comment">// https://developers.google.com/web/fundamentals/web-components/shadowdom</span><br>			<span class="token comment">// https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_templates_and_slots</span><br>			<span class="token keyword">const</span> innerContainer <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"contexter-box-inner"</span><span class="token punctuation">)</span><br>			<span class="token keyword">this</span><span class="token punctuation">.</span>shadow<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>innerContainer<span class="token punctuation">)</span><br>			<span class="token comment">// https://javascript.info/slots-composition</span><br>			<span class="token keyword">const</span> innerSlotThumbnail <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'slot'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			innerSlotThumbnail<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"thumbnail"</span><br>			innerContainer<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>innerSlotThumbnail<span class="token punctuation">)</span><br>			<span class="token keyword">const</span> innerSlotHeader <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'slot'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			innerSlotHeader<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"header"</span><br>			innerContainer<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>innerSlotHeader<span class="token punctuation">)</span><br>			<span class="token keyword">const</span> innerSlotAuthor <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'slot'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			innerSlotAuthor<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"author"</span><br>			innerContainer<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>innerSlotAuthor<span class="token punctuation">)</span><br>			<span class="token keyword">const</span> innerSlotTime <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'slot'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			innerSlotTime<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"time"</span><br>			innerContainer<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>innerSlotTime<span class="token punctuation">)</span><br>			<span class="token keyword">const</span> innerSlotSummary <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'slot'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			innerSlotSummary<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"summary"</span><br>			innerContainer<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>innerSlotSummary<span class="token punctuation">)</span><br><br>			<span class="token keyword">const</span> metaContainer <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"contexter-meta"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			innerContainer<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>metaContainer<span class="token punctuation">)</span><br><br>			<span class="token keyword">const</span> innerSlotInfo <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'slot'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			innerSlotInfo<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"keywords"</span><br>			metaContainer<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>innerSlotInfo<span class="token punctuation">)</span><br><br>			<span class="token keyword">const</span> linkContainer <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"contexter-linkset"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			metaContainer<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>linkContainer<span class="token punctuation">)</span><br>			<span class="token keyword">const</span> innerSlotArchiveLink <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'slot'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			innerSlotArchiveLink<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"archive-link"</span><br>			linkContainer<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>innerSlotArchiveLink<span class="token punctuation">)</span><br>			<span class="token keyword">const</span> innerSlotReadLink <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'slot'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>			innerSlotReadLink<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"read-link"</span><br>			linkContainer<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>innerSlotReadLink<span class="token punctuation">)</span><br><br>			<span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">"contexter-box"</span><span class="token punctuation">;</span><br>			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>				<span class="token comment">// console.log('Click on block', this)</span><br>				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'read-link'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>className<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'title-link'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>				<span class="token keyword">const</span> mainLinks <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'a.main-link'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>				<span class="token comment">// console.log('mainLink', e, mainLinks)</span><br>				mainLinks<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>				<span class="token punctuation">}</span><br>			<span class="token punctuation">}</span><br>			<span class="token punctuation">}</span><br>		<span class="token punctuation">}</span><br>		<span class="token punctuation">}</span><br><br>		customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">"contexter-box"</span><span class="token punctuation">,</span> ContexterBox<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>contexterSetupComplete<span class="token punctuation">)</span><span class="token punctuation">{</span><br>	window<span class="token punctuation">.</span><span class="token function">contexterSetup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p id="code-skip-day-16-4">You can see here I've made the entire box clickable by capturing any clicks (not on the archive link) and routing them to the Read link</p>
<p class="skip-link-graf">
<a href="#code-skip-day-16-3" id="skip-to-code-skip-day-16-3" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript">	<span class="token keyword">const</span> mainLinks <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'a.main-link'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	mainLinks<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<p id="code-skip-day-16-3">I also don't want to re-run this script when there are multiple embeds so I encapsulate it inside a function call with a window level check that is set the first time I set up the script:</p>
<p class="skip-link-graf">
<a href="#code-skip-day-16-2" id="skip-to-code-skip-day-16-2" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>contexterSetupComplete<span class="token punctuation">)</span><span class="token punctuation">{</span><br>	window<span class="token punctuation">.</span><span class="token function">contexterSetup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p id="code-skip-day-16-2">I originally set the links in a single element that contained both links. But I realized that I should <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_templates_and_slots" target="_blank">slot</a> them separately, to allow me to actively insert the archive link at another step for my Eleventy site's archive pages.</p>
<p>I had to <a href="https://github.com/AramZS/contexter/commit/291723fedaff8ba161937ce2f14802972e05fc01#diff-ad1cab4880eef9b423964380f642350431350ddddf8f3ffd30572e0875ee2fb0R38" target="_blank">fix my access of element properties</a>, <a href="https://github.com/AramZS/contexter/commit/291723fedaff8ba161937ce2f14802972e05fc01#diff-ad1cab4880eef9b423964380f642350431350ddddf8f3ffd30572e0875ee2fb0R314" target="_blank">check the readability object as a backup</a> for some of the finalizedMeta data, and <a href="https://github.com/AramZS/contexter/commit/291723fedaff8ba161937ce2f14802972e05fc01#diff-ad1cab4880eef9b423964380f642350431350ddddf8f3ffd30572e0875ee2fb0R494" target="_blank">fix the oembed for Twitter</a> so <a href="https://developer.twitter.com/en/docs/twitter-for-websites/embedded-tweets/overview" target="_blank">it doesn't show replies in a thread</a> that already includes replies.</p>
<p>I want to bring images used in the embeds local to the site. <a href="https://github.com/AramZS/devblog/commit/7e80d4e9a508e0c0c50f4e58d2417c05a89802b8" target="_blank">This turned out a lot harder than I expected</a>.</p>
<p>I pulled tweets in easily enough, but realized <a href="https://github.com/AramZS/devblog/commit/014f41df54410348ca11a66eb985b088c54467c3" target="_blank">I needed to print the author data for the Tweet to really make the archive readable</a>.</p>
<p>Now that I have a local archive, I can take advantage of the slot at the point where I build the collection. If I don't have the archive link from Wayback I can use my own site's archive.</p>
<p class="skip-link-graf">
<a href="#code-skip-day-16-1" id="skip-to-code-skip-day-16-1" class="skip-link">Skip code block ▼</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><br>	<span class="token operator">!</span>contextData<span class="token punctuation">.</span>data<span class="token punctuation">.</span>archivedData<span class="token punctuation">.</span>link <span class="token operator">&amp;&amp;</span><br>	<span class="token operator">!</span>contextData<span class="token punctuation">.</span>data<span class="token punctuation">.</span>twitterObj<br><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	contextData<span class="token punctuation">.</span>htmlEmbed <span class="token operator">=</span><br>		contextData<span class="token punctuation">.</span>htmlEmbed<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><br>			<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;/contexter-box></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><br>			<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;a href="</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>domain<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>publicPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>contextData<span class="token punctuation">.</span>sanitizedLink<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">" is="contexter-link" target="_blank" class="read-link archive-link" itemprop="archivedAt" slot="archive-link">Archived&lt;/a>&lt;/contexter-box></span><span class="token template-punctuation string">`</span></span><br>		<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p id="code-skip-day-16-1">Oops, I also need to <a href="https://github.com/AramZS/devblog/commit/b0d06bed36ff3a8c3c215c5fe28dbbf744faabf3" target="_blank">add that to the initial build of in-article embeds too</a>.</p>
<p>Ok, things are looking good! This is a good place to stop!</p>

                    
                    </section>
                    <section id="postcontent">
                    
    
        
        
        <div class="pagination">
            <a href="/posts/projects/context-pages/day-15/" class="pagination-link cursor-pointer ">Previous Day</a>

            <a href="/posts/projects/context-pages/day-17/" class="pagination-link cursor-pointer ">Next Day</a>
        </div>
    
    <div class="social-icons-block">
    <div class="a-social-icon">
        <a href="https://github.com/AramZS/" target="_blank">
            <svg role="img" viewBox="0 0 24 24" class="twitter-icon social-icon" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>


<!-- https://simpleicons.org/?q=github -->

        </a>
    </div>
    <div class="a-social-icon">
        <a href="https://bit.ly/aramzs" target="_blank">
            <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>


<!-- https://simpleicons.org/?q=linked -->

        </a>
    </div>
    <div class="a-social-icon">
        <a href="https://twitter.com/Chronotope" target="_blank">
            <svg role="img" class="twitter-icon social-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>

<!-- https://simpleicons.org/?q=tw -->

        </a>
    </div>
    
</div>


                    </section>
                </main>
                <footer>
                    
    <div id="taglist">
        <h6>Tags: </h6>
        <ul><li>
                    <a href="https://fightwithtools.dev/tag/node">Node</a>
                </li><li>
                    <a href="https://fightwithtools.dev/tag/wip">WiP</a>
                </li><li>
                    <a href="https://fightwithtools.dev/tag/archiving">archiving</a>
                </li><li>
                    <a href="https://fightwithtools.dev/tag/embeds">embeds</a>
                </li><li>
                    <a href="https://fightwithtools.dev/tag/twitter">Twitter</a>
                </li></ul>
    </div>

                    
                        <p>
                            <small>Hosted on <a href="https://pages.github.com" target="_blank">GitHub Pages</a> based on <a href="https://github.com/pages-themes/dinky" target="_blank">the Dinky theme</a>. <a href="https://github.com/AramZS/devblog" target="_blank">See the code</a>.</small>
                        </p>
                    
                    
                </footer>
            </div>
            <!--[if !IE]><script>fixScale(document);</script><![endif]-->
        </body>
    </html>
